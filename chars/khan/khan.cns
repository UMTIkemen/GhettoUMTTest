;---------------------------------------------------------------------------
; 基本データ
;---------------------------------------------------------------------------
[Data]
life              = 1000   ;ライフ（体力ゲージ）最大値
power             = 10000   ;パワーゲージ最大値
attack            = 100    ;攻撃力（デフォルトは１００％）
defence           = 94    ;防御力（デフォルトは１００％）
fall.defence_up   = 50     ;横に倒れている時に一時的に加える防御力（％）
liedown.time      = 60     ;横に倒れている時間（フレーム）
airjuggle         = 15     ;ジャグルポイント限界値（「小ネタ.txt」参照）
sparkno           = 2      ;デフォルトのヒットスパーク（fightfxから）
guard.sparkno     = 40     ;デフォルトのガードスパーク（fightfxから）
KO.echo           = 0      ;ＫＯ時の音声（11,0）にエコーを掛けるか否か（0=掛けない,1=掛ける）
volume            = 255      ;キャラの標準の音量（最小-255・最大255）
IntPersistIndex   = 8    ;次のラウンドへ持ち越せる「Var」のアドレスの範囲を決める
FloatPersistIndex = 40     ;次のラウンドへ持ち越せる「FVar」のアドレスの範囲を決める

;---------------------------------------------------------------------------
; サイズ
;---------------------------------------------------------------------------
[Size]
xscale = .833			;水平方向の縮尺（通常１）
yscale = 1.07			;垂直方向の縮尺（通常１）
ground.back = 18		;キャラの幅(後方,地上)
ground.front = 22		;キャラの幅(前方,地上)
air.back = 15			;キャラの幅(後方,空中)
air.front = 15		;キャラの幅(前方,空中)
height = 65			;キャラの高さ
attack.dist = 160		;攻撃をした時相手がガード体制に入る最低距離
proj.attack.dist = 90	;攻撃をした時相手がガード体制に入る最低距離（飛び道具）
proj.doscale = 0		;上で設定した縮尺を飛び道具にも適用するか（１でＯＮ）   
head.pos = -6, -105		;頭の大体の座標
mid.pos = 8, -72		;体の中心の大体の座標
shadowoffset = 0		;影の垂直方向のオフセット
draw.offset = 0,0		;使用しない

;---------------------------------------------------------------------------
; 移動速度
;---------------------------------------------------------------------------
[Velocity]
walk.fwd     = 3.4         ;前進速度（Ｘ軸・[Statedef 20]に適用される）
walk.back    = -2.6        ;後退速度（Ｘ軸・[Statedef 20]に適用される）
run.fwd      = 8.0,0       ;前方に走る速度（Ｘ軸,Ｙ軸・[Statedef 100]に適用される）
run.back     = -6.7,0   ;後方に走る速度（Ｘ軸,Ｙ軸・[Statedef 105]に適用される）
jump.neu     = 0,-11.5      ;垂直ジャンプの速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
jump.back    = -2.8        ;後方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
jump.fwd     = 3.5         ;前方ジャンプの速度（Ｘ軸・[Statedef 40]に適用される）
runjump.back = -3.5,-10.5  ;後方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
runjump.fwd  = 3.5,10.5    ;前方に走ってからのジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 40]に適用される）
airjump.neu  = 0,-6        ;空中垂直ジャンプ速度（Ｘ軸,Ｙ軸・[Statedef 45]に適用される）
airjump.back = -2.9        ;空中後方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）
airjump.fwd  = 2.9         ;空中前方ジャンプ速度（Ｘ軸・[Statedef 45]に適用される）

;---------------------------------------------------------------------------
; 運動関係
;---------------------------------------------------------------------------
[Movement]
airjump.num     = 0        ;空中ジャンプが出来る回数
airjump.height  = 35       ;空中ジャンプが出来る最低の高度（Ｙ軸）
yaccel          = .6       ;Ｙ軸加速度（重力）
stand.friction  = .85      ;立っている時の摩擦係数（ステートのPhysicsが「S」の時）
crouch.friction = .82      ;しゃがんでいる時の摩擦係数（ステートのPhysicsが「C」の時）

;===========================================================================
; ステート
;===========================================================================
;===========================================================================
; 基本行動
;===========================================================================
;---------------------------------------------------------------------------
;勝利ポーズ
[Statedef 180]
type = S
anim = 180

[State 0, assert]
type = assertspecial
trigger1 = time < 240
flag = RoundNotOver

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 100,3
channel = 0

[State 0, snd]
type = changeanim
trigger1 = anim = 180
trigger1 = time > 120
value = 181

[state 0, helper]
type = helper
trigger1 = !fvar(11) || !numpartner
trigger1 = time = 1
trigger2 = fvar(11) = 92
helpertype = normal
name = "win"
stateno = 9100
id = 9100

;---------------------------------------------------------------------------
; INTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0
anim = 190

[State 0, power]
type = powerset
trigger1 = roundsexisted = 0
trigger1 = !time
trigger1 = power < 1000
value = 1000

[State 191, 特殊効果];試合が開始するまではこのコントローラを使おう（※２）
type = AssertSpecial
trigger1 = 1
flag = Intro ;イントロの状態

[State -2, Voice]
type = PlaySnd
trigger1 = animelem = 2
value = 100,0
channel = 0
ority = -1

[State 0, explod]
type = explod
trigger1 = animelem = 14
anim = 191
id = 190
facing = 1
postype = p1
pos = 0,0
sprpriority = -1
ownpal = 1
scale = const(size.xscale),const(size.yscale)

;きらきら
[State 0, explod]
type = explod
trigger1 = time = [1,60]
trigger1 = !(time%10)
anim = 192
id = 192
facing = 1
postype = p1
pos = -50+(random%35),-75+(random%20)
sprpriority = 2
ownpal = 1
scale = const(size.xscale),const(size.yscale)

;きらきら
[State 0, explod]
type = explod
trigger1 = time = [1,60]
trigger1 = !(time%10)
anim = 192
id = 192
facing = 1
postype = p1
pos = -40+(random%25),-65+(random%20)
sprpriority = 2
ownpal = 1
scale = const(size.xscale),const(size.yscale)

[State 191, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;off挑発1
[Statedef 195]
type = S
movetype = I
physics = S
ctrl = 0
anim = 195
velset = 0,0
sprpriority = 0

[State 195]
type = playsnd
trigger1 = time = 1
value = 100,13
channel = 0

[State 195, ステート変更]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;回り込み
[Statedef 300]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
velset = 0,0
sprpriority = -1
facep2 = 1;-(prevstateno=[100,119])

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 0, hitby]
type = hitby
Trigger1 = 1
value = SCA,AT

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 100,7
channel = 0

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[state 0, helper]
type = helper
trigger1 = animelemtime(1) = 5
helpertype = normal
name = "Image"
stateno = 305
id = 305
pos = 0,0
postype = p1
ownpal = 1
keyctrl = 0
pausemovetime = 1

[State 0, vel]
type = velset
trigger1 = animelemtime(2) = 1
x = 6

[State 0, vel]
type = velmul
trigger1 = animelemtime(2) > 16
x = .8

[State 0, vel]
type = velset
trigger1 = animelem = 3
x = 0

[State 0, var]
type = varset
trigger1 = !animtime
var(56) = 8

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 305]
type = S
movetype = I
physics = N
anim = 300
ctrl = 0
vel = 0,0
sprpriority = -3

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, assert]
type = assertspecial
trigger1 = !(time%2)
flag = Invisible

[State 0, vel]
type = velset
trigger1 = animelemtime(2) = 1
x = 6

[State 0, vel]
type = velmul
trigger1 = animelemtime(2) > 16
x = .8

[State 0, vel]
type = velset
trigger1 = animelem = 3
x = 0

[State 810, StateChange]
type = DestroySelf
trigger1 = root,stateno != 300

;===========================================================================
; 通常攻撃技
;===========================================================================
;Soff立ち弱
[Statedef 200]
type = S
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),201,200)
poweradd = 0
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = anim = 200 && animelemtime(4) = 0
trigger3 = anim = 201 && animelemtime(4) = 2
x = 0

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = prevstateno = [100,105]
x = .95

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,10

[State 0, hit]
type = hitdef
triggerall = !var(34)
trigger1 = animelem = 2
attr = S, NA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -14,-45
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = low
ground.slidetime = 12
ground.hittime = 12
guard.ctrltime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -2,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 2 && command != "holddown" && (command = "holdfwd" || command = "holdback") && prevstateno != [100,105]
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 2 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 2 && command = "holddown" && prevstateno != [100,105]
value = 10
ctrl = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff立ち中
[Statedef 210]
type = S
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),211,210)
poweradd = 40
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = animelemtime(2) >= 0
value = 15,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = anim = 210 && animelemtime(4) = 0
trigger3 = anim = 211 && animelemtime(4) = 0
x = 0

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = prevstateno = [100,105]
x = .95

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(3) = 0
anim = 215
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, vel]
type = posadd
triggerall = !var(34)
trigger1 = animelemtime(2) = 0
x = 15

[State 0, vel]
type = posadd
triggerall = !var(34)
trigger1 = animelemtime(3) = 0
x = 18

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = time = 1
value = 100,5
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,33

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 3
trigger1 = anim = 210
attr = S, NA
damage = ceil(ifelse((77*fvar(0))<7,7,(77*fvar(0)))),ceil(ifelse((77*fvar(0)*.25)<7,7,(77*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6307
sparkxy = -34,-62
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -4,-2.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 3
trigger1 = anim = 211
attr = S, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0)))),ceil(ifelse((42*fvar(0)*.25)<7,7,(42*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6307
sparkxy = -34,-62
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -2,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff4中
[Statedef 212]
type = S
movetype = A
physics = N
ctrl = 0
anim = 212
poweradd = 40
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = animelemtime(2) >= 0
value = 40,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
x = 0

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = time = 1
value = 100,9
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,33

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 2
attr = S, NA
damage = ceil(ifelse((84*fvar(0))<7,7,(84*fvar(0)))),ceil(ifelse((84*fvar(0)*.25)<7,7,(84*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6307
sparkxy = -24,-72
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = high
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -5,-3*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff立ち強
[Statedef 220]
type = S
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),221,220)
poweradd = 50
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = animelemtime(2) >= 0
value = 30,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = anim = 220 && animelemtime(4) = 0
trigger3 = anim = 221 && animelemtime(5) = 0
x = 0

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = prevstateno = [100,105]
x = .95

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(3) = 0
anim = 225
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = time = 1
value = 100,8+(prevstateno=100)
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,13

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 3
trigger1 = anim = 220
attr = S, NA
damage = ceil(ifelse((98*fvar(0))<7,7,(98*fvar(0)))),ceil(ifelse((98*fvar(0)*.25)<7,7,(98*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6305
sparkxy = -14,-62
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -4,-8*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 3
trigger1 = anim = 221
attr = S, NA
damage = ceil(ifelse((98*fvar(0))<7,7,(98*fvar(0)))),ceil(ifelse((98*fvar(0)*.25)<7,7,(98*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,10
sparkno = s6305
sparkxy = -14,-62
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -2,-6.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varset
trigger1 = !time
var(10) = 3
[State 220, CornerPush]
type = Varadd
trigger1 = !movecontact
trigger1 = animelemtime(3) >= 1
var(10) = -1
ignorehitpause = 1

[State 0, end]
type = changeanim
trigger1 = movecontact = ifelse(var(10)<1,1,var(10))
value = anim
elem = 4

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff立ち強2
[Statedef 222]
type = S
movetype = A
physics = N
ctrl = 0
anim = 222
poweradd = 50
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
x = 0

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = prevstateno = [100,105]
x = .95

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(2) = 0
anim = 227
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 1
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,13

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 2
attr = S, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0)))),ceil(ifelse((42*fvar(0)*.25)<7,7,(42*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6305
sparkxy = -14,-56
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varset
trigger1 = !time
var(10) = 2
[State 220, CornerPush]
type = Varadd
trigger1 = !movecontact
trigger1 = animelemtime(2) >= 1
var(10) = -1
ignorehitpause = 1

[State 0, end]
type = changeanim
trigger1 = movecontact = ifelse(var(10)<1,1,var(10))
value = anim
elem = 3

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;連華斬
[Statedef 1300]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1300
poweradd = 0
sprpriority = 1
facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger2 = anim = 1300 && animelemtime(16) = 0
trigger3 = (anim = [1301,1302]) && animelemtime(17) = 0
x = 0
y = 0

[State 0, vel]
type = velset
trigger1 = anim = 1300
trigger1 = animelemtime(2) = 0
x = 2

[State 0, explod]
type = explod
trigger1 = anim = 1300
trigger1 = animelemtime(2) = 0
anim = 8050
id = 8050
facing = 1
postype = p1
pos = 10,0
sprpriority = 2
ownpal = 1
scale = .833,1.07

;剣エフェ
[State 0, explod]
type = explod
trigger1 = !var(34)
trigger1 = anim = 1300
trigger1 = animelemtime(2) = 0
anim = 1305
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
removetime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1
;剣エフェ2
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = anim = 1300
trigger1 = animelemtime(2) = 0
anim = 1306
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
removetime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = time = 1
value = 100,14
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = anim = 1302 && animelemtime(17) = 0
value = 100,6
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(6) = 0
trigger3 = animelemtime(10) = 0
trigger4 = animelemtime(14) = 0
value = 0,13
channel = 2

[State 0, hit]
type = hitdef
triggerall = !var(34)
triggerall = !var(10)
;triggerall = anim = 1300
trigger1 = animelemtime(2)>=0&&animelemtime(16)<0
attr = S, SA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),ceil(ifelse((21*fvar(0)*.25)<7,7,(21*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = light
air.animtype = Back
fall.animtype = Back
pausetime = 0,3
sparkno = s6305
sparkxy = -24,-86
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = high
ground.slidetime = 10
ground.hittime = 10
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = 0,-.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varset
trigger1 = !time
var(10) = 0
[State 220, CornerPush]
type = Varadd
trigger1 = movecontact = 1
var(10) = 6
ignorehitpause = 1
[State 220, CornerPush]
type = Varadd
trigger1 = var(10)
var(10) = -1
ignorehitpause = 1

[State 0, end]
type = changeanim
triggerall = roundstate = 2
triggerall = command = "hold_a"
trigger1 = anim = 1300
trigger1 = animelemtime(14) = 2
trigger2 = anim = 1301
trigger2 = animelemtime(15) = 2
value = anim + 1

[State 0, end]
type = removeexplod
trigger1 = anim = 1300
trigger1 = animelemtime(16) = 0
trigger2 = (anim = [1301,1302])
trigger2 = animelemtime(17) = 0
id = 220

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;連華斬air
[Statedef 1350]
type = A
movetype = A
physics = N
ctrl = 0
anim = 1350
poweradd = 0
sprpriority = 1
facep2 = 1;-(prevstateno=[100,119])

[State 220, CornerPush]
type = Varset
trigger1 = !time
var(30) = 3
ignorehitpause = 1
[State 220, CornerPush]
type = Varadd
trigger1 = var(30)
trigger1 = movecontact = 1
var(30) = -1
ignorehitpause = 1

[State 0, vel]
type = varset
trigger1 = !time
fvar(8) = vel x

[State 0, vel]
type = posset
trigger1 = !time
trigger1 = pos y > -30
y = -30

[State 0, vel]
type = velset
trigger1 = !time
x = vel x
y = ifelse((vel y/2)<-1,-1,ifelse((vel y/2)>1,1,vel y/2))

[State 0, vel]
type = veladd
trigger1 = anim = 1350
y = .04

[State 0, vel]
type = veladd
trigger1 = anim = 1351
y = .44

[State 0, vel]
type = velset
trigger1 = anim = 1350
x = ifelse(command="holdfwd",fvar(8)+2,ifelse(command="holdback",fvar(8)-2,fvar(8)))

;剣エフェ
[State 0, explod]
type = explod
trigger1 = !var(34)
trigger1 = anim = 1350
trigger1 = animelemtime(2) = 0
anim = 1305
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
removetime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1
;剣エフェ2
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = anim = 1350
trigger1 = animelemtime(2) = 0
anim = 1306
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
removetime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, end]
type = changeanim
triggerall = roundstate = 2
triggerall = var(30) != 0
trigger1 = anim = 1350
trigger1 = animelemtime(13) = 2
trigger1 = command = "hold_a"
value = 1350
elem = 2

[State 0, end]
type = changeanim
triggerall = roundstate = 2
trigger1 = anim = 1350
trigger1 = !animtime
value = 1351

[State 0, snd]
type = playsnd
triggerall = !var(34)
triggerall = anim = 1350
trigger1 = animelemtime(2) = 0
trigger2 = animelemtime(6) = 0
trigger3 = animelemtime(11) = 0
value = 0,10
channel = 2

[State 0, hit]
type = hitdef
triggerall = !var(34)
triggerall = var(30)
triggerall = !var(10)
triggerall = anim = 1350
trigger1 = animelemtime(2)>=0
attr = A, SA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),ceil(ifelse((21*fvar(0)*.25)<7,7,(21*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = light
air.animtype = Back
fall.animtype = Back
pausetime = 0,3
sparkno = s6305
sparkxy = -24,-86
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = high
ground.slidetime = 10
ground.hittime = 10
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = 0,0*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varset
trigger1 = !time
var(10) = 0
[State 220, CornerPush]
type = Varadd
trigger1 = movecontact = 1
var(10) = 6
ignorehitpause = 1
[State 220, CornerPush]
type = Varadd
trigger1 = var(10)
var(10) = -1
ignorehitpause = 1

[State 0, end]
type = removeexplod
trigger1 = anim = 1351
trigger2 = vel y > 0
trigger2 = pos y > 0
id = 220

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = stopsnd
trigger1 = vel y > 0
trigger1 = pos y > 0
channel = 2

[State 0, end]
type = changestate
trigger1 = vel y > 0
trigger1 = pos y > 0
value = 52
ctrl = 0

;===========================================================================
;Soff屈弱
[Statedef 400]
type = C
movetype = A
physics = N
ctrl = 0
anim = ifelse((prevstateno=[100,105]),401,400)
poweradd = 0
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = !animtime
x = 0

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = prevstateno = [100,105]
x = .95

[State 200, Snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,33

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 2
attr = C, NA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),ceil(ifelse((28*fvar(0)*.25)<7,7,(28*fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6305
sparkxy = -9,-10
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = low
ground.slidetime = 9
ground.hittime = 12
guard.ctrltime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = low
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 14
fall = 0
air.fall = 0
fall.recovertime = 18
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 0 && command != "holddown" && (command = "holdfwd" || command = "holdback")
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 0 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = animelemtime(4) >= 0 && command != "holddown" && command != "holdfwd" && command != "holdback" && prevstateno != [100,105]
value = 12
ctrl = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;===========================================================================
;Soff屈中
[Statedef 410]
type = C
movetype = A
physics = N
ctrl = 0
anim = 410
poweradd = 40
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = !animtime
x = 0

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = prevstateno = [100,105]
x = .95

[State 200, Snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,33

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 2
attr = C, NA
damage = ceil(ifelse((56*fvar(0))<7,7,(56*fvar(0)))),ceil(ifelse((56*fvar(0)*.25)<7,7,(56*fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6305
sparkxy = -9,-10
guard.sparkno = s6010
hitsound = s0,6
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = low
ground.slidetime = 9
ground.hittime = 15
guard.ctrltime = 15
ground.velocity = -8.5
guard.velocity = -8
air.type = low
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 0
air.fall = 0
fall.recovertime = 18
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;===========================================================================
;Soff屈強
[Statedef 420]
type = C
movetype = A
physics = N
ctrl = 0
anim = 420
poweradd = 50
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = animelemtime(4) = 1
x = 0

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = prevstateno = [100,105]
x = .95

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(3) = 0
anim = 425
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 200, Snd]
type = playsnd
triggerall = !var(34)
trigger1 = time = 1
value = 100,5
channel = 0

[State 200, Snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,13

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 3
attr = C, NA
damage = ceil(ifelse((105*fvar(0))<7,7,(105*fvar(0)))),ceil(ifelse((105*fvar(0)*.25)<7,7,(105*fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6305
sparkxy = -9,-14
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = Trip
ground.slidetime = 20
ground.hittime = 20
guard.ctrltime = 20
ground.velocity = -2,-2
guard.velocity = -8
air.type = low
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 0
fall.recovertime = 18
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varset
trigger1 = !time
var(10) = 2
[State 220, CornerPush]
type = Varadd
trigger1 = !movecontact
trigger1 = animelemtime(3) >= 1
var(10) = -1
ignorehitpause = 1

[State 0, end]
type = changeanim
trigger1 = movecontact = ifelse(var(10)<1,1,var(10))
value = anim
elem = 4

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;弱（反撃）
[Statedef 205]
type    = S                      
movetype =  A
physics = N
juggle=0
ctrl = 0
poweradd = 0
velset = 0,0
facep2 = 1;-(prevstateno=[100,119])
anim = 1260

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = anim = 1260 && !animtime
value = 200

[State 3000, Superpause]
type = Pause
trigger1 = Time = 1
time = 20
movetime = 20

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 7001
pos = ceil(15*const(size.xscale)),ceil(-58*const(size.yscale))
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 7
scale = const(size.xscale),const(size.yscale)

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 11651
pos = 0, 10
postype = p1
ownpal = 1
bindtime = -1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = -1
scale = const(size.xscale),const(size.yscale)

[State 170, 1]
type = NotHitBy
trigger1 = anim = 1260
trigger2 = anim = 200
trigger2 = animelemtime(3) <= 0
value = SCA

[State 220, Voice]
type = PlaySnd
trigger1 = Time = 1
value = 1300, 1
channel = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
x = 0

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = prevstateno = [100,105]
x = .95

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,10

[State 0, hit]
type = hitdef
triggerall = !var(34)
trigger1 = animelem = 2
attr = S, NA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),0
priority = 3,Hit
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6000
sparkxy = -14,-45
guard.sparkno = s6010
hitsound = s0,0
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = low
ground.slidetime = 12
ground.hittime = 12
guard.ctrltime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = High
air.velocity = -2.5,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 12
fall = 0
air.fall = 0
yaccel = .36
id = stateno
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = anim = 200
trigger1 = animelemtime(4) >= 2 && command != "holddown" && (command = "holdfwd" || command = "holdback") && prevstateno != [100,105]
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = anim = 200
trigger1 = animelemtime(4) >= 2 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
triggerall = !var(59)
trigger1 = anim = 200
trigger1 = animelemtime(4) >= 2 && command = "holddown" && prevstateno != [100,105]
value = 10
ctrl = 1

[State 0, end]
type = changestate
trigger1 = anim = 200
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;中（反撃）
[Statedef 215]
type    = S                      
movetype =  A
physics = N
juggle=0
ctrl = 0
poweradd = 40
velset = 0,0
facep2 = 1;-(prevstateno=[100,119])
anim = 1260

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = anim = 1260 && !animtime
value = 210

[State 3000, Superpause]
type = Pause
trigger1 = Time = 1
time = 20
movetime = 20

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 7001
pos = ceil(15*const(size.xscale)),ceil(-58*const(size.yscale))
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 7
scale = const(size.xscale),const(size.yscale)

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 11651
pos = 0, 10
postype = p1
ownpal = 1
bindtime = -1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = -1
scale = const(size.xscale),const(size.yscale)

[State 170, 1]
type = NotHitBy
trigger1 = anim = 1260
trigger2 = anim = 210
trigger2 = animelemtime(4) <= 0
value = SCA

[State 220, Voice]
type = PlaySnd
trigger1 = Time = 1
value = 1300, 1
channel = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
x = 0

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = anim = 210
trigger1 = animelemtime(3) = 0
anim = 215
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, vel]
type = posadd
triggerall = !var(34)
triggerall = anim = 210
trigger1 = animelemtime(2) = 0
x = 15

[State 0, vel]
type = posadd
triggerall = !var(34)
triggerall = anim = 210
trigger1 = animelemtime(3) = 0
x = 18

[State 0, snd]
type = playsnd
triggerall = !var(34)
triggerall = anim = 210
trigger1 = animelemtime(1) = 1
value = 100,5
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(34)
triggerall = anim = 210
trigger1 = animelem = 2
value = 0,33

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 3
trigger1 = anim = 210
attr = S, NA
damage = ceil(ifelse((77*fvar(0))<7,7,(77*fvar(0)))),ceil(ifelse((77*fvar(0)*.25)<7,7,(77*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,7
sparkno = s6307
sparkxy = -34,-62
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = high
ground.slidetime = 19
ground.hittime = 19
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -5,-2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = anim = 210
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;4中(反撃)
[Statedef 217]
type = S
movetype = A
physics = N
ctrl = 0
poweradd = 40
sprpriority = 0
facep2 = 1-(prevstateno=[100,119])
anim = 1260

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = anim = 1260 && !animtime
value = 212

[State 3000, Superpause]
type = Pause
trigger1 = Time = 1
time = 20
movetime = 20

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 7001
pos = ceil(15*const(size.xscale)),ceil(-58*const(size.yscale))
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 7
scale = const(size.xscale),const(size.yscale)

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 11651
pos = 0, 10
postype = p1
ownpal = 1
bindtime = -1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = -1
scale = const(size.xscale),const(size.yscale)

[State 170, 1]
type = NotHitBy
trigger1 = anim = 1260
trigger2 = anim = 212
trigger2 = animelemtime(3) <= 0
value = SCA

[State 220, Voice]
type = PlaySnd
trigger1 = Time = 1
value = 1300, 1
channel = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
x = 0

[State 0, snd]
type = playsnd
triggerall = anim = 212
triggerall = !var(34)
trigger1 = animelemtime(1) = 1
value = 100,9
channel = 0

[State 0, snd]
type = playsnd
triggerall = anim = 212
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,33

[State 0, hit]
type = hitdef
triggerall = anim = 212
trigger1 = !var(34)
trigger1 = animelem = 2
attr = S, NA
damage = ceil(ifelse((84*fvar(0))<7,7,(84*fvar(0)))),ceil(ifelse((84*fvar(0)*.25)<7,7,(84*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = Middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6307
sparkxy = -24,-72
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = high
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -8.5
guard.velocity = -8
air.type = Low
air.velocity = -5,-2*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = anim = 212
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;強（反撃）
[Statedef 225]
type    = S                      
movetype =  A
physics = N
juggle=0
ctrl = 0
poweradd = 50
velset = 0,0
facep2 = 1;-(prevstateno=[100,119])
anim = 1260

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = anim = 1260 && !animtime
value = 220

[State 3000, Superpause]
type = Pause
trigger1 = Time = 1
time = 20
movetime = 20

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 7001
pos = ceil(15*const(size.xscale)),ceil(-58*const(size.yscale))
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 7
scale = const(size.xscale),const(size.yscale)

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 11651
pos = 0, 10
postype = p1
ownpal = 1
bindtime = -1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = -1
scale = const(size.xscale),const(size.yscale)

[State 170, 1]
type = NotHitBy
trigger1 = anim = 1260
trigger2 = anim = 220
trigger2 = animelemtime(4) <= 0
value = SCA

[State 220, Voice]
type = PlaySnd
trigger1 = Time = 1
value = 1300, 1
channel = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
x = 0

;剣エフェ
[State 0, explod]
type = explod
triggerall = anim = 220
triggerall = !var(34)
trigger1 = animelemtime(3) = 0
anim = 225
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, snd]
type = playsnd
triggerall = anim = 220
triggerall = !var(34)
trigger1 = animelemtime(1) = 1
value = 100,8
channel = 0

[State 0, snd]
type = playsnd
triggerall = anim = 220
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,13

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 3
trigger1 = anim = 220
attr = S, NA
damage = ceil(ifelse((98*fvar(0))<7,7,(98*fvar(0)))),ceil(ifelse((98*fvar(0)*.25)<7,7,(98*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,13
sparkno = s6305
sparkxy = -14,-62
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = high
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -10
guard.velocity = -8
air.type = Low
air.velocity = -3,-6.5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varset
trigger1 = !time
var(10) = 3
[State 220, CornerPush]
type = Varadd
triggerall = anim = 220
trigger1 = !movecontact
trigger1 = animelemtime(3) >= 1
var(10) = -1
ignorehitpause = 1

[State 0, end]
type = changeanim
trigger1 = movecontact = ifelse(var(10)<1,1,var(10))
value = anim
elem = 4

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = anim = 220
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;Soff屈弱（反撃）
[Statedef 405]
type = C
movetype = A
physics = N
ctrl = 0
poweradd = 0
velset = 0,0
facep2 = 1;-(prevstateno=[100,119])
anim = 1260

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = anim = 1260 && !animtime
value = 400

[State 3000, Superpause]
type = Pause
trigger1 = Time = 1
time = 20
movetime = 20

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 7001
pos = ceil(15*const(size.xscale)),ceil(-58*const(size.yscale))
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 7
scale = const(size.xscale),const(size.yscale)

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 11651
pos = 0, 10
postype = p1
ownpal = 1
bindtime = -1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = -1
scale = const(size.xscale),const(size.yscale)

[State 170, 1]
type = NotHitBy
trigger1 = anim = 1260
trigger2 = anim = 400
trigger2 = animelemtime(3) <= 0
value = SCA

[State 220, Voice]
type = PlaySnd
trigger1 = Time = 1
value = 1300, 1
channel = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = !animtime
x = 0

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = prevstateno = [100,105]
x = .95

[State 200, Snd]
type = playsnd
triggerall = anim = 400
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,33

[State 0, hit]
type = hitdef
triggerall = anim = 400
trigger1 = !var(34)
trigger1 = animelem = 2
attr = C, NA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),ceil(ifelse((28*fvar(0)*.25)<7,7,(28*fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6305
sparkxy = -9,-10
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = low
ground.slidetime = 9
ground.hittime = 12
guard.ctrltime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = low
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 14
fall = 0
air.fall = 0
fall.recovertime = 18
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 400, 3]
type = ChangeState
triggerall = anim = 400
triggerall = !var(59)
trigger1 = animelemtime(4) >= 0 && command != "holddown" && (command = "holdfwd" || command = "holdback")
value = 20
ctrl = 1

[State 400, 3]
type = ChangeState
triggerall = anim = 400
triggerall = !var(59)
trigger1 = animelemtime(4) >= 0 && (command = "holdup" || command = "longjump") && prevstateno != [100,105]
value = 40

[State 400, 3]
type = ChangeState
triggerall = anim = 400
triggerall = !var(59)
trigger1 = animelemtime(4) >= 0 && command != "holddown" && command != "holdfwd" && command != "holdback" && prevstateno != [100,105]
value = 12
ctrl = 1

[State 0, end]
type = changestate
triggerall = anim = 400
trigger1 = !animtime
value = 11
ctrl = 1

;===========================================================================
;Soff屈中（反撃）
[Statedef 415]
type = C
movetype = A
physics = N
ctrl = 0
poweradd = 40
velset = 0,0
facep2 = 1;-(prevstateno=[100,119])
anim = 1260

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = anim = 1260 && !animtime
value = 410

[State 3000, Superpause]
type = Pause
trigger1 = Time = 1
time = 20
movetime = 20

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 7001
pos = ceil(15*const(size.xscale)),ceil(-58*const(size.yscale))
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 7
scale = const(size.xscale),const(size.yscale)

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 11651
pos = 0, 10
postype = p1
ownpal = 1
bindtime = -1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = -1
scale = const(size.xscale),const(size.yscale)

[State 170, 1]
type = NotHitBy
trigger1 = anim = 1260
trigger2 = anim = 410
trigger2 = animelemtime(3) <= 0
value = SCA

[State 220, Voice]
type = PlaySnd
trigger1 = Time = 1
value = 1300, 1
channel = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = !animtime
x = 0

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = prevstateno = [100,105]
x = .95

[State 200, Snd]
type = playsnd
triggerall = anim = 410
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,33

[State 0, hit]
type = hitdef
triggerall = anim = 410
trigger1 = !var(34)
trigger1 = animelem = 2
attr = C, NA
damage = ceil(ifelse((56*fvar(0))<7,7,(56*fvar(0)))),ceil(ifelse((56*fvar(0)*.25)<7,7,(56*fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6305
sparkxy = -9,-10
guard.sparkno = s6010
hitsound = s0,6
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = low
ground.slidetime = 9
ground.hittime = 15
guard.ctrltime = 15
ground.velocity = -8.5
guard.velocity = -8
air.type = low
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 15
fall = 0
air.fall = 0
fall.recovertime = 18
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 11.9
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = anim = 410
trigger1 = !animtime
value = 11
ctrl = 1

;===========================================================================
;Soff屈強（反撃）
[Statedef 425]
type = C
movetype = A
physics = N
ctrl = 0
poweradd = 50
velset = 0,0
facep2 = 1;-(prevstateno=[100,119])
anim = 1260

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = anim = 1260 && !animtime
value = 420

[State 3000, Superpause]
type = Pause
trigger1 = Time = 1
time = 20
movetime = 20

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 7001
pos = ceil(15*const(size.xscale)),ceil(-58*const(size.yscale))
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 7
scale = const(size.xscale),const(size.yscale)

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 11651
pos = 0, 10
postype = p1
ownpal = 1
bindtime = -1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = -1
scale = const(size.xscale),const(size.yscale)

[State 170, 1]
type = NotHitBy
trigger1 = anim = 1260
trigger2 = anim = 420
trigger2 = animelemtime(4) <= 0
value = SCA

[State 220, Voice]
type = PlaySnd
trigger1 = Time = 1
value = 1300, 1
channel = 1

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = velset
trigger1 = !time
trigger1 = vel x != 0
trigger1 = prevstateno != [100,105]
trigger2 = animelemtime(4) = 1
x = 0

[State 0, vel]
type = velmul
triggerall = !var(34)
trigger1 = prevstateno = [100,105]
x = .95

;剣エフェ
[State 0, explod]
type = explod
triggerall = anim = 420
triggerall = !var(34)
trigger1 = animelemtime(3) = 0
anim = 425
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 200, Snd]
type = playsnd
triggerall = anim = 420
triggerall = !var(34)
trigger1 = animelemtime(1) = 1
value = 100,5
channel = 0

[State 200, Snd]
type = playsnd
triggerall = anim = 420
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,13

[State 0, hit]
type = hitdef
triggerall = anim = 420
trigger1 = !var(34)
trigger1 = animelem = 3
attr = C, NA
damage = ceil(ifelse((105*fvar(0))<7,7,(105*fvar(0)))),ceil(ifelse((105*fvar(0)*.25)<7,7,(105*fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,11
sparkno = s6305
sparkxy = -9,-14
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = Trip
ground.slidetime = 20
ground.hittime = 20
guard.ctrltime = 20
ground.velocity = -2,-2
guard.velocity = -8
air.type = low
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 0
fall.recovertime = 18
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varset
trigger1 = !time
var(10) = 2
[State 220, CornerPush]
type = Varadd
triggerall = anim = 420
trigger1 = !movecontact
trigger1 = animelemtime(3) >= 1
var(10) = -1
ignorehitpause = 1

[State 0, end]
type = changeanim
triggerall = anim = 420
trigger1 = movecontact = ifelse(var(10)<1,1,var(10))
value = anim
elem = 4

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = anim = 420
trigger1 = !animtime
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;空弱
[Statedef 600]
type = A
movetype = A
physics = N
ctrl = 0
anim = 600
poweradd = 30
sprpriority = 0

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(2) = 0
anim = 605
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,32

[State 0, hit]
type = hitdef
triggerall = !var(34)
trigger1 = animelem = 2
attr = A, NA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),ceil(ifelse((28*fvar(0)*.25)<7,7,(28*fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6305
sparkxy = -10,-40
guard.sparkno = s6010
hitsound = s0,6
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = High
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 12
guard.ctrltime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -2.5,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 17
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 18
guard.kill = 0
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(34)
y = ifelse((var(6)&16),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(34)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;空中
[Statedef 610]
type = A
movetype = A
physics = N
ctrl = 0
anim = 600
poweradd = 30
sprpriority = 0

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(2) = 0
anim = 605
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,32

[State 0, hit]
type = hitdef
triggerall = !var(34)
trigger1 = animelem = 2
attr = A, NA
damage = ceil(ifelse((42*fvar(0))<7,7,(42*fvar(0)))),ceil(ifelse((42*fvar(0)*.25)<7,7,(42*fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6305
sparkxy = -10,-40
guard.sparkno = s6010
hitsound = s0,7
guardsound = s0,9
getpower = 50,0
givepower = 25,0
ground.type = High
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 12
guard.ctrltime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -2.5,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 17
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 18
guard.kill = 0
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(34)
y = ifelse((var(6)&16),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(34)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ強
[Statedef 620]
type    = A
movetype= A
physics = N
poweradd= 50
ctrl = 0
anim = 620
sprpriority = 0

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(2) = 0
anim = 625
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,13

[State 0, hit]
type = hitdef
triggerall = !var(34)
trigger1 = animelem = 2
attr = A, NA
damage = ceil(ifelse((98*fvar(0))<7,7,(98*fvar(0)))),ceil(ifelse((98*fvar(0)*.25)<7,7,(98*fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = HA
animtype = middle
air.animtype = Back
fall.animtype = Back
pausetime = 0,9
sparkno = s6305
sparkxy = -10,-40
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = High
ground.slidetime = 17
ground.hittime = 17
guard.hittime = 12
guard.ctrltime = 12
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -2.5,-5*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
air.hittime = 17
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 18
guard.kill = 0
p2facing = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 8.3
ignorehitpause = 1

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(34)
y = ifelse((var(6)&16),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(34)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;===========================================================================
; 投げ技
;===========================================================================
;掴み
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 800+var(0)

[State 0, hit]
type = hitdef
triggerall = !fvar(7)
trigger1 = p2movetype != H && (p2stateno != [40,42])
trigger1 = animelemtime(1) >= 0
attr = S,NT
priority = 1,Miss
hitflag = M-
sparkno = -1
hitsound = s0,10
;p1stateno = 810
p2stateno = 820
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
fall = 1
id = 800

[State 901, Throw]
type = ChangeState
trigger1 = numtarget(800)
trigger1 = target,stateno = 820
value = 810
persistent = 0

[State 0, end]
type = changestate
trigger1 = !animtime
value = 220+var(0)
;---------------------------------------------------------------------------
;成功
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 810
sprpriority = -1

[STate 901,1]
type = nothitby
trigger1 = 1
value = SCA

[STate 901,1]
type = playerpush
trigger1 = 1
value = 0

[State 0, end]
type = changestate
triggerall = numtarget
trigger1 = time = [1,4]
trigger1 = target,command = "holdfwd" || target,command = "holdback"
trigger1 = target,command = "y" || target,command = "z" || target,command = "b" || target,command = "c"
value = 830

[State 810, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = !time
value = 0,16

[State 810, 音を鳴らす];放り投げ用
type = PlaySnd
trigger1 = time = 5
value = 100,15

[State 810, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = animelemtime(3) = 0
trigger2 = animelemtime(5) = 0
trigger3 = animelemtime(7) = 0
value = 0,7

[State 810, 音を鳴らす];掴み用
type = PlaySnd
trigger1 = animelemtime(11) = 0
value = 0,8

[State 0, explod]
type = explod
trigger1 = animelemtime(2) = 0
anim = 815
id = 810
pos = ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype = p1
scale = const(size.xscale),const(size.yscale)
removetime = -1
sprpriority = 2

[State 0, explod]
type = explod
trigger1 = animelemtime(3) = 0
trigger2 = animelemtime(5) = 0
trigger3 = animelemtime(7) = 0
anim = 6305
id = 6305
pos = ceil(70*const(size.xscale)),ceil(-70*const(size.yscale))
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 3

[State 0, explod]
type = explod
trigger1 = animelemtime(11) = 0
anim = 6306
id = 6305
pos = -16,-70
postype = p2
scale = const(size.xscale),const(size.yscale)
sprpriority = 3

[STate 901,1]
type = targetlifeadd
triggerall = numtarget
trigger1 = animelemtime(3) = 0
trigger2 = animelemtime(5) = 0
trigger3 = animelemtime(7) = 0
value = ceil(ifelse(-7*fvar(0)>-7,-7,-7*fvar(0)))
kill = 0

[STate 901,1]
type = targetlifeadd
triggerall = numtarget
trigger1 = animelemtime(11) = 0
value = ceil(ifelse(-63*fvar(0)>-7,-7,-63*fvar(0)))

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = animelem = 1
pos = ceil(20*const(size.xscale)),0
postype = P1
time = -1

[STate 901,1]
type = targetBind
triggerall = numtarget
trigger1 = animelemtime(9) >= 0
trigger1 = animelemtime(11) < 0
pos = ceil(65*const(size.xscale)),0
postype = P1
time = 1

[STate 901,1]
type = targetstate
triggerall = numtarget
trigger1 = animelemtime(11) = 0
value = 821

[STate 901,1]
type = sprpriority
trigger1 = animelemtime(11) = 0
value = 2

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 60,0 ;画面端を押す幅を変える（オレンジの線）

[STate 901,1]
type = removeexplod
trigger1 = animelemtime(9) = 0
id = 810

[State 810]
type = Changestate
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;相手１
[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 相手のアニメ変更]
type = ChangeAnim2
trigger1 = Time = 0
value = 820

[State 0, nhb]
type = null;selfstate
trigger1 = time > 60
value = 5050

;---------------------------------------------------------------------------
;投げ2(ENEMY)
[Statedef 821]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0

[State 0, pos]
type = changeanim
trigger1 = time < 9
value = 5001

[State 0, pos]
type = posadd
trigger1 = time < 9
x = 1*ifelse(time%2=0,-1,1)

[State 0, vel]
type = velset
trigger1 = time = 9
x = -10
y = -3.5

[State 0, vel]
type = veladd
trigger1 = time >= 9
y = .36

[State 0, anim]
type = changeanim
trigger1 = time = 9
value = 5030

[State 0, anim]
type = changeanim
trigger1 = time > 9
trigger1 = vel y >= -2
value = 5050
persistent = 0

[State 5040, 5] ;Recover near ground
type = SelfState
triggerall = time >= 20
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5040, 6]; Recover in mid air
type = SelfState
triggerall = time >= 20
triggerall = Vel Y > -1
trigger1 = alive
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER

[State 0, self]
type = SelfState
trigger1 = pos y >= 0
trigger1 = vel y > 0
value = 5100

;---------------------------------------------------------------------------
;投げぬけ（自分）（y.yさん製作）
[Statedef 830]
type = A
movetype = I
physics = A
anim = 5210+var(0)
velset = -3,-5

[State 0, target]
type = targetbind
triggerall = numtarget
trigger1 = !time
pos = 50,0

[State 0, target]
type = targetstate
triggerall = numtarget
trigger1 = !time
value = 840

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;投げ抜け（相手）
[Statedef 840]
type = A
movetype = I
physics = N
velset = -3,-6

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, anim]
type = changeanim
trigger1 = !time
value = 5210

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .45

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 52
ctrl = 1

;===========================================================================
; 必殺技
;===========================================================================
;鬼鋼斬
[Statedef 1000]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1000
poweradd = 0
velset = 0,0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, var]
type = varset
trigger1 = !time
triggerall = !var(59)
var(2) = ifelse(command = "46z",2,ifelse(command = "46y",1,0))

[State 1000, VarSet]
type = varset
trigger1 = !time
triggerall = !var(59)
triggerall = var(36)
var(2) = ifelse((var(36)&2**2),2,ifelse((var(36)&2**1),1,0))

[State 0, anim]
type = changeanim
trigger1 = !time
value = 1000;+(var(2)=2)*2

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,1
channel = 0

[State 0, snd]
type = playsnd
trigger1 = anim = 1000
trigger1 = animelemtime(7) = 0
value = 2,4

[State 0, explod]
type = explod
trigger1 = anim = 1000
trigger1 = animelemtime(8) = 0
anim = 8070
id = 8070
facing = 1
postype = p1
pos = 0,0
sprpriority = -1
ownpal = 1
scale = .833,1.07

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = anim = 1000
trigger1 = animelemtime(5) >= 0
value = 40,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, snd]
type = velset
trigger1 = anim = 1000
trigger1 = animelemtime(8) = 0
x = 12

[State 0, snd]
type = velmul
triggerall = !var(34)
trigger1 = anim >= 1010
x = .81

[State 0, end]
type = changeanim
triggerall = anim = 1000
triggerall = animelemtime(8) >= 0
trigger1 = p2bodydist x < 80
trigger2 = !animtime
value = anim+10+(var(2)=2)*2

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = anim = 1010
trigger1 = animelemtime(2) = 0
anim = 1015
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = anim = 1012
trigger1 = animelemtime(2) = 0
anim = 1017
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = anim = 1010
trigger1 = animelem = 2
attr = S, SA
damage = ceil(ifelse((91*fvar(0))<7,7,(91*fvar(0)))),ceil(ifelse((91*fvar(0)*.25)<7,7,(91*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,21
sparkno = s6305
sparkxy = -14,-56
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = low
ground.slidetime = 17
ground.hittime = 17
guard.slidetime = 8
guard.hittime = 8
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -6,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = anim = 1012
trigger1 = animelem = 2
attr = C, SA
damage = ceil(ifelse((77*fvar(0))<7,7,(77*fvar(0)))),ceil(ifelse((77*fvar(0)*.25)<7,7,(77*fvar(0)*.25)))
priority = 3,Hit
hitflag = MAF
guardflag = L
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,16
sparkno = s6305
sparkxy = -9,-14
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 60,0
givepower = 30,0
ground.type = Trip
ground.slidetime = 8
ground.hittime = 8
guard.ctrltime = 8
ground.velocity = -4,-3
guard.velocity = -8
air.type = low
air.velocity = -3,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 20
fall = 0
air.fall = 0
fall.recovertime = 18
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varset
trigger1 = !time
var(10) = 3
[State 220, CornerPush]
type = Varadd
triggerall = anim >= 1010
trigger1 = !movecontact
trigger1 = animelemtime(2) >= 1
var(10) = -1
ignorehitpause = 1

[State 0, end]
type = changeanim
triggerall = anim >= 1010
trigger1 = movecontact = ifelse(var(10)<1,1,var(10))
value = anim
elem = 3

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;即命斬
[Statedef 1100]
type = S
movetype = A
physics = N
ctrl = 0
anim = 1100
poweradd = 0
velset = 0,0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, var]
type = varset
trigger1 = !time
triggerall = !var(59)
var(2) = ifelse(command = "623z",2,ifelse(command = "623y",1,0))

[State 1000, VarSet]
type = varset
trigger1 = !time
triggerall = !var(59)
triggerall = var(36)
var(2) = ifelse((var(36)&2**5),2,ifelse((var(36)&2**4),1,0))

[State 0, snd]
type = varset
trigger1 = !time
trigger1 = var(2)
var(30) = 2+(var(2)=2)*4

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,2
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(34)
triggerall = anim = 1100
trigger1 = animelemtime(2) = 0
value = 2,4

[State 0, snd]
type = playsnd
triggerall = !var(34)
triggerall = anim = 1100
trigger1 = animelemtime(2) = 0
value = 0,13

[State 0, pos]
type = posadd
triggerall = !var(34)
triggerall = anim = 1100
trigger1 = animelemtime(2)>=0
trigger1 = animelemtime(3)<0
x = 3

[State 0, pos]
type = velset
;triggerall = !var(34)
triggerall = anim = 1100
trigger1 = animelemtime(3)=2
y = -6.6

[State 0, pos]
type = statetypeset
triggerall = anim = 1100
trigger1 = animelemtime(3)=2
statetype = A

[State 0, pos]
type = veladd
trigger1 = !var(34)
triggerall = anim = 1100
trigger1 = animelemtime(3)>=5
y = .44

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = anim = 1100
trigger1 = animelemtime(2) = 0
value = 20,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = var(2) = 0
trigger1 = animelem = 2
attr = S, SA
damage = ceil(ifelse((98*fvar(0))<7,7,(98*fvar(0)))),ceil(ifelse((98*fvar(0)*.25)<7,7,(98*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = up
fall.animtype = up
pausetime = 0,16
sparkno = s6305
sparkxy = -14,-85
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -1.5,-10.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -2.5,-6.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 1
air.fall = 0
fall.recovertime = 34
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !var(34)
triggerall = (var(2) = 1 && var(30) = 2) || (var(2) = 2 && var(30) = 6)
trigger1 = animelem = 2
trigger2 = animelemtime(3) >= 0
trigger2 = animelemtime(8) < 0
attr = S, SA
damage = ceil(ifelse((98*fvar(0))<7,7,(98*fvar(0)))),ceil(ifelse((98*fvar(0)*.25)<7,7,(98*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = up
fall.animtype = up
pausetime = 0,16
sparkno = s6305
sparkxy = -14,-85
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -1,-10.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -2.5,-6.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 1
air.fall = 0
fall.recovertime = 34
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !var(34)
triggerall = var(2) = 1
triggerall = var(30) = 1
trigger1 = animelem = 2
trigger2 = animelemtime(3) = 0
trigger3 = animelemtime(4) = 0
trigger4 = animelemtime(5) = 0
trigger5 = animelemtime(6) = 0
trigger6 = animelemtime(7) = 0
attr = A, SA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),ceil(ifelse((28*fvar(0)*.25)<7,7,(28*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = up
fall.animtype = up
pausetime = 0,9
sparkno = s6305
sparkxy = -14,-85
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -1,-10.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -2,-8.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 1
air.fall = 0
fall.recovertime = 34
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !var(34)
triggerall = var(2) = 2
triggerall = var(30) = 5
trigger1 = animelem = 2
trigger2 = animelemtime(3) = 0
trigger3 = animelemtime(4) = 0
trigger4 = animelemtime(5) = 0
trigger5 = animelemtime(6) = 0
trigger6 = animelemtime(7) = 0
attr = A, SA
damage = ceil(ifelse((14*fvar(0))<7,7,(14*fvar(0)))),ceil(ifelse((14*fvar(0)*.25)<7,7,(14*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = up
fall.animtype = up
pausetime = 0,9
sparkno = s6305
sparkxy = -14,-85
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -1,-6.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -1,-6.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 1
air.fall = 0
fall.recovertime = 34
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, hit]
type = hitdef
triggerall = !var(34)
triggerall = var(2) = 2
triggerall = var(30) = [1,4]
trigger1 = animelem = 2
trigger2 = animelemtime(3) = 0
trigger3 = animelemtime(4) = 0
trigger4 = animelemtime(5) = 0
trigger5 = animelemtime(6) = 0
trigger6 = animelemtime(7) = 0
attr = A, SA
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = up
fall.animtype = up
pausetime = 0,9
sparkno = s6305
sparkxy = -14,-85
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -1,-6.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -1,-6.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 1
air.fall = 0
fall.recovertime = 34
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varadd
trigger1 = var(30) > 0
trigger1 = movecontact = 1
var(30) = -1
ignorehitpause = 1

[State 220, CornerPush]
type = Varset
trigger1 = !var(34)
trigger1 = movecontact
var(54) = 9
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changeanim
trigger1 = vel y > 0
trigger1 = pos y >= -10
value = 1101

[State 0, pos]
type = statetypeset
trigger1 = anim = 1100
trigger1 = animelemtime(8) = 0
movetype = I

[State 0, pos]
type = statetypeset
trigger1 = anim = 1101
statetype = S

[State 0, end]
type = posset
trigger1 = vel y > 0
trigger1 = pos y >= -10
y = 0

[State 0, end]
type = velset
trigger1 = vel y > 0
trigger1 = pos y >= -10
x = 0
y = 0

[State 0, end]
type = changestate
trigger1 = anim = 1101
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;efekuto
[Statedef 1105]
anim = 9999
sprpriority = 1

[State 195, bind]
type = BindToParent
trigger1 = 1
time = 1
facing = 1
pos = 0,0

[State 195, アニメ変更]
type = Changeanim
trigger1 = root,anim = 1100 || root,anim = 3001 || root,anim = 3110 || root,anim = 700
trigger1 = anim = 9999
trigger1 = root,animelemtime(2) = 0
value = 1105

[State 195, アニメ変更]
type = Changeanim
triggerall = root,var(34)
trigger1 = root,anim = 1100 && root,animelemtime(3)<0
trigger2 = root,anim = 3001 && root,animelemtime(3)<0
trigger3 = root,anim = 3110 && root,animelemtime(3)<0
trigger4 = root,anim = 700 && root,animelemtime(3)<0
value = anim
elem = animelemno(-1)

[State 195, アニメ変更]
type = Changeanim
triggerall = anim = 1105
trigger1 = root,anim = 1100 && root,animelemtime(8)=0
trigger2 = root,anim = 3001 && root,animelemtime(10)=0
trigger3 = root,anim = 3110 && root,animelemtime(10)=0
trigger4 = root,anim = 700 && root,animelemtime(10)=0
value = 1106

[State 195, アニメ変更]
type = Changeanim
trigger1 = anim = 1106
trigger1 = !animtime
value = 9999

[State 195, ステート変更]
type = ChangeState
trigger1 = root,stateno != 1100
trigger1 = root,stateno != 3010
trigger1 = root,stateno != 3110
trigger1 = root,stateno != 700
value = 10000

;---------------------------------------------------------------------------
;憶えたッ！
[Statedef 1200]
type    = S
movetype =  I
physics = S
juggle=0
ctrl = 0
anim = 1200
velset = 0,0
poweradd = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 220, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 1300, 0
channel = 1

[State 220, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100, 9
channel = 0

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 2
Anim = 1201
pos = 38, -40
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = -1
supermove = 1
ignorehitpause = 1
sprpriority = 7
scale = const(size.xscale),const(size.yscale)

[State -2, 1]
type = PalFX
triggerall = animelemtime(3) > 0
triggerall = animelemtime(5) < 0
trigger1 = gametime%4=0
time = 2
add = 120,120,192
ignorehitpause = 1

[State 3200]
type = StateTypeSet
trigger1 = enemy,movetype = A
movetype = A

[State 3200]
type = StateTypeSet
trigger1 = animelemtime(4) = 0
movetype = I

[State -2,KO]
type = Varset
trigger1 = time = 0
var(6) = (var(6)|2097152)-2097152
ignorehitpause = 1

[State 1035, 2]
type = ReversalDef
trigger1 = AnimElem = 3
attr = S, SA
reversal.attr = SCA, NA, SA, HA
pausetime = 0,35
sparkno = -1
sparkxy = 0,0
hitsound = S1300,1
;p1stateno = 1310
;p2stateno = 1316

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = animelemtime(3) >= 0
triggerall = movehit && !target,Ishelper
trigger1 = P2stateno = var(11) || P2stateno = var(12) || P2stateno = var(13) || P2stateno = var(14) || P2stateno = var(15)
trigger2 = P2stateno = var(16) || P2stateno = var(17) || P2stateno = var(18) || P2stateno = var(19) || P2stateno = var(20)
trigger3 = P2stateno = var(21) || P2stateno = var(22) || P2stateno = var(23) || P2stateno = var(24) || P2stateno = var(25)
var(6) = (var(6)|2097152)
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1 && var(14) != -1 && var(15) != -1
triggerall = var(16) != -1 && var(17) != -1 && var(18) != -1 && var(19) != -1 && var(20) != -1
triggerall = var(21) != -1 && var(22) != -1 && var(23) != -1 && var(24) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13) && P2stateno != var(14) && P2stateno != var(15)
triggerall = P2stateno != var(16) && P2stateno != var(17) && P2stateno != var(18) && P2stateno != var(19) && P2stateno != var(20)
triggerall = P2stateno != var(21) && P2stateno != var(22) && P2stateno != var(23) && P2stateno != var(24)
trigger1 = var(25) = -1
var(25) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1 && var(14) != -1 && var(15) != -1
triggerall = var(16) != -1 && var(17) != -1 && var(18) != -1 && var(19) != -1 && var(20) != -1
triggerall = var(21) != -1 && var(22) != -1 && var(23) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13) && P2stateno != var(14) && P2stateno != var(15)
triggerall = P2stateno != var(16) && P2stateno != var(17) && P2stateno != var(18) && P2stateno != var(19) && P2stateno != var(20)
triggerall = P2stateno != var(21) && P2stateno != var(22) && P2stateno != var(23)
trigger1 = var(24) = -1
var(24) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1 && var(14) != -1 && var(15) != -1
triggerall = var(16) != -1 && var(17) != -1 && var(18) != -1 && var(19) != -1 && var(20) != -1
triggerall = var(21) != -1 && var(22) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13) && P2stateno != var(14) && P2stateno != var(15)
triggerall = P2stateno != var(16) && P2stateno != var(17) && P2stateno != var(18) && P2stateno != var(19) && P2stateno != var(20)
triggerall = P2stateno != var(21) && P2stateno != var(22)
trigger1 = var(23) = -1
var(23) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1 && var(14) != -1 && var(15) != -1
triggerall = var(16) != -1 && var(17) != -1 && var(18) != -1 && var(19) != -1 && var(20) != -1
triggerall = var(21) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13) && P2stateno != var(14) && P2stateno != var(15)
triggerall = P2stateno != var(16) && P2stateno != var(17) && P2stateno != var(18) && P2stateno != var(19) && P2stateno != var(20)
triggerall = P2stateno != var(21)
trigger1 = var(22) = -1
var(22) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1 && var(14) != -1 && var(15) != -1
triggerall = var(16) != -1 && var(17) != -1 && var(18) != -1 && var(19) != -1 && var(20) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13) && P2stateno != var(14) && P2stateno != var(15)
triggerall = P2stateno != var(16) && P2stateno != var(17) && P2stateno != var(18) && P2stateno != var(19) && P2stateno != var(20)
trigger1 = var(21) = -1
var(21) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1 && var(14) != -1 && var(15) != -1
triggerall = var(16) != -1 && var(17) != -1 && var(18) != -1 && var(19) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13) && P2stateno != var(14) && P2stateno != var(15)
triggerall = P2stateno != var(16) && P2stateno != var(17) && P2stateno != var(18) && P2stateno != var(19)
trigger1 = var(20) = -1
var(20) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1 && var(14) != -1 && var(15) != -1
triggerall = var(16) != -1 && var(17) != -1 && var(18) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13) && P2stateno != var(14) && P2stateno != var(15)
triggerall = P2stateno != var(16) && P2stateno != var(17) && P2stateno != var(18)
trigger1 = var(19) = -1
var(19) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1 && var(14) != -1 && var(15) != -1
triggerall = var(16) != -1 && var(17) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13) && P2stateno != var(14) && P2stateno != var(15)
triggerall = P2stateno != var(16) && P2stateno != var(17)
trigger1 = var(18) = -1
var(18) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1 && var(14) != -1 && var(15) != -1
triggerall = var(16) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13) && P2stateno != var(14) && P2stateno != var(15)
triggerall = P2stateno != var(16)
trigger1 = var(17) = -1
var(17) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1 && var(14) != -1 && var(15) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13) && P2stateno != var(14) && P2stateno != var(15)
trigger1 = var(16) = -1
var(16) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1 && var(14) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13) && P2stateno != var(14)
trigger1 = var(15) = -1
var(15) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1 && var(13) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12) && P2stateno != var(13)
trigger1 = var(14) = -1
var(14) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1 && var(12) != -1
triggerall = P2stateno != var(11) && P2stateno != var(12)
trigger1 = var(13) = -1
var(13) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
triggerall = var(11) != -1
triggerall = P2stateno != var(11)
trigger1 = var(12) = -1
var(12) = P2stateno
ignorehitpause = 1

[State -2,KO]
type = Varset
triggerall = numtarget
triggerall = movehit && !target,Ishelper
triggerall = animelemtime(3) >= 0
trigger1 = var(11) = -1
var(11) = P2stateno
ignorehitpause = 1

[State 220, 3]
type = ChangeState
triggerall = numtarget
triggerall = animelemtime(3) >= 0 && !target,Ishelper
trigger1 = movehit
value = 1210
ignorehitpause = 1

[State 220, 3]
type = ChangeState
triggerall = numtarget
triggerall = animelemtime(3) >= 0 && target,Ishelper
trigger1 = movehit
value = 1211
ignorehitpause = 1

[State 220, 3]
type = TargetState
triggerall = numtarget
triggerall = animelemtime(3) >= 0 && !target,Ishelper
trigger1 = movehit
value = 1216
ignorehitpause = 1

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;憶えたぞ（成功）
[Statedef 1210]
type    = S
movetype =  A
physics = N
juggle=0
ctrl = 0
velset = 0,0

[State 170, 1]
type = playerpush
trigger1 = 1
value = 0

[State 170, 1]
type = changeanim
trigger1 = time <= 28
value = anim
elem = animelemno(0)

[State 170, 1]
type = changeanim
trigger1 = time = 28
value = ifelse(!var(31),1210,1211)

[State 170, 1]
type = NotHitBy
trigger1 = anim = 1200
trigger2 = anim = 1210 && animelemtime(13) < 0
value = SCA

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(3) = 0
anim = 1215
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 901, Throw]
type = TargetState
triggerall = numtarget
triggerall = !target,Ishelper
trigger1 = Time = 0
value = 1215

[State 901, Hurt]
type = poweradd
trigger1 = animelemtime(3) = 0  && !var(31)
value = 40

[State 901, Hurt]
type = TargetLifeAdd
triggerall = numtarget
trigger1 = animelemtime(3) = 0 
value = ceil(ifelse((-28*fvar(0))>-7,-7,(-28*fvar(0))))
ignorehitpause = 1

[State 901, Hurt]
type = Targetpoweradd
triggerall = numtarget
trigger1 = animelemtime(3) = 0 && !var(31)
value = 20
ignorehitpause = 1

[State 220, Position]
type = PosSet
trigger1 = !time
y = 0

[State 8999, RemoveExplod]
type = RemoveExplod
triggerall = anim = [1210,1211]
trigger1 = animelemtime(3) = 0
id = 7010

[State 8999, RemoveExplod]
type = RemoveExplod
triggerall = anim = [1210,1211]
trigger1 = animelemtime(3) = 0
id = 7011

[State 8999, RemoveExplod]
type = RemoveExplod
triggerall = anim = [1210,1211]
trigger1 = animelemtime(3) = 0
id = 7012

[State 8999, RemoveExplod]
type = RemoveExplod
triggerall = anim = [1210,1211]
trigger1 = animelemtime(3) = 0
id = 7013

[State 8999, RemoveExplod]
type = RemoveExplod
triggerall = anim = [1210,1211]
trigger1 = animelemtime(3) = 0
id = 7014

[State 8999, RemoveExplod]
type = RemoveExplod
triggerall = anim = [1210,1211]
trigger1 = animelemtime(3) = 0
id = 7015

[State 8999, RemoveExplod]
type = RemoveExplod
triggerall = anim = [1210,1211]
trigger1 = animelemtime(3) = 0
id = 7016

[State -2,KO]
type = Varadd
triggerall = anim = [1210,1211]
triggerall = !(var(6)&2097152)
triggerall = !var(8)
trigger1 = animelemtime(3) = 0
var(9) = 1
ignorehitpause = 1

[State 220, Voice]
type = PlaySnd
triggerall = anim = [1210,1211]
trigger1 = AnimElem = 12
value = 100, 12-!!(var(6)&2097152)
channel = 0

[State 220, Voice]
type = PlaySnd
triggerall = anim = [1210,1211]
trigger1 = animelemtime(3) = 0
value = 0, 8
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = anim = [1210,1211]
trigger1 = animelemtime(3) = 0
value = 0, 13

[State -2, 1]
type = PalFX
triggerall = time <= 28
trigger1 = gametime%4=0
time = 2
add = 120,120,192
ignorehitpause = 1

[State 1000, Spark]
type = Explod
trigger1 = time = 1
Anim = 7001
pos =  ceil(43*const(size.xscale)),ceil(-58*const(size.yscale))
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1
sprpriority = 7
scale = const(size.xscale),const(size.yscale)

[State 901, State End]
type = ChangeState
triggerall = anim = [1210,1211]
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;憶えたぞ（成功2）
[Statedef 1211]
type = S
movetype = A
physics = N
ctrl = 0
;anim = 1211
poweradd = 0
sprpriority = 0
velset = 0,0

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 170, 1]
type = playerpush
trigger1 = anim = 1200
trigger2 = anim = 1211 && animelemtime(4) < 0
value = 0

[State 170, 1]
type = NotHitBy
trigger1 = anim = 1200
trigger2 = anim = 1211 && animelemtime(4) < 8
value = SCA

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(3) = 0
anim = 1215
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 170, 1]
type = changeanim
trigger1 = time <= 28
value = anim
elem = animelemno(0)

[State 170, 1]
type = changeanim
trigger1 = time = 28
value = 1211

[State 0, snd]
type = playsnd
triggerall = anim = 1211
trigger1 = animelem = 3
value = 0,26

[State 0, hit]
type = hitdef
trigger1 = animelem = 3
attr = S, SA
damage = ceil(ifelse((70*fvar(0))<7,7,(70*fvar(0)))),ceil(ifelse((70*fvar(0)*.25)<7,7,(70*fvar(0)*.25)))
priority = 4,Hit
hitflag = MAF
guardflag = M
animtype = up
pausetime = 13,13
sparkno = s6305
sparkxy = -14,-52
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = low
ground.slidetime = 15
ground.hittime = 15
ground.velocity = -1.2,-10.6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -2
air.velocity = -1.2,-10.6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
fall = 1
air.fall = 1
air.cornerpush.veloff = -2
air.hittime = 16
fall.recovertime = 28
ground.cornerpush.veloff = -3
guard.kill = 0
yaccel = .36
p2facing = 1

[State 0, anim]
type = changeanim
trigger1 = var(34) > 0
value = anim
elem = animelemno(-1)

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 220, Voice]
type = PlaySnd
trigger1 = anim = 1211
trigger1 = animelemtime(3) = 0
value = 100,8
persistent = 0

[State -2, 1]
type = PalFX
triggerall = time <= 28
trigger1 = gametime%4=0
time = 2
add = 120,120,192
ignorehitpause = 1

[State 1000, Spark]
type = Explod
trigger1 = time = 1
Anim = 7001
pos =  ceil(58*const(size.xscale)),ceil(-58*const(size.yscale))
postype = p1
ownpal = 1
bindtime = 1
pausemovetime = 9999
supermovetime = 9999
ignorehitpause = 1
sprpriority = 7
scale = const(size.xscale),const(size.yscale)

[State 0, end]
type = changestate
triggerall = anim = 1211
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;憶えたぞ（成功）（相手）1
[Statedef 1215]
type    = A
movetype = H
physics = N
velset = 0,0
poweradd = 80
sprpriority = -2

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 105, 1]
type = Statetypeset
trigger1 = 1
movetype = H
ignorehitpause = 1
persistent = 1

[State 5000, 4] ;Freeze anim
type = ChangeAnim2
trigger1 = Time = 0
value = 1220

[State 5000, 4] ;Freeze anim
type = ChangeAnim2
trigger1 = Time < 10
value = anim

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 10
trigger1 = SelfAnimExist(5051)
value = 5051

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = Time = 10     ;If no transition anim
trigger1 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 903, Vel]
type = VelSet
trigger1 = Time = 10
x = -1.6
y = -12

[State 903, Vel]
type = veladd
trigger1 = Time >= 10
y = 0.4

[State 40, Position]
type = PosAdd
trigger1 = Time < 10
x = ceil((14-time)/4)*ifelse(time%2=1,1,-1)

[State 903, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 903, 2]
type = SelfState
trigger1 = Time > 14
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;憶えたぞ（成功）（相手）2
[Statedef 1216]
type    = A
movetype =  H
physics = N
velset = 0,0
ctrl = 0

[State 1205, ChangeState]
type =  selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;===========================================================================
; 超必殺技
;===========================================================================
;残骸刀
[Statedef 3000]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 3000
facep2 = 1;-(prevstateno=[100,119])

[State 0, vel]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = nothitby
trigger1 = time <= 48
trigger2 = movehit
trigger2 = numtarget(3000)
value = SCA
time = 1

[State 0, snd]
type = playsnd
trigger1 = animelemtime(2) = 4
value = 100,3
channel = 0

[State 0, super]
type = superpause
trigger1 = animelemtime(2) = 4
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = animelemtime(2) = 4
anim = 7100
id = 7100
pos = ceil(-50*const(size.xscale)),ceil(-70*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = animelemtime(2) = 4
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999
facing = 1

[State 0, snd]
type = playsnd
trigger1 = anim = 3000
trigger1 = animelemtime(3) = 1
value = 2,4

[State 0, explod]
type = explod
trigger1 = anim = 3000
trigger1 = animelemtime(3) = 1
anim = 8070
id = 8070
facing = 1
postype = p1
pos = 0,0
sprpriority = -1
ownpal = 1
scale = .833,1.07

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = anim = 3000
trigger1 = animelemtime(5) >= 0
value = 15,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, snd]
type = velset
trigger1 = anim = 3000
trigger1 = animelemtime(3) = 1
x = 11

[State 0, snd]
type = velset
trigger1 = anim = 3000
trigger1 = animelemtime(4) >= 0
x = 2

[State 0, end]
type = changeanim
triggerall = anim = 3000
triggerall = animelemtime(3) >= 0
triggerall = animelemtime(4) < 0
trigger1 = p2bodydist x < 25
trigger2 = !animtime
value = anim
elem = 4

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(5) = 0
trigger2 = animelemtime(16) = 0
trigger3 = animelemtime(25) = 0
trigger4 = animelemtime(34) = 0
anim = 225
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(7) = 0
anim = 227
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 5
trigger2 = animelem = 7
trigger3 = animelem = 12
trigger4 = animelem = 16
trigger5 = animelem = 21
trigger6 = animelem = 25
trigger7 = animelem = 30
trigger8 = animelem = 34
value = 0,13
channel = 2

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 5
attr = S, HA
damage = ceil(ifelse((28*fvar(0))<7,7,(28*fvar(0)))),ceil(ifelse((28*fvar(0)*.25)<7,7,(28*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,18
sparkno = s6305
sparkxy = -14,-56
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,20
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -4,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1
id = stateno
kill = 0

[State 0, end]
type = movehitreset
trigger1 = animelemtime(6)=1

[State 0, hit]
type = hitdef
triggerall = !var(34)
trigger1 = animelem = 7
trigger2 = animelem = 12
trigger3 = animelem = 16
trigger4 = animelem = 21
trigger5 = animelem = 25
trigger6 = animelem = 30
trigger7 = animelem = 34
attr = S, HA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),ceil(ifelse((21*fvar(0)*.25)<7,7,(21*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,18
sparkno = s6305
sparkxy = -14,-56
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,20
ground.type = low
ground.slidetime = 21
ground.hittime = 21
ground.velocity = -6
guard.velocity = -5.5
air.type = Low
air.velocity = -4,-4*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1
id = stateno
kill = 0

[State 901, Throw]
type = TargetState
triggerall = numtarget(3000)
trigger1 = P2StateType != L
trigger1 = time > 1 && movehit = 1
value = 3050
ignorehitpause = 1
id = 3000

[State 901, Throw]
type = null;Targetbind
triggerall = numtarget(3000)
trigger1 = P2StateType != L
trigger1 = time > 1 && movehit = 1
pos = 80,0
ignorehitpause = 1
id = 3000

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 0
ignorehitpause = 1

[State 3000, 8]
type = Changestate
trigger1 = !animtime
trigger1 = anim = 3000
value = 3010

;===========================================================================
;追撃
[Statedef 3010]
type = S
movetype = A
physics = N
ctrl = 0
anim = 3001
poweradd = 0
velset = 0,0
sprpriority = 0
;facep2 = 1;-(prevstateno=[100,119])

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, snd]
type = varset
trigger1 = !time
var(30) = 6

[State 0, snd]
type = playsnd
trigger1 = !time
value = 100,2
channel = 0

[State 0, snd]
type = playsnd
triggerall = !var(34)
triggerall = anim = 3001
trigger1 = animelemtime(2) = 0
value = 2,4

[State 0, snd]
type = playsnd
triggerall = !var(34)
triggerall = anim = 3001
trigger1 = animelemtime(2) = 0
value = 0,13

[State 0, pos]
type = posadd
triggerall = !var(34)
triggerall = anim = 3001
trigger1 = animelemtime(2)>=0
trigger1 = animelemtime(3)<0
x = 3

[State 0, pos]
type = velset
;triggerall = !var(34)
triggerall = anim = 3001
trigger1 = animelemtime(3)=2
y = -6.6

[State 0, pos]
type = statetypeset
triggerall = anim = 3001
trigger1 = animelemtime(3)=2
statetype = A

[State 0, pos]
type = veladd
trigger1 = !var(34)
trigger1 = anim = 3001
trigger1 = animelemtime(3)>=5
y = .44

[State 810, 物理的なキャラの幅]
type = null;Width
triggerall = anim = 3001
trigger1 = animelemtime(2) = 0
value = 20,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, hit]
type = hitdef
triggerall = !var(34)
triggerall = var(30) = 6
trigger1 = animelem = 2
trigger2 = animelemtime(3) >= 0
trigger2 = animelemtime(10) < 0
attr = A, HA
damage = ceil(ifelse((14*fvar(0))<7,7,(14*fvar(0)))),ceil(ifelse((14*fvar(0)*.25)<7,7,(14*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = up
fall.animtype = up
pausetime = 0,16
sparkno = s6305
sparkxy = -14,-85
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 20,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -1,-6.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -1,-6.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 1
air.fall = 0
fall.recovertime = 34
guard.kill = 0
yaccel = .36
p2facing = 1
id = 3000
kill = 0

[State 0, hit]
type = hitdef
triggerall = !var(34)
triggerall = var(30) = [2,5]
trigger1 = animelem = 2
trigger2 = animelemtime(3) = 0
trigger3 = animelemtime(4) = 0
trigger4 = animelemtime(5) = 0
trigger5 = animelemtime(6) = 0
trigger6 = animelemtime(7) = 0
trigger7 = animelemtime(8) = 0
trigger8 = animelemtime(9) = 0
attr = A, HA
damage = ceil(ifelse((21*fvar(0))<7,7,(21*fvar(0)))),ceil(ifelse((21*fvar(0)*.25)<7,7,(21*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = up
fall.animtype = up
pausetime = 0,13
sparkno = s6305
sparkxy = -14,-85
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 20,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -1,-8.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -1,-8.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 1
air.fall = 0
fall.recovertime = 34
guard.kill = 0
yaccel = .36
p2facing = 1
id = 3000
kill = 0

[State 0, hit]
type = hitdef
triggerall = !var(34)
triggerall = var(30) = 1
trigger1 = animelem = 2
trigger2 = animelemtime(3) = 0
trigger3 = animelemtime(4) = 0
trigger4 = animelemtime(5) = 0
trigger5 = animelemtime(6) = 0
trigger6 = animelemtime(7) = 0
trigger7 = animelemtime(8) = 0
trigger8 = animelemtime(9) = 0
attr = A, HA
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = MA
animtype = hard
air.animtype = up
fall.animtype = up
pausetime = 0,13
sparkno = s6305
sparkxy = -14,-85
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 20,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -1,-8.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -1,-8.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 1
air.fall = 0
fall.recovertime = 34
guard.kill = 0
yaccel = .36
p2facing = 1
id = 3000

[State 220, CornerPush]
type = Varadd
trigger1 = var(30) > 0
trigger1 = movecontact = 1
var(30) = -1
ignorehitpause = 1

[State 220, CornerPush]
type = Varset
trigger1 = !var(34)
trigger1 = movecontact
var(54) = 12
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 16
ignorehitpause = 1

[State 0, end]
type = changeanim
trigger1 = vel y > 0
trigger1 = pos y >= -10
value = 1101

[State 0, pos]
type = statetypeset
triggerall = anim = 3001
trigger1 = animelemtime(10) = 0
movetype = I

[State 0, pos]
type = statetypeset
trigger1 = anim = 1101
statetype = S

[State 0, end]
type = posset
triggerall = anim = 1101
trigger1 = vel y > 0
trigger1 = pos y >= -10
y = 0

[State 0, end]
type = velset
triggerall = anim = 1101
trigger1 = vel y > 0
trigger1 = pos y >= -10
x = 0
y = 0

[State 0, end]
type = changestate
trigger1 = anim = 1101
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 3050]
type    = S
movetype= H
physics = N
velset = 0,0
ctrl = 0
facep2 = 1

[State 3050, ポジション変更]
type = PosSet
trigger1 = 1
y = 0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 3051 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 3051]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = selfState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;一太刀
[Statedef 3100]
type    = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
anim = 3100
facep2 = 1;-(prevstateno=[100,119])

[State 0, vel]
type = posset
trigger1 = !time
y = 0

[State 0, vel]
type = nothitby
trigger1 = time <= 40
trigger2 = movehit
value = SCA
time = 1

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 100,11
channel = 0

[State 0, super]
type = superpause
trigger1 = !time
time = 30
movetime = 30
anim = -1
sound = s0,21
darken = 0
p2defmul = 1
poweradd = -1000

[State 0, explod]
type = explod
trigger1 = !time
anim = 7100
id = 7100
pos = ceil(-50*const(size.xscale)),ceil(-30*const(size.yscale))
postype = p1
scale = .8,.8
sprpriority = 3
pausemovetime = 999999
supermovetime = 999999

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "super"
stateno = 7000
id = 7000
pos = 0,0
postype = p1
pausemovetime = 999999
supermovetime = 999999
facing = 1

;剣エフェ
[State 0, explod]
type = explod
triggerall = !var(34)
trigger1 = animelemtime(3) = 0
anim = 3105
id = 220
facing = 1
postype = p1
pos = 0,0
sprpriority = 1
ownpal = 1
bindtime = -1
scale = const(size.xscale),const(size.yscale)
removeongethit = 1

[State 0, snd]
type = playsnd
triggerall = !var(34)
trigger1 = animelem = 2
value = 0,13

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = animelem = 3
attr = S, HA
damage = ceil(ifelse((7*fvar(0))<7,7,(7*fvar(0)))),ceil(ifelse((7*fvar(0)*.25)<7,7,(7*fvar(0)*.25)))
priority = 7,Hit
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = Back
fall.animtype = Back
pausetime = 0,35
guard.pausetime = 0,13
sparkno = s6305
sparkxy = -14,-26
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = high
ground.slidetime = 20
ground.hittime = 20
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = 10
guard.velocity = 0
air.type = Low
air.velocity = -1.5,-6*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 0
air.fall = 0
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varset
trigger1 = !time
var(10) = 2
[State 220, CornerPush]
type = Varadd
trigger1 = !movecontact
trigger1 = animelemtime(3) >= 1
var(10) = -1
ignorehitpause = 1

[State 0, end]
type = changeanim
trigger1 = movecontact = ifelse(var(10)<1,1,var(10))
value = anim
elem = 4

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 0
ignorehitpause = 1

[State 3000, 8]
type = Changestate
trigger1 = movehit
trigger1 = animelemtime(7) = 1
trigger1 = anim = 3100
value = 3110

[State 3000, 8]
type = Changestate
trigger1 = !animtime
trigger1 = anim = 3100
value = 0
ctrl = 1

;===========================================================================
;追撃
[Statedef 3110]
type = S
movetype = A
physics = N
ctrl = 0
anim = 3110
poweradd = 0
velset = 0,0
sprpriority = 0
;facep2 = 1;-(prevstateno=[100,119])

[State 0, vel]
type = nothitby
trigger1 = animelemtime(9) < 0
value = SCA
time = 1

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, snd]
type = playsnd
triggerall = !var(34)
triggerall = anim = 3110
trigger1 = animelemtime(3) = 0
value = 2,4

[State 0, snd]
type = playsnd
triggerall = !var(34)
triggerall = anim = 3110
trigger1 = animelemtime(2) = 0
value = 0,13

[State 0, pos]
type = posadd
triggerall = !var(34)
triggerall = anim = 3110
trigger1 = animelemtime(1)>=0
trigger1 = animelemtime(3)<0
x = 2

[State 0, pos]
type = velset
triggerall = !var(34)
triggerall = anim = 3110
trigger1 = animelemtime(3)=2
y = -10.3

[State 0, pos]
type = statetypeset
triggerall = anim = 3110
trigger1 = animelemtime(3)=2
statetype = A

[State 0, pos]
type = veladd
trigger1 = !var(34)
triggerall = anim = 3110
trigger1 = animelemtime(3)>=5
y = .44

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = anim = 3110
trigger1 = animelemtime(2) = 0
value = 20,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, hit]
type = hitdef
trigger1 = !var(34)
trigger1 = anim = 3110
trigger1 = animelem = 2
attr = S, HA
damage = ceil(ifelse((273*fvar(0))<7,7,(273*fvar(0)))),ceil(ifelse((273*fvar(0)*.25)<7,7,(273*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = up
fall.animtype = up
pausetime = 0,38
sparkno = s6305
sparkxy = -14,-85
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 0,0
givepower = 0,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -1,-8.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -1,-8.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 1
fall.recover = 0
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varadd
trigger1 = var(30) > 0
trigger1 = movecontact = 1
var(30) = -1
ignorehitpause = 1

[State 220, CornerPush]
type = Varset
trigger1 = !var(34)
trigger1 = movecontact
var(54) = 0
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = changeanim
trigger1 = vel y > 0
trigger1 = pos y >= -10
value = 1101

[State 0, pos]
type = statetypeset
trigger1 = anim = 1100
trigger1 = animelemtime(10) = 0
movetype = I

[State 0, pos]
type = statetypeset
trigger1 = anim = 1101
statetype = S

[State 0, end]
type = posset
trigger1 = vel y > 0
trigger1 = pos y >= -10
y = 0

[State 0, end]
type = velset
trigger1 = vel y > 0
trigger1 = pos y >= -10
x = 0
y = 0

[State 0, end]
type = changestate
trigger1 = anim = 1101
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;敵（死亡時）
[Statedef 3030]
type = A
movetype = H
physics = N
anim = 5030
velset = -5,-6

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .4

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030
trigger1 = !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;===========================================================================
; システムなど
;===========================================================================
;スタンドon
[Statedef 10001]
anim = 10001
velset = 0,0
ctrl = 1

[State 10000,4]
type = posset
trigger1 = !time
y = 0

[State 10000,4]
type = null;posadd
trigger1 = !time
x = 15

[State 10001];煙
type = Explod
trigger1 = time = 0
anim = 8010
ID = 8010
pos = -20, 0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
vel = 0, 0
accel = 0, 0
random = 0, 0
removetime = -2
supermovetime = 0
pausemovetime = 0
scale = 1, 1
sprpriority = 3
ontop = 0
shadow = 0, 0, 0
ownpal = 1
removeongethit = 1

[State 0, explod]
type = helper
trigger1 = animelem = 7
stateno = 10953
id = 10953
facing = 1
postype = p1
pos = 0,0
sprpriority = 2
ownpal = 1

[State 10000,4]
type = playsnd
trigger1 = !time
value = 0,14

[State 10000,4]
type = playsnd
trigger1 = !time
value = 100,16

[State 195]
type = playsnd
trigger1 = animelem = 5
value = 2,3

[State 10000,4]
type = ChangeState
trigger1 = animtime = 0
value = 0

[State 0, var]
type = varset
trigger1 = !time
var(49) = 40

[state 1001,0]
type = VarSet
trigger1 = time = 0
var(0) = 10000

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = (command = "x" || command = "b") && command != "holddown" && command = "holdfwd"
trigger1 = statetype != A
trigger1 = !time
value = 10205

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = (command = "x" || command = "b") && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10200

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "y" && command != "holddown" && command = "holdfwd"
trigger1 = statetype != A
trigger1 = !time
value = 10215

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "y" && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10210

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "z" && command != "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10220

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = (command = "x" || command = "b") && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10400

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "y" && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10410

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "z" && command = "holddown"
trigger1 = statetype != A
trigger1 = !time
value = 10420
;---------------------------------------------------------------------------
;スタンド発現(Air)
[Statedef 10910]
type = A
movetype = I
physics = N
anim = 10910
ctrl = 0
sprpriority = 3

[State 10000,4]
type = playsnd
trigger1 = !time
value = 100,16

[State 195]
type = playsnd
trigger1 = !time
value = 0,14

[State 195]
type = playsnd
trigger1 = animelem = 2
value = 2,0

[State 0, var]
type = varset
trigger1 = !time
var(0) = 10000

[State 0, var]
type = varset
trigger1 = !time
var(49) = 40

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "x"
trigger1 = statetype = A
trigger1 = !time
value = 10600

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "y"
trigger1 = statetype = A
trigger1 = !time
value = 10610

[State 0, end]
type = changestate
triggerall = !var(59)
trigger1 = command = "z"
trigger1 = statetype = A
trigger1 = !time
value = 10620

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 4030, Gravity]
type = VelAdd
trigger1 = !var(34)
y = ifelse((var(6)&16),.5,.6)

[State -3, Variable Height]
type = PlayerPush
triggerall = statetype=A && movetype!=H && numenemy
triggerall = p2bodydist x = [-(enemynear,const(size.ground.back) + enemynear,const(size.ground.front)), 0]
trigger1 = p2statetype=S
trigger1 = p2dist y >= (enemynear,const(size.height) - 12); Value depends on each char
trigger2 = p2statetype=C
trigger2 = p2dist y >= (enemynear,const(size.height) - 28); Value depends on each char
trigger3 = p2statetype=L
trigger3 = p2dist y >= 12
value=0
ignorehitpause=1

[State 4030, ChangeState]
type = ChangeState
triggerall = !var(34)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;===========================================================================
;GC
[Statedef 700]
type = S
movetype = A
physics = N
ctrl = 0
anim = 700
poweradd = 0
velset = 0,0
sprpriority = 0
facep2 = 1;-(prevstateno=[100,119])

[State 0, pal]
type = palfx
trigger1 = time < 10
trigger1 = time%2
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, hit]
type = hitby
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP

[State 0, nhb]
type = nothitby
trigger1 = time <= 9
value = SCA

[State 0, pos]
type = posset
trigger1 = !time
y = 0

[State 0, snd]
type = playsnd
triggerall = !var(34)
triggerall = anim = 700
trigger1 = animelemtime(2) = 0
value = 2,4

[State 0, snd]
type = playsnd
triggerall = !var(34)
triggerall = anim = 700
trigger1 = animelemtime(2) = 0
value = 0,13

[State 0, pos]
type = velset
;triggerall = !var(34)
triggerall = anim = 700
trigger1 = animelemtime(3)=2
y = -6.6

[State 0, pos]
type = statetypeset
triggerall = anim = 700
trigger1 = animelemtime(3)=2
statetype = A

[State 0, pos]
type = veladd
trigger1 = !var(34)
triggerall = anim = 700
trigger1 = animelemtime(3)>=5
y = .44

[State 810, 物理的なキャラの幅]
type = Width
triggerall = !var(34)
trigger1 = anim = 700
trigger1 = animelemtime(2) = 0
value = 20,0 ;画面端を押す幅を変える（オレンジの線）

[State 0, hit]
type = hitdef
triggerall = !movecontact && !movereversed
triggerall = anim = 700
triggerall = !var(34)
trigger1 = animelem = 2
trigger2 = animelem = 3
attr = S, NA
damage = ceil(ifelse((56*fvar(0))<7,7,(56*fvar(0)))),ceil(ifelse((56*fvar(0)*.25)<7,7,(56*fvar(0)*.25)))
priority = 5,Hit
hitflag = MAF
guardflag = M
animtype = hard
air.animtype = up
fall.animtype = up
pausetime = 0,11
sparkno = s6305
sparkxy = -14,-85
guard.sparkno = s6010
hitsound = s0,8
guardsound = s0,9
getpower = 40,0
givepower = 20,0
ground.type = high
ground.slidetime = 18
ground.hittime = 18
guard.hittime = 18
guard.ctrltime = 18
ground.velocity = -5.5,-8.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
guard.velocity = -8
air.type = Low
air.velocity = -5.5,-8.5;*(1.0-ifelse(var(40)>0,var(40)*.125,0))*(var(40)<=7)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.hittime = 17
fall = 1
fall.recovertime = 28
guard.kill = 0
yaccel = .36
p2facing = 1

[State 220, CornerPush]
type = Varset
trigger1 = movecontact
var(54) = 11
ignorehitpause = 1

[State 0, pos]
type = posfreeze
trigger1 = var(34) > 0

[State 220, CornerPush]
type = VarSet
trigger1 = movecontact = 1
fvar(3) = 0
ignorehitpause = 1

[State 0, end]
type = changeanim
trigger1 = vel y > 0
trigger1 = pos y >= -10
value = 1101

[State 0, pos]
type = statetypeset
trigger1 = anim = 700
trigger1 = animelemtime(10) = 0
movetype = I

[State 0, pos]
type = statetypeset
trigger1 = anim = 1101
statetype = S

[State 0, end]
type = posset
trigger1 = vel y > 0
trigger1 = pos y >= -10
y = 0

[State 0, end]
type = velset
trigger1 = vel y > 0
trigger1 = pos y >= -10
x = 0
y = 0

[State 0, end]
type = changestate
trigger1 = anim = 1101
trigger1 = !animtime
value = 0
ctrl = 1

;===========================================================================
;アドバンシングガード
[Statedef 710]
type = U
movetype = I
physics = N
ctrl = 0
velset = 0,0

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, explod]
type = explod
trigger1 = !time
anim = 6020
id = 6020
pos = ceil(28*const(size.xscale)),ifelse(statetype=C&&!var(0),ceil(-45*const(size.xscale)),ceil(-90*const(size.xscale)))
postype = p1
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ownpal = 1
shadow = 0,0,0
pausemovetime = 0
supermovetime = 0

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "AVG"
stateno = 715
id = 715
pos = -10,0
postype = p1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999
size.ground.back = 20
size.ground.front = 20
size.height = 240

[State 810, 1]
type = helper
trigger1 = !time
helpertype = normal
stateno = 8030
id = 8030
pos = 0,0
postype = p2
ownpal = 1
keyctrl = 0
pausemovetime = 999999
supermovetime = 999999

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 0,20

[State 0, snd]
type = playsnd
trigger1 = time = 1
value = 100,6
channel = 0

[State 0, anim]
type = changeanim
trigger1 = !var(59)
trigger1 = time >= 0 && command != "holddown"
value = 150+var(0)

[State 0, anim]
type = changeanim
trigger1 = !var(59)
trigger1 = time >= 0 && command = "holddown"
value = 151+var(0)


[State 0, state]
type = statetypeset
trigger1 = !var(59)
trigger1 = command != "holddown"
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = !var(59)
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, nhb]
type = nothitby
trigger1 = time <= 1
value = SCA
time = 1

[State 0, end]
type = changestate
trigger1 = time = 1
value = 151+(command = "holddown")*2

;---------------------------------------------------------------------------
;アドバンシングガード2
[Statedef 711]
type = U
movetype = I
physics = N

[State 0, vel]
type = velset
trigger1 = 1
x = 0

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command != "holddown"
value = 150+var(0)

[State 0, anim]
type = changeanim
trigger1 = time >= 0 && command = "holddown"
value = 151+var(0)

[State 0, state]
type = statetypeset
trigger1 = command != "holddown"
statetype = S
physics = S

[State 0, state]
type = statetypeset
trigger1 = command = "holddown"
statetype = C
physics = C

[State 0, end]
type = changestate
trigger1 = numhelper(715)
trigger1 = command = "holdback"
value = 151+(command = "holddown")*2

[State 0, end]
type = changestate
trigger1 = !numhelper(715)
value = 130+(command = "holddown")
ctrl = 1

;---------------------------------------------------------------------------
;アドバンシングガード(ヘルパー)
[Statedef 715]
type = S
movetype = I
physics = N
anim = 715
velset = 0,0

[State 0, push]
type = playerpush
trigger1 = 1
value = 1

[State 0, nhb]
type = nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = velset
trigger1 = !time
x = 20

[State 0, vel]
type = veladd
trigger1 = time > 0
x = -1

[State 0, end]
type = DestroySelf
trigger1 = time = 15

;===========================================================================
;スパコン背景
[Statedef 7000]
ctrl = 0
anim = 9999

[State 8000, AssertSpecial-1]
type = AssertSpecial
trigger1 = time <= 29
flag = NoFG
flag2 = NoBG

[State 0, explod]
type = explod
trigger1 = !time
anim = 7300
id = 7300
pos = 0,0
postype = back
removetime = 30
scale = .84,1.08
sprpriority = -20
pausemovetime = 30
supermovetime = 30

;cut in
[State 0, explod]
type = explod
trigger1 = time = 7
anim = 7000
id = 7000
pos = -20,170
postype = back
removetime = 23
sprpriority = -10
pausemovetime = 23
supermovetime = 23

[State 8000, ModifyExplod-3]
type = ModifyExplod
trigger1 = Numexplod(7000)
Id = 7000
postype = back
pos = ceil(-20+((random%16)*ifelse((time%6=[1,3]),-1,1))),ceil(170+((random%16)*ifelse((time%6=[1,3]),-1,1)))
scale = ifelse(time>=22,2,.2+((time-6)*.125))*.833,ifelse(time>=22,2,.2+((time-6)*.125))*1.07

[State 0, end]
type = DestroySelf
trigger1 = time = 31

;---------------------------------------------------------------------------
; アドバンシングガード(煙)
[Statedef 8030]
type = S
movetype = I
physics = N
velset = 0,0
anim = 8030
sprpriority = 4

[State 0, pos]
type = posset
trigger1 = 1
x = enemynear,pos x
y = 0

[State 0, assert]
type = assertspecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 0, end]
type = DestroySelf
trigger1 = !animtime
;===========================================================================
;メッセージアイコン
[Statedef 7500]
ctrl = 0
anim = 9999

[State 0, var];STAND ON
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10001
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
var(0) = 1
ignorehitpause = 1

[State 0, var];DANGER!
type = varset
trigger1 = root,var(0)
trigger1 = root,fvar(2) <= 20
;trigger1 = root,var(23) != 2 && !root,var(23);デム
var(0) = 2
ignorehitpause = 1

[State 0, var];STAND CRASH!
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 10
trigger1 = root,stateno = 3201
var(0) = 6
ignorehitpause = 1

[State 0, end]
type = changestate
trigger1 = roundstate = 2
trigger1 = time > 1
trigger1 = var(0)
value = 7500+var(0)

;---------------------------------------------------------------------------
;STAND ON
[Statedef 7501]
ctrl = 0
anim = 9999

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7500
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7505
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = !root,var(0)
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,fvar(2) <= 20
;trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 10
trigger1 = root,stateno = 3201
var(0) = 6
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 1
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;DANGER!
[Statedef 7502]
ctrl = 0
anim = 9999

[State 0, explod];消す
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod];DANGER
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7501
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7506
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod];移動
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod];ちょっと戻る
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod];移動
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod];ちょっと戻る
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,fvar(2) > 20
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10001
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 2
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;STAND CRUSH
[Statedef 7503]
ctrl = 0
anim = 9999

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7502
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7507
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,stateno != 4000
trigger1 = root,stateno != 4100
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10001
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
var(0) = 1
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 10
trigger1 = root,stateno = 3201
var(0) = 6
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 3
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;---------------------------------------------------------------------------
;FIRST ATTACK
[Statedef 7504]
ctrl = 0
anim = 9999

[State 0, var]
type = varset
trigger1 = !time
var(8) = 2
ignorehitpause = 1

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7503
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7508
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = !time
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10001
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,fvar(2) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 10
trigger1 = root,stateno = 3201
var(0) = 6
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 4
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 4
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;------------------------------------------------------------------------------
;GUARD CANCEL
[Statedef 7505]
ctrl = 0
anim = 9999

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7504
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7509
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = .5,.5
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,stateno != 700
trigger1 = root,stateno != 10700
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10001
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,fvar(2) <= 20
trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 10
trigger1 = root,stateno = 3201
var(0) = 6
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 5
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)

;------------------------------------------------------------------------------
;ALL LEARNED
[Statedef 7506]
ctrl = 0
anim = 9999

[State 0, explod]
type = removeexplod
trigger1 = !time
trigger1 = numexplod(7500)
id = 7500
scale = 1,1

[State 0, explod]
type = explod
trigger1 = teamside = 1
trigger1 = !time
anim = 7510
id = 7500
pos = -160,78
postype = left
bindtime = -1
scale = 1,1
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(-160+(time*10)),78
postype = left
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 1
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = 32,78
postype = left
id = 7500

[State 0, explod]
type = explod
trigger1 = teamside = 2
trigger1 = !time
anim = 7511
id = 7500
pos = 160,78
postype = right
bindtime = -1
scale = 1,1
sprpriority = 10
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time <= 20
pos = ceil(160-(time*10)),78
postype = right
id = 7500

[State 0, explod]
type = modifyexplod
trigger1 = teamside = 2
trigger1 = numexplod(7500)
trigger1 = time = 22
pos = -32,78
postype = right
id = 7500

[State 0, var]
type = varset
trigger1 = root,stateno != 700
trigger1 = root,stateno != 10700
var(0) = 0
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 10001
trigger2 = root,stateno = 10910
trigger3 = root,stateno = 10950
var(0) = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = root,fvar(2) <= 20
;trigger1 = root,var(9) != 2 && !root,var(23)
var(0) = 2
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 4000
trigger2 = root,stateno = 4100
var(0) = 3
ignorehitpause = 1

;ファーストストライク判定
[State 0, var]
type = varset
trigger1 = root,movetype = H && (root,stateno != [120,159])
trigger2 = numpartner
trigger2 = partner,movetype = H && (partner,stateno != [120,159])
var(8) = 2
ignorehitpause = 1
[State 0, var]
type = varset
trigger1 = var(8) = 0
trigger1 = root,p2movetype = H && (root,p2stateno != [120,159])
trigger1 = root,var(40)
var(8) = 1
ignorehitpause = 1

[State 0, var];FIRST ATTACK!
type = varset
trigger1 = var(8) = 1
var(0) = 4
ignorehitpause = 1

[State 0, var]
type = varset
triggerall = root,time = 1
trigger1 = root,stateno = 700
trigger2 = root,stateno = 10700
var(0) = 5
ignorehitpause = 1

[State 0, end]
type = changestate
triggerall = roundstate = 2
triggerall = time > 1
trigger1 = var(0) && var(0) != 5
trigger2 = !var(0)
trigger2 = time > 60
value = 7500+var(0)
;===========================================================================
;勝利時画面移動停止
[Statedef 6000]
ctrl = 0
anim = 20000

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = -160,0

[State 0, end]
type = DestroySelf
trigger1 = roundstate != [3,4]
trigger1 = root,movetype = H
;===========================================================================
;勝利アイコン
[Statedef 9100]
ctrl = 0
anim = 20000

[state 0, helper]
type = helper
trigger1 = !time
helpertype = normal
name = "config"
stateno = 9105
id = 9105
pausemovetime = 999999
supermovetime = 999999

;「WIN」
[State 0, explod]
type = explod
triggerall = roundstate = 4
trigger1 = teamside = 1
trigger1 = time = 1
trigger1 = var(0)
anim = 9102
id = 9102
pos = -285,80
postype = left
sprpriority = 4

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9102)
trigger1 = time <= 20
id = 9102
pos = ceil(-285+(time*15)),80
postype = left

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9102)
trigger1 = time >= 81
id = 9102
pos = ceil(15-((time-80)*15)),80
postype = left


[State 0, explod]
type = explod
triggerall = roundstate = 4
trigger1 = teamside = 2
trigger1 = time = 1
trigger1 = var(0)
anim = 9102
id = 9103
pos = 130,80
postype = right
sprpriority = 4

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9103)
trigger1 = time <= 20
id = 9103
pos = ceil(130-(time*15)),80
postype = right

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9103)
trigger1 = time >= 81
id = 9103
pos = ceil(-170+((time-80)*15)),80
postype = right

[State 0, snd]
type = playsnd
trigger1 = time = 20
value = 0,28

;「To Be Continued...」
[State 0, explod]
type = explod
triggerall = roundstate = 4
triggerall = matchover
triggerall = teamside = 1
triggerall = time = 20
triggerall = var(1)
trigger1 = !root,fvar(11)
trigger2 = root,fvar(11)
trigger2 = numpartner
trigger2 = !partner,alive
anim = 9100
id = 9100
pos = 412,210
postype = left
scale = .8,.8
sprpriority = 150

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9100)
trigger1 = time <= 40
id = 9100
pos = ceil(412-((time-20)*20)),210
postype = left


[State 0, explod]
type = explod
triggerall = roundstate = 4
triggerall = matchover
triggerall = teamside = 2
triggerall = time = 20
triggerall = var(1)
trigger1 = !root,fvar(11)
trigger2 = root,fvar(11)
trigger2 = numpartner
trigger2 = !partner,alive
anim = 9101
id = 9101
pos = -412,210
postype = right
scale = .8,.8
sprpriority = 150

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9101)
trigger1 = time <= 40
id = 9101
pos = ceil(-412+((time-20)*20)),210
postype = right
;===========================================================================
;敗北演出
[Statedef 9200]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = -1
removetime = 60
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8200
id = 8200
pos = 0,0
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8200
id = 8205
pos = 0,0
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8201
pos = 0,96
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8201
id = 8206
pos = 0,96
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8202
id = 8202
pos = 0,160
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8202
id = 8207
pos = 0,160
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8203
id = 8203
pos = 0,224
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8203
id = 8208
pos = 0,224
postype = back
bindtime = -1
removetime = 60
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北演出2(蜂の巣)
[Statedef 9201]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, var]
type = varset
trigger1 = !time
fvar(2) = 0
ignorehitpause = 1

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = time > 6
fvar(2) = fvar(0)
ignorehitpause = 1

;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = 0;-1
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8200
pos = 0,0
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8205
pos = 0,0
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8201
pos = 0,96
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8206
pos = 0,96
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8202
pos = 0,160
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8207
pos = 0,160
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8203
pos = 0,224
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8208
pos = 0,224
postype = back
bindtime = 0;-1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;穴
[State 0, var]
type = varrandom
trigger1 = time = 6
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110+var(10)
id = 9110
pos = 16,17
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 6
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110+var(10)
id = 9111
pos = 24,117
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9110
id = 9112
pos = 9,212
postype = back
bindtime = -1
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9113
pos = 40,18
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9114
pos = 43,115
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 8
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9110+var(10)
id = 9115
pos = 22,209
postype = back
bindtime = -1
ownpal = 0
sprpriority = -19
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9116
pos = 92,4
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9117
pos = 89,127
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 9
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9110+var(10)
id = 9118
pos = 36,209
postype = back
bindtime = -1
ownpal = 0
sprpriority = -18
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9111
id = 9119
pos = 119,38
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9110
id = 9120
pos = 124,100
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, var]
type = varrandom
trigger1 = time = 12
v = 10
range = 0,1
[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9110+var(10)
id = 9121
pos = 88,188
postype = back
bindtime = -1
ownpal = 0
sprpriority = -17
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 16
anim = 9111
id = 9122
pos = 133,112
postype = back
bindtime = -1
ownpal = 0
sprpriority = -16
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 16
anim = 9110
id = 9123
pos = 131,190
postype = back
bindtime = -1
ownpal = 0
sprpriority = -16
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 20
anim = 9112
id = 9124
pos = 177,68
postype = back
bindtime = -1
ownpal = 0
sprpriority = -15
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 20
anim = 9112
id = 9125
pos = 157,220
postype = back
bindtime = -1
ownpal = 0
sprpriority = -15
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 22
anim = 9110
id = 9126
pos = 166,220
postype = back
bindtime = -1
ownpal = 0
sprpriority = -14
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 26
anim = 9110
id = 9127
pos = 187,28
postype = back
bindtime = -1
ownpal = 0
sprpriority = -13
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9110)
id = 9110
pos = ceil(16-fvar(2)),17
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9111)
id = 9111
pos = ceil(24-fvar(2)),117
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9112)
id = 9112
pos = ceil(9-fvar(2)),212
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9113)
id = 9113
pos = ceil(40-fvar(2)),18
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9114)
id = 9114
pos = ceil(43-fvar(2)),115
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9115)
id = 9115
pos = ceil(22-fvar(2)),209
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9116)
id = 9116
pos = ceil(92-fvar(2)),4
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9117)
id = 9117
pos = ceil(89-fvar(2)),127
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9118)
id = 9118
pos = ceil(36-fvar(2)),209
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9119)
id = 9119
pos = ceil(119-fvar(2)),38
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9120)
id = 9120
pos = ceil(124-fvar(2)),100
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9121)
id = 9121
pos = ceil(81-fvar(2)),188
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9122)
id = 9122
pos = ceil(133-fvar(2)),112
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9123)
id = 9123
pos = ceil(131-fvar(2)),190
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9124)
id = 9124
pos = ceil(177-fvar(2)),68
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9125)
id = 9125
pos = ceil(166-fvar(2)),220
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9126)
id = 9126
pos = ceil(157-fvar(2)),220
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9127)
id = 9127
pos = ceil(187-fvar(2)),28
postype = back
ignorehitpause = 1


[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9110

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9111

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9112

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9113

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9114

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9115

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9116

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9117

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9118

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9119

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9120

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9121

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9122

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9123

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9124

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9125

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9126

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9127

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北演出3(血)
[Statedef 9202]
ctrl = 0
anim = 20000

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 0, turn]
type = turn
trigger1 = !time
trigger1 = facing != root,facing

[State 0, assert]
type = assertspecial
trigger1 = time <= 60
flag = NoBG
flag2 = NoFG

[State 0, pal]
type = palfx
trigger1 = time = [10,34]
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
ignorehitpause = 1

[State 0, pal]
type = palfx
trigger1 = time > 34
add = 128,128,128
time = 1
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(0) = 100
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time = 1
fvar(2) = 0
ignorehitpause = 1

[State 0, var]
type = varset
trigger1 = time > 1
fvar(0) = ifelse(fvar(0)*.6<.3,.3,fvar(0)*.6)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = 1
fvar(1) = fvar(0)
ignorehitpause = 1

[State 0, var]
type = varadd
trigger1 = time >= 6
fvar(2) = fvar(0)
ignorehitpause = 1


;cut in
[State 0, explod]
type = explod
trigger1 = !time
anim = 9200
id = 9200
pos = 160,120
postype = back
bindtime = -1
ownpal = 0
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
sprpriority = -25
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1

;back1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8200
pos = 0,0
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8205
id = 8205
pos = 0,0
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back2
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8201
pos = 0,96
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8206
id = 8206
pos = 0,96
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back3
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8202
pos = 0,160
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8207
id = 8207
pos = 0,160
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;back4
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8203
pos = 0,224
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
[State 0, explod]
type = explod
trigger1 = !time
anim = 8208
id = 8208
pos = 0,224
postype = back
bindtime = -1
ownpal = 0
sprpriority = -30
pausemovetime = 999999
supermovetime = 999999

;血
[State 0, explod]
type = explod
trigger1 = time = 3
anim = 9150+random%3
id = 9150
pos = 42,9
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 4
anim = 9150+random%3
id = 9151
pos = 18,122
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 5
anim = 9150+random%3
id = 9152
pos = 24,196
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 6
anim = 9150+random%3
id = 9153
pos = 180,55
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 7
anim = 9150+random%3
id = 9154
pos = 30,103
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 8
anim = 9150+random%3
id = 9155
pos = 68,172
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 9
anim = 9150+random%3
id = 9156
pos = 206,44
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 10
anim = 9150+random%3
id = 9157
pos = 49,106
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 11
anim = 9150+random%3
id = 9158
pos = 156,230
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 12
anim = 9150+random%3
id = 9159
pos = 130,138
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 13
anim = 9150+random%3
id = 9160
pos = 191,227
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999

[State 0, explod]
type = explod
trigger1 = time = 14
anim = 9150+random%3
id = 9161
pos = 128,115
postype = back
bindtime = -1
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
ownpal = 0
sprpriority = -20
pausemovetime = 999999
supermovetime = 999999


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9200)
id = 9200
pos = ceil(400-fvar(1)),120
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8200)
id = 8200
pos = -(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8201)
id = 8201
pos = -(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8202)
id = 8202
pos = -(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8203)
id = 8203
postype = back
pos = -(time*20)%512,224
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8205)
id = 8205
pos = 512-(time*8)%512,0
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8206)
id = 8206
pos = 512-(time*12)%512,96
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8207)
id = 8207
pos = 512-(time*16)%512,160
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(8208)
id = 8208
pos = 512-(time*20)%512,224
postype = back
ignorehitpause = 1


[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9150)
id = 9150
pos = ceil(42-fvar(2)),9
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9151)
id = 9151
pos = ceil(18-fvar(2)),122
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9152)
id = 9152
pos = ceil(24-fvar(2)),196
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9153)
id = 9153
pos = ceil(180-fvar(2)),55
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9154)
id = 9154
pos = ceil(30-fvar(2)),103
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9155)
id = 9155
pos = ceil(68-fvar(2)),172
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9156)
id = 9156
pos = ceil(206-fvar(2)),44
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9157)
id = 9157
pos = ceil(49-fvar(2)),106
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9158)
id = 9158
pos = ceil(156-fvar(2)),230
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9159)
id = 9159
pos = ceil(166-fvar(2)),138
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9160)
id = 9160
pos = ceil(191-fvar(2)),227
postype = back
ignorehitpause = 1

[State 0, explod]
type = modifyexplod
trigger1 = numexplod(9161)
id = 9161
pos = ceil(128-fvar(2)),115
postype = back
ignorehitpause = 1



[State 0, explod]
type = removeexplod
trigger1 = time = 60
trigger2 = roundstate = 4
id = 9200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8200

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8201

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8202

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8203

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8205

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8206

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8207

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 8208

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9150

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9151

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9152

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9153

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9154

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9155

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9156

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9157

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9158

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9159

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9160

[State 0, explod]
type = removeexplod
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)
id = 9161

[State 0, end]
type = DestroySelf
trigger1 = roundstate = 4
trigger2 = !numexplod(9200)

;---------------------------------------------------------------------------
;敗北時演出（横切断）
[Statedef 9203]
ctrl = 0
anim = 9999
type = A
movetype = I
physics = N

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 9000, 1]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 9000, Assert]
type = AssertSpecial
trigger1 = time < 60
flag = NoFG
flag2 = NoBG

[State 9000, EnvColor]
type = palfx
trigger1 = time = (10,35)
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
persistent = 1
ignorehitpause = 1

[State 9000, EnvColor]
type = palfx
trigger1 = time >= 35
add = 128,128,128
time = 1
persistent = 1
ignorehitpause = 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9000, VarSet]
type = VarSet
trigger1 = time = 1
fvar(38) = 170

[State 9000, VarSet]
type = VarSet
trigger1 = 1
fvar(38) = ifelse(fvar(38)*.6<.33,.33,fvar(38)*.6)

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(39) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(39) = -2.7*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(37) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(37) = 2.7*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
;fvar(36) = -1.98*root,const(size.yscale)
fvar(36) = -1.00*root,const(size.yscale)
ignorehitpause = 1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9201
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9202
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9203
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9204
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8730
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8731
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8732
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8733
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8735
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8736
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8737
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8738
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7911)
Id = 7911
postype = back
pos = ceil(400-fvar(39)),ceil(120-fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7912)
Id = 7912
postype = back
pos = ceil(400-fvar(37)),ceil(120+fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8730)
Id = 8730
postype = back
pos = -(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8731)
Id = 8731
postype = back
pos = -(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8732)
Id = 8732
postype = back
pos = -(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8733)
Id = 8733
postype = back
pos = -(time*20)%512,216
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8735)
Id = 8735
postype = back
pos = 512-(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8736)
Id = 8736
postype = back
pos = 512-(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8737)
Id = 8737
postype = back
pos = 512-(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8738)
Id = 8738
postype = back
pos = 512-(time*20)%512,216
ignorehitpause = 1

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7911

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7912

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8730

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8731

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8732

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8733

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8735

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8736

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8737

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8738

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)

;---------------------------------------------------------------------------
;敗北時演出（縦切断）
[Statedef 9204]
ctrl = 0
anim = 9999
type = A
movetype = I
physics = N

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 0,19

[State 9000, 1]
type = turn
trigger1 = time = 0
trigger1 = facing != root,facing

[State 9000, Assert]
type = AssertSpecial
trigger1 = time < 60
flag = NoFG
flag2 = NoBG

[State 9000, EnvColor]
type = palfx
trigger1 = time = (10,35)
add = 5*(time-10),5*(time-10),5*(time-10)
time = 1
persistent = 1
ignorehitpause = 1

[State 9000, EnvColor]
type = palfx
trigger1 = time >= 35
add = 128,128,128
time = 1
persistent = 1
ignorehitpause = 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9001, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = 9000, 1

[State 9000, VarSet]
type = VarSet
trigger1 = time = 1
fvar(38) = 170

[State 9000, VarSet]
type = VarSet
trigger1 = 1
fvar(38) = ifelse(fvar(38)*.6<.33,.33,fvar(38)*.6)

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(39) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(39) = 1.95*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = 1
fvar(37) = fvar(38)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(37) = -1.75*root,const(size.xscale)
ignorehitpause = 1

[State 9000, VarAdd]
type = VarAdd
trigger1 = time >= 6
fvar(36) = 3*root,const(size.yscale)
ignorehitpause = 1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9201
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9203
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9202
id = 7911
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 9204
id = 7912
pos = 160,120
postype = back
sprpriority = -90
ownpal = 0
bindtime = -1
removetime = 60
scale = 1.4*root,const(size.xscale),1.4*root,const(size.yscale)
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8730
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8731
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8732
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8733
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8205
id = 8735
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8206
id = 8736
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8207
id = 8737
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, Explod]
type = Explod
trigger1 = Time = 0
anim = 8208
id = 8738
pos = 0,0
postype = back
sprpriority = -105
ownpal = 0
bindtime = -1
removetime = 60
pausemovetime = -1
supermovetime = -1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7911)
Id = 7911
postype = back
pos = ceil(400-fvar(39)),ceil(120+fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(7912)
Id = 7912
postype = back
pos = ceil(400-fvar(37)),ceil(120-fvar(36))
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8730)
Id = 8730
postype = back
pos = -(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8731)
Id = 8731
postype = back
pos = -(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8732)
Id = 8732
postype = back
pos = -(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8733)
Id = 8733
postype = back
pos = -(time*20)%512,216
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8735)
Id = 8735
postype = back
pos = 512-(time*8)%512,-8
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8736)
Id = 8736
postype = back
pos = 512-(time*12)%512,88
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8737)
Id = 8737
postype = back
pos = 512-(time*16)%512,152
ignorehitpause = 1

[State 9000, ModifyExplod]
type = ModifyExplod
trigger1 = Numexplod(8738)
Id = 8738
postype = back
pos = 512-(time*20)%512,216
ignorehitpause = 1

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7911

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = time = 60
trigger2 = RoundState = 4
id = 7912

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8730

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8731

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8732

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8733

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8735

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8736

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8737

[State 9000, RemoveExplod]
type = RemoveExplod
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)
id = 8738

[State 9000, DestroySelf]
type = DestroySelf
trigger1 = RoundState = 4
trigger2 = !NumExplod(7911)

;---------------------------------------------------------------------------
;管理ヘルパー
[Statedef 20032]
ctrl = 0
anim = 9999
ownpal = 1

;config呼び出し
[State 6000, Helper]
type = Helper
trigger1 = time = 1
id = 7525
name = "config"
pos = -300,0
postype = Left
stateno = 7525
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●
;アドガ用
[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(16) = 0

[State 8500, 1]
type = varset
trigger1 = parent,stateno = 150
trigger2 = parent,stateno = 152
var(16) = parent,GetHitVar(ctrltime)

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(15) = 0

[State 8500, 1]
type = varadd
trigger1 = parent,stateno = 153
var(15) = 1

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(14) = 0

[State 8500, 1]
type = varadd
trigger1 = parent,stateno = 151
var(14) = 1

[State 8500, 1]
type = varset
trigger1 = parent,stateno != [150,715]
var(13) = 0

[State 8500, 1]
type = varset
trigger1 = parent,stateno = 150
trigger2 = parent,stateno = 152
var(13) = parent,GetHitVar(hittime)

;---------------------------------------------------------------------------
;敵横吹っ飛び（生存時）
[Statedef 1281]
type = A
movetype = H
physics = N
anim = 5030
velset = -10,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .22

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030 && !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = changestate
trigger1 = backedgebodydist <= 10
value = 1282

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵横吹っ飛び（壁激突）
[Statedef 1282]
type = A
movetype = H
physics = N
anim = 5012
velset = 0,0

[State 821, 2] 
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0
;movecamera = 1,0

[State 0, shake]
type = envshake
trigger1 = !time
time = 10
freq = 85
ampl = -5

[State 0, anim]
type = changeanim
trigger1 = time < 6
value = anim

[State 0, anim]
type = changeanim
trigger1 = time = 6
value = 5050

[State 0, vel]
type = velset
trigger1 = time = 6
x = 2.2
y = -4.8

[State 0, turn]
type = turn
trigger1 = time = 6

[State 0, vel]
type = veladd
trigger1 = time > 6
y = .32

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵吹っ飛び（死亡時）
[Statedef 1290]
type = A
movetype = H
physics = N
anim = 5030
velset = -8,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .44

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030
trigger1 = !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●●

;---------------------------------------------------------------------------
;敵横吹っ飛び2（生存時）
[Statedef 1283]
type = A
movetype = H
physics = N
anim = 5030
velset = 10,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .22

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030 && !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = changestate
trigger1 = backedgebodydist <= 10
trigger2 = FrontEdgeBodyDist <= 10
value = 1284

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵横吹っ飛び2（壁激突）
[Statedef 1284]
type = A
movetype = H
physics = N
anim = 5012
velset = 0,0

[State 821, 2] 
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
;triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 

[State 0, screen]
type = screenbound
trigger1 = 1
value = 0
;movecamera = 1,0

[State 0, shake]
type = envshake
trigger1 = !time
time = 10
freq = 85
ampl = -5

[State 0, anim]
type = changeanim
trigger1 = time < 6
value = anim

[State 0, anim]
type = changeanim
trigger1 = time = 6
value = 5050

[State 0, vel]
type = velset
trigger1 = time = 6
x = 2.2
y = -4.8

[State 0, turn]
type = turn
trigger1 = time = 6

[State 0, vel]
type = veladd
trigger1 = time > 6
y = .32

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;---------------------------------------------------------------------------
;敵吹っ飛び2（死亡時）
[Statedef 1293]
type = A
movetype = H
physics = N
anim = 5030
velset = 8,-8

[State 0, screen]
type = screenbound
trigger1 = 1
value = 1
movecamera = 1,0

[State 0, nhb]
type = null;nothitby
trigger1 = 1
value = SCA

[State 0, vel]
type = veladd
trigger1 = 1
y = .44

[State 0, push]
type = playerpush
trigger1 = 1
value = 0

[State 0, anim]
type = changeanim
trigger1 = anim = 5030
trigger1 = !animtime
trigger1 = SelfAnimExist(5035)
value = 5035
persistent = 0

[State 0, anim]
type = changeanim
trigger1 = vel y > 0
value = 5050
persistent = 0

[State 0, end]
type = selfstate
trigger1 = vel y > 0
trigger1 = pos y >= 0
value = 5100

;===========================================================================
;helper
[Statedef 10000]
type = U
movetype = I
physics = N
anim = 20000
ctrl = 0
velset = 0,0
sprpriority = -1

[State 0, btr]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 0, turn]
type = turn
trigger1 = facing != root,facing

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,var(0) || root,var(31)
trigger1 = root,stateno = 11000
trigger1 = root,animelem = 3
trigger2 = root,stateno = 3910
trigger2 = root,animelem = 3
value = 11005

[State 0, end]
type = changestate
triggerall = root,movetype != H
trigger1 = root,stateno = 1100
trigger2 = root,stateno = 3010
trigger3 = root,stateno = 3110
trigger4 = root,stateno = 700
value = 1105

[State 0, end]
type = changestate
triggerall = root,movetype != H
triggerall = root,var(0)
trigger1 = root,stateno = 1311
trigger1 = root,animelem = 3 && root,anim = 11000
value = 1312

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 890]
type    = A
movetype= H
physics = N

[State 1000, 0]
type = HitFallSet
trigger1 = time = 0
value = 0

[State 5040, 1]
type = SelfState
trigger1 = time = 0
value = 5040

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 895]
type    = L
movetype= H
physics = N
anim = 5070
velset = 0,0

[State 5071, 1]
type = VelSet
trigger1 = Time = 0
x = -10

[State 5071, 2]
type = VelMul
trigger1 = 1
x = .85

[State 5071, 1]
type = VelSet
trigger1 = Time = 16
x = 0

[State 5071, 4] ;Hit ground
type = SelfState
trigger1 = Time = 16
value = 5110


[ja.Quotes]
victory1 = "一度闘った相手にはもう絶っ～対に\n\負けんのだァァァァァっ！！"
victory2 = "イーッヒッヒ…おまえには勝てんよ！"
victory3 = "ウッシャァァァァッ！"
victory4 = "絶っ～対に！　負けなあああああいィィィ"
victory5 = "おまえの攻撃のパターンは全部憶えた…"
victory6 = "俺の名はカーン…\nアヌビスの暗示のスタンド使いッ！"
victory7 = "…何度やっても…同じことだ…"
victory8 = "闘うたびにオレは強くなる…"