; ADD004 BASIC PIEs ReBuilded CNS (10/5/2020)



;==============================================================================
; {C:\Users\Alex\Documents\mugen-1.1b1copy\chars\Kenshiro_C\Kenshiro.cns}
;==============================================================================

;---------------------------------------------------------------------------
[Data]
life = 1000
power = 2000
attack = 86;88
defence = 100
fall.defence_up = 50
liedown.time = 19
airjuggle = 63
sparkno = 0
guard.sparkno = 40;S8003
KO.echo = 0
volume = 100
IntPersistIndex = 0;0,59
FloatPersistIndex = 0;40

[Size]
xscale = 0.5;1           ;Horizontal scaling factor.
yscale = 0.5;1           ;Vertical scaling factor.
ground.back = 14;24     ;Player width (back, ground)
ground.front = 12;26    ;Player width (front, ground)
air.back = 20        ;Player width (back, air)
air.front = 20       ;Player width (front, air)
z.width = 3          ;Player width (into and out)
height = 120	         ;Height of player (for opponent to jump over)
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too   
shadowoffset = 0     ;Number of pixels to vertically offset the shadow
draw.offset = 0,0    ;Player drawing offset in pixels (x, y)
head.pos = 5, -122

[Velocity]
walk.fwd  = 2.2
walk.back = -2.2
run.fwd  = 4.3130434, 0
run.back = -4.5,-4.1
jump.neu = 0,-10.75
jump.back = -3.65,1
jump.fwd = 3.6,1
runjump.back = -2.55,-8.1
runjump.fwd = 4,-8.1
airjump.neu = 0,-8.1
airjump.back = -2.55
airjump.fwd = 2.5

[Movement]
airjump.num = 0;1    ;Number of air jumps allowed (opt)
airjump.height = 45  ;Minimum distance from ground before you can air jump (opt)
yaccel = .58         ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching

;---------------------------------------------------------------------------
; タイムオーバーで負けた時
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 00];
type = PlaySnd
trigger1 = animelem = 2
value = 170,0

[State 00]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; 勝った動作
[Statedef 180]
type = S

[State 01];
type = ChangeState
trigger1 = Anim != 3070
trigger1 = Anim != 3121
value = 181

;[State 01];
;type = ChangeState
;trigger1 = var(21) = 1
;value = 188

;---------------------------------------------------------------------------
[Statedef 181]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 181
sprpriority = -1

[State 00];
type = PlaySnd
triggerall = time = 0
Trigger1 = Enemy,Name !="RAOH"||Enemy,Name != "RAOH ATL"||Enemy,Name != "KENOH"||Enemy,Name != "raou"
Trigger1 = Enemy,Name !="TOKI"||Enemy,Name != "TOKI-(NERICYA)"||Enemy,Name != "Toki"
Trigger1 = Enemy,Name !="JAGI"||Enemy,Name != "Jagi"||Enemy,Name != "jagi"
value = 180,0;+(random%2)
channel = 2

[State 2000, 6];?なたが最大の強敵だった
type = PlaySnd
Trigger1 = Enemy,Name ="RAOH"||Enemy,Name="RAOH ATL"||Enemy,Name="KENOH"||Enemy,Name="raou"
trigger1 = time = 0
value = 180,10
channel = 2

[State 2000, 6];痩せたな…トキ…
type = PlaySnd
Trigger1 = Enemy,Name ="TOKI"||Enemy,Name="TOKI-(NERICYA)"||Enemy,Name="Toki"
trigger1 = time = 0
value = 180,11
channel = 2

[State 2000, 6];貴様には、その醜い死に様がふさわしい
type = PlaySnd
Trigger1 = Enemy,Name ="JAGI"||Enemy,Name="Jagi"||Enemy,Name="jagi"
trigger1 = time = 0
value = 180,12
channel = 2

[State -2, Varset]
type = PlaySnd
triggerall = time = 0
trigger1 = enemy,authorname = "ahuron"
trigger1 = enemy,name = "SHIN"
trigger1 = enemy,var(21) = 1
trigger1 = enemy,prevstateno = 2200
trigger2 = enemy,authorname = "konpeitou"
trigger2 = enemy,name = "shin"
trigger2 = enemy,prevstateno = 2600
value = 3070,4
channel = 2

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time = [0,300]
flag = roundnotover

;---------------------------------------------------------------------------
; 勝った動作1[一撃]
[Statedef 188]
type = S
velset = 0,0
physics = N
sprpriority = 2
ctrl = 0

[State -2,0]
type = Changeanim
Trigger1 = var(55) = 0
trigger1 = time = 0
value = 3070

[State -2,0]
type = Changeanim
Trigger1 = var(55) != 0
trigger1 = time = 0
value = 3121

[state 0,0]
type = varset
trigger1 = time = 0
v = 24
value = 0

[state a]
type = ctrlset
trigger1 = time = 120
value = 1

[state a]
type = ctrlset
trigger1 = time = 121
value = 0

[State 2000, 6];お前はもう死んでいる
type = PlaySnd
triggerall = time = 10
triggerall = anim = 3070
Trigger1 = Enemy,Name !="RAOH"||Enemy,Name != "RAOH ATL"||Enemy,Name != "KENOH"||Enemy,Name != "raou"
Trigger1 = Enemy,Name !="TOKI"||Enemy,Name != "TOKI-(NERICYA)"||Enemy,Name != "Toki"
Trigger1 = Enemy,Name !="JAGI"||Enemy,Name != "Jagi"||Enemy,Name != "jagi"
Trigger1 = Enemy,Name !="SHIN"||Enemy,Name != "Shin"||Enemy,Name != "shin"
value = 3070,0
channel = 2

[State 2000, 6];…兄さん…
type = PlaySnd
Trigger1 = Enemy,Name ="RAOH"||Enemy,Name="RAOH ATL"||Enemy,Name="KENOH"||Enemy,Name="raou"
trigger1 = time = 10
trigger1 = anim = 3070
value = 3070,1
channel = 2

[State 2000, 6];病に冒されていなければ…トキ
type = PlaySnd
Trigger1 = Enemy,Name ="TOKI"||Enemy,Name="TOKI-(NERICYA)"||Enemy,Name="Toki"
trigger1 = time = 10
trigger1 = anim = 3070
value = 3070,2
channel = 2

[State 2000, 6];ジャギ、おれの名をいってみろ
type = PlaySnd
Trigger1 = Enemy,Name ="JAGI"||Enemy,Name="Jagi"||Enemy,Name="jagi"
trigger1 = time = 10
trigger1 = anim = 3070
value = 3070,3
channel = 2

[State 2000, 6];お前もまた良き強敵…
type = PlaySnd
triggerall = time = 10
triggerall = anim = 3121||anim = 3070
Trigger1 = Enemy,Name ="SHIN"||Enemy,Name="Shin"||Enemy,Name="shin"
trigger2 = enemy,name = "REI"
trigger3 = enemy,name = "Man of the Benevolent star"||enemy,name = "Shuh"||enemy,name = "SHYU"
value = 3070,4
channel = 2

[state a]
type = varadd
trigger1 = var(2) <= 1200
v = 2
value = 20

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 181, 4]
type = AssertSpecial
trigger1 = time <= 180
flag = roundnotover

;---------------------------------------------------------------------------
;イントロ
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 4]
type = ChangeState
trigger1 = enemy,name = "REI"
trigger2 = enemy,name = "MAMIYA"
trigger3 = enemy,name = "AMIBA"
trigger4 = enemy,name = "Amiba"
trigger5 = enemy,name = "Amiba"
trigger6 = enemy,name = "SHIN"
trigger6 = enemynear,Authorname = "konpeitou"
trigger6 = teamside = 2
value = 192

[State 190, 4]
type = ChangeState
trigger1 = enemy,name = "TOKI"
trigger2 = enemy,name = "Toki"
trigger3 = enemy,name = "toki"
trigger4 = enemy,name = "TOKI-(NERICYA)"
value = 193

[State 190, 4]
type = ChangeState
trigger1 = enemy,name = "SHIN"
value = 194

[State 190, 4]
Type = ChangeState
Trigger1 = time >= 0
value = 191

;---------------------------------------------------------------------------
; 通常登場
[Statedef 191]
type = S
ctrl = 0
anim = 191
velset = 0,0

[state 0,0]
type = varrandom
trigger1 = time = 1
v = 19
range = 0,1

[state 0,0]
type = varset
triggerall = time = 2
trigger1 = enemy,name = "RAOH"
trigger2 = enemy,name = "KENOH"
trigger3 = enemy,name = "raou"
trigger4 = enemy,name = "RAOH ATL"
v = 19
value = 10
[state 0,0]
type = varset
triggerall = time = 2
trigger1 = enemy,name = "THOUTHER"
trigger2 = enemy,name = "Thouther"
v = 19
value = 11
[state 0,0]
type = varset
TriggerAll = !(ishelper)
triggerall = time = 2
trigger1 = enemy,name = "JUDA-(NERICYA)"
v = 19
value = 12
[state 0,0]
type = varset
TriggerAll = !(ishelper)
triggerall = time = 2
trigger1 = enemy,name = "Heart&Heart"
trigger2 = enemy,name = "Mr.HEART"
v = 19
value = 13
[state 0,0]
type = varset
TriggerAll = !(ishelper)
triggerall = time = 2
trigger1 = enemy,name = "JAGI"
trigger2 = enemy,name = "Jagi"
trigger3 = enemy,name = "jagi"
v = 19
value = 14

[State 190, 2]
type = PlaySnd
trigger1 = var(19) = 0
trigger1 = time = 4
value = 191,0
channel = 0
[State 190, 2]
type = PlaySnd
triggerall = var(19) = 1
triggerall = time = 4
trigger1 = enemy,name != "Man of the Benevolent star"
trigger2 = enemy,name != "Shuh"
trigger3 = enemy,name != "SHYU"
trigger4 = enemy,name != "Shuh,Man of the Benevolent star:the successor of South Dipper White-Heron Arts"
value = 191,1
channel = 0

[State 190, 2]
type = PlaySnd
triggerall = anim = 191
trigger1 = animelem = 3
trigger2 = animelem = 6
value = 190,0

[State 190, 2]
type = PlaySnd
trigger1 = var(19) = 10
trigger1 = time = 4
value = 191,10+random%2
channel = 0

[State 190, 2]
type = PlaySnd
trigger1 = var(19) = 11
trigger1 = time = 4
value = 191,12
channel = 0

[State 190, 2]
type = PlaySnd
trigger1 = var(19) = 12
trigger1 = time = 4
value = 191,13
channel = 0

[State 190, 2]
type = PlaySnd
trigger1 = var(19) = 13
trigger1 = time = 4
value = 191,14
channel = 0

[State 190, 2]
type = PlaySnd
trigger1 = var(19) = 14
trigger1 = time = 4
value = 191,15
channel = 0

[State 190, 2]
type = PlaySnd
triggerall = var(19) = 1
triggerall = time = 4
trigger1 = enemy,name = "Man of the Benevolent star"
trigger2 = enemy,name = "Shuh"
trigger3 = enemy,name = "SHYU"
value = 191,16
channel = 0

[State 190, 2]
type = AssertSpecial
trigger1 = time <= 300
flag = Intro

[state 0,0]
type = changeanim
trigger1 = animtime = 0
value = 0

;---------------------------------------------------------------------------
; VS　レイ マミヤ
[Statedef 192]
type = S
ctrl = 0
velset = 0,0
anim = 192

[state 0,0]
type = varset
Triggerall = !(ishelper)
triggerall = time = 2
trigger1 = enemy,name = "REI"
v = 19
value = 0

[state 0,0]
type = varset
Triggerall = !(ishelper)
triggerall = time = 2
trigger1 = enemy,name = "MAMIYA"
v = 19
value = 1

[state 0,0]
type = varset
Triggerall = !(ishelper)
triggerall = time = 2
trigger1 = enemy,name = "AMIBA"
trigger2 = enemy,name = "Amiba"
trigger3 = enemy,name = "amiba"
v = 19
value = 2

[state 0,0]
type = varset
Triggerall = !(ishelper)
triggerall = time = 2
trigger1 = enemy,name = "SHIN"
trigger2 = enemy,name = "Shin"
trigger3 = enemy,name = "shin"
v = 19
value = 3

[State 190, 2]
type = PlaySnd
trigger1 = var(19) = 0
trigger1 = time = 4
value = 192,0
channel = 0

[State 190, 2]
type = PlaySnd
trigger1 = var(19) = 1
trigger1 = time = 4
value = 192,1
channel = 0

[State 190, 2]
type = PlaySnd
trigger1 = var(19) = 2
trigger1 = time = 4
value = 192,2
channel = 0

[State 190, 2]
type = PlaySnd
trigger1 = var(19) = 3
trigger1 = time = 150
value = 192,3
channel = 0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 2]
Type = ChangeState
;trigger1 = enemy,name = "REI"
Trigger1 = time = 504
value = 0

[State 190, 2]
Type = ChangeState
trigger1 = enemy,name = "MAMIYA"
Trigger1 = time = 318
value = 0

[State 190, 2]
Type = ChangeState
Triggerall = time = 332
trigger1 = enemy,name = "SHIN"
trigger2 = enemy,name = "Shin"
trigger3 = enemy,name = "shin"
value = 0

[State 190, 2]
Type = ChangeState
trigger1 = enemy,name = "AMIBA"
trigger1 = enemynear,Authorname = "NERICYA"
Trigger1 = time = 452
value = 0

;---------------------------------------------------------------------------
; VS　トキ
[Statedef 193]
type = S
ctrl = 0
velset = 0,0
anim = 193

[State 190, 2]
type = PlaySnd
trigger1 = time = 10
value = 193,0
channel = 0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 2]
Type = ChangeState
Trigger1 = Time = 452
value = 0

;---------------------------------------------------------------------------
; VS　シン
[Statedef 194]
type = S
ctrl = 0
velset = 0,0
anim = 194

[State 190, 2]
type = PlaySnd
trigger1 = time = 4
value = 194,0
channel = 0

[State 190, 2]
type = AssertSpecial
trigger1 = time <= 240
flag = Intro

[State 190, 2]
Type = ChangeState
Trigger1 = time = 482
value = 0

;---------------------------------------------------------------------------
; 挑発の動作
[Statedef 199]
type = S
ctrl = 0
anim = 199
velset = 0,0
movetype = I
physics = S
sprpriority = 1

[State 199, 3];
type = PlaySnd
trigger1 = animelem = 6
value = 199,0

[State 199, 1]
type = CtrlSet
trigger1 = animelem = 60
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち弱パンチ
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 200
poweradd = 0

[State 200, 1]
type = HitDef
trigger1 = animelem = 2
attr = S, NA
damage = ceil(ifelse(fvar(0)*50<5,5,fvar(0)*50)), ifelse(var(24)>0,6,0)
getpower = ceil(fvar(0)*51),51
animtype = Light
guardflag = M
hitflag = MAF
priority = 6, Hit
pausetime = 10,9
sparkno = -1;s7000+(random%8)
sparkxy = -15, -244/2
hitsound = s400, 0+(random%2)
guard.sparkno = -1;s7100
guardsound = s120, 0
ground.type = high
ground.slidetime = 6
ground.hittime  = 10;+(P2StateType=C)
guard.hittime = 12;+(P2StateType=C)
guard.ctrltime = 12;+(P2StateType=C)
ground.velocity = -4
airguard.velocity = -1.9,-2
air.type = high
air.velocity = -2+0.25,ifelse(fvar(25)>0,-0.1,-4-3.4)
air.hittime = 10
air.fall = 1
p2facing = 1
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-4.5*1.3*1.2-var(30)*0.05,-4.5*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-4.5*1.3*1.2-var(30)*0.05)
fall.recovertime = 24
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 200

[State 200, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 200, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = animelem = 2
value = 200,0+(random%2)
channel = 0

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 200,]
type = statetypeset
trigger1 = animelem = 4
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,3,ceil(3*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 遠距離立ち弱パンチ
[Statedef 205]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 205
poweradd = 0

[State 205, 1]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
damage = ceil(ifelse(fvar(0)*39<5,5,fvar(0)*39)), ifelse(var(24)>0,6,0)
getpower = ceil(fvar(0)*51),51
animtype = Light
guardflag = M
hitflag = MAF
priority = 6, Hit
pausetime = 10,9
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 0+(random%2)
guard.sparkno = -1;s7100
guardsound = s120, 0
ground.type = high
ground.slidetime = 6
ground.hittime  = 10;+(P2StateType=C)
guard.hittime = 8;+(P2StateType=C)
guard.ctrltime = 8;+(P2StateType=C)
ground.velocity = -4
airguard.velocity = -1.9,-2
air.type = high
air.velocity = -2+0.3,ifelse(fvar(25)>0,-0.1,-4-3.4)
air.hittime = 12
air.fall = 1
p2facing = 1
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-4.5*1.3*1.2-var(30)*0.05,-4.5*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-4.5*1.3*1.2-var(30)*0.05)
fall.recovertime = 24
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 205

[State 205, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 205, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 2
value = 200,0+(random%2)
channel = 0

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-15), -110-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2-15), -110-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 205,]
type = statetypeset
trigger1 = animelem = 5
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=50 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,5,ceil(5*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 205, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 近距離立ち強パンチ
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 210
poweradd = 0

[State 210, 1]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
damage = ceil(ifelse(fvar(0)*56<5,5,fvar(0)*56)), ifelse(var(24)>0,6,0)
getpower = ceil(fvar(0)*102),102
animtype = medium
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 14, 13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -252/2
hitsound = s400, 2
guard.sparkno = -1;s7100
guardsound = s120, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 14+(P2StateType=C)
guard.hittime = 12+(P2StateType=C)
guard.ctrltime = 12+(P2StateType=C)
ground.velocity = -3.0
air.type = high
air.velocity = -2.5,ifelse(fvar(25)>0,-0.1,-7.0)
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-5.0*1.3*1.2-var(30)*0.05,-5.0*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-5.0*1.3*1.2-var(30)*0.05)
air.hittime = 50
air.fall = 1
p2facing = 1
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 210

[State 210, 1]
type = HitDef
trigger1 = animelem = 7
attr = S, NA
damage = ceil(ifelse(fvar(0)*56<5,5,fvar(0)*56)), 0
getpower = ceil(fvar(0)*119),119
animtype = medium
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 14, 13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -252/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s120, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -7.5
air.type = high
air.velocity = -3.0,ifelse(fvar(25)>0,-0.1,-7.0)
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-7.0*1.3*1.2-var(30)*0.05,-7.0*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-7.0*1.3*1.2-var(30)*0.05)
air.hittime = 50
air.fall = 1
p2facing = 1
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 210

[State 210, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 300, 1

;[State 210, 1];
;type = PlaySnd
;trigger1 = animelem = 6
;value = 300, 2

[State 210, 5]
type = PlaySnd
trigger1 = AnimElem = 5
value = 210,0+(random%3)
channel = 0

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=7,<0
Trigger1 = MoveHit=1
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
Trigger1 = animelem=7,>=0
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
trigger1 = MoveGuarded=1
Trigger1 = AnimElem=7,<0
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
Trigger1 = MoveGuarded
Trigger1 = animelem=7,>=0
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+25), -100-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
ignorehitpause = 1
persistent = 0
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 210,]
type = statetypeset
trigger1 = animelem = 8
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 16

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = animelem=6,<=0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,8,ceil(8*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = animelem=6,>0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち強パンチ
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 215
poweradd = 0

[state a]
type = velset
trigger1 = time = 10
x = 2

[State 215, 1]
type = HitDef
trigger1 = animelem = 6
attr = S, NA
damage = ceil(ifelse(fvar(0)*101<5,5,fvar(0)*101)),ifelse(var(24)>0,6,0)
getpower = ceil(fvar(0)*119),119
animtype = heavy
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 15, 14
sparkno = -1;s7000+(random%8)
sparkxy = -15, -212/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s120, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -7.5
airguard.velocity = -3.0,-2
air.type = high
air.velocity = -3,ifelse(fvar(25)>0,-0.1,-0.7)
air.fall = 1
p2facing = 1
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-12.0*1.3*1.2-var(30)*0.05,-12.0*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-12.0*1.3*1.2-var(30)*0.05)
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0
fall.yvelocity = var(3)*-0.2-1.0-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 215

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+25), -100-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
ignorehitpause = 1
persistent = 0
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[State 215, 1];
type = PlaySnd
trigger1 = animelem = 6
value = 300, 2

[State 215, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 6
value = 210,0+(random%3)
channel = 0

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 215,]
type = statetypeset
trigger1 = animelem = 8
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,8,ceil(8*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 215, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち弱キック
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 6
poweradd= 0
ctrl = 0
anim = 220
sprpriority = 1

[State a]
type = NotHitBy 
trigger1 = time=0
trigger1 = var(55)=1
value = SCA
time = 1

[State 220, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 300, 1

[State 220, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 3
value = 200,0+(random%2)
channel = 0

[State 220, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = medium
damage    = ceil(ifelse(fvar(0)*800<50,5,fvar(0)*50)),ifelse(var(24)>0,6,0)
priority = 5,Hit
getpower = ceil(fvar(0)*68),68
guardflag = M
pausetime = 11,10
sparkno = -1;s7000+(random%8)
sparkxy = -15,-188/2
hitsound   = s400,0+(random%2)
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 6
ground.hittime  = 12;+(P2StateType=C)
guard.hittime = 10;+(P2StateType=C)
guard.ctrltime = 10;+(P2StateType=C)
ground.velocity = -4.5
air.velocity = -2.5,ifelse(fvar(25)>0,-0.1,-8.0)
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
air.fall = 1
p2facing = 1
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-4.0*1.3*1.2-var(30)*0.05,-4.0*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-4.0*1.3*1.2-var(30)*0.05)
fall.recovertime = 24
ID = 220

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-15), -40-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2-15), -40-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 200,]
type = statetypeset
trigger1 = animelem = 4
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 14

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,5,ceil(5*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち弱キック
[Statedef 225]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 225
sprpriority = 1

[State 225, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 300, 1

[State 225, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 3
value = 200,0+(random%2)
channel = 0

[State 225, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = medium
damage    = ceil(ifelse(fvar(0)*39<5,5,fvar(0)*39)),ifelse(var(24)>0,6,0)
priority = 6, Hit
getpower = ceil(fvar(0)*68),68
guardflag = M
pausetime = 12,11
sparkno = -1;s7000+(random%8)
sparkxy = -15,-178/2
hitsound   = s400,0+(random%2)
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 12;+(P2StateType=C)
guard.hittime = 10;+(P2StateType=C)
guard.ctrltime = 10;+(P2StateType=C)
ground.velocity = -5
air.velocity = -2.5,ifelse(fvar(25)>0,-0.1,-8.0)
fall.recovertime = 24
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-4.5*1.3*1.2-var(30)*0.05,-4.5*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-4.5*1.3*1.2-var(30)*0.05)
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
air.fall = 1
p2facing = 1
ID = 225

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-25), -95-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2-25), -95-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 225,]
type = statetypeset
trigger1 = animelem = 4
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 14

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 2,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,5,ceil(5*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 225, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち強キック
[Statedef 230]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 230
sprpriority = 1

[State 230, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 3
value = 210,0+(random%3)
channel = 0

[State 230, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 300, 3


[State 230, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = hard
damage    = ceil(ifelse(fvar(0)*112<5,5,fvar(0)*53)),ifelse(var(24)>0,6,0)
priority = 7, Hit
getpower = ceil(fvar(0)*220),119
guardflag = M
hitflag = MAFD
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15,-232/2
hitsound   = s400,3
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 8
ground.hittime  = 19+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -7.5
air.velocity = -3.0,ifelse(fvar(25)>0,-0.1,-9.0);-9.2
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-12.0*1.3*1.2-var(30)*0.05,-12.0*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-12.0*1.3*1.2-var(30)*0.05)
fall.xvelocity = var(3)*-0.2-1.0
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
air.fall = 1
p2facing = 1
fall.recovertime = 50
ID = 230

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-20), -90-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+20), -90-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 200,]
type = statetypeset
trigger1 = animelem = 5
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,14,ceil(14*fvar(0)));
ignorehitpause = 1
persistent = 0

[state a]
type = changestate
trigger1 = var(59)<=0
trigger1 = movecontact
trigger1 = command = "holdup"
value = 40
;ignorehitpause = 1

[State 240, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち強キック
[Statedef 235]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 235
sprpriority = 1

[State 235, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 300, 3

[State 235, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 3
value = 210,0+(random%3)
channel = 0

[State 235, 2]
type = HitDef
trigger1 = animelem = 3
attr = S, NA
animtype  = hard
damage    = ceil(ifelse(fvar(0)*120<5,5,fvar(0)*63)),ifelse(var(24)>0,6,0)
priority = 7,Hit
getpower = ceil(fvar(0)*160),136
guardflag = M
pausetime = 16,15
sparkno = -1;s7000+(random%8)
sparkxy = -15,-114/2
hitsound   = s400,3
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = low
ground.slidetime = 7
ground.hittime  = 20+(P2StateType=C)
guard.hittime = 18+(P2StateType=C)
guard.ctrltime = 18+(P2StateType=C)
ground.velocity = -8.0
air.velocity = -3.0,ifelse(fvar(25)>0,-0.1,-7.0)
fall.recovertime = 9999
fall.xvelocity = var(3)*-0.2-1.0
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
air.fall = 1
p2facing = 1
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-8.0*1.3*1.2-var(30)*0.05,-8*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-8*1.3*1.2-var(30)*0.05)
fall.recover = 0
ID = 235

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+25), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 200,]
type = statetypeset
trigger1 = animelem = 5
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,14,ceil(14*fvar(0)));11
ignorehitpause = 1
persistent = 0

[State 235, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;屈み弱パンチ
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = 400
sprpriority = 1

[State 400, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 0

[State 400, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 2
value = 200,0+(random%2)
channel = 0

[State 400, 2]
type = HitDef
trigger1 = animelem = 2
attr = C, NA
damage    = ceil(ifelse(fvar(0)*34<5,5,fvar(0)*34)),ifelse(var(24)>0,6,0)
priority = 5, Hit
animtype  = Light
hitflag = MAF
guardflag = M
getpower = ceil(fvar(0)*51),51
pausetime = 10,9
sparkno = -1;s7000+(random%8)
sparkxy = -10,-134/2
hitsound   = s400,0
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = low
ground.slidetime = 6
ground.hittime  = 10;+(P2StateType=C)
guard.hittime = 10;+(P2StateType=C)
guard.ctrltime = 10;+(P2StateType=C)
ground.velocity = -4.5
air.velocity = -2.0,ifelse(fvar(25)>0,-0.1,-8.0)
air.fall = 1
p2facing = 1
fall.recovertime = 24
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-4.5*1.3*1.2-var(30)*0.05,-4.5*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-4.5*1.3*1.2-var(30)*0.05)
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 400

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-15), -60-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2-15), -60-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 400,]
type = statetypeset
trigger1 = animelem = 3 
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,5,ceil(5*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み強パンチ
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = 410
sprpriority = 1

[State 410, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 2

[State 410, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 2
value = 210,0+(random%3)
channel = 0

[State 410, 2]
type = HitDef
trigger1 = animelem = 5
attr = C, NA
damage    = ceil(ifelse(fvar(0)*95<5,5,fvar(0)*95)),ifelse(var(24)>0,6,0)
priority = 7, Hit
animtype  = hard
hitflag = MAF
guardflag = M
getpower = ceil(fvar(0)*119),119
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -10,-156/2
hitsound   = s400,3
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = low
air.type = Trip
ground.slidetime = 8
ground.hittime  = 19+(P2StateType=C)-1
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -7.5
air.velocity = -3.5,ifelse(fvar(25)>0,-0.1,-7.0)
air.fall = 1
p2facing = 1
fall.recovertime = 36
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-12.0*1.3*1.2-var(30)*0.05,-7.5*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-12.0*1.3*1.2-var(30)*0.05)
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 410

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-25), -50-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+25), -50-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
ignorehitpause = 1
persistent = 0
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 410,]
type = statetypeset
trigger1 = animelem = 6
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,14,ceil(14*fvar(0)));8
ignorehitpause = 1
persistent = 0

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み弱キック
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = 420
sprpriority = 1

[State 200, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 2
value = 200,0+(random%2)

[State 430, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 1

[State 430, 2]
type = HitDef
trigger1 = animelem = 3
attr = C, NA
damage    = ceil(ifelse(fvar(0)*34<5,5,fvar(0)*34)),ifelse(var(24)>0,6,0)
priority = 6, Hit
animtype  = Light
hitflag = MAFD
guardflag = L
getpower = ceil(fvar(0)*102),102
pausetime = 12,11
sparkno = -1;s7000+(random%8)
sparkxy = -10,-38/2
hitsound   = s400,2
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = Low
ground.slidetime = 6
ground.hittime  = 14+(P2StateType=C)
guard.hittime = 9+(P2StateType=C)
guard.ctrltime = 9+(P2StateType=C)
ground.velocity = -5.0
air.velocity = -2.5,ifelse(fvar(25)>0,-0.1,-8.0)
down.velocity = -5,0+1.5
down.hittime = 20
air.fall = 1
p2facing = 1
fall.recovertime = 24
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-5.0*1.3*1.2-var(30)*0.05,-5.0*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-5.0*1.3*1.2-var(30)*0.05)
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 420

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-20), -15-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2-20), -15-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 420,]
type = statetypeset
trigger1 = animelem = 4
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=431&&Time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=431&&Time=1
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=431&&Time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=431&&Time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=431&&Time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,5,ceil(5*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 420, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[state a]
type = changestate
trigger1 = var(59)<=0
trigger1 = movecontact
trigger1 = command = "holdup"
value = 40
;ignorehitpause = 1
;---------------------------------------------------------------------------
;屈強キック
[Statedef 430]
type    = C
movetype= A
physics = C
juggle  = 0
poweradd= 0
ctrl = 0
anim = 430
sprpriority = 1

[State 430, 2]
type = PlaySnd
trigger1 = animelem = 5
value = 300, 3

[State 430, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 2
value = 210,0+(random%3)
channel = 0

[State 430, 3]
type = HitDef
trigger1 = animelem = 5
attr = C, NA
damage    = ceil(ifelse(fvar(0)*78<5,5,fvar(0)*78)),ifelse(var(24)>0,6,0)
priority = 7, Hit
hitflag = MAFD
guardflag = L
pausetime = 16,15
sparkno = -1;s7000+(random%8)
getpower = ceil(fvar(0)*136),136
sparkxy = -15,-21
hitsound   = s400,3
guardsound = s120,0
guard.sparkno = -1;s7100
;ground.type = Trip
ground.type = high
ground.slidetime = 8
ground.hittime  = 20+(P2StateType=C)
guard.hittime = 18+(P2StateType=C)
guard.ctrltime = 18+(P2StateType=C)
ground.velocity = -4.0,-8.75
guard..velocity = -9.0
air.velocity = -4.0,ifelse(fvar(25)>0,-0.1,-4-4.5-4.5*(p2movetype=H))
guard.velocity = -6
fall = 1
air.fall = 1
p2facing = 1
fall.recover = 1
fall.recovertime = 50
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-8.0*1.3*1.2-var(30)*0.05,-7.0*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-8.0*1.3*1.2-var(30)*0.05)
guard.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-12)
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 430

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-25), -15-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+25), -15-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 430,]
type = statetypeset
trigger1 = animelem = 6
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,14,ceil(14*fvar(0)));
ignorehitpause = 1
persistent = 0

[State 430, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

[state a]
type = changestate
trigger1 = var(59)<=0
trigger1 = movecontact
trigger1 = command = "holdup"
value = 40
;---------------------------------------------------------------------------
;空中弱パンチ
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 600
sprpriority = 1

[State 600, 1];
type = PlaySnd
trigger1 = animelem = 1
value = 300, 0

[State 600, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 2
value = 200,0+(random%2)
channel = 0

[State a,@]
type = veladd
trigger1 = prevstateno=110||prevstateno=115
trigger1 = animelem = 3,<0
trigger1 = var(11)=0
trigger1 = frontedgebodydist<30
y = Const(MoveMent.Yaccel)*1.5

[State 600, 2]
type = HitDef
trigger1 = animelem = 2
attr = A, NA
damage    = ceil(ifelse(fvar(0)*34<5,5,fvar(0)*34)),ifelse(var(24)>0,6,0)
animtype  = Light
priority = 5, Hit
getpower = ceil(fvar(0)*51),51
guardflag = HA
pausetime = 11-(p2statetype!=A)+2, 10-1+2
sparkno = -1;s7000+(random%8)
sparkxy = -10,-164/2
hitsound   = s400,0+(random%2)
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 6
ground.hittime  = 10
guard.hittime = 8
guard.ctrltime = 8
ground.velocity = -5
air.velocity = ifelse(var(9)=0,-2,-3.0),ifelse(fvar(25)>0,-0.1,-3.5)
air.fall = 1
p2facing = 1
fall.recovertime = 24
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 600

[state a]
type = ctrlset
trigger1 = animelem = 5
value = 1

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[State 600,]
type = statetypeset
trigger1 = animelem = 5
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 12
y = 2

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,5,ceil(5*fvar(0)))
ignorehitpause = 1
persistent = 0

;---------------------------------------------------------------------------
;空中強パンチ
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 610
sprpriority = 1

[State 610, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 300, 2

[State 610, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 2
value = 210,0+(random%3)
channel = 0

[State a,@]
type = veladd
trigger1 = prevstateno=110||prevstateno=115
trigger1 = time <4
y = -Const(MoveMent.Yaccel)

[State 610, 2]
type = HitDef
trigger1 = animelem = 5
attr = A, NA
damage = ceil(ifelse(fvar(0)*84<5,5,fvar(0)*84)),ifelse(var(24)>0,6,0)
priority = 7,Hit
guardflag = HA
getpower = ceil(fvar(0)*119),119
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -10,-164/2
hitsound   = s400,3
guard.sparkno = -1;s7100
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -6.0
air.velocity = ifelse(var(9)=0,-2,-3.5),ifelse(fvar(25)>0,-0.1,-5.0)
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
air.fall = 1
p2facing = 1
fall.recovertime = 50
ID = 610

[state a]
type = ctrlset
trigger1 = animelem = 8
value = 1

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-15), -70-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+15), -60;-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[State 610,]
type = statetypeset
trigger1 = animelem = 6
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 12
y = 2

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,14,ceil(14*fvar(0)));11
ignorehitpause = 1
persistent = 0

;---------------------------------------------------------------
;空中弱キック
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 620
sprpriority = 1

[State 620, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 2
value = 200,0+(random%2)
channel = 0

[State 620, 1]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 1

[State a,@]
type = veladd
trigger1 = prevstateno=110||prevstateno=115
trigger1 = time <1
y = -Const(MoveMent.Yaccel)

[State 620, 2]
type = HitDef
trigger1 = animelem = 3
attr = A, NA
damage = ceil(ifelse(fvar(0)*34<5,5,fvar(0)*34)),ifelse(var(24)>0,6,0)
priority = 6, Hit
getpower = ceil(fvar(0)*102),102
guardflag = HA
pausetime = 11-(p2statetype!=A)+2, 10-1+2
sparkno = -1;s7000+(random%8)
sparkxy = -5,-156/2
hitsound   = s400,2
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 6
ground.hittime  = 15+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -5.0
air.velocity = ifelse(var(9)=0,-3,-3.5),ifelse(fvar(25)>0,-0.1,-5.0)
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
air.fall = 1
p2facing = 1
fall.recovertime = 30
ID = 620

[state a]
type = ctrlset
trigger1 = animelem = 6
value = 1

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-20), -50-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2-20), -50-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[State 200,]
type = statetypeset
trigger1 = animelem = 6
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 12
y = 2

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,5,ceil(5*fvar(0)))
ignorehitpause = 1
persistent = 0

;---------------------------------------------------------------------------
;空中強キック
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 630
sprpriority = 1

[State 630, 2]
type = PlaySnd
trigger1 = animelem = 3
trigger2 = animelem = 5
value = 300, 0

[State 630, 2]
type = PlaySnd
trigger1 = animelem = 7
value = 300, 1

[State 630, 5]
type = PlaySnd
trigger1 = random%3=0
trigger1 = AnimElem = 2
value = 210,0+(random%3)
channel = 0

[State a,@]
type = veladd
trigger1 = prevstateno=110||prevstateno=115;||vel y>=0
trigger1 = time <2
y = -Const(MoveMent.Yaccel)

[State 630, 3]
type = HitDef
trigger1 = animelem = 3
trigger2 = animelem = 5
trigger3 = animelem = 7
attr = A, NA
damage    = ceil(ifelse(fvar(0)*28<5,5,fvar(0)*28)),ifelse(var(24)>0,6,0)
priority = 6,Hit
guardflag = HA
getpower = ceil(fvar(0)*102),102
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -10,-148/2
hitsound   = s400,1
guard.sparkno = -1;s7100
guardsound = s120,0
animtype = hard
ground.type = high
ground.slidetime = 8
ground.hittime  = 14+(P2StateType=C)
guard.hittime = 12+(P2StateType=C)
guard.ctrltime = 12+(P2StateType=C)
ground.velocity = -5.0
guard.velocity = -11
air.velocity = ifelse(var(9)=0,-3.3+0.8,0),ifelse(fvar(25)>0,-0.1,-5.0)
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
air.fall = 1
p2facing = 1
fall.recovertime = 50
ID = 630

[state a]
type = ctrlset
trigger1 = animelem = 12
value = 1

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
Trigger1 = AnimElem=5,<0
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-20), -85-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
Trigger1 = AnimElem=5,<0
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2+20), -85;-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
Trigger1 = AnimElem=5,>=0
Trigger1 = AnimElem=7,<0
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-20), -70-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded
Trigger1 = AnimElem=5,>=0
Trigger1 = AnimElem=7,<0
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2+20), -70;-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
Trigger1 = AnimElem=7,>=0
id = 9700
anim = 9700
pos = Ceil(P2Dist X/2-20), -50-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded
Trigger1 = AnimElem=7,>=0
id = 9720
anim = 9720
pos = Ceil(P2Dist X/2+20), -50;-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[State 200,]
type = statetypeset
trigger1 = animelem = 8
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 12
y = 2

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
Trigger1 = AnimElem=5,<0
v = 16
value = ifelse(MoveGuarded,8,ceil(8*fvar(0)));
ignorehitpause = 1
persistent = 0
[state a]
type = varadd
trigger1 = movecontact = 1
Trigger1 = AnimElem=5,>=0
Trigger1 = AnimElem=7,<0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,8,ceil(8*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = animelem=7,<=0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,8,ceil(8*fvar(0)))
ignorehitpause = 1
persistent = 0

;---------------------------------------------------------------------------
;投げようとする
[Statedef 800]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 800
sprpriority = 1

[State 200,0]
Type = attackdist
Trigger1 = 1
value = 0

[State 800, 1]
type = HitDef
triggerall = animelem = 2
trigger1 = P2MoveType != H||enemy,ctrl
trigger2 = P2StateNo=95121
attr = S, NT
hitflag = M
priority = 5, Miss
sparkno = -1
hitsound = -1;S400, 1
sprpriority = 1
p1facing = ifelse (command = "holdback", -1, 1)
;p2facing = -1
p1stateno = 801
p2stateno = 805
fall = 1
fall.recover = 0
yaccel = 0.45
ID = 800

[State 200, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げ
[Statedef 801]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 801
sprpriority = 1

[state 0,0]
type = velset
trigger1 = time >= 0
x = 0
y = 0

;---------------------[サウンド]
[state 0,0]
type = playsnd
trigger1 = time = 20
value = 800,0
channel = 0

[state 0,0]
type = playsnd
trigger1 = time = 28
trigger2 = time = 46
value = 400,2

;---------------------[相手制御]
[State 0, 1]
type = TargetBind
trigger1 = time = 1
pos = 24,-120

[State 0, 1]
type = TargetBind
trigger1 = time = 10
pos = 24,-130

[State 0, 1]
type = TargetBind
trigger1 = time = 13
pos = 24,-150

[State 0, 1]
type = TargetBind
trigger1 = time = 63
pos = 24,-30

[state 0,0]
type = hitadd
trigger1 = time = 28
trigger2 = time = 46
value = 1

[state 0,0]
type = Targetlifeadd
trigger1 = time = 28
value = ceil(-78*fvar(0))
kill = 0
[state 0,0]
type = Targetlifeadd
trigger1 = time = 46
value = ceil(-78*fvar(0))

[state a]
type = Explod
trigger1 = time = 28
id = 9700
anim = 9700
pos = 24,-140
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = time = 46
id = 9700
anim = 9700
pos = 24,-140
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
triggerall = var(23) = 0
trigger1 = time = 28
trigger2 = time = 46
v = 16
value = 8

[state a]
type = varadd
trigger1 = time = 0
v = 42
value = 2

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = time = 0
edge = 40,0

[State a ,強化モード]
type = Helper
triggerall = Numhelper(2125)=0
triggerall = var(51) = 1
trigger1 = fvar(35) = 1
trigger1 = time = 0
helpertype = normal
name = "北斗残悔拳"
ID = 2125
stateno = 2126
postype = left
pos = 0,0
keyctrl = 0
ownpal = 1
pausemovetime = 500
supermovetime = 500

[State 200, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 投げられてる相手
[Statedef 805]
type    = A
movetype= H
physics = S
ctrl = 0
sprpriority = 0
velset =0,0

[state 0,0]
type = screenbound
trigger1 = 1
value = 0

[state 0,0]
type = velset
trigger1 = time = 63
x = -5
y = -8.25;-4.8

[state 0,0]
type = turn
trigger1 = time = 0
trigger1 = facing = enemy,facing

[state 0,0]
type = changeanim2
trigger1 = time = 0
value = 805

[state 0,0]
type = playerpush
trigger1 = 1
value = 0

[state 0,0]
type = changestate
trigger1 = time >= 63
value = 55050

;---------------------------------------------------------------------------
;掴み投げようとする
[Statedef 850]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 850
sprpriority = 2
velset = 3,0

[State 850,0]
Type = attackdist
Trigger1 = 1
value = 0

[state 0,0]
type = Velset
trigger1 = time <= 8
trigger1 = vel x<3
x = 3

[State 850, 1]
type = HitDef
trigger1 = animelem = 3
trigger1 = P2MoveType != H||enemy,ctrl
attr = S, NT
hitflag = H
priority = 7, Miss
sparkno = -1
hitsound = S400, 3
sprpriority = 1
;p1facing = ifelse (command = "holdback", -1, 1)
;p2facing = -1
p1stateno = 851
p2stateno = 855
fall = 1
fall.recover = 0
yaccel = 0.45
ID = 850

;方向転換
[State 850, Turn]
type = Turn
trigger1 = time = 0
trigger1 = P2Dist X < 0

[State 850,0]
Type = attackdist
Trigger1 = animelem=4,>0
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(26) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 17

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(48)>=100 || (var(26)>0&&var(48)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

[State 850, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;掴み投げ
[Statedef 851]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 851
sprpriority = 0
velset = 0,0

[state 0,0]
type = velset
trigger1 = time >= 0
x = 0
y = 0

;---------------------[サウンド]
[state 0,0]
type = playsnd
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
trigger5 = animelem = 8
trigger6 = animelem = 9
trigger7 = animelem = 13
value = 400,3

[state 0,0]
type = playsnd
trigger1 = animelem = 4
trigger2 = animelem = 6
trigger3 = animelem = 8
value = 200,0

[state 0,0]
type = playsnd
trigger1 = animelem = 13
value = 320,0

;---------------------[相手制御]
[State 0, 1]
type = TargetBind
trigger1 = time = 1
pos = 25,0
[State 0, 1]
type = TargetBind
trigger1 = time = 30
pos = 25,-25

[State 850, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

[state 0,0]
type = hitadd
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
trigger5 = animelem = 8
trigger6 = animelem = 9
trigger7 = animelem = 13
value = 1

[state 0,0]
type = targetlifeadd
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
trigger5 = animelem = 8
trigger6 = animelem = 9
trigger7 = animelem = 13
value = ceil(-17*fvar(0))

[State explod]
type = Explod
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
trigger5 = animelem = 8
trigger6 = animelem = 9
trigger7 = animelem = 13
trigger8 = animelem = 1
anim = 9710
id = 9710
sprpriority = 9
postype = p1
pos = 15+random%40,-80-random%40
bindtime = 1
supermove = 1
ignorehitpause = 1
under = 0
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

;---------------------[七星ゲージ]
[state a]
type = varadd
trigger1 = time = 0
v = 4
value = 1

;---------------------[ブーストゲージ増加]
[state 0,0]
type = varadd
triggerall = var(23) = 0
trigger1 = animelem = 4
trigger2 = animelem = 5
trigger3 = animelem = 6
trigger4 = animelem = 7
trigger5 = animelem = 8
trigger6 = animelem = 9
trigger7 = animelem = 13
v = 16
value = ceil(14*fvar(0))

[state a]
type = varadd
trigger1 = time = 0
v = 42
value = 7

;---------------------------------------------------------------------------
; 投げられてる相手
[Statedef 855]
type    = A
movetype= H
physics = N
ctrl = 0
sprpriority = 1
velset =0,0
anim = 5050

[state 0,0]
type = screenbound
trigger1 = 1
value = 0

[state 0,0]
type = velset
trigger1 = time = 1
x = 0
y = -9
[state 0,0]
type = veladd
trigger1 = time = [2,29]
y = 0.45
[state 0,0]
type = velset
trigger1 = time = 30
x = 0
y = 0

[state 0,0]
type = velset
trigger1 = time = 95
x = -6
y = -8;-5.2

[state 0,0]
type = veladd
trigger1 = time > 95
y = 0.45

[state 0,0]
type = turn
trigger1 = time = 0
trigger1 = facing = enemy,facing

[state 0,0]
type = changeanim2
trigger1 = time = 30
value = 855

[state 0,0]
type = playerpush
trigger1 = 1
value = 0

[state 0,0]
type = changestate
trigger1 = time >= 95
value = 55050

;---------------------------------------------------------------------------
;ガードキャンセル攻撃
[Statedef 290]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= -1000
ctrl = 0
velset = 0,0
anim = 290
sprpriority = 1

[State 290]
type = nothitby
trigger1 = time <28
value = SCA
time = 1

[State 290, 2]
type = SuperPause
trigger1 = time = 0
time = 20
movetime = 20
darken = 0
anim = -1
p2defmul = 1

[State 290, 4]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -4
freq = 95
phase = 95

[State a];
type = palfx
trigger1 = time = 0
time = 5
add = 255,255,255
color = 1

[state 2,]
type = varadd
trigger1 = var(20) = 1
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

;-------------[]
[State 290, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 320, 0
channel = 0

[State 290, 1];
type = PlaySnd
trigger1 = animelem = 2
value = 300, 2

;-------------[速度]
[state a]
type = velset
trigger1 = time=20
x = 7

;-------------[]
[State 290, 2]
type = HitDef
trigger1 = animelem=4
attr = S, NA
damage = ceil(ifelse(fvar(0)*56<5,5,fvar(0)*56)),ifelse(var(24)>0,6,0)
getpower = ceil(fvar(0)*136),136
kill = 0
animtype = heavy
guardflag = MA
hitflag = MAFD
priority = 7, Hit
pausetime = 16, 15
;;guard.sparkno = S8003
sparkno = -1;2;S8004
sparkxy = 1, -46
hitsound = S400, 3
guardsound = S121, 0
ground.type = High
ground.slidetime = 8
ground.hittime  = 20+(P2StateType=C)
guard.hittime = 18+(P2StateType=C)
guard.ctrltime = 18+(P2StateType=C)
guard.velocity = -10.5
ground.velocity = -12.0,-2.0
air.velocity = -12.0,-2.0
fall = 1
air.fall = 1
p2facing = 1
fall.recovertime = 9999999
ground.cornerpush.veloff = -5
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 290

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-25), -95-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+25), -95-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,14,ceil(14*fvar(0)))
ignorehitpause = 1
persistent = 0

;-------------[]
[State 290, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;特殊技その１
[Statedef 250]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
;velset = 0,0
anim = 250
sprpriority = 1

[State 250, 1];
type = PlaySnd
trigger1 = time = 14
value = 300, 4

[State 250, 5]
type = PlaySnd
trigger1 = AnimElem = 1
value = 250,0
channel = 0

[State 250, helper]
type = helper
trigger1 = time = 25
persistent = 0
stateno = 251
id = 251
name = "岩山両斬波"
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
PosType = P1
pos = 60,0
ownpal = 1
scale = 1.0,1.0

[State 250, helper]
type = helper
trigger1 = time = 30
persistent = 0
stateno = 252
id = 252
name = "石"
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
PosType = P1
pos = 60,0
ownpal = 1
scale = 1.0,1.0

[State 250, 2]
type = HitDef
trigger1 = animelem = 4
attr = S, NA
animtype  = up
damage    = ceil(ifelse(fvar(0)*112<5,5,fvar(0)*112)),ifelse(var(24)>0,6,0)
priority = 7,Hit
getpower = ceil(fvar(0)*119),119
guardflag = H
pausetime = 15,14
sparkno = -1;s7000+(random%8)
sparkxy = -15,-156/2
hitsound   = s400,2
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 12
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -2.5,-3.25
guard.velocity = -11
air.velocity = -2.5,ifelse(fvar(25)>0,-0.1,-3.25)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
fall = 1
air.fall = 1
p2facing = 1
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-4*1.3-var(30)*0.05,-4*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-4*1.3*1.2-var(30)*0.05)
fall.recovertime = 99999999
ID = 250

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-30), -77-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+30), -77-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 250,]
type = statetypeset
trigger1 = animelem = 5
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[State 250, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;特殊技その１
[StateDef 251]
Type = S
MoveType = I
Physics = N
Anim = 251
SprPriority = 4

;--------------------諸数値初期化
[State 251, DestroySelf]
Type = DestroySelf
Trigger1 = time >= 25

;--------------------毎フレーム処理
[State 251,AngleDraw]
Type = AngleDraw
Trigger1 = 1
Scale = 3.0+time*-0.15,3.0+time*-0.15
IgnoreHitPause = 1

[State 251,PalFX]
Type = PalFX
Trigger1 = 1
Time = 1
Add = -(time*10),-(time*10),-(time*10)
Mul = 256-Time*10,256-Time*10,256-Time*10
SinAdd = 0,0,0,10
InvertAll = 0
Color = 256

[State 251, Trans]
Type = Trans
Trigger1 = 1
Trans = Add

[State 251, AssertSpecial]
Type = AssertSpecial
Trigger1 = 1
Flag = NoShadow

;---------------------------------------------------------------------------
;特殊技その１
[StateDef 252]
Type = S
MoveType = I
Physics = N
Anim = 252
SprPriority = 4

;--------------------諸数値初期化
[State 252, DestroySelf]
Type = DestroySelf
Trigger1 = time >= 25

;--------------------毎フレーム処理
[State 252,AngleDraw]
Type = AngleDraw
Trigger1 = 1
Scale = 1.0,1.0
IgnoreHitPause = 1

[State 252, Trans]
Type = Trans
Trigger1 = 1
Trans = none

[State 252, AssertSpecial]
Type = AssertSpecial
Trigger1 = 1
Flag = NoShadow

;---------------------------------------------------------------------------
;特殊技その２
[Statedef 260]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
;anim = 260
sprpriority = 2

[State a]
type = hitoverride
trigger1 = PrevStateNo != 261
trigger1 = time>5
attr = SA,NA,SA
stateno = 261
time = 1

[State a]
type = ChangeAnim
triggerall = PrevStateNo != 261
trigger1 = Time = 0
value = 260

[State a]
type = ChangeAnim
triggerall = PrevStateNo = 261
trigger1 = Time = 0
value = 260
elem = var(56)

[State 260, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 300, 3

[State 200, 5]
type = PlaySnd
trigger1 = AnimElem = 3
value = 260,0
channel = 0

[State 200, HitDef]
type = HitDef
trigger1 = animelem=5
attr = S, NA
damage = ceil(ifelse(fvar(0)*112<5,5,fvar(0)*112)),ifelse(var(24)>0,6,0)
getpower = ceil(fvar(0)*119),119
animtype = medium
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 14, 13
;;guard.sparkno = S8003
sparkno = -1;S8004
sparkxy = -3, -55
hitsound = s400,3
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = High
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -3.5,-10.0
air.velocity = -3.5,ifelse(fvar(25)>0,-0.1,-10.0)
fall = 1
air.fall = 1
p2facing = 1
fall.recovertime = 100
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-4*1.3-var(30)*0.05,-4*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-4*1.3*1.2-var(30)*0.05)
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 260

[State explod]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
anim = 9710
id = 9710
sprpriority = 9
postype = p2
pos = Ceil(P2Dist X/2-15), -97-Ceil(P2BodyDist Y)
bindtime = 1
supermove = 1
persistent = 0
ignorehitpause = 1
under = 0
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+30), -97-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = PrevStateNo != 261
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 260,]
type = statetypeset
trigger1 = animelem = 6
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(48)>=100 || (var(26)>0&&var(48)>=20)
var(26) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(48)>=100 || (var(26)>0&&var(48)>=20)
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(48)>=100 || (var(26)>0&&var(48)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(48)>=100 || (var(26)>0&&var(48)>=20)
v = 48
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(48)>=100 || (var(26)>0&&var(48)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,21,ceil(21*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varset
trigger1 = movehit
trigger1 = var(8) = 1
v = 11
value = 1
ignorehitpause = 1

[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[State 210, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;特殊技その２
[Statedef 261]
type = U
movetype = H
physics = U
ctrl = 0

[state 0,0]
type = lifeadd
trigger1 = time = 1
value = floor(gethitvar(damage))

[State a]
type = ChangeAnim
trigger1 = 1
value = 260
elem = var(56)

[state 0,0]
type = pause
persistent = 0
trigger1 = 1
time = 10
movetime = 0

[State 261, 1]
type = ChangeState
trigger1 = time > 10
value = 260
ignorehitpause = 0

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;特殊技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;グレイブシュート
[Statedef 300]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
;velset = 0,0
anim = 300
sprpriority = 1

;-------------[効果音]
[State 300, 1]
type = PlaySnd
trigger1 = animelem = 1
value = 301, 0
channel = 0

[State 300, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 300, 2

;-------------[攻撃]
[State 300, 2]
type = HitDef
trigger1 = animelem = 5
attr = S, NA
damage    = ceil(ifelse(fvar(0)*112<5,5,fvar(0)*112)),ifelse(var(24)>0,6,0)
priority = 7, Hit
animtype  = diagup
hitflag = MAFD
guardflag = M
pausetime = 16,15
guard.pausetime = 14,13
getpower = ceil(fvar(0)*136),136
sparkno = -1;s7000+(random%8)
sparkxy = -10,-20
hitsound   = s400,3
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 8
ground.hittime  = 20+(P2StateType=C)
guard.hittime = 18+(P2StateType=C)
guard.ctrltime = 18+(P2StateType=C)
ground.velocity = -0.1,-11.5
guard.velocity = -12.5
air.velocity = -0.1,ifelse(fvar(25)>0,-0.1,-12.0+0.5*(var(3)>1))
down.velocity = -9,-2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
fall = 1
fall.recovertime = 100
ID = 300

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-10), -85-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+10), -85-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
;-------------[]

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 300,]
type = statetypeset
trigger1 = animelem = 6
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=301&&Time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=301&&Time=1
x = 16

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=301&&Time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=301&&Time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=301&&Time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,14,ceil(14*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = changestate
trigger1 = var(59)<=0
trigger1 = movehit
trigger1 = command = "holdup"
value = 49
;ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;へヴィーストライク
[Statedef 310]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 310
sprpriority = 1

;-------------[]
[State 310, 1];へヴィーストライク
type = PlaySnd
trigger1 = animelem = 1
value = 350, 0

[State 310, 1]
type = PlaySnd
trigger1 = animelem = 9
value = 210, 2
channel = 0

[State 310, 1];
type = PlaySnd
trigger1 = animelem = 9
value = 300, 3

;-------------[速度]
[state 310,0]
type = velset
trigger1 = time = [33,40]
trigger1 = vel x<8
x = 8

;-------------[]
[State 310, 2]
type = HitDef
trigger1 = animelem = 10
attr = S, NA
damage    = ceil(ifelse(fvar(0)*34<5,5,fvar(0)*34)),ifelse(var(24)>0,6,0)
priority = 7, Hit
animtype  = hard
guardflag = N
pausetime = 14,13
getpower = ceil(fvar(0)*119),119
sparkno = -1;s7010+(random%8)
sparkxy = -10,-108
hitsound   = s400,4
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 30
ground.hittime  = 30+(P2StateType=C)
ground.velocity = 0
air.velocity = -3,ifelse(fvar(25)>0,-0.1,-9)
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
p2stateno = 350
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
air.fall = 1
fall.recover = 1
ID = 310

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-10), -50-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = time = 0
id = 3000
name = "ef"
sprpriority = 2
pos = -30,-96
postype = p1
stateno = 311
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[State a]
type = Explod
triggerall = pos y>=0
trigger1 = time = 34
anim = 9500
id = 9500
pos = 0,0
postype = p1
bindtime = 1 
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
under = 0
[State a]
type = Explod
triggerall = pos y>=0
trigger1 = time = 40
anim = 9500
id = 9500
pos = 0,0
postype = p1
bindtime = 1 
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
under = 0
[State a]
type = Explod
triggerall = pos y>=0
trigger1 = time = 50
anim = 9500
id = 9500
pos = 0,0
postype = p1
bindtime = 1 
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
under = 0

;-------------[]
[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 310,]
type = statetypeset
trigger1 = animelem = 12
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 6,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

;---------------------[七星ゲージ]
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 10 < 1
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 10 < 1
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 10 < 1
persistent = 0
v = 34
value = 1
ignorehitpause = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)発動エフェクト
[Statedef 311]
type = S
ctrl = 0
anim = 9320
velset = 0,0
movetype = I
physics = N
sprpriority = 5

[state a]
type = AssertSpecial
trigger1 = 1;time = 0
Flag = Noshadow

;---------------------[エフェクト]
[state a]
type = null;PalFX
trigger1 = time = 0
time = 75
add = 5,25,5
mul = 206,200,155
color = 0

;---------------------[透過]
[state a]
type = null;Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 2
value = 0

[state a]
type = varadd
trigger1 = time >= 18
v = 2
value = 5

;---------------------[拡縮]
[state a]
type = null;angleset
trigger1 = time = 0
value = 90

[State 1000, 0]
type = null;AngleDraw
trigger1 = 1
scale = 1.5-(var(2)*0.01),1.5-(var(2)*0.01)

;---------------------[]



;---------------------[]
[state a]
type = destroyself
trigger1 = animtime = 0;46

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;秘孔やられ・よろけ
[Statedef 350]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[state a]
type = changestate
trigger1 = time = 0
trigger1 = (anim = [350,369]) || (anim = 5300)
trigger2 = pos y < 0
trigger3 = lose = 1
value = 352

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 350

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "KENSHIRO" || name = "KENSHIRO")&& authorname = "Cameron"
value = 360

[state a]
type = changestate
trigger1 = animtime = 0
value = 351

;---------------------------------------------------------------------------
;秘孔やられ・気絶
[Statedef 351]
type    = S
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 5300

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "KENSHIRO" || name = "KENSHIRO")&& authorname = "Cameron"
value = 361

[State a]
Type = poweradd
TriggerAll = Time>4
Trigger1 = Command="a"
Trigger2 = Command="b"
Trigger3 = Command="x"
Trigger4 = Command="y"
Trigger5 = Command="z"
value = -500

[State a]
Type = selfstate
TriggerAll = Time>4
Trigger1 = Command="a"
Trigger2 = Command="b"
Trigger3 = Command="x"
Trigger4 = Command="y"
Trigger5 = Command="z"
value = 0
ctrl = 1

[State a]
Type = selfstate
TriggerAll = Time>4
Trigger1 = Enemy,Name="THOUTHER"
Trigger1 = Enemy,Var(44)>30
value = 0
ctrl = 1

[state a]
type = selfstate
trigger1 = time >= 180
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;秘孔やられ・吹き飛び
[Statedef 352]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 352

[state a]
type = changestate
trigger1 = time = 15
value = 353

;---------------------------------------------------------------------------
;秘孔やられ・吹き飛び
[Statedef 353]
type    = A
movetype= H
physics = N
velset = -4,-7
sprpriority = 1

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
type = VelAdd
Trigger1 = 1
y = .4

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100



;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;バニシングストライク・チャージ
[Statedef 320]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 320
sprpriority = 1

;[State 320, 1]
;type = PlaySnd
;trigger1 = time = 6
;value = 320, 0

;-------------[変数初期化、変更]
[state a]
type = varset
trigger1 = time = 0
v = 5
value = 0

[state a]
type = varset
trigger1 = time > 28
v = 5
value = 1

;-------------[]
[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time<32-(var(20)>0)*8
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time<32-(var(20)>0)*8
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time<32-(var(20)>0)*8
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time<32-(var(20)>0)*8
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time<32-(var(20)>0)*8
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

[State 320, 4]
type = ChangeState
trigger1 = (time >= 13 && var(20) = 0)||(time >= 7 && var(20) >1)
trigger1 = command != "おしっぱなしy" && command != "おしっぱなしb"
trigger1 = var(59)<=0
trigger1 = prevstateno!=319
trigger2 = time >= 33-(var(20)>0)*8
trigger3 = (time >= 13 && var(20) = 0)||(time >= 7 && var(20) >1)
trigger3 = prevstateno!=319
trigger3 = var(59)>0
value = ifelse(var(11)=0,321,322)

;---------------------------------------------------------------------------
;バニシングストライク・攻撃
[Statedef 321]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 321
sprpriority = 1

;-------------[]
[State 321, 1];へヴィーストライク
type = PlaySnd
trigger1 = animelem = 1
trigger1 = var(5) = 1
value = 350, 0

[State 321, 1];
type = PlaySnd
trigger1 = animelem = 1
trigger1 = var(5) = 0
value = 300, 1

[State 321, 1];
type = PlaySnd
trigger1 = animelem = 1
trigger1 = var(5) = 1
value = 300, 3

[State 321, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 320, 0
channel = 0

;-------------[速度]
[state a]
type = velset
trigger1 = animelem = 1
x = 7+var(5)*8.25

;-------------[]
[State 321, 2]
type = HitDef
trigger1 = animelem = 4
trigger1 = var(5) = 0
attr = S, NA
damage    = ceil(ifelse(fvar(0)*112<5,5,fvar(0)*112)),ifelse(var(24)>0,6,0)
priority = 7, Hit
animtype  = hard
guardflag = M
pausetime = 14,13
getpower = ceil(fvar(0)*119),119
sparkno = -1;s7010+(random%8)
sparkxy = -10,-100
hitsound   = s400,3
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -10.5
guard.velocity = -10.5
air.velocity =-10,-0.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -4
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
fall = 1
air.fall = 1
p2facing = 1
fall.recover = 0
ID = 320

[State 321, 2]
type = HitDef
trigger1 = animelem = 4
trigger1 = var(5) = 1
attr = S, NA
damage    = ceil(ifelse(fvar(0)*112<5,5,fvar(0)*112)),ifelse(var(24)>0,6,0)
priority = 7, Hit
animtype  = hard
guardflag = N
pausetime = 14,13
getpower = ceil(fvar(0)*119),119
sparkno = -1;s7010+(random%8)
sparkxy = -10,-100
hitsound   = s400,3
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -10
guard.velocity = -12.5
air.velocity =-10,-0.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
fall = 1
air.fall = 1
p2facing = 1
fall.recover = 0
ID = 325

[State 321,]
type = statetypeset
trigger1 = animelem = 5
movetype = I

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-25), -95-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+25), -95-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = time = 0
trigger1 = var(5) = 1
id = 3000
name = "ef"
sprpriority = 2
pos = -40,-93
postype = p1
stateno = 311
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[七星ゲージ]
[state 2,a]
type = varadd
trigger1 = var(5) = 0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 100 < 10
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(5) = 0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 100 < 10
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(5) = 0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 100 < 10
persistent = 0
v = 34
value = 10
ignorehitpause = 1
;
[state 2,a]
type = varadd
trigger1 = var(5) = 1
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 1000 < 100
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(5) = 1
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 1000 < 100
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(5) = 1
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 1000 < 100
persistent = 0
v = 34
value = 100
ignorehitpause = 1
;---------------------[相手制御]
[state a]
type = targetstate
trigger1 = movehit = 1
trigger1 = var(3)<1
trigger1 = enemy,stateno != 550
value = 550

[state a]
type = varset
trigger1 = movehit
trigger1 = var(3)<1
v = 11
value = 1
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movehit = 1
trigger1 = var(23) >= 0
v = 16
value = 24
ignorehitpause = 1
persistent = 0
[state a]
type = varadd
trigger1 = MoveGuarded = 1
trigger1 = var(23) = 0
v = 16
value = 50
ignorehitpause = 1
persistent = 0

[State 321, 4]
type = ChangeState
triggerall = movehit
triggerall = var(3)<=1
;triggerall = numtarget(325)=0
triggerall = var(16)<100
trigger1 = var(59)<=0
trigger1 = command = "holdfwd"
trigger1 = var(16):=99||1
trigger2 = var(59)>0||fvar(39)>0
trigger2 = var(54)=2505||var(54)=4000||var(54)=5000
trigger2 = var(16):=99||1
value = 500
[State 321, 4]
type = ChangeState
triggerall = movehit
triggerall = var(3)<=1
;triggerall = numtarget(325)=0
triggerall = var(16)>=100
trigger1 = var(59)<=0
trigger1 = command = "holdfwd"
trigger2 = var(59)>0||fvar(39)>0
trigger2 = var(54)=2505||var(54)=4000||var(54)=5000
value = 500

[State 321, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;バニシングストライク・攻撃
[Statedef 322]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
ctrl = 0
anim = 321
sprpriority = 1

;-------------[]
[State 322, 1];へヴィーストライク
type = PlaySnd
trigger1 = animelem = 1
trigger1 = var(5) = 1
value = 350, 0

[State 321, 1];
type = PlaySnd
trigger1 = animelem = 1
trigger1 = var(5) = 0
value = 300, 1

[State 321, 1];
type = PlaySnd
trigger1 = animelem = 1
trigger1 = var(5) = 1
value = 300, 3

[State 321, 1];
type = PlaySnd
trigger1 = animelem = 4
value = 320, 0
channel = 0

;-------------[速度]
[state a]
type = velset
trigger1 = animelem = 1
x = 7+var(5)*8.25

;-------------[]
[State 322, 2]
type = HitDef
trigger1 = animelem = 4
trigger1 = var(5) = 0
attr = S, NA
damage    = ceil(ifelse(fvar(0)*112<5,5,fvar(0)*112)),ifelse(var(24)>0,6,0)
priority = 7, Hit
animtype  = hard
guardflag = M
pausetime = 14,13
getpower = ceil(fvar(0)*119),119
sparkno = -1;s7010+(random%8)
sparkxy = -10,-100
hitsound   = s400,3
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -10.5
guard.velocity = -10.5
air.velocity =-12.5,-0.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -4
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
fall = 1
air.fall = 1
p2facing = 1
fall.recover = 0
ID = 320

[State 322, 2]
type = HitDef
trigger1 = animelem = 4
trigger1 = var(5) = 1
attr = S, NA
damage    = ceil(ifelse(fvar(0)*112<5,5,fvar(0)*112)),ifelse(var(24)>0,6,0)
priority = 7, Hit
animtype  = hard
guardflag = N
pausetime = 14,13
getpower = ceil(fvar(0)*119),119
sparkno = -1;s7010+(random%8)
sparkxy = -10,-100
hitsound   = s400,3
guard.sparkno = -1;s7100
guardsound = s120,0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -10
guard.velocity = -12.5
air.velocity =-10,-0.5
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
fall.xvelocity = var(3)*-0.2-2.5
fall.yvelocity = var(3)*-0.2-2.5-var(31)*0.05
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
fall = 1
air.fall = 1
p2facing = 1
fall.recover = 0
ID = 325

[state a]
type = Explod
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
id = 9710
anim = 9710
pos = Ceil(P2Dist X/2-25), -95-Ceil(P2BodyDist Y)
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9730
anim = 9730
pos = Ceil(P2Dist X/2+25), -95-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
;---------------------[ヘルパー]
[state a];
type = Helper
trigger1 = time = 0
trigger1 = var(5) = 1
id = 3000
name = "ef"
sprpriority = 2
pos = -40,-93
postype = p1
stateno = 311
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[State 322,]
type = statetypeset
trigger1 = animelem = 5
movetype = I

;---------------------[相手制御]
[state a]
type = varset
trigger1 = movehit
v = 11
value = 0
ignorehitpause = 1

;---------------------[七星ゲージ]
[state 2,a]
type = varadd
trigger1 = var(5) = 0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 100 < 10
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(5) = 0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 100 < 10
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(5) = 0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 100 < 10
persistent = 0
v = 34
value = 10
ignorehitpause = 1
;
[state 2,a]
type = varadd
trigger1 = var(5) = 1
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 1000 < 100
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(5) = 1
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 1000 < 100
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(5) = 1
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 1000 < 100
persistent = 0
v = 34
value = 100
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movehit = 1
trigger1 = var(23) >= 0
v = 16
value = 24
ignorehitpause = 1
persistent = 0
[state a]
type = varadd
trigger1 = MoveGuarded = 1
trigger1 = var(23) = 0
v = 16
value = 50
ignorehitpause = 1
persistent = 0

[State 322, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
; ブースト
[Statedef 500]
type    = S
physics = N
anim = 500
sprpriority = 1
ctrl = 0

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 1000, 0]
type = MoveHitReset
trigger1 = 1
ignorehitpause =1

[State -3,]
type = Explod
trigger1 = time = 0
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

[state a]
type = veladd
trigger1 = time = 0
x = 8
;IgnoreHitPause = 1

[state a]
type = veladd
trigger1 = vel x < 8
x = 0.2


[State a];
type = palfx
trigger1 = time = 0
time = 5
add = 255,255,255
color = 1

;-------------[]
[State 210, 1];
type = PlaySnd
trigger1 = time = 0
value = 110, 0

;-------------[状態関係]
[state a]
type = statetypeset
trigger1 = pos y < 0
value = A

[state a]
type = veladd;gravity
trigger1 = Statetype = A
y = 0.45

[state a]
type = statetypeset
trigger1 = pos y >= 0
value = S

[state a]
type = posset
trigger1 = Statetype = S
y = 0

[state a]
type = ctrlset
trigger1 = time >= 40
value = 1

[state a]
type = velset
trigger1 = Pos Y >= 0
y = 0

[State 04]
type = posset
trigger1 = Pos Y > 0
y = 0
;-------------[]
[state a]
type = varadd
trigger1 = time = 0
v = 16
value = -20

[state a]
type = varset
trigger1 = time = 0
v = 23
value = 1

;-------------[]
[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
trigger1 = time >= 90
trigger1 = statetype = S
value = 0
ctrl = 1

[State 04]
type = ChangeState
trigger1 = time >= 90
trigger1 = statetype = A
value = 111
ctrl = 1

[State 04]
type = ChangeState
triggerall = time > 2
triggerall = P2MoveType!=H||(P2StateNo=[120,155])
triggerall = StateType!=A
trigger1 = P2BodyDist X<2
trigger1 = EnemyNear(var(50)),Backedgebodydist<5
trigger2 = frontedgebodydist<5
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ブースト
[Statedef 505]
type    = S
physics = N
anim = 500
sprpriority = 1
ctrl = 0

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 1000, 0]
type = MoveHitReset
trigger1 = 1
ignorehitpause =1

[State -3,]
type = Explod
trigger1 = time = 0
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

[state a]
type = veladd
trigger1 = time = 0
x = 8
;IgnoreHitPause = 1

[state a]
type = veladd
trigger1 = vel x < 8
x = 0.2


[State a];
type = palfx
trigger1 = time = 0
time = 5
add = 255,255,255
color = 1

;-------------[]
[State 210, 1];
type = PlaySnd
trigger1 = time = 0
value = 110, 0

;-------------[状態関係]
[state a]
type = statetypeset
trigger1 = pos y < 0
value = A

[state a]
type = veladd;gravity
trigger1 = Statetype = A
y = 0.45

[state a]
type = statetypeset
trigger1 = pos y >= 0
value = S

[state a]
type = posset
trigger1 = Statetype = S
y = 0

[state a]
type = ctrlset
trigger1 = time >= 40
value = 1

[state a]
type = velset
trigger1 = Pos Y >= 0
y = 0

[State 04]
type = posset
trigger1 = Pos Y > 0
y = 0
;-------------[]
[state a]
type = varadd
trigger1 = time = 0
v = 16
value = -50

[state a]
type = varset
trigger1 = time = 0
v = 23
value = 1

;-------------[]
[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
trigger1 = time >= 90
trigger1 = statetype = S
value = 0
ctrl = 1

[State 04]
type = ChangeState
trigger1 = time >= 90
trigger1 = statetype = A
value = 111
ctrl = 1

[State 04]
type = ChangeState
triggerall = time > 2
triggerall = P2MoveType!=H||(P2StateNo=[120,155])
triggerall = StateType!=A
trigger1 = P2BodyDist X<2
trigger1 = EnemyNear(var(50)),Backedgebodydist<5
trigger2 = frontedgebodydist<5
value = 0
ctrl = 1

[State 505, 7]
type = ChangeState
triggerall = power >= 1000
trigger1 = command = "天破活殺"
trigger1 = time = 0
value = 2000
ctrl = 1

[State 505, 7]
type = ChangeState
triggerall = power >= 2000
trigger1 = command = "北斗残悔拳"
trigger1 = time = 0
value = 2100
ctrl = 1

[State 505, 7]
type = ChangeState
triggerall = power >= 1000
trigger1 = command = "無想転生"
trigger1 = time = 0
value = 2210
ctrl = 1

[State 505, 7]
type = ChangeState
triggerall = power >= 1000
trigger1 = command = "天将奔烈"
trigger1 = time = 0
value = 2300
ctrl = 1

[State 505, 7]
type = ChangeState
triggerall = power >= 1000
trigger1 = command = "北斗旋風連撃"
trigger1 = time = 0
value = 2400
ctrl = 1

[State 505, 7]
type = ChangeState
triggerall = power >= 1000
trigger1 = command = "強敵の記憶"
trigger1 = time = 0
value = 2500
ctrl = 1

[State 505, 7]
type = ChangeState
triggerall = power >= 2000
triggerall = var(50) > 0
trigger1 = command = "北斗剛掌波HA"
trigger1 = time = 0
value = 2600
ctrl = 1

[State 505, 7]
type = ChangeState
triggerall = var(4) = 7
trigger1 = command = "北斗百裂拳"
trigger1 = time = 0
value = 3000
ctrl = 1

;---------------------------------------------------------------------------
;(ENEMY)バニシングストライク、吹き飛び
[Statedef 550]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1
ctrl = 0

[state a]
type = turn
trigger1 = p2dist x < 0
trigger1 = time = 0
trigger1 = enemy,stateno != 2150
trigger1 = enemy,stateno != 2101

[state a]
type = velset
trigger1 = time = 0
x = -12
y = 0

[state a]
type = PosFreeze
trigger1 = enemy,stateno = 2150
trigger2 = enemy,stateno = 2101

[state a]
type = posadd
triggerall = pos y > -15
triggerall = time = 0
trigger1 = enemy,stateno = 321
trigger2 = enemy,stateno = 260
trigger3 = enemy,prevstateno = 321
trigger4 = enemy,prevstateno = 260
trigger5 = enemy,stateno = 2150
trigger6 = enemy,prevstateno = 2150
trigger7 = enemy,stateno = 2101
trigger8 = enemy,prevstateno = 2101
y = -15

[state a]
type = playerpush
trigger1 = 1
value = 0

[State 820, 1]
type = null;ChangeAnim2
Trigger1 = Time = 0
value = 550

[State 820, 1]
type = ChangeAnim
Trigger1 = !HitShakeOver&&(!time||Anim=5012)
value = 5012

[State 820, 1]
type = ChangeAnim
Trigger1 = Anim=5012&&HitShakeOver&&AnimTime=0
value = anim
elem = AnimElemNo(-1)

[state 0,0]
type = changeanim
trigger1 = authorname = "Drowin hokuto"
;trigger1 = selfanimexist(5320)
trigger1 = time >= 0
value = 5320

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "KENSHIRO" || name = "KENSHIRO")&& authorname = "Cameron"
value = 560

[state 0,0]
type = changeanim
trigger1 = (name = "shin" || name = "shin")&& authorname = "konpeitou"
trigger1 = time = 0
value = 68000

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = changestate
trigger1 = BackEdgeDist <= 5
trigger2 = time >= 200
trigger3 = frontEdgeDist <= 5
value = 552

;---------------------------------------------------------------------------
;(ENEMY)バニシングストライク、弱吹き飛び
[Statedef 551]
type    = A
movetype= H
physics = N
velset = -12,0
sprpriority = 1

[state a]
type = turn
trigger1 = p2dist x < 0
trigger1 = time = 0

[State 820, 1]
type = null;ChangeAnim2
Trigger1 = Time = 0
value = 550

[State 820, 1]
type = ChangeAnim
Trigger1 = !HitShakeOver
value = 5012

[state 0,0]
type = changeanim
trigger1 = authorname = "Drowin hokuto"
;trigger1 = selfanimexist(5320)
trigger1 = time >= 0
value = 5320

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "KENSHIRO" || name = "KENSHIRO")&& authorname = "Cameron"
value = 560

[state 0,0]
type = changeanim
trigger1 = (name = "shin" || name = "shin")&& authorname = "konpeitou"
trigger1 = time = 0
value = 68000

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = changestate
trigger1 = BackEdgeDist <= 5
trigger2 = time >= 200
trigger3 = frontEdgeDist <= 5
value = 552

;---------------------------------------------------------------------------
;(ENEMY)バニシングストライク、壁ヒット
[Statedef 552]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1
ctrl = 0

[state 0,0]
type = posadd
triggerall = gethitvar(hitcount)<=10
triggerall = prevstateno = 550
triggerall = time = 0
trigger1 = BackEdgeDist <= 10
trigger2 = frontEdgeDist <= 10
y = -4-(enemy,var(20)>0&&(enemy,stateno=[1300,1330])||gethitvar(hitcount)<=2)*11

[State 820, 1]
type = ChangeAnim
trigger1 = time <= ifelse((Vel X>=10||Vel X<=-10)&&prevstateno!=551,10,0)
value = 5012

[State 820, 1]
type = ChangeAnim
Trigger1 = AnimTime = 0
value = anim
elem = animelemno(-1)

[State 820, 1]
type = null;ChangeAnim2
Trigger1 = Time = 0
value = 552

[state a]
type = playerpush
trigger1 = 1
value = 1

[state 0,0]
type = changeanim
trigger1 = authorname = "Drowin hokuto"
trigger1 = time = 0
value = 5321

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "KENSHIRO" || name = "KENSHIRO")&& authorname = "Cameron"
value = 562

[state 0,0]
type = changeanim
trigger1 = (name = "shin" || name = "shin")&& authorname = "konpeitou"
trigger1 = time = 0
value = 68020

[state a]
type = ChangeAnim
Trigger1 = anim=562&&animelemtime(2)>=8
value = anim
elem = 3

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -4
freq = 95
phase = 95

[state 0,0]
type = lifeadd
trigger1 = time = 0
value = -11
kill = 0
persistent = 0

[state a]
type = velset
triggerall = time = 1
trigger1  = prevstateno = 551
trigger2  = prevstateno = 555
x = 5
[state a]
type = velmul
triggerall = time >= 1
trigger1  = prevstateno = 551
trigger2  = prevstateno = 555
x = 0.87

[state a]
type = changestate
trigger1 = time>20&&anim!=562&&anim!=5321||anim=562&&time>20||anim=5321&&time>20
value = 553

;---------------------------------------------------------------------------
;(ENEMY)バニシングストライク、落下
[Statedef 553]
type    = A
movetype= H
physics = N
velset = 0.8,0
sprpriority = 1

[State 820, 1]
type = null;ChangeAnim2
Trigger1 = Time = 0&&anim!=5321
value = 5050

[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5070

[state a]
type = changeanim
triggerall = time = 0&&anim!=5321
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "KENSHIRO" || name = "KENSHIRO")&& authorname = "Cameron"
value = 563

[state 0,0]
type = changeanim
trigger1 = (name = "shin" || name = "shin")&& authorname = "konpeitou"
trigger1 = time = 0
value = 68030

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = veladd
trigger1 = time > 1
y = 0.45

[State 821, 3] 
type = ChangeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 55100

;---------------------------------------------------------------------------
[Statedef 555]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1
ctrl = 0

[state a]
type = turn
trigger1 = p2dist x < 0
trigger1 = time = 0
trigger1 = enemy,stateno != 2150

[state a]
type = velset
trigger1 = time = 0
x = -12
y = 0

[state a]
type = PosFreeze
trigger1 = enemy,stateno = 2150

[state a]
type = posadd
triggerall = pos y > -15
triggerall = time = 0
trigger1 = enemy,stateno = 321
trigger2 = enemy,stateno = 260
trigger3 = enemy,prevstateno = 321
trigger4 = enemy,prevstateno = 260
trigger5 = enemy,stateno = 2150
trigger6 = enemy,prevstateno = 2150
y = -15

[state a]
type = playerpush
trigger1 = 1
value = 0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 550

[state 0,0]
type = changeanim
trigger1 = authorname = "Drowin hokuto"
;trigger1 = selfanimexist(5320)
trigger1 = time >= 0
value = 5320

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "KENSHIRO" || name = "KENSHIRO")&& authorname = "Cameron"
value = 560

[state 0,0]
type = changeanim
trigger1 = (name = "shin" || name = "shin")&& authorname = "konpeitou"
trigger1 = time = 0
value = 68000

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state 0,0]
type = posadd
triggerall = gethitvar(hitcount)<=10
;triggerall = prevstateno = 550
;trigger1 = time = 0
trigger1 = BackEdgeDist <= 5
trigger2 = frontEdgeDist <= 5
y = -4-(enemy,var(20)>0)*11

[state a]
type = changestate
trigger1 = BackEdgeDist <= 5
trigger2 = time >= 200
trigger3 = frontEdgeDist <= 5
value = 552

;---------------------------------------------------------------------------
; Varのラウンド持ち越し
[Statedef 5900]
type = S

[state a]
type = varadd
trigger1 = time = 0
v = 4
value = -1

[state a]
type = varset
trigger1 = time = 0
v = 19
value = 0

[state a]
type = varset
trigger1 = var(21) = 1
trigger1 = time = 0
v = 4
value = 0

[state a]
type = varset
trigger1 = time = 0
v = 21
value = 0
[state a]
type = varset
trigger1 = time = 0
v = 20
value = 0

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
farst = 2
last = 59
value = 0

[State 5900, 2] ;Clear all float variables
type = null;VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1


;==============================================================================
; {C:\Users\Alex\Documents\mugen-1.1b1copy\chars\Kenshiro_C\Kenshiro_SA.cns}
;==============================================================================

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;必殺技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;闘気
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
anim = 1000
sprpriority = 1
ctrl = 0

;---------------------[効果音]
[state a]
type = playsnd
trigger1 = time = 3
value = 1000,0
channel = 0

[state a];
type = playsnd
trigger1 = time = 6
value = 300,2

;---------------------[ヘルパー]
[state a];弾
type = Helper
trigger1 = time = 16
id = 1005
name = "闘気"
sprpriority = 5
pos = 30,-87-8
postype = p1
stateno = 1005
helpertype = normal
;pausemovetime = 0
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

;---------------------[]
[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1000,0]
Type = attackdist
Trigger1 = time>17
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 12

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)弾
[Statedef 1005]
type = A
ctrl = 0
anim = 1005
velset = 4.5,0
movetype = A
physics = N
sprpriority = 2

[state 0,0]
type = assertspecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1

[State 0, 0]
type = SprPriority
trigger1 = 1
value = 5
ignorehitpause = 1

;---------------------[効果音]
[state 2,]
type = parentvaradd
trigger1 = root,var(8) >0
trigger1 = root,var(4) < 7
trigger1 = movehit=1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,]
type = parentvaradd
trigger1 = root,var(20) > 1
trigger1 = root,var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,]
type = parentvaradd
trigger1 = p2statetype=A||p2statetype=L
trigger1 = movehit=1
v = 3
value = 1
persistent = 0
ignorehitpause = 1
[state 2,]
type = parentvaradd
trigger1 = movehit=1
v = 30
value = 1
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 1005, 3]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = hard
damage    = ceil(root,fvar(0)*84),ifelse(root,var(24)>0,11,6)
priority = 5, Hit
hitflag = MAFD
guardflag = MA
pausetime = 1,12
sparkno = -1;s7010+(random%8)
getpower = ceil(root,fvar(0)*51),51
sparkxy = -10,0
hitsound   = s400,3
guardsound = s121,0
guard.sparkno = -1;s7101
ground.type = high
ground.slidetime = 12
ground.hittime  = 14+(P2StateType=C)
guard.hittime = 12+(P2StateType=C)
guard.ctrltime = 12+(P2StateType=C)
ground.velocity = -4.0
guard.velocity = -4;-11
air.velocity = -2.5,ifelse(root,fvar(25)>0,-0.1,-7.5)
ground.cornerpush.veloff = 0
fall.xvelocity = root,var(3)*-0.2-2.5
fall.yvelocity = root,var(3)*-0.2-2.5-(root,var(31)*0.045)/4
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (root,var(3) - 1)*0.07
air.fall = 1
p2facing = 1
ID = 1005

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15),-6-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2+15),-5;-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
;---------------------[ヘルパー]
;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = ,NA,SA,HA,NP,SP,HP
time = 1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 1006

;---------------------[ブーストゲージ増加]
[state a]
type = parentvaradd
trigger1 = movecontact = 1
trigger1 = root,var(23) = 0
v = 16
value = ifelse(MoveGuarded,4,ceil(4*root,fvar(0)))
ignorehitpause = 1
persistent = 0

;---------------------[]
;==changed
[state a];弱攻撃吹き飛ばし
type = parentvarset
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y>-5
v = 11
value = 0

;==changed
[state a];弱攻撃吹き飛ばし
type = targetstate
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y<=-5
value = 551
persistent=0

[state a]
type = changestate
trigger1 = time >= 20
trigger2 = movecontact
value = 1006

;---------------------------------------------------------------------------
;(HELPER)弾 消滅
[Statedef 1006]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 9999
sprpriority = 2
velset = 4.5,0

[state a]
type = nothitby
trigger1 = 1
value = SCA
time = 1

[State 1006, effect]
type = Explod
trigger1 = time >= 0
anim = 1007
postype = p1
pos = 0,0
ownpal = 0
sprpriority = 4
pausemovetime = 100
supermovetime = 100
bindtime = -1
removeongethit = 1
scale = 0.5,0.5

;--------------------毎フレーム処理
[state 0,0]
type = palfx
trigger1 = time >= 0
time = 1
mul = 255 - (time*25),255 - (time*25),255 - (time*25)

[state 0,0]
type = destroyself
trigger1 = time = 10

;---------------------------------------------------------------------------
;醒鋭孔
[Statedef 1010]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 1010
poweradd = -500

;---------------------[効果音]
[State 0, 0]
type = PlaySnd
trigger1 = movehit
value = 400,4
persistent = 0
ignorehitpause = 1

[state 0,0]
type = velset
trigger1 = prevstateno != 261
trigger1 = vel x<8
trigger1 = time = [10,18]
trigger1 = frontedgedist >= 12
x = 2

[State 1010, 1];
type = PlaySnd
trigger1 = time = 9
value = 300, 2

[State 1010, 5]
type = PlaySnd
trigger1 = time = 3
value = 1010,0
channel = 0

[state 0,0]
type = varset
trigger1 = movehit
v = 24
value = 1200
ignorehitpause = 1

;---------------------[]
[State 1010, 1]
type = HitDef
trigger1 = animelem = 8
attr = S, SA
damage = ceil(fvar(0)*123), ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17;+(P2StateType=C)
guard.hittime = 15;+(P2StateType=C)
guard.ctrltime = 15;+(P2StateType=C)
ground.velocity = -7.5
airguard.velocity = -2.5,-2
air.type = high
air.velocity = -3.5,ifelse(fvar(25)>0,-0.1,-7.5)
air.hittime = 12
air.fall = 1
p2facing = 1
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-7.5*1.3*1.2-var(30)*0.05,-7.5*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-7.5*1.3*1.2-var(30)*0.05)
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1010

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -110-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1010,0]
Type = attackdist
Trigger1 = animelem=9,>0
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 1010, effect]
type = Explod
persistent = 0
trigger1 = time = 13
ignorehitpause = 0;1
anim = 1015
postype = p1
pos = 50,-90
ownpal = 1
sprpriority = 5
pausemovetime = 100
supermovetime =100
bindtime = 2
;removeongethit = 1
scale = const(size.xscale),const(size.yscale)

[State 1010, effect]
type = Explod
persistent = 0
trigger1 = movehit
anim = 1016
postype = p2
pos = -10,-56
random = 20,20
ownpal = 1
sprpriority = 5
pausemovetime = 100
supermovetime =100
bindtime = -1
;removeongethit = 1
scale = 0.5,0.5

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 10 < 1
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 10 < 1
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 10 < 1
persistent = 0
v = 33
value = 1
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 1010, 3]
type = targetstate
trigger1 = movehit
trigger1 = enemy,statetype = S || enemy,statetype = C
trigger1 = stateno != 350
trigger1 = hitpausetime >=10
value = 350
persistent = 0
ignorehitpause = 1

[State 1010, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;北斗有情猛翔破_弱_地上
[Statedef 1020]
type    = S
movetype= A
physics = S
juggle  = 25
ctrl = 0
anim = 1020
poweradd = 0

;---------------------[効果音]
[State 1020, 1];
type = PlaySnd
trigger1 = animelemtime(2) = 2
value = 600, 0

[State 1020, 1]
type = NotHitBy
trigger1 = time<3
value = , AP, AA
time = 5

[State 1020, 5]
type = PlaySnd
trigger1 = time = 2
value = 1020,0
channel = 0

;---------------------[]
[State 1020, 1]
type = HitDef
trigger1 = animelem = 4
attr = S, SA
damage = ceil(fvar(0)*123),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 14,24
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 7+(P2StateType=C)
guard.ctrltime = 7+(P2StateType=C)
ground.velocity = -2.9,-8.5
guard.velocity = -8.4
airguard.velocity = -2.9
air.type = high
air.velocity = -15.9,ifelse(fvar(25)>0,-0.1,-10.5)
air.hittime = 55
fall = 1
air.fall = 1
p2facing = 1
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-4.5*1.3*1.2-var(30)*0.05,-3.5*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-4.5*1.3*1.2-var(30)*0.05)
fall.recovertime = 100
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1020

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1020,0]
Type = attackdist
Trigger1 = animelem=5,>0
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 1020, effect]
type = Explod
persistent = 0
trigger1 = time = 1
anim = 1021
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 3
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
[State 1020, effect]
type = Explod
persistent = 0
trigger1 = animelem = 2;4
anim = 1022
ignorehitpause = 1
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 3
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)

[State 1020, effect]
type = Explod
persistent = 0
trigger1 = time = 5
anim = 1023
ignorehitpause = 1
postype = p1
pos = 34,-130
ownpal = 1
sprpriority = 5
;bindtime = -1
;scale = 0.58 - (time*0.16),0.58 - (time*0.16);,const(size.yscale)
id = 1023

[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1023
scale = 1.3 - (time*0.05),1.3 - (time*0.05);,const(size.yscale)
ignorehitpause = 1

[State 1020, effect]
type = Explod
persistent = 0
trigger1 = time = 4
anim = 1023
postype = p1
pos = -5,-75
ownpal = 1
sprpriority = 5
;bindtime = -1
removetime = 10
scale = 0.7 - (time*0.05),0.7 - (time*0.05);,const(size.yscale)
id = 1022

[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1022
scale = 0.7 - (time*0.05),0.7 - (time*0.05);,const(size.yscale)
ignorehitpause = 1

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100 < 10
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100 < 10
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100 < 10
persistent = 0
v = 33
value = 10
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 1010, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 1024
ctrl = 1

;---------------------------------------
;北斗有情猛翔破_弱_地上_終了
[Statedef 1024]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 1024
sprpriority = 1

[State 1024,0]
Type = attackdist
Trigger1 = 1
value = 0

[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1023
scale = 0.7 - (time*0.05),0.7 - (time*0.05);,const(size.yscale)
ignorehitpause = 1

[State 1024, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;北斗有情猛翔破_強_地上
[Statedef 1025]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 1025
poweradd = 0

;---------------------[効果音]
[State 1025, 1];
type = PlaySnd
trigger1 = animelemtime(2) = 2
value = 600, 0

[State 1025, 5]
type = PlaySnd
trigger1 = time = 2
value = 1020,0
channel = 0

;---------------------[]
[State 1025, 1]
type = HitDef
trigger1 = animelem = 3
trigger2 = animelem = 5
attr = A, SA
damage = ceil(fvar(0)*39),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -0.1,-10.0
airguard.velocity = -2.9
air.type = high
air.velocity = -0.1,ifelse(fvar(25)>0,-0.1,-10.0)
air.hittime = 50
fall = 1
air.fall = 1
p2facing = 1
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1025

[State 1025, 1]
type = HitDef
trigger1 = animelem = 7
attr = A, SA
damage = ceil(fvar(0)*39),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -0.1,-13.0
airguard.velocity = -2.9
air.type = high
air.velocity = -4.0,ifelse(fvar(25)>0,-0.1,-13.0)
air.hittime = 30
fall = 1
air.fall = 1
p2facing = 1
fall.recovertime = 100
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1025

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=5,<0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
Trigger1 = AnimElem=5,<0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=5,>=0
Trigger1 = AnimElem=7,<0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -90-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded
Trigger1 = AnimElem=5,>=0
Trigger1 = AnimElem=7,<0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -90-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=7,>=0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded
Trigger1 = AnimElem=7,>=0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1025,0]
Type = attackdist
Trigger1 = time>25
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 16

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 6

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 1025, effect]
type = Explod
persistent = 0
trigger1 = time = 1
anim = 1021
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 3
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
[State 1025, effect]
type = Explod
persistent = 0
trigger1 = animelem = 2;4
anim = 1022
ignorehitpause = 1
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 3
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)

[State 1025, effect]
type = Explod
persistent = 0
trigger1 = time = 5
anim = 1023
ignorehitpause = 1
postype = p1
pos = 34,-100
ownpal = 1
sprpriority = 5
;bindtime = -1
;scale = 0.58 - (time*0.16),0.58 - (time*0.16);,const(size.yscale)
id = 1023

[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1023
scale = 1.3 - (time*0.05),1.3 - (time*0.05);,const(size.yscale)
ignorehitpause = 1

[State 1025, 1]
type = NotHitBy
trigger1 = time<11
value = SCA
time = 1

[State 1025, effect]
type = Explod
persistent = 0
trigger1 = time = 4
anim = 1023
postype = p1
pos = 8,-60
ownpal = 1
sprpriority = 5
;bindtime = -1
removetime = 10
scale = 0.7 - (time*0.05),0.7 - (time*0.05);,const(size.yscale)
id = 1022

[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1022
scale = 0.7 - (time*0.05),0.7 - (time*0.05);,const(size.yscale)
ignorehitpause = 1

[State 1025, effect]
type = Explod
persistent = 0
trigger1 = time = 13
anim = 1023
ignorehitpause = 1
postype = p1
pos = 36,-120
ownpal = 1
sprpriority = 5
;bindtime = -1
;scale = 0.58 - (time*0.16),0.58 - (time*0.16);,const(size.yscale)
id = 1024
[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1024
scale = 1.39 - (time*0.03),1.39 - (time*0.03);,const(size.yscale)
ignorehitpause = 1

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[State 1200, 9]
type = StateTypeSet
trigger1 = time=[18,21]
statetype = A
physics = N
[State 1200, 9]
type = StateTypeSet
trigger1 = movehit
trigger1 = time=[22,24]
statetype = S
physics = N
ignorehitpause = 1
[State 1200, 9]
type = StateTypeSet
trigger1 = time >24
statetype = A
physics = N
ignorehitpause = 1

[state 0,0]
type = velset
trigger1 = time = 0
trigger1 = stateno!=500&&stateno!=505
;x = 0
y = 0
[state 0,0]
type = velset
trigger1 = time = 10
y = -15
[state 0,0]
type = posadd
trigger1 = time = [10,26]
x = 5
[state 0,0]
type = velmul
trigger1 = time > 0
trigger1 = time < 26
trigger1 = vel x>0
trigger1 = statetype = S||(stateno=[500,505])
x = 0.85
[state 0,0];time26
type = veladd
trigger1 = time > 10
y = 0.54
[state 0,0]
type = velset
trigger1 = time = 26
trigger1 = vel x<0.7
x = 0.7

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = animelem=4,<=0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = animelem=6,<=0
trigger1 = animelem=4,>0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = animelem=6,>0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 1025, 7]
type = ChangeState
triggerall = movehit
triggerall = time=[22,24]
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
triggerall = command = "z"
trigger1 = command != "holdback"
trigger1 = command != "グレイブシュート"
trigger1 = command != "へヴィーストライク"
trigger1 = command != "バニシングストライク"
trigger1 = command != "闘気"
trigger1 = command != "醒鋭孔"
trigger1 = command != "北斗有情破顔拳_弱"
trigger1 = command != "北斗有情破顔拳_強"
trigger1 = command != "北斗龍撃虎or北斗七死騎兵斬"
trigger1 = command != "天破の構え"
trigger1 = command != "北斗蛇雷咬"
trigger1 = command != "北斗飛衛拳"
trigger1 = command != "北斗飛衛拳_強"
trigger1 = command != "北斗剛掌波"
trigger2 = command = "天破活殺"
trigger3 = command = "北斗残悔拳"
trigger4 = command = "無想転生"
trigger5 = command = "天将奔烈"
trigger6 = command = "北斗旋風連撃"
trigger7 = command = "強敵の記憶"
trigger8 = command = "北斗剛掌波HA"
trigger9 = command = "北斗百裂拳"
value = 505
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "北斗有情破顔拳_弱"
trigger1 = movehit
trigger1 = time=[22,24]
value = 1020
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "北斗有情破顔拳_強"
trigger1 = movehit
trigger1 = time=[22,24]
value = 1025
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "北斗飛衛拳"
trigger1 = movehit
trigger1 = time=[22,24]
value = 1070
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "北斗飛衛拳_強"
trigger1 = movehit
trigger1 = time=[22,24]
value = 1072
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "北斗剛掌波"
trigger1 = movehit
trigger1 = time=[22,24]
value = 1080
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "闘気"
trigger1 = movehit
trigger1 = time=[22,24]
value = 1000
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "醒鋭孔"
trigger1 = movehit
trigger1 = time=[22,24]
value = 1010
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "北斗龍撃虎or北斗七死騎兵斬"
trigger1 = movehit
trigger1 = time=[22,24]
value = 1030
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "天破の構え"
trigger1 = movehit
trigger1 = time=[22,24]
value = 1040
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "北斗蛇雷咬"
trigger1 = movehit
trigger1 = time=[22,24]
value = 1060
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "グレイブシュート"
trigger1 = movehit
trigger1 = time=[22,24]
value = 300
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "へヴィーストライク"
trigger1 = movehit
trigger1 = time=[22,24]
value = 310
ctrl = 1

[State 1025, 7]
type = ChangeState
triggerall = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger1 = command = "z"
trigger1 = command = "バニシングストライク"
trigger1 = movehit
trigger1 = time=[22,24]
value = 320
ctrl = 1

[State 1025, 7]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = time >= 25
value = 1026
ctrl = 1

;---------------------------------------
;北斗有情猛翔破_強_地上_終了
[Statedef 1026]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 1026
sprpriority = 1

[State 1026,0]
Type = attackdist
Trigger1 = 1
value = 0

[State 1026, 3]
type = posset
trigger1 = time >= 0
y = 0

[State 1026, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;北斗有情猛翔破_弱_空中
[Statedef 1027]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1027
poweradd = 0

;---------------------[効果音]
[State 1027, 1];
type = PlaySnd
trigger1 = animelemtime(2) = 2
value = 600, 0

[State 1027, 5]
type = PlaySnd
trigger1 = time = 2
value = 1020,0
channel = 0

;---------------------[]
[State 1027, 1]
type = HitDef
trigger1 = animelem = 3
trigger2 = animelem = 5
attr = A, SA
damage = ceil(fvar(0)*39),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -0.1,-9.0
airguard.velocity = -2.9
air.type = high
air.velocity = -0.1,ifelse(fvar(25)>0,-0.1,-9.0)
air.hittime = 30
fall = 1
air.fall = 1
p2facing = 1
fall.recovertime = 100
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1027

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=5,<0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
Trigger1 = AnimElem=5,<0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=5,>=0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded
Trigger1 = AnimElem=5,>=0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999


[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1027,0]
Type = attackdist
Trigger1 = time>25
value = 0

[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 6

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 1027, effect]
type = Explod
persistent = 0
trigger1 = time = 1
anim = 1021
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 3
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
[State 1027, effect]
type = Explod
persistent = 0
trigger1 = animelem = 2;4
anim = 1022
ignorehitpause = 1
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 3
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)

[State 1027, effect]
type = Explod
persistent = 0
trigger1 = time = 5
anim = 1023
ignorehitpause = 1
postype = p1
pos = 34,-100
ownpal = 1
sprpriority = 5
;bindtime = -1
;scale = 0.58 - (time*0.16),0.58 - (time*0.16);,const(size.yscale)
id = 1023

[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1023
scale = 1.3 - (time*0.05),1.3 - (time*0.05);,const(size.yscale)
ignorehitpause = 1

[State 1027, 1]
type = NotHitBy
trigger1 = time<11
value = SCA
time = 1

[State 1027, effect]
type = Explod
persistent = 0
trigger1 = time = 4
anim = 1023
postype = p1
pos = 8,-60
ownpal = 1
sprpriority = 5
;bindtime = -1
removetime = 10
scale = 0.7 - (time*0.05),0.7 - (time*0.05);,const(size.yscale)
id = 1022

[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1022
scale = 0.7 - (time*0.05),0.7 - (time*0.05);,const(size.yscale)
ignorehitpause = 1

[State 1027, effect]
type = Explod
persistent = 0
trigger1 = time = 13
anim = 1023
ignorehitpause = 1
postype = p1
pos = 36,-120
ownpal = 1
sprpriority = 5
;bindtime = -1
;scale = 0.58 - (time*0.16),0.58 - (time*0.16);,const(size.yscale)
id = 1024
[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1024
scale = 1.39 - (time*0.03),1.39 - (time*0.03);,const(size.yscale)
ignorehitpause = 1

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100 < 10
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100 < 10
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varset
trigger1 = var(9) > 0
trigger1 = var(33) % 100 < 10
trigger1 = movehit
trigger1 = time>1
v = 9
value = 0
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(32) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100 < 10
persistent = 0
v = 33
value = 1
ignorehitpause = 1

[state 0,0]
type = velset
trigger1 = time = 0
trigger1 = stateno!=500&&stateno!=505
x = 0
y = 0
[state 0,0]
type = velset
trigger1 = time = 10
y = -15
[state 0,0]
type = posadd
trigger1 = time = [10,26]
x = 5
[state 0,0]
type = velmul
trigger1 = time > 0
trigger1 = time < 26
trigger1 = vel x>0
trigger1 = statetype = S||(stateno=[500,505])
x = 0.85
[state 0,0];time26
type = veladd
trigger1 = time > 10
y = 0.54
[state 0,0]
type = velset
trigger1 = time = 26
trigger1 = vel x<0.7
x = 0.7

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = animelem=4,<=0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = animelem=6,<=0
trigger1 = animelem=4,>0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 1027, 7]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = time >= 25
value = 1026
ctrl = 1

;---------------------------------------------------------------------------
;北斗有情猛翔破_強_空中
[Statedef 1028]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1025
poweradd = 0

;---------------------[効果音]
[State 1028, 1];
type = PlaySnd
trigger1 = animelemtime(2) = 2
value = 600, 0

[State 1028, 5]
type = PlaySnd
trigger1 = time = 2
value = 1020,0
channel = 0

;---------------------[]
[State 1028, 1]
type = HitDef
trigger1 = animelem = 3
trigger2 = animelem = 5
attr = A, SA
damage = ceil(fvar(0)*39),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -0.1,-9.0
airguard.velocity = -2.9
air.type = high
air.velocity = -0.1,ifelse(fvar(25)>0,-0.1,-9.0)
air.hittime = 30
fall = 1
air.fall = 1
p2facing = 1
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1028

[State 1027, 1]
type = HitDef
trigger1 = animelem = 7
attr = A, SA
damage = ceil(fvar(0)*39),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 5, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -0.1,-10.0
airguard.velocity = -2.9
air.type = high
air.velocity = -4.0,ifelse(fvar(25)>0,-0.1,-10.0)
air.hittime = 30
fall = 1
air.fall = 1
p2facing = 1
fall.recovertime = 100
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1028
[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=5,<0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
Trigger1 = AnimElem=5,<0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=5,>=0
Trigger1 = AnimElem=7,<0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -90-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded
Trigger1 = AnimElem=5,>=0
Trigger1 = AnimElem=7,<0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -90-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=7,>=0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded
Trigger1 = AnimElem=7,>=0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -100-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1028,0]
Type = attackdist
Trigger1 = time>25
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 6

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = time>25
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 1028, effect]
type = Explod
persistent = 0
trigger1 = time = 1
anim = 1021
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 3
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
[State 1027, effect]
type = Explod
persistent = 0
trigger1 = animelem = 2;4
anim = 1022
ignorehitpause = 1
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 3
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)

[State 1028, effect]
type = Explod
persistent = 0
trigger1 = time = 5
anim = 1023
ignorehitpause = 1
postype = p1
pos = 34,-100
ownpal = 1
sprpriority = 5
;bindtime = -1
;scale = 0.58 - (time*0.16),0.58 - (time*0.16);,const(size.yscale)
id = 1023

[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1023
scale = 1.3 - (time*0.05),1.3 - (time*0.05);,const(size.yscale)
ignorehitpause = 1

[State 1028, 1]
type = NotHitBy
trigger1 = time<11
value = SCA
time = 1

[State 1028, effect]
type = Explod
persistent = 0
trigger1 = time = 4
anim = 1023
postype = p1
pos = 8,-60
ownpal = 1
sprpriority = 5
;bindtime = -1
removetime = 10
scale = 0.7 - (time*0.05),0.7 - (time*0.05);,const(size.yscale)
id = 1022

[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1022
scale = 0.7 - (time*0.05),0.7 - (time*0.05);,const(size.yscale)
ignorehitpause = 1

[State 1028, effect]
type = Explod
persistent = 0
trigger1 = time = 13
anim = 1023
ignorehitpause = 1
postype = p1
pos = 36,-120
ownpal = 1
sprpriority = 5
;bindtime = -1
;scale = 0.58 - (time*0.16),0.58 - (time*0.16);,const(size.yscale)
id = 1024
[state 0, 0]
type = ModifyExplod
trigger1 = 1;time >= 11
id = 1024
scale = 1.39 - (time*0.03),1.39 - (time*0.03);,const(size.yscale)
ignorehitpause = 1

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 1000 < 100
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 1000 < 100
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varset
trigger1 = var(9) > 0
trigger1 = var(33) % 1000 < 100
trigger1 = movehit
trigger1 = time>1
v = 9
value = 0
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(32) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 1000 < 100
persistent = 0
v = 33
value = 1
ignorehitpause = 1

[state 0,0]
type = velset
trigger1 = time = 0
trigger1 = stateno!=500&&stateno!=505
x = 0
y = 0
[state 0,0]
type = velset
trigger1 = time = 10
y = -15
[state 0,0]
type = posadd
trigger1 = time = [10,26]
x = 5
[state 0,0]
type = velmul
trigger1 = time > 0
trigger1 = time < 26
trigger1 = vel x>0
trigger1 = statetype = S||(stateno=[500,505])
x = 0.85
[state 0,0];time26
type = veladd
trigger1 = time > 10
y = 0.54
[state 0,0]
type = velset
trigger1 = time = 26
trigger1 = vel x<0.7
x = 0.7

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = animelem=4,<=0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = animelem=6,<=0
trigger1 = animelem=4,>0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = animelem=6,>0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 1028, 7]
type = ChangeState
trigger1 = pos y >= 0
trigger1 = time >= 25
value = 1026
ctrl = 1

;---------------------------------------------------------------------------
;北斗龍撃虎
[Statedef 1030]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 1030
poweradd = 0

[State 2, shild]
type = HitOverride
trigger1 = time<22
time = 1
attr = SCA, NP, SP, HP
stateno = 1036
IgnoreHitPause = 1
[State 1030, NotHitBy]
type = NotHitBy
trigger1 = Time >= 0
value = SCA,AT
time = 2
[State 0,0]
type = hitby
ignorehitpause = 1
trigger1 = time >= 0
value = SCA,AA,AP
time = 2

[state 0,0]
type = reversaldef
trigger1 = time = [3,22];enemy,movetype = A
Reversal.Attr = SA, NA,SA
pausetime = 30,40;28,30
;hitsound = S5,12
numhits = 0
sparkno = -1;S7109
sparkxy = 20,-30
p1stateno = 1035
persistent = 0

;---------------------[効果音]
[State 1030, 1];
type = PlaySnd
trigger1 = time = 0
value = 600, 1

[State 1030, 1];
type = PlaySnd
trigger1 = animelem = 3
value = 1030, 0

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1030,0]
Type = attackdist
Trigger1 = 1
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

[State 1030, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;北斗龍撃虎_成功
[Statedef 1035]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 1035
poweradd = 0

[State 1035, NotHitBy]
type = NotHitBy
trigger1 = 1
value2 = SAC,AA,AP,AT
time = 1
ignorehitpause = 1

[state 0,0]
type = pause
trigger1 = time = 0
time = 15
movetime = 15

;---------------------[効果音]
[State 1035, 1];
type = PlaySnd
trigger1 = time = 9
value = 300, 2

[State 1035, 5]
type = PlaySnd
trigger1 = enemy,name = "REI"
trigger1 = time = 1
value = 1030,2
channel = 0

[State 1035, 5]
type = PlaySnd
trigger1 = enemy,name != "REI"
trigger1 = time = 1
value = 1030,1
channel = 0

;---------------------[]
[State 1035, 1]
type = HitDef
trigger1 = animelem = 4
attr = S, SA
damage = ceil(fvar(0)*112),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 15,14
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17;+(P2StateType=C)
guard.hittime = 15;+(P2StateType=C)
guard.ctrltime = 15;+(P2StateType=C)
ground.velocity = -7.5
airguard.velocity = -2.5,-2
air.type = high
air.velocity = -3.0,ifelse(fvar(25)>0,-0.1,7.5)
fall = 1
air.fall = 1
p2facing = 1
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1035

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -110-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1035,0]
Type = attackdist
Trigger1 = animelem=5,>0
value = 0

;---------------------[相手制御]
[state a]
type = varset
trigger1 = movehit
v = 11
value = 1
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 1035, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;北斗龍撃虎_成功_飛び道具
[Statedef 1036]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 1036
poweradd = 0

[State 1035, NotHitBy]
type = NotHitBy
trigger1 = 1
value2 = SAC,AA,AP,AT
time = 1
ignorehitpause = 1

;---------------------[効果音]
[State 1035, 5];
type = PlaySnd
trigger1 = time = 1
value = 1030, 1
channel = 0

[State 1036,0]
Type = attackdist
Trigger1 = animelem=5,>0
value = 0

[state a];
type = playsnd
trigger1 = movehit
value = 400,3
persistent = 0
ignorehitpause = 1

;---------------------[ヘルパー]
[state a];弾
type = Helper
trigger1 = time = 2
id = 1005
name = "闘気"
sprpriority = 5
pos = 30,-87-8
postype = p1
stateno = 1005
helpertype = normal
;pausemovetime = 0
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state 2, critical]
type = palfx
trigger1 = time >= 1
time = 1
mul = 200,200,200
add = 120+time,180+(time),130+time

[State 1036, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;天破の構え
[Statedef 1040]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 1040
sprpriority = 2
poweradd = 320

[state 0,0]
type = varset
trigger1 = time >= 28
var(20) = 1

[state 0,0]
type = varrandom
trigger1 = time >= 0
v = 19
range = 3,6

;---------------------[効果音]
[State 1040, 1];
type = PlaySnd
trigger1 = time = 4
value = 600, 2

[State 1040, 1];
type = PlaySnd
trigger1 = animelem = 13
value = 600, 6

[State 1040, 5]
type = PlaySnd
trigger1 = time = 2
value = 1040,0
channel = 0

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1040,0]
Type = attackdist
Trigger1 = 1
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 1040, effect]
type = Explod
persistent = 0
trigger1 = time = 4
anim = 1041
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 1
pausemovetime = 100
supermovetime =100
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)

[State 1040, effect]
type = Explod
trigger1 = time = 5
trigger2 = time = 15
trigger3 = time = 25
anim = 1042
random = 24,5
postype = p1
pos = 0,-80
velocity = 0,-1
ownpal = 1
sprpriority = 1
pausemovetime = 100
supermovetime =100
removeongethit = 1
scale = const(size.xscale)-(var(19)*0.09),const(size.yscale)

[state 0,0]
type = palfx
trigger1 = animelem=9,>=0
add = 6*animelemtime(9),12*animelemtime(9),20*animelemtime(9)
mul = 256,256,256
time = 1
[state 0,0]
type = palfx
trigger1 = animelem=13,>=0
add = 60-12*animelemtime(13),144-30*animelemtime(13),256-50*animelemtime(13)
mul = 256,256,256
time = 1

;---------------------[ブーストゲージ増加]
[state 0,0]
type = varadd
trigger1 = time = 28
trigger1 = var(23) = 0
var(16) = 10

[State 1040, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;北斗七死騎兵斬
[Statedef 1050]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1050
poweradd = 0

[state a]
type = veladd
trigger1 = animelem = 4
x = 10
y = 1.5

[state a]
type = veladd
trigger1 = animelem = 4,>=0
y = 0.3

;---------------------[効果音]
[State 1050, 1];
type = PlaySnd
trigger1 = time = 5
value = 600, 3

[State 1050, 5]
type = PlaySnd
trigger1 = time = 3
value = 1050,0
channel = 0

;---------------------[]
[State 1050, 1]
type = HitDef
trigger1 = animelem = 4
attr = A, SA
damage = ceil(fvar(0)*62),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = HA
hitflag = MAFD
priority = 7, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 4
ground.hittime  = 17;+(P2StateType=C)
guard.hittime = 15;+(P2StateType=C)
guard.ctrltime = 15;+(P2StateType=C)
ground.velocity = -4.0
airguard.velocity = -2.5,-2
air.type = high
air.velocity = -4.0,ifelse(fvar(25)>0,-0.1,-5.0)
air.hittime = 12
air.fall = 1
p2facing = 1
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1050

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1050,0]
Type = attackdist
Trigger1 = animelem=9,>0
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 8
y = 4.0

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 3000, effect]
type = Explod
persistent = 0
trigger1 = animelem = 4
anim = 1051
postype = p1
pos = 4,-10
ownpal = 1
sprpriority = 4
pausemovetime = 99999
supermovetime = 99999
bindtime = -1
removetime = 300
removeongethit = 1
scale = const(size.xscale),const(size.yscale)
id = 1051

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 10000 < 1000
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 10000 < 1000
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varset
trigger1 = var(9) > 0
trigger1 = var(33) % 10000 < 1000
trigger1 = movehit
trigger1 = time>1
v = 9
value = 0
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(32) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 10000 < 1000
persistent = 0
v = 33
value = 1
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 1050, 7]
type = ChangeState
trigger1 = movehit
value = 1056
ctrl = 0
ignorehitpause = 0

[State 1050, 7]
type = ChangeState
trigger1 = animelem=4,<0
trigger1 = pos y >= 0
trigger1 = !movehit
value = 52
ctrl = 1

[State 1050, 7]
type = ChangeState
trigger1 = animelem=4,>=0
trigger1 = pos y >= 0
trigger1 = !movehit
value = 1055
ctrl = 0

;---------------------------------------------------------------------------
;北斗七死騎兵斬_着地
[Statedef 1055]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1055
poweradd = 0

[State 1055,0]
Type = attackdist
Trigger1 = 1
value = 0

[state 0,0]
type = removeexplod
trigger1 = 1
id = 1051

[State 1055, 3]
type = posset
trigger1 = time >= 0
y = 0

[State 1055, 3]
type = ChangeState
trigger1 = animtime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;北斗七死騎兵斬_ヒット
[Statedef 1056]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1056
poweradd = 0

[state 0,0]
type = removeexplod
trigger1 = 1
id = 1051

[state 0,0]
type = veladd
trigger1 = time = 12
x = -1.45*1.0
ignorehitpause = 0
[state 0,0]
type = veladd
trigger1 = time = 12
y = -2.5*2
ignorehitpause = 0

[state 0,0]
type = veladd
trigger1 = time > 12
y = 0.58

[state 0,0]
type = null;posadd
trigger1 = movehit
y = 4

;---------------------[]
[State 1056, 1]
type = HitDef
trigger1 = animelem = 3
attr = A, SA
damage = ceil(fvar(0)*62),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = HA
hitflag = MAFD
priority = 7, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 4
ground.hittime  = 17;+(P2StateType=C)
guard.hittime = 15;+(P2StateType=C)
guard.ctrltime = 15;+(P2StateType=C)
ground.velocity = -4.0,-8.0
airguard.velocity = -2.5,-2
air.type = high
air.velocity = -5.0,ifelse(fvar(25)>0,-0.1,-8.0)
air.hittime = 12
fall = 1
air.fall = 1
p2facing = 1
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1056

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -66-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1056,0]
Type = attackdist
Trigger1 = animelem=4,>0
Trigger1 = anim=44
value = 0

[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 8
y = 2

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 1056, 7]
type = Changeanim
trigger1 = anim != 44
trigger1 = animtime = 0
value = 44

[State 1056, 7]
type = ChangeState
trigger1 = animelem=3,>0
trigger1 = pos y >= 0
value = 52
ctrl = 1

;---------------------------------------------------------------------------
;北斗蛇雷咬
[Statedef 1060]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
poweradd = 0

[state 0,0]
type = velset
trigger1 = prevstateno != 261
trigger1 = vel x<8
trigger1 = time = [10,18]
trigger1 = frontedgedist >= 12
x = 8

[State a]
type = hitoverride
trigger1 = time<5
attr = SCA,NA
stateno = 261
time = 1

[state 0,0]
type = palfx
trigger1 = time = 0
trigger1 = prevstateno = 261
add = 90,5,5
time = 15
ignorehitpause = 1

[state 0,0]
type = changeanim
trigger1 = prevstateno != 261
trigger1 = time = 0
value = 1060
;
[State a]
type = ChangeAnim
triggerall = PrevStateNo = 261
trigger1 = Time = 0
value = 1060
elem = var(56)

;---------------------[効果音]
[State 1060, 1];
type = PlaySnd
trigger1 = animelemtime(2) = 2
value = 600, 4

[State 1060, 5]
type = PlaySnd
trigger1 = animelemtime(2) = 3
value = 320,0
channel = 0

;---------------------[]
[State 1060, 1]
type = HitDef
trigger1 = animelem = 7
attr = S, SA
damage = ceil(fvar(0)*123),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 16,15
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 20;+(P2StateType=C)
guard.hittime = 17;+(P2StateType=C)
guard.ctrltime = 17;+(P2StateType=C)
ground.velocity = -4.0,-8.5-0.5
airguard.velocity = -2.5,-2
air.type = high
air.velocity = -4.0,ifelse(fvar(25)>0,-0.1,-8.5-0.5)
fall = 1
air.hittime = 14
air.fall = 1
p2facing = 1
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-18.0*1.3*1.2-var(30)*0.05,-8.0*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-18.0*1.3*1.2-var(30)*0.05)
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1060

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = prevstateno != 261
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1010,0]
Type = attackdist
Trigger1 = animelem=9,>0
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 15

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 3000, effect]
type = Explod
persistent = 0
trigger1 = animelemtime(5) = 1
anim = 1061
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 3
pausemovetime = 100
supermovetime =100
bindtime = 15
removeongethit = 1
scale = const(size.xscale),const(size.yscale)

[State 0, 0]
type = Explod
trigger1 = time = 10
postype = p1
pos = -15,0
anim = 9500
ownpal = 1
keyctrl = 0
sprpriority = 5
scale = 0.5,0.5
;bindtime = -1

[State 0, 0]
type = Explod
trigger1 = time = 14
postype = p1
pos = -15,0
anim = 9500
ownpal = 1
keyctrl = 0
sprpriority = 5
scale = 0.5,0.5
;bindtime = -1

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,14,ceil(14*fvar(0)))
ignorehitpause = 1
persistent = 0

[state 0,0]
type = changestate
trigger1 = time >= 2
trigger1 = movehit
trigger1 = command = "h_jump"
value = 49
ctrl = 0
[state 0,0]
type = changestate
trigger1 = time >= 2
trigger1 = movehit
trigger1 = command = "holdup"
value = 40
ctrl = 0

[state a]
type = changestate
trigger1 = time >= 2
trigger1 = movecontact
trigger1 = command = "FF"
value = 101

[State 1060, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;北斗飛衛拳
[Statedef 1070]
type    = A
movetype= A
physics = N
juggle  = 0
anim = 1070
ctrl = 0
poweradd = 0

[state 0,0]
type = velset
trigger1 = time = 0
trigger1 = prevstateno!=500&&prevstateno!=505
x = 0
y = 0

[State 1,]
type = Width
trigger1 = 1
edge = 20,0

[State 0,0]
type = nothitby
trigger1 = time < 3
value = SCA
time = 1

[State 1070]
Type = VelAdd
Trigger1 = time=0
x = 2
[State 1070]
Type = VelAdd
Trigger1 = AnimElem=5,<=0
x = 0.7
[State 1070]
Type = VelAdd
Trigger1 = AnimElem=6,>=0
Trigger1 = Vel x>0
x = -0.3
[State 1070]
Type = VelSet
Trigger1 = Vel x<=0
x = 0
[State 1070]
Type = VelAdd
Trigger1 = AnimElem=4,>=0
Trigger1 = time<=20
y = -0.64;-0.62

[State 1070]
Type = VelAdd
Trigger1 = time>=20
y = 0.58

;---------------------[効果音]
[State 1070, 1];
type = PlaySnd
trigger1 = time = 5
value = 600, 3

[State 1070, 5]
type = PlaySnd
trigger1 = time = 1
value = 1070,0
channel = 0

;---------------------[]
[State 1070, 1]
type = HitDef
trigger1 = animelem = 6
attr = S, SA
damage = ceil(fvar(0)*123),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 8, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17;+(P2StateType=C)
guard.hittime = 15;+(P2StateType=C)
guard.ctrltime = 15;+(P2StateType=C)
ground.velocity = -12.0,-2.5
airguard.velocity = -2.5,-2
air.type = high
air.velocity = -12.0,ifelse(fvar(25)>0,-0.1,-2.5)
fall = 1
air.hittime = 12
air.fall = 1
p2facing = 1
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1070

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = prevstateno != 261
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1070,0]
Type = attackdist
Trigger1 = animelem=7,>0
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 8

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 1070];エフェクト１
Type = Helper
Trigger1 = AnimElem=6
ID = 1075
Name = "北斗飛衛拳"
Sprpriority = 2
Pos = 0,0
PosType = P1
StateNo = 1075
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1070];エフェクト２
Type = Helper
Trigger1 = AnimElem=6
ID = 1076
Name = "北斗飛衛拳2"
Sprpriority = 2
Pos = -20,-230/2
PosType = P1
StateNo = 1076
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1070];エフェクト３
Type = Helper
Trigger1 = AnimElem=6
ID = 1077
Name = "北斗飛衛拳3"
Sprpriority = 2
Pos = 0,-170/2
PosType = P1
StateNo = 1076
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100000 < 10000
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100000 < 10000
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varset
trigger1 = var(9) > 0
trigger1 = var(33) % 100000 < 10000
trigger1 = movehit
trigger1 = time>1
v = 9
value = 0
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(32) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100000 < 10000
persistent = 0
v = 33
value = 1
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varset
trigger1 = movehit
trigger1 = enemynear,statetype != A
v = 11
value = 1
ignorehitpause = 1

[State -1]
type = ChangeState
value = 120
triggerall = var(59)<=0
triggerall = command = "z"
triggerall = command = "holdback"
triggerall = animelem=7,>0
trigger1 = inguarddist
trigger1 = power>0
ctrl = 1
[State -1, Dash Air]
type = ChangeState
value = 110
triggerall = Var(59)<=0
trigger1 = command = "ダッシュ"
trigger1 = statetype = A
trigger1 = animelem=7,>0
trigger1 = var(13) = 0
trigger1 = var(32) = 0
trigger1 = var(5) = 0
trigger1 = pos y<-30
[State -1, Dash Air]
type = ChangeState
value = 115
triggerall = Var(59)<=0
trigger1 = command = "バックダッシュ"
trigger1 = statetype = A
trigger1 = animelem=7,>0
trigger1 = var(13) = 0
trigger1 = var(32) = 0
trigger1 = var(5) = 0
trigger1 = pos y<-30

[State 1070, 7]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;北斗飛衛拳_空中
[Statedef 1071]
type    = A
movetype= A
physics = N
juggle  = 0
anim = 1071
ctrl = 0
poweradd = 0

[State 1,]
type = Width
trigger1 = 1
edge = 20,0

[State 0,0]
type = nothitby
trigger1 = time < 3
value = SCA
time = 1

[State 1071]
Type = StateTypeSet
Trigger1 = !Time
Trigger1 = PrevStateNo!=50000
value = A

[State 1071]
Type = VelSet
TriggerAll=!Time
Trigger1 = PrevStateNo!=50000
y = 0

[State 1071,velset]
Type = VelSet
TriggerAll=PrevStateNo!=50000
Trigger1 = !Time
x = 5
y = -3.5

[State 1071]
Type = VelAdd
Trigger1 = AnimElem=10,>=0
Trigger1 = Vel x>0
x = -0.2

[State 1071]
Type = VelSet
Trigger1 = Vel x<3
x = 2

[State 1071]
Type = VelAdd
Trigger1 = AnimElem=10,>=0
y = 0.45

;---------------------[効果音]
[State 1071, 1];
type = PlaySnd
trigger1 = time = 5
value = 600, 3

[State 1071, 5]
type = PlaySnd
trigger1 = time = 1
value = 1070,0
channel = 0

;---------------------[]
[State 1071, 1]
type = HitDef
trigger1 = AnimElem = 6
trigger2 = AnimElem = 7
trigger3 = AnimElem = 8
attr = S, SA
damage = ceil(fvar(0)*24),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = HA
hitflag = MAFD
priority = 6, Hit
pausetime = 12,11
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17;+(P2StateType=C)
guard.hittime = 15;+(P2StateType=C)
guard.ctrltime = 15;+(P2StateType=C)
ground.velocity = -4.0,-2
airguard.velocity = -2.5,-2
air.type = high
air.velocity = -5.0,ifelse(fvar(25)>0,-1,-10)
fall = 1
air.hittime = 12
air.fall = 1
p2facing = 1
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1071

[State 1071, 1]
type = HitDef
trigger1 = AnimElem = 10
attr = S, SA
damage = ceil(fvar(0)*24),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = HA
hitflag = MAFD
priority = 6, Hit
pausetime = 15,14
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17;+(P2StateType=C)
guard.hittime = 15;+(P2StateType=C)
guard.ctrltime = 15;+(P2StateType=C)
ground.velocity = -5,-3
airguard.velocity = -2.5,-2
air.type = high
air.velocity = -5.0,ifelse(fvar(25)>0,-1,-10)
fall = 1
air.hittime = 12
air.fall = 1
p2facing = 1
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1071

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=7,<0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
Trigger1 = AnimElem=7,<0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=7,>=0
Trigger1 = AnimElem=8,<0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
Trigger1 = AnimElem=7,>=0
Trigger1 = AnimElem=8,<0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=8,>=0
Trigger1 = AnimElem=9,<0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
Trigger1 = AnimElem=8,>=0
Trigger1 = AnimElem=9,<0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = AnimElem=10,>=0
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
Trigger1 = AnimElem=10,>=0
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = prevstateno != 261
trigger1 = time = 0
trigger1 = p2dist x < 0

[State 1071,]
type = statetypeset
trigger1 = animelem = 12
movetype = I
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 8

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 1071];エフェクト１
Type = Helper
Trigger1 = AnimElem=6
ID = 1075
Name = "北斗飛衛拳"
Sprpriority = 2
Pos = 0,0
PosType = P1
StateNo = 1075
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1071];エフェクト２
Type = Helper
Trigger1 = AnimElem=6
ID = 1076
Name = "北斗飛衛拳2"
Sprpriority = 2
Pos = -20,-230/2
PosType = P1
StateNo = 1076
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1071];エフェクト３
Type = Helper
Trigger1 = AnimElem=6
ID = 1077
Name = "北斗飛衛拳3"
Sprpriority = 2
Pos = 0,-170/2
PosType = P1
StateNo = 1076
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100000 < 10000
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100000 < 10000
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varset
trigger1 = var(9) > 0
trigger1 = var(33) % 100000 < 10000
trigger1 = movehit
trigger1 = time>1
v = 9
value = 0
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(32) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100000 < 10000
persistent = 0
v = 33
value = 1
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = AnimElem=6,<=0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = AnimElem=7,<=0
trigger1 = AnimElem=6,>0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = AnimElem=8,<=0
trigger1 = AnimElem=7,>0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = AnimElem=8,>0
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 1071, 7]
type = ChangeState
trigger1 = animelem=11,>=0
trigger1 = pos y >= 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
;北斗飛衛拳_強
[Statedef 1072]
type    = A
movetype= A
physics = N
juggle  = 12
anim = 1072
ctrl = 0
poweradd = 0

[state 0,0]
type = velset
trigger1 = time = 0
trigger1 = prevstateno!=500&&prevstateno!=505
x = 0
y = 0

[State 1,]
type = Width
trigger1 = 1
edge = 20,0

[State 0,0]
type = nothitby
trigger1 = time < 3
value = SCA
time = 1

[State 1072]
Type = VelSet
TriggerAll=PrevStateNo!=50000
Trigger1 = !Time
x = 6
y = -6.5

[State 1072]
Type = VelAdd
Trigger1 = AnimElem=7,>=0
Trigger1 = Vel x>0
x = -0.2

[State 1072]
Type = VelSet
Trigger1 = Vel x<3
x = 2

[State 1072]
Type = VelAdd
Trigger1 = 1
y = 0.4

;---------------------[効果音]
[State 1072, 1];
type = PlaySnd
trigger1 = time = 5
value = 600, 3

[State 1072, 5]
type = PlaySnd
trigger1 = time = 1
value = 1070,0
channel = 0

;---------------------[]
[State 1072, 1]
type = HitDef
trigger1 = animelem = 6,<0
trigger1 = !MoveContAct
attr = S, SA
damage = ceil(fvar(0)*123),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 8, Hit
pausetime = 17,16
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17;+(P2StateType=C)
guard.hittime = 15;+(P2StateType=C)
guard.ctrltime = 15;+(P2StateType=C)
ground.velocity = -2,-10
airguard.velocity = -2.5,-2
air.type = high
air.velocity = -3.0,ifelse(fvar(25)>0,-1,-10)
fall = 1
air.hittime = 12
air.fall = 1
p2facing = 1
fall.recovertime = 100
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1072

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = prevstateno != 261
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1070,0]
Type = attackdist
Trigger1 = animelem=7,>0
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 8

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 1072];エフェクト１
Type = Helper
Trigger1 = AnimElem=6
ID = 1075
Name = "北斗飛衛拳"
Sprpriority = 2
Pos = 0,0
PosType = P1
StateNo = 1075
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1072];エフェクト２
Type = Helper
Trigger1 = AnimElem=6
ID = 1076
Name = "北斗飛衛拳2"
Sprpriority = 2
Pos = -20,-230/2
PosType = P1
StateNo = 1076
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1072];エフェクト３
Type = Helper
Trigger1 = AnimElem=6
ID = 1077
Name = "北斗飛衛拳3"
Sprpriority = 2
Pos = 0,-170/2
PosType = P1
StateNo = 1076
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100000 < 10000
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100000 < 10000
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varset
trigger1 = var(9) > 0
trigger1 = var(33) % 100000 < 10000
trigger1 = movehit
trigger1 = time>1
v = 9
value = 0
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(32) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 100000 < 10000
persistent = 0
v = 33
value = 1
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[state a]
type = varset
trigger1 = movehit
trigger1 = var(8) = 1
v = 11
value = 1
ignorehitpause = 1

[State 1072, 7]
type = ChangeState
trigger1 = animelem=4,>=0
trigger1 = pos y >= 0
value = 1073
ctrl = 1

;---------------------------------------------------------------------------
;北斗飛衛拳_着地
[Statedef 1073]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0
anim = 1073
sprpriority = 1

[State 1073,0]
Type = attackdist
Trigger1 = 1
value = 0

[State 1073, 3]
type = posset
trigger1 = time >= 0
y = 0

[State 1073, 3]
type = ChangeState
trigger1 = animtime = 0
value = 51
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)北斗飛衛拳
[Statedef 1075]
Type = A
Ctrl = 0
Anim = 1075
VelSet = 0,0
MoveType = I
PhySics = N
Sprpriority = 2

[State a]
Type = AssertSpecial
Trigger1 = 1
flag = Noshadow

[State a]
Type = bindtoroot
Trigger1 = root,stateno != 1100
Pos = 140/2,-250/2

[State a]
Type = bindtoroot
Trigger1 = root,stateno = 1100
Pos = 250/2,-140/2

[State a]
Type = Trans
Trigger1 = 1
trans = Addalpha
alpha = 256,256

[State a]
Type = AngleSet
Trigger1 = root,stateno != 1100
value = 36

[State a]
Type = AngleDraw
Trigger1 = root,stateno = 1100
Value = 0

[State a]
Type = AngleDraw
Trigger1 = 1
Scale = 1.2,1.2

[State a]
Type = DestroySelf
Trigger1 = Root,AnimElem=7,>=0
Trigger1 = Root,StateNo=1070
Trigger2 = Root,AnimElem=11,>=0
Trigger2 = Root,StateNo=1071
Trigger3 = Root,AnimElem=7,>=0
Trigger3 = Root,StateNo=1072
Trigger4 = Root,AnimElem=7,>=0
Trigger4 = Root,StateNo=1100
Trigger5 = Root,StateNo!=1070
Trigger5 = Root,StateNo!=1071
Trigger5 = Root,StateNo!=1072
Trigger5 = Root,StateNo!=1100

;---------------------------------------------------------------------------
;(HELPER)北斗飛衛拳
[Statedef 1076]
Type = A
Ctrl = 0
Anim = 1076
VelSet = -1,0
MoveType = I
PhySics = N
Sprpriority = 2

[State a]
Type = AssertSpecial
Trigger1 = 1
flag = Noshadow

[State a]
Type = VelSet
Trigger1 = !Time
Trigger1 = isHelper(1076)
x = -1

[State a]
Type = VelSet
Trigger1 = !Time
Trigger1 = isHelper(1077)
x = -0.5
y = 0.5

[State a]
Type = VelSet
Trigger1 = !Time
Trigger1 = isHelper(1106)
x = -0.25
y = -0.25

[State a]
Type = VelSet
Trigger1 = !Time
Trigger1 = isHelper(1107)
x = -0.25
y = 0.25

[State a]
Type = Trans
Trigger1 = 1
trans = Addalpha
alpha = 256-var(1),256

[State a]
Type = varSet
Trigger1 = !Time
var(1) = 0

[State a]
Type = varAdd
Trigger1 = 1
var(1) = 8

[State a]
Type = AngleSet
Trigger1 = !Time
Trigger1 = isHelper(1076)
value = 0

[State a]
Type = AngleSet
Trigger1 = !Time
Trigger1 = isHelper(1077)
value = 36

[State a]
Type = AngleSet
Trigger1 = !Time
Trigger1 = isHelper(1106)
value = -15

[State a]
Type = AngleSet
Trigger1 = !Time
Trigger1 = isHelper(1107)
value = 15

[State a]
Type = AngleDraw
Trigger1 = 1
Scale = 2.0+var(1)*0.001,2.0+var(1)*0.001

[State a]
Type = DestroySelf
Trigger1 = Time=32

;---------------------------------------------------------------------------
;北斗剛掌波
[Statedef 1080]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
anim = 1080
sprpriority = 1
ctrl = 0

;---------------------[効果音]
[state a]
type = playsnd
trigger1 = time = 3
value = 1080,0
channel = 0

[state a];
type = playsnd
trigger1 = time = 6
value = 600,7

;---------------------[ヘルパー]
[state a]
Type = Explod
Trigger1 = AnimElem=2,>=0
Trigger1 = AnimElem=9,<0
sprpriority = 4
pos = 16,-125
postype = p1
anim = 1082
id = 1082
OnTop = 1
OwnPal = 1
ignorehitpause = 1
bindtime = -1
Scale = (0.01+time*0.02),(0.01+time*0.02)
PauseMoveTime = 999999
SuperMoveTime = 999999

[state a];弾
type = Helper
trigger1 = time = 40
trigger2 = time = 48
id = 1085
name = "北斗剛掌波"
sprpriority = 5
pos = 20,-100
postype = p1
stateno = 1083
helpertype = normal
;pausemovetime = 0
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];弾
type = Helper
trigger1 = time = 56
id = 1085
name = "北斗剛掌波"
sprpriority = 5
pos = 20,-100
postype = p1
stateno = 1084
helpertype = normal
;pausemovetime = 0
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];弾
type = Helper
trigger1 = AnimElem = 10
id = 1085
name = "北斗剛掌波"
sprpriority = 4
pos = 50,-100
postype = p1
stateno = 1086
helpertype = normal
;pausemovetime = 0
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];弾
type = Helper
trigger1 = AnimElem = 10
id = 1085
name = "北斗剛掌波"
sprpriority = 4
pos = 20,-100
postype = p1
stateno = 1087
helpertype = normal
;pausemovetime = 0
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 1080];エフェクト
Type = Helper
trigger1 = time = 40
trigger2 = time = 56
ID = 1088
Name = "北斗剛掌波2"
Sprpriority = 2
Pos = 0,-250/2
PosType = P1
StateNo = 1088
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1080];エフェクト
Type = Helper
trigger1 = time = 40
trigger2 = time = 56
ID = 1089
Name = "北斗剛掌波3"
Sprpriority = 2
Pos = 0,-150/2
PosType = P1
StateNo = 1089
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1080];エフェクト
Type = Helper
trigger1 = time = 48
trigger2 = time = 64
ID = 1088
Name = "北斗剛掌波2"
Sprpriority = 2
Pos = 150,-250/2
PosType = P1
StateNo = 1088
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1080];エフェクト
Type = Helper
trigger1 = time = 48
trigger2 = time = 64
ID = 1089
Name = "北斗剛掌波3"
Sprpriority = 2
Pos = 150,-150/2
PosType = P1
StateNo = 1089
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

;---------------------[]
[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1000,0]
Type = attackdist
Trigger1 = time>44
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 12

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;北斗剛掌波_空中
[Statedef 1081]
type    = A
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
ctrl = 0
anim = 1081
sprpriority = 1

[State 1081, 1];
type = PlaySnd
trigger1 = animelem = 1
value = 600,7

[State 1081, 5]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1080,0
channel = 0

[state a]
type = ctrlset
trigger1 = animelem = 8
value = 1

[State 1801,]
type = statetypeset
trigger1 = animelem = 6
movetype = I

;---------------------[ヘルパー]
[state a];弾
type = Helper
trigger1 = animelem = 5
id = 1085
name = "北斗剛掌波"
sprpriority = 5
pos = 45,-82
postype = p1
stateno = 1085
helpertype = normal
;pausemovetime = 0
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a]
Type = Explod
trigger1 = animelem = 2
sprpriority = 4
pos = -55/2,-250/2
postype = p1
anim = 1082
id = 1082
OnTop = 1
OwnPal = 1
Scale = 0.5,0.5
PauseMoveTime = 999999
SuperMoveTime = 999999

[state a]
Type = Explod
trigger1 = animelem = 3
sprpriority = 4
pos = -30/2,-270/2
postype = p1
anim = 1083
id = 1083
OnTop = 1
OwnPal = 1
Scale = 0.5,0.5
PauseMoveTime = 999999
SuperMoveTime = 999999

[state a]
Type = Explod
trigger1 = animelem = 4
sprpriority = 4
pos = -30/2,-270/2
postype = p1
anim = 1084
id = 1084
OnTop = 1
OwnPal = 1
Scale = 0.5,0.5
PauseMoveTime = 999999
SuperMoveTime = 999999

[state a]
Type = removeexplod
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
id = 1082

[state a]
Type = removeexplod
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
id = 1083

[state a]
Type = removeexplod
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
id = 1084

;---------------------[]
[state a]
type = turn
trigger1 = time = 0
trigger1 = prevstateno!=110&&prevstateno!=115
trigger1 = p2dist x < -5

[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 7
y = 4.5

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 4,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

[state a]
type = veladd
trigger1 = animelem = 8,>=0
y = 0.5

;---------------------[立ちステートに戻る]
[state a]
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52

;---------------------------------------------------------------------------
;(HELPER)弾
[Statedef 1083]
type = A
ctrl = 0
anim = 1085
velset = 16,0
movetype = A
physics = N
sprpriority = 2

[state 0,0]
type = assertspecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1

[State 0, 0]
type = SprPriority
trigger1 = 1
value = 5
ignorehitpause = 1

[State 1083,AngleDraw]
Type = AngleDraw
Trigger1 = 1
Scale = 2,2
IgnoreHitPause = 1

;---------------------[効果音]
[state 2,]
type = parentvaradd
trigger1 = root,var(8) >0
trigger1 = root,var(4) < 7
trigger1 = movehit=1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,]
type = parentvaradd
trigger1 = p2statetype=A||p2statetype=L
trigger1 = movehit=1
v = 3
value = 1
persistent = 0
ignorehitpause = 1
[state 2,]
type = parentvaradd
trigger1 = movehit=1
v = 30
value = 1
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 1083, 3]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = hard
damage    = ceil(root,fvar(0)*55),ifelse(root,var(10)>0,11,6)
priority = 5, Hit
hitflag = MAFD
guardflag = MA
pausetime = 1,12
sparkno = -1;s7010+(random%8)
getpower = ceil(root,fvar(0)*51),51
sparkxy = -10,0
hitsound   = s400,3
guardsound = s121,0
guard.sparkno = -1;s7101
ground.type = high
ground.slidetime = 12
ground.hittime  = 18+(P2StateType=C)
guard.hittime = 14+(P2StateType=C)
guard.ctrltime = 14+(P2StateType=C)
ground.velocity = -4.0
guard.velocity = -4;-11
air.velocity = -2.5,ifelse(root,fvar(25)>0,-0.1,-7.5)
ground.cornerpush.veloff = 0
fall.xvelocity = root,var(3)*-0.2-2.5
fall.yvelocity = root,var(3)*-0.2-2.5-(root,var(31)*0.045)/4
yaccel = 0.55*ifelse(p2statetype=A,1.5,1) + (root,var(3) - 1)*0.07
air.fall = 1
p2facing = 1
ID = 1083

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15),-6-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2+15),-5;-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
;---------------------[ヘルパー]
;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = ,NA,SA,HA,NP,SP,HP
time = 1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 1083

;---------------------[ブーストゲージ増加]
[state a]
type = parentvaradd
trigger1 = movecontact = 1
trigger1 = root,var(23) = 0
v = 16
value = ifelse(MoveGuarded,4,ceil(4*root,fvar(0)))
ignorehitpause = 1
persistent = 0

;---------------------[]
;==changed
[state a];弱攻撃吹き飛ばし
type = parentvarset
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y>-5
v = 11
value = 0

;==changed
[state a];弱攻撃吹き飛ばし
type = targetstate
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y<=-5
value = 551
persistent=0

[state a]
type = destroyself
trigger1 = time = 30
Trigger2 = Root,MoveType = H

;---------------------------------------------------------------------------
;(HELPER)弾
[Statedef 1084]
type = A
ctrl = 0
anim = 1085
velset = 16,0
movetype = A
physics = N
sprpriority = 2

[state 0,0]
type = assertspecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1

[State 0, 0]
type = SprPriority
trigger1 = 1
value = 5
ignorehitpause = 1

[State 1084,AngleDraw]
Type = AngleDraw
Trigger1 = 1
Scale = 2,2
IgnoreHitPause = 1

;---------------------[効果音]
[state 2,]
type = parentvaradd
trigger1 = root,var(8) >0
trigger1 = root,var(4) < 7
trigger1 = movehit=1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,]
type = parentvaradd
trigger1 = root,var(20) > 1
trigger1 = root,var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,]
type = parentvaradd
trigger1 = p2statetype=A||p2statetype=L
trigger1 = movehit=1
v = 3
value = 1
persistent = 0
ignorehitpause = 1
[state 2,]
type = parentvaradd
trigger1 = movehit=1
v = 30
value = 1
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 1084, 3]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = hard
damage    = ceil(root,fvar(0)*98),ifelse(root,var(24)>0,11,6)
priority = 5, Hit
hitflag = MAFD
guardflag = MA
pausetime = 1,12
sparkno = -1;s7010+(random%8)
getpower = ceil(root,fvar(0)*51),51
sparkxy = -10,0
hitsound   = s400,3
guardsound = s121,0
guard.sparkno = -1;s7101
ground.type = high
ground.slidetime = 12
ground.hittime  = 18+(P2StateType=C)
guard.hittime = 14+(P2StateType=C)
guard.ctrltime = 14+(P2StateType=C)
ground.velocity = -4.0
guard.velocity = -4;-11
air.velocity = -2.5,ifelse(root,fvar(25)>0,-0.1,-7.5)
ground.cornerpush.veloff = 0
fall.xvelocity = root,var(3)*-0.2-2.5
fall.yvelocity = root,var(3)*-0.2-2.5-(root,var(31)*0.045)/4
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (root,var(3) - 1)*0.07
air.fall = 1
p2facing = 1
ID = 1084

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15),-6-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2+15),-5;-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
;---------------------[ヘルパー]
;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = ,NA,SA,HA,NP,SP,HP
time = 1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 1084

;---------------------[ブーストゲージ増加]
[state a]
type = parentvaradd
trigger1 = movecontact = 1
trigger1 = root,var(23) = 0
v = 16
value = ifelse(MoveGuarded,4,ceil(4*root,fvar(0)))
ignorehitpause = 1
persistent = 0

;---------------------[]
;==changed
[state a];弱攻撃吹き飛ばし
type = parentvarset
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y>-5
v = 11
value = 0

;==changed
[state a];弱攻撃吹き飛ばし
type = targetstate
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y<=-5
value = 551
persistent=0

[state a]
type = destroyself
trigger1 = time = 30
Trigger2 = Root,MoveType = H

;---------------------------------------------------------------------------
;(HELPER)弾
[Statedef 1085]
type = A
ctrl = 0
anim = 1085
velset = 3.8,3.8
movetype = A
physics = N
sprpriority = 2

[state 0,0]
type = assertspecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1

[State 0, 0]
type = SprPriority
trigger1 = 1
value = 5
ignorehitpause = 1

[State 1085,AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = -45
Scale = 2,2
IgnoreHitPause = 1

;---------------------[効果音]
[state 2,]
type = parentvaradd
trigger1 = root,var(8) >0
trigger1 = root,var(4) < 7
trigger1 = movehit=1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,]
type = varadd
trigger1 = root,var(20) > 1
trigger1 = root,var(4) < 7
trigger1 = time>1
v = 20
value = 1
persistent = 0
ignorehitpause = 1

[state 2,]
type = parentvaradd
trigger1 = var(20) > 0
trigger1 = root,var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = parentvaradd
trigger1 = root,var(9) >0
trigger1 = root,var(4) < 7
trigger1 = movehit
trigger1 = root,var(33) % 1000000 < 100000
trigger1 = root,var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = parentvaradd
trigger1 = root,var(9) >0
trigger1 = root,var(4) < 7
trigger1 = movehit
trigger1 = root,var(33) % 1000000 < 100000
trigger1 = root,var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = parentvaradd
trigger1 = root,var(9) >0
trigger1 = root,var(4) < 7
trigger1 = movehit
trigger1 = root,var(33) % 1000000 < 100000
persistent = 0
v = 33
value = 100000
ignorehitpause = 1

[state 2,]
type = parentvaradd
trigger1 = p2statetype=A||p2statetype=L
trigger1 = movehit=1
v = 3
value = 1
persistent = 0
ignorehitpause = 1
[state 2,]
type = parentvaradd
trigger1 = movehit=1
v = 30
value = 1
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 1085, 3]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = hard
damage    = ceil(root,fvar(0)*70),ifelse(root,var(24)>0,11,6)
priority = 5, Hit
hitflag = MAFD
guardflag = MA
pausetime = 1,12
sparkno = -1;s7010+(random%8)
getpower = ceil(root,fvar(0)*51),51
sparkxy = -10,0
hitsound   = s400,3
guardsound = s121,0
guard.sparkno = -1;s7101
ground.type = high
ground.slidetime = 12
ground.hittime  = 18+(P2StateType=C)
guard.hittime = 14+(P2StateType=C)
guard.ctrltime = 14+(P2StateType=C)
ground.velocity = -4.0
guard.velocity = -4;-11
air.velocity = -2.5,ifelse(root,fvar(25)>0,-0.1,-7.5)
ground.cornerpush.veloff = 0
fall.xvelocity = root,var(3)*-0.2-2.5
fall.yvelocity = root,var(3)*-0.2-2.5-(root,var(31)*0.045)/4
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (root,var(3) - 1)*0.07
air.fall = 1
p2facing = 1
ID = 1085

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15),-6-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2+15),-5;-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
;---------------------[ヘルパー]
[State 1080];エフェクト
Type = Helper
trigger1 = time = 0
trigger2 = time = 24
trigger3 = time = 48
ID = 1088
Name = "北斗剛掌波2"
Sprpriority = 2
Pos = 20,0
PosType = P1
StateNo = 1088
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1080];エフェクト
Type = Helper
trigger1 = time = 0
trigger2 = time = 24
trigger3 = time = 48
ID = 1089
Name = "北斗剛掌波3"
Sprpriority = 2
Pos = 0,20
PosType = P1
StateNo = 1089
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = ,NA,SA,HA,NP,SP,HP
time = 1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 1085

;---------------------[ブーストゲージ増加]
[state a]
type = parentvaradd
trigger1 = movecontact = 1
trigger1 = root,var(23) = 0
v = 16
value = ifelse(MoveGuarded,4,ceil(4*root,fvar(0)))
ignorehitpause = 1
persistent = 0

;---------------------[]
;==changed
[state a];弱攻撃吹き飛ばし
type = parentvarset
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y>-5
v = 11
value = 0

;==changed
[state a];弱攻撃吹き飛ばし
type = targetstate
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y<=-5
value = 551
persistent=0

[state a]
type = destroyself
trigger1 = time = 100
trigger2 = movecontact

;---------------------------------------------------------------------------
;(HELPER)弾
[Statedef 1086]
type = A
ctrl = 0
anim = 1086
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state 0,0]
type = assertspecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1

[State 0, 0]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1

[State 1086,AngleDraw]
Type = AngleDraw
Trigger1 = time < 22
Scale = (0.5+time*0.2),1
IgnoreHitPause = 1

[State 1086,AngleDraw]
Type = AngleDraw
Trigger1 = time = 23
Scale = (0.5+time*0.2),0.9
IgnoreHitPause = 1

[State 1086,AngleDraw]
Type = AngleDraw
Trigger1 = time = 24
Scale = (0.5+time*0.2),0.8
IgnoreHitPause = 1

[State 1086,AngleDraw]
Type = AngleDraw
Trigger1 = time = 25
Scale = (0.5+time*0.2),0.7
IgnoreHitPause = 1

[State 1086,AngleDraw]
Type = AngleDraw
Trigger1 = time = 26
Scale = (0.5+time*0.2),0.6
IgnoreHitPause = 1

[State 1086,AngleDraw]
Type = AngleDraw
Trigger1 = time = 27
Scale = (0.5+time*0.2),0.5
IgnoreHitPause = 1

[State 1086,AngleDraw]
Type = AngleDraw
Trigger1 = time = 28
Scale = (0.5+time*0.2),0.4
IgnoreHitPause = 1

[State 1086,AngleDraw]
Type = AngleDraw
Trigger1 = time = 29
Scale = (0.5+time*0.2),0.3
IgnoreHitPause = 1

[State 1086,AngleDraw]
Type = AngleDraw
Trigger1 = time = 30
Scale = (0.5+time*0.2),0.2
IgnoreHitPause = 1

[State 1086,AngleDraw]
Type = AngleDraw
Trigger1 = time = 31
Scale = (0.5+time*0.2),0.1
IgnoreHitPause = 1

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[state a]
type = destroyself
trigger1 = time = 32
Trigger2 = Root,MoveType = H

;---------------------------------------------------------------------------
;(HELPER)弾
[Statedef 1087]
type = A
ctrl = 0
anim = 1087
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state 0,0]
type = assertspecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1

[State 0, 0]
type = SprPriority
trigger1 = 1
value = 4
ignorehitpause = 1

[State 1087,AngleDraw]
Type = AngleDraw
Trigger1 = 1
Scale = 2,2
IgnoreHitPause = 1

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[state a]
type = destroyself
trigger1 = Animtime = 0
Trigger2 = Root,MoveType = H

;---------------------------------------------------------------------------
;(HELPER)
[Statedef 1088]
Type = A
Ctrl = 0
Anim = 1088
VelSet = -1,0
MoveType = I
PhySics = N
Sprpriority = 2

[State a]
Type = AssertSpecial
Trigger1 = 1
flag = Noshadow

[State a]
Type = VelSet
Trigger1 = !Time
Trigger1 = numhelper(1085) = 0
x = -1.5
y = -1.5

[State a]
Type = VelSet
Trigger1 = !Time
Trigger1 = numhelper(1085) = 1
x = 0
y = -3

[State a]
Type = Trans
Trigger1 = 1
trans = Addalpha
alpha = 256-var(1),256

[State a]
Type = varSet
Trigger1 = !Time
var(1) = 0

[State a]
Type = varAdd
Trigger1 = 1
var(1) = 16

[State a]
Type = AngleSet
Trigger1 = !Time
Trigger1 = numhelper(1085) = 0
value = -36

[State a]
Type = AngleSet
Trigger1 = !Time
Trigger1 = numhelper(1085) = 1
value = -81

[State a]
Type = AngleDraw
Trigger1 = 1
Scale = 2.0+var(1)*0.001,2.0+var(1)*0.001

[State a]
Type = DestroySelf
Trigger1 = Time = 32

;---------------------------------------------------------------------------
;(HELPER)
[Statedef 1089]
Type = A
Ctrl = 0
Anim = 1089
VelSet = -1,0
MoveType = I
PhySics = N
Sprpriority = 2

[State a]
Type = AssertSpecial
Trigger1 = 1
flag = Noshadow

[State a]
Type = VelSet
Trigger1 = !Time
Trigger1 = numhelper(1085) = 0
x = -1.5
y = 1.5

[State a]
Type = VelSet
Trigger1 = !Time
Trigger1 = numhelper(1085) = 1
x = -3
y = 0

[State a]
Type = Trans
Trigger1 = 1
trans = Addalpha
alpha = 256-var(1),256

[State a]
Type = varSet
Trigger1 = !Time
var(1) = 0

[State a]
Type = varAdd
Trigger1 = 1
var(1) = 16

[State a]
Type = AngleSet
Trigger1 = !Time
Trigger1 = numhelper(1085) = 0
value = 36

[State a]
Type = AngleSet
Trigger1 = !Time
Trigger1 = numhelper(1085) = 1
value = -9

[State a]
Type = AngleDraw
Trigger1 = 1
Scale = 2.0+var(1)*0.001,2.0+var(1)*0.001

[State a]
Type = DestroySelf
Trigger1 = Time = 32

;---------------------------------------------------------------------------
;伝衝裂波
[Statedef 1090]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
anim = 1090
sprpriority = 1
ctrl = 0

;---------------------[効果音]
[state a]
type = playsnd
trigger1 = animelem = 4
value = 1030,0
channel = 0

[state a];
type = playsnd
trigger1 = animelem = 5
value = 300,2

;---------------------[ヘルパー]
[state a];弾
type = Helper
trigger1 = animelem = 4
id = 1095
name = "伝衝裂波"
sprpriority = 5
pos = 41,0
postype = p1
stateno = 1095
helpertype = normal
;pausemovetime = 0
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Helper
trigger1 = animelem = 4
id = 1097
name = "伝衝裂波"
sprpriority = 5
pos = 36,0
postype = p1
stateno = 1097
helpertype = normal
;pausemovetime = 0
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

;---------------------[]
[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1000,0]
Type = attackdist
Trigger1 = time>33
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 12

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
TriggerAll = animelem = 7,>=0
trigger1 = command = "闘気"
value = 1091
ctrl = 1

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;伝衝裂波
[Statedef 1091]
type    = S
movetype= A
physics = S
juggle  = 0
poweradd= 0
anim = 1091
sprpriority = 1
ctrl = 0

;---------------------[効果音]
[state a]
type = playsnd
trigger1 = animelem = 2
value = 1030,0
channel = 0

[state a];
type = playsnd
trigger1 = animelem = 3
value = 300,2

;---------------------[ヘルパー]
[state a];弾
type = Helper
trigger1 = animelem = 2
id = 1095
name = "伝衝裂波"
sprpriority = 5
pos = 41,0
postype = p1
stateno = 1095
helpertype = normal
;pausemovetime = 0
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Helper
trigger1 = animelem = 2
id = 1097
name = "伝衝裂波"
sprpriority = 5
pos = 36,0
postype = p1
stateno = 1097
helpertype = normal
;pausemovetime = 0
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

;---------------------[]
[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1000,0]
Type = attackdist
Trigger1 = time>21
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = 12

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 5,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)弾
[Statedef 1095]
type = A
ctrl = 0
anim = 1095
velset = 5.5,0
movetype = A
physics = N
sprpriority = 2

[state 0,0]
type = assertspecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1

[State 0, 0]
type = SprPriority
trigger1 = 1
value = 5
ignorehitpause = 1

;---------------------[効果音]
[state 2,]
type = parentvaradd
trigger1 = root,var(8) >0
trigger1 = root,var(4) < 7
trigger1 = movehit=1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,]
type = parentvaradd
trigger1 = root,var(20) > 1
trigger1 = root,var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,]
type = parentvaradd
trigger1 = p2statetype=A||p2statetype=L
trigger1 = movehit=1
v = 3
value = 1
persistent = 0
ignorehitpause = 1
[state 2,]
type = parentvaradd
trigger1 = movehit=1
v = 30
value = 1
persistent = 0
ignorehitpause = 1

;---------------------[]
[State 1095, 3]
type = HitDef
trigger1 = time = 0
attr = A, SP
animtype  = hard
damage    = ceil(root,fvar(0)*42),ifelse(root,var(24)>0,11,6)
priority = 5, Hit
hitflag = MAFD
guardflag = MA
pausetime = 1,12
sparkno = -1;s7010+(random%8)
getpower = ceil(root,fvar(0)*51),51
sparkxy = -10,0
hitsound   = s500,2
guardsound = s121,0
guard.sparkno = -1;s7101
ground.type = high
ground.slidetime = 12
ground.hittime  = 14+(P2StateType=C)
guard.hittime = 12+(P2StateType=C)
guard.ctrltime = 12+(P2StateType=C)
ground.velocity = -4.0
guard.velocity = -4;-11
air.velocity = -2.5,ifelse(root,fvar(25)>0,-0.1,-7.5)
ground.cornerpush.veloff = 0
fall.xvelocity = root,var(3)*-0.2-2.5
fall.yvelocity = root,var(3)*-0.2-2.5-(root,var(31)*0.045)/4
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (root,var(3) - 1)*0.07
air.fall = 1
p2facing = 1
ID = 1095

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15),-6-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2+15),-5;-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
;---------------------[ヘルパー]
;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = ,NA,SA,HA,NT,ST,HT
time = 1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA, NP, SP, HP
stateno = 1096

;---------------------[拡縮]
[State 1096]
type = AngleDraw
trigger1 = Timemod = 9,2
scale = 1,1.1

[State 1096]
type = AngleDraw
trigger1 = Timemod = 9,3
scale = 0.98,1.15

[State 1096]
type = AngleDraw
trigger1 = Timemod = 9,4
scale = 0.96,1.2

[State 1096]
type = AngleDraw
trigger1 = Timemod = 9,5
scale = 0.94,1.25

[State 1096]
type = AngleDraw
trigger1 = Timemod = 9,6
scale = 0.92,1.3

[State 1096]
type = AngleDraw
trigger1 = Timemod = 9,7
scale = 0.9,1.35

[State 1096]
type = AngleDraw
trigger1 = Timemod = 9,8
scale = 0.88,1.4

[State 1096]
type = AngleDraw
trigger1 = Timemod = 9,9
scale = 0.86,1.45

;---------------------[ブーストゲージ増加]
[state a]
type = parentvaradd
trigger1 = movecontact = 1
trigger1 = root,var(23) = 0
v = 16
value = ifelse(MoveGuarded,4,ceil(4*root,fvar(0)))
ignorehitpause = 1
persistent = 0

;---------------------[]
;==changed
[state a];弱攻撃吹き飛ばし
type = parentvarset
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y>-5
v = 11
value = 0

;==changed
[state a];弱攻撃吹き飛ばし
type = targetstate
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y<=-5
value = 551
persistent=0

[state a]
type = changestate
trigger1 = movehit = 1
trigger2 = moveguarded = 1
value = 1096

[state a]
type = destroyself
trigger1 = FrontEdgeDist < -40 

;---------------------------------------------------------------------------
;(HELPER)弾 消滅
[Statedef 1096]
type = A
movetype= I
physics = N
ctrl = 0
anim = 1096
sprpriority = 2
velset = 0,0

[State a]
type = VelSet
trigger1 = time = 0
x = -3

[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = RoundState = 2 || RoundState = 3
v = 1
value = 20

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(1),256  ;var(1)

;--------------------毎フレーム処理
[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0,0]
type = AngleDraw
trigger1 = time >= 0
scale = 1+var(1)/200.0,1+var(1)/200.0

[state 0,0]
type = destroyself
trigger1 = time >= 9

;---------------------------------------------------------------------------
;(HELPER)
[StateDef 1097]
Type = S
MoveType = I
Physics = N
Anim = 1097
SprPriority = 4

;--------------------諸数値初期化
[State 1097, DestroySelf]
Type = DestroySelf
Trigger1 = time >= 20

;--------------------毎フレーム処理
[State 1097,AngleDraw]
Type = AngleDraw
Trigger1 = 1
Scale = 1.0+time*-0.05,1.0+time*-0.05
IgnoreHitPause = 1

[State 1097,PalFX]
Type = PalFX
Trigger1 = 1
Time = 1
Add = -(time*10),-(time*10),-(time*10)
Mul = 256-Time*10,256-Time*10,256-Time*10
SinAdd = 0,0,0,10
InvertAll = 0
Color = 256

[State 1097, Trans]
Type = Trans
Trigger1 = 1
Trans = Add

[State 1097, AssertSpecial]
Type = AssertSpecial
Trigger1 = 1
Flag = NoShadow

;---------------------------------------------------------------------------
;飛鳥空斬波
[Statedef 1100]
type    = A
movetype= A
physics = N
juggle  = 0
anim = 1100
ctrl = 0
poweradd = 0

[state 1100,0]
type = velset
trigger1 = time = 0
trigger1 = prevstateno!=500&&prevstateno!=505
x = 0
y = 0

[State 1,]
type = Width
trigger1 = 1
edge = 20,0

[State 1100,0]
type = nothitby
trigger1 = time < 3
value = SCA
time = 1

[State 1100]
Type = VelAdd
Trigger1 = time=0
x = 3
[State 1100]
Type = VelAdd
Trigger1 = AnimElem=5,<=0
x = 0.7
[State 1100]
Type = VelAdd
Trigger1 = AnimElem=6,>=0
Trigger1 = Vel x>0
x = -0.3
[State 1070]
Type = VelSet
Trigger1 = Vel x<=0
x = 0

;---------------------[効果音]
[State 1100, 1];
type = PlaySnd
trigger1 = time = 5
value = 600, 3

[State 1100, 5]
type = PlaySnd
trigger1 = time = 1
value = 1100,0
channel = 0

;---------------------[]
[State 1100, 1]
type = HitDef
trigger1 = animelem = 6
attr = S, SA
damage = ceil(fvar(0)*123),ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 8, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17;+(P2StateType=C)
guard.hittime = 15;+(P2StateType=C)
guard.ctrltime = 15;+(P2StateType=C)
ground.velocity = -12.0,-2.5
airguard.velocity = -2.5,-2
air.type = high
air.velocity = -12.0,ifelse(fvar(25)>0,-0.1,-2.5)
fall = 1
air.hittime = 12
air.fall = 1
p2facing = 1
fall.recovertime = 50
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 1100

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = prevstateno != 261
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1100,0]
Type = attackdist
Trigger1 = animelem=7,>0
value = 0
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 8

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[エフェクト]
[State 1100];エフェクト１
Type = Helper
Trigger1 = AnimElem = 6
ID = 1075
Name = "北斗飛衛拳"
Sprpriority = 2
Pos = 220,-170/2
PosType = P1
StateNo = 1075
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1100];エフェクト２
Type = Helper
Trigger1 = AnimElem=6
ID = 1106
Name = "北斗飛衛拳2"
Sprpriority = 2
Pos = 0,-240/2
PosType = P1
StateNo = 1076
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1100];エフェクト３
Type = Helper
Trigger1 = AnimElem=6
ID = 1107
Name = "北斗飛衛拳3"
Sprpriority = 2
Pos = 0,-180/2
PosType = P1
StateNo = 1076
HelperType = Normal
PauseMoveTime = 0
keyCtrl = 0 
Ownpal = 1

[State 1100, AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = -30

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 1000000 < 100000
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(9) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 1000000 < 100000
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varset
trigger1 = var(9) > 0
trigger1 = var(33) % 1000000 < 100000
trigger1 = movehit
trigger1 = time>1
v = 9
value = 0
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(32) >0
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(33) % 1000000 < 100000
persistent = 0
v = 33
value = 1
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State -1]
type = ChangeState
value = 120
triggerall = var(59)<=0
triggerall = command = "z"
triggerall = command = "holdback"
triggerall = animelem=7,>0
trigger1 = inguarddist
trigger1 = power>0
ctrl = 1

[State 1070, 7]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1


;==============================================================================
; {C:\Users\Alex\Documents\mugen-1.1b1copy\chars\Kenshiro_C\Kenshiro_HA.cns}
;==============================================================================

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;超必殺技
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; 天破活殺
[Statedef 2000]
type    = S
movetype= A
physics = S
velset = 0,0
juggle = 0
poweradd= -1000
anim = 2000
ctrl = 0

;---------------------[超必殺技演出]
[State 2000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 8

[state a];
type = Helper
trigger1 = time = 11
trigger1 = numhelper(9700)=0
id = 9700
persistent = 0
name = "BG"
sprpriority = -10
pos = 0,0
postype = back
stateno = 9777
helpertype = normal
supermovetime = 999999999
pausemovetime = 999999999
keyctrl = 0 
ownpal = 1
[State 2000, 2]
type = SuperPause
trigger1 = time = 11
time = 36
movetime = 36
darken = 0
anim = -1

[State 3040, 7]
type = null;BGPalfx
trigger1 = 1
;persistent = 0
ignorehitpause = 1
time = 1
mul = 20,20,195
under = 1

[State 2000, 6]
type = PlaySnd
trigger1 = Time = 9
value = 900,0

;---------------------[発動エフェクト]
[State 2300]
Type = Explod
trigger1 = animelem = 3
ID = 9776
Anim = 9776
Pos = 2,-97
OnTop = 1
Scale = 0.5,0.5
OwnPal = 1
supermovetime = 999999999
pausemovetime = 999999999

[state a];
type = Helper
trigger1 = animelem = 3
id = 3000
name = "カットイン"
sprpriority = -5
pos = 0,-200
postype = back
stateno = 8000
helpertype = normal
supermovetime = 70
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[コマンド判定]
;---------------------[効果音]
[State 2000, 6]
type = PlaySnd
trigger1 = time = 2
value = 2000,0
channel = 0

;---------------------[ヘルパー]
[state a]
type = Helper
trigger1 = animelem = 4
id = 2005
name = "天破活殺"
sprpriority = 2
pos = 0,0-10
postype = p1
stateno = 2005
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 200
supermovetime = 200
size.xscale = 0.5
size.yscale = 0.5

[state a]
type = Helper
trigger1 = animelem = 3
id = 2001
name = "天破活殺"
sprpriority = 2
pos = -22,-80
postype = p1
stateno = 2001
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
[state a]
type = Helper
trigger1 = animelem = 3
id = 2002
name = "天破活殺"
sprpriority = 2
pos = 8,-80
postype = p1
stateno = 2001
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
[state a]
type = Helper
trigger1 = animelem = 3
id = 2001
name = "天破活殺"
sprpriority = 2
pos = -22,-80
postype = p1
stateno = 2002
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
[state a]
type = Helper
trigger1 = animelem = 3
id = 2002
name = "天破活殺"
sprpriority = 2
pos = 8,-80
postype = p1
stateno = 2002
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

[state a]
type = Helper
trigger1 = animelem = 6
id = 2003
name = "天破活殺"
sprpriority = 2
pos = 0,0
postype = p1
stateno = 2003
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 200
supermovetime = 200
;---------------------[有情ブースト]
[state 0,0]
type = velmul
trigger1 = vel x>0
x = 0.97
[state 0,0]
type = veladd
triggerall = pos y < 0
trigger1 = time > 0
trigger1 = time != [11,36]
y = 0.58
[state 0,0]
type = velset
triggerall = pos y >= 0
trigger1 = time > 0
y = 0
[state 0,0]
type = PosFreeze
trigger1 = time = [11,36]

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2001]
type = A
ctrl = 0
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state a]
type = changeanim
trigger1 = anim != 2006
value = 2006

[state a]
type = AngleDraw
trigger1 = 1
value = -gametime*5
scale = 0.5,0.5

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[state a]
type = destroyself
trigger1 = !animtime

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2002]
type = A
ctrl = 0
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state a]
type = changeanim
trigger1 = anim != 2007
value = 2007

[state a]
type = AngleDraw
trigger1 = animelem =1,<33
value = -gametime*5
scale = 2-.03*animelemtime(1),2-.03*animelemtime(1)

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[state a]
type = destroyself
trigger1 = !animtime

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2005]
type = A
ctrl = 0
anim = 2002
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state 0,0]
type = assertspecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1

[State 2005, 3]
type = SprPriority
trigger1 = 1
value = 5
ignorehitpause = 1

[state 0,0]
type = bindtoparent
trigger1 = time >= 0
pos = 0,0
ignorehitpause = 1

;---------------------[効果音]
[State 0, 0]
type = PlaySnd
trigger1 = time = 1
value = 600, 5

[State 0, 0]
type = PlaySnd
trigger1 = movehit = 1
persistent = 17
value = 400, 3

;---------------------[]
[State 2005, 3]
type = HitDef
trigger1 = Time = 13
trigger2 = Time = 18
trigger3 = Time = 23
trigger4 = Time = 28
trigger5 = Time = 33
trigger6 = Time = 38
trigger7 = Time = 43
attr = A, HP
animtype  = Light
damage    = ceil(root,fvar(0)*40),6
priority = 7, Hit
hitflag = MAFD
guardflag = MA
pausetime = 1, 35
sparkno = -1;s7010+(random%8)
sparkxy = -10,0
hitsound   = s400,2
guardsound = s121,0
guard.sparkno = -1;s7101
ground.type = high
ground.slidetime = 8
ground.hittime  = 14+(P2StateType=C)
guard.hittime = 5+(P2StateType=C)
guard.ctrltime = 5+(P2StateType=C)
ground.velocity = 0;,-10.0
air.velocity = 0,-10.0
fall = 1
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
fall.xvelocity = -1.5
fall.yvelocity = -1.5
yaccel = 0.45*ifelse(p2statetype=A,1.5,1)
ID = 2005

[state a];ヒットエフェクト
type = Helper
triggerall = movehit
trigger1 = time >= 13
trigger1 = numhelper(2004) = 0
name = "hit"
pos = 0,0
Postype = p2
stateno = 2004
id = 2004
helpertype = normal
persistent = 4
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2+15),-40;-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

;---------------------[透過]
[State 2005, effect]
type = Explod
trigger1 = Time = 13
trigger2 = Time = 17
trigger3 = Time = 21
trigger4 = Time = 25
trigger5 = Time = 29
trigger6 = Time = 33
trigger6 = Time = 37
anim = 2008
id = 2008
pos = 40,-90
ownpal = 1
scale = 0.25,0.5
vel = 16,0
sprpriority = 6
supermovetime = 999999
pausemovetime = 999999
removetime = 20

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

;---------------------[当身関係]
[state a]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state a]
type = hitby
trigger1 = 1
value = ,NA,SA,HA,NP,SP,HP
time = 1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,AA,AP
stateno = 2006

;---------------------[七星ゲージ]
[state 2,]
type = parentvaradd
trigger1 = root,var(8) >0
trigger1 = root,var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,]
type = parentvaradd
trigger1 = root,var(20) > 1
trigger1 = root,var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = parentvaradd
trigger1 = root,var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = root,var(33) % 10000 < 1000
trigger1 = root,var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = parentvaradd
trigger1 = root,var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = root,var(33) % 10000 < 1000
trigger1 = root,var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = parentvaradd
trigger1 = root,var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = root,var(33) % 10000 < 1000
persistent = 0
v = 33
value = 1000
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = parentvaradd
trigger1 = movecontact = 1
trigger1 = root,var(23) = 0
v = 16
value = ifelse(MoveGuarded,4,ceil(4*root,fvar(0)))
ignorehitpause = 1
persistent = 0

;---------------------[]
;==changed
[state a];弱攻撃吹き飛ばし
type = parentvarset
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y>-5
v = 11
value = 0

;==changed
[state a];弱攻撃吹き飛ばし
type = targetstate
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y<=-5
value = 551
persistent=0

[State a ,強化モード]
type = Helper
triggerall = Numhelper(2125)=0
triggerall = root,var(51) = 1
trigger1 = root,fvar(34) = 1
trigger1 = root,var(8) != 0
trigger1 = movehit = 1
trigger1 = RoundState = 2
trigger2 = root,fvar(35) = 1
trigger2 = movehit = 1
trigger2 = RoundState = 2
helpertype = normal
name = "北斗残悔拳"
ID = 2125
stateno = 2126
postype = left
pos = 0,0
keyctrl = 0
ownpal = 1
pausemovetime = 500
supermovetime = 500

[State 2005, 3]
type = destroyself
trigger1 = parent,movetype = H

[state a]
type = changestate
trigger1 = time >= 44
value = 2006

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2003]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 9999
sprpriority = 5
velset = 0,0

[State 2003, effect]
type = Explod
trigger1 = time <= 25
anim = 2003
bindtime = -1
ignorehitpause = 1
postype = p1
pos = 20,-90
ownpal = 0
scale = 1+(time*0.04),1+(time*0.04)
sprpriority = 5
supermovetime = 1

[state 0,0]
type = palfx
trigger1 = time <= 25
time = 1
mul = 255-(time*10),255-(time*10),255-(time*10)

[State 2003, 3]
type = destroyself
trigger1 = time >= 25
trigger2 = parent,movetype = H

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2004]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 9999
sprpriority = 5
velset = 0,0

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 0
name = "hit"
pos = -35,-165
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 5
name = "hit"
pos = 20,-175
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 10
name = "hit"
pos = 35,-130
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 15
name = "hit"
pos = -5,-105
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 20
name = "hit"
pos = -5,-52
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 25
name = "hit"
pos = 15,-25
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 30
name = "hit"
pos = 55,0
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 2
name = "hit"
pos = -35,-165
Postype = p2
stateno = 2010
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 7
name = "hit"
pos = 20,-175
Postype = p2
stateno = 2011
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 12
name = "hit"
pos = 35,-130
Postype = p2
stateno = 2012
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 17
name = "hit"
pos = -5,-105
Postype = p2
stateno = 2013
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 22
name = "hit"
pos = -5,-52
Postype = p2
stateno = 2014
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 27
name = "hit"
pos = 15,-25
Postype = p2
stateno = 2015
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 32
name = "hit"
pos = 55,0
Postype = p2
stateno = 2016
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
Trigger1 = time = 60
name = "hit"
pos = 0,-100
Postype = p2
stateno = 16010
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[State 2004, 3]
type = destroyself
trigger1 = time >= 80

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2006]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 9999
sprpriority = 5
velset = 0,0

[State 2006, effect]
type = Explod
trigger1 = time = 0
anim = 2005
bindtime = -1
ignorehitpause = 1
postype = p1
pos = 0,0
ownpal = 0
;scale = 1+(time*0.04),1+(time*0.04)
sprpriority = 5
supermovetime = 1
id = 2005
removetime = 24

[state 0,0]
type = palfx
trigger1 = time <= 1
time = 1
mul = 255-(time*20),255-(time*20),255-(time*20)

[state 0,0]
type = ModifyExplod
trigger1 = 1
ID = 2005
scale = 0.5,0.5-(time*0.05)

[state 0,0]
type = velset
trigger1 = time >= 1
y = -9.0

[State 2006, 3]
type = destroyself
trigger1 = time >= 10;animtime = 0

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2010]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 2010
sprpriority = 5
velset = 0,0

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 2010, 3]
type = destroyself
trigger1 = time >= 55

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2011]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 2011
sprpriority = 5
velset = 0,0

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 2010, 3]
type = destroyself
trigger1 = time >= 50

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2012]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 2010
sprpriority = 5
velset = 0,0

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 2010, 3]
type = destroyself
trigger1 = time >= 45

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2013]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 2011
sprpriority = 5
velset = 0,0

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 2010, 3]
type = destroyself
trigger1 = time >= 40

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2014]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 2010
sprpriority = 5
velset = 0,0

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 2010, 3]
type = destroyself
trigger1 = time >= 35

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2015]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 2011
sprpriority = 5
velset = 0,0

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 2010, 3]
type = destroyself
trigger1 = time >= 30

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2016]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 2010
sprpriority = 5
velset = 0,0

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 2010, 3]
type = destroyself
trigger1 = time >= 25

;---------------------------------------------------------------------------
;(HELPER)天破活殺
[Statedef 2017]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 2011
sprpriority = 5
velset = 0,0

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 2010, 3]
type = destroyself
trigger1 = time >= 20

;---------------------------------------------------------------------------
; 北斗残悔拳
[Statedef 2100]
type    = S
movetype= A
physics = S
velset = 0,0
juggle = 0
poweradd= -2000
anim = 2100
ctrl = 0

[state 0,0]
type = velmul
trigger1 = vel x>0
x = 0.97
[state 0,0]
type = veladd
triggerall = pos y < 0
trigger1 = time > 0
trigger1 = time != [8,40]
y = 0.58
[state 0,0]
type = velset
triggerall = pos y >= 0
trigger1 = time > 0
y = 0
[state 0,0]
type = PosFreeze
trigger1 = time = [8,40]

;---------------------[超必殺技演出]
[State 2000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 33

[state a];
type = Helper
trigger1 = time = 8
trigger1 = numhelper(9700)=0
id = 9700
persistent = 0
name = "BG"
sprpriority = -10
pos = 0,0
postype = back
stateno = 9777
helpertype = normal
supermovetime = 999999999
pausemovetime = 999999999
keyctrl = 0 
ownpal = 1
[State 2000, 2]
type = SuperPause
trigger1 = time = 8
time = 40
movetime = 40
darken = 0
anim = -1

[State 3040, 7]
type = null;BGPalfx
trigger1 = 1
;persistent = 0
ignorehitpause = 1
time = 1
mul = 20,20,195
under = 1

[State 2000, 6]
type = PlaySnd
trigger1 = Time = 8
value = 900,0

;---------------------[発動エフェクト]
[State 2300]
Type = Explod
trigger1 = time = 8
ID = 9776
Anim = 9776
Pos = 2,-97
OnTop = 1
Scale = 0.5,0.5
OwnPal = 1
PauseMoveTime = 2147483648
SuperMoveTime = 2147483648

[state a];
type = Helper
trigger1 = time = 8
id = 3000
name = "カットイン"
sprpriority = -5
pos = 0,-200
postype = back
stateno = 8000
helpertype = normal
supermovetime = 70
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[効果音]
[State 2000, 6]
type = PlaySnd
trigger1 = time = 2
value = 2100,0
channel = 0

;---------------------[ヘルパー]
[State 3000, effect]
type = Explod
trigger1 = Numexplod(2020) = 0
trigger1 = time = 5
anim = 2101
id = 2101
postype = p1
pos = 3,0
ownpal = 1
sprpriority = 5
pausemovetime = 9990
supermovetime =9990
bindtime = -1
removetime = -1
scale = 0.75,0.75
[state 0,0]
type = removeexplod
trigger1 = time = 30
trigger2 = animtime = 0
id = 2101

;---------------------[]
[State 2100, Turn]
type = Turn
trigger1 = time = 0
trigger1 = P2Dist X < 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 2105
ctrl = 0

;---------------------------------------------------------------------------
; 北斗残悔拳
[Statedef 2105]
type    = A
movetype= A
physics = N
velset = 1.2,-10
juggle = 0
anim = 2105
ctrl = 0

[state 0,0]
type = veladd
trigger1 = time >= 12
y = 0.44
[state 0,0]
type = velset
trigger1 = vel x<0.8
trigger1 = time >= 0
x = 0.8

;---------------------[]
[State 2105, 1]
type = HitDef
trigger1 = animelem = 4
attr = A, HT
damage = 6,6
kill = 0
getpower = 0
animtype = light
guardflag = MA
hitflag = HA
priority = 7, miss
pausetime = 1, 14
sparkno = -1;s7000+(random%8)
sparkxy = -15, -212/2
hitsound = s400, 5
guard.sparkno = -1;s7100
guardsound = s120, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 20+(P2StateType=C)
guard.hittime = 18+(P2StateType=C)
guard.ctrltime = 18+(P2StateType=C)
ground.velocity = -4.0
air.velocity = -4.0,ifelse(fvar(25)>0,-0.1,-7.0)
air.fall = 1
p2facing = 1
fall.recovertime = 24
ground.cornerpush.veloff = 0
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
p1stateno = 2120
ID = 2105

[state a];ヒットエフェクト
type = Helper
trigger1 = UniqHitCount = 1 
name = "hit"
pos = 20, -60
Postype = p1
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = 20, -60
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
x = 2

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<=0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = prevstateno=206&&time=1
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = time >= 5
trigger1 = pos y >= -5
value = 2110
ctrl = 0

;---------------------------------------------------------------------------
; 北斗残悔拳_着地
[Statedef 2110]
type    = C
movetype= I
physics = C
ctrl = 0
;anim = 2110
sprpriority = 1
velset = 0,0

[State 0, 0]
type = Changeanim
triggerall = time = 0
trigger1 = anim != [2110,2120]
value = 2110
persistent = 0

[State 2100,0]
Type = attackdist
Trigger1 = 1
value = 0

[State 2110, 3]
type = posset
trigger1 = time >= 0
y = 0

[State 2110, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 北斗残悔拳_HIT
[Statedef 2120]
type    = A
movetype= A
physics = N
velset = 0,0
juggle = 0
anim = 2120
ctrl = 0
sprpriority = 2

[state 0,0]
type = velset
trigger1 = time <= 120
x = 0
y = 0

[state 0,0]
type = veladd
trigger1 = time >= 120
y = 0.44

[state 0,0]
type = posadd
trigger1 = time = 0
x = floor(p2dist x)

[state 0,0]
type = pause
trigger1 = time = 0
time = 120
movetime = 120

;---------------------[効果音]
[State 2120, 6]
type = PlaySnd
trigger1 = time = 2
value = 2120,0
channel = 0

[State 2120, 6];
type = PlaySnd
trigger1 = time = 120
value = 2120,1+random%2
;channel = 0

;---------------------[ヘルパー]
[State 2120, effect]
type = Explod
trigger1 = time = 1
anim = 2104
postype = left
pos = 0,50
ownpal = 1
sprpriority = 5
ontop = 1
;removeongethit = 1
pausemovetime = 200
supermovetime = 200
scale = 0.5,0.5

[state 0,0]
type = envcolor
trigger1 = 1
ignorehitpause = 1
value = 0,0,0
under = 1

[State 2120, effect]
type = Explod
trigger1 = time = 0
anim = 2102
postype = left
pos = 160,130
ownpal = 1
sprpriority = -5
pausemovetime = 200
supermovetime = 200
scale = 0.5,0.5
[State 2120, effect]
type = Explod
trigger1 = time = 1
anim = 2103
postype = left
pos = 160,130
ownpal = 1
sprpriority = -5
pausemovetime = 200
supermovetime = 200
removetime = 120
scale = 0.5,0.5

[State 0, 0]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "北斗残悔拳"
ID = 2125
stateno = 2125
postype = left
pos = 0,0
keyctrl = 0
ownpal = 1
pausemovetime = 500
supermovetime = 500

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = time=0
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = time=0
trigger1 = var(33) % 100000 < 10000
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
time=0
trigger1 = var(33) % 100000 < 10000
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = time=0
trigger1 = var(33) % 100000 < 10000
persistent = 0
v = 33
value = 10000
ignorehitpause = 1

;---------------------[立ちステートに戻る]
[State 0, 0]
type = Changeanim
trigger1 = time >= 142
value = 5040
[State 0, 0]
type = ChangeState
trigger1 = time >= 120
trigger1 = pos y >= -1
value = 52
ctrl = 1

;---------------------------------------------------------------------------
; (HELPER)北斗残悔拳
[Statedef 2125]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 9999
sprpriority = -5

[state 0,0]
type = posadd
trigger1 = floor(p2dist x) != 0
x = floor(p2dist x)
[state 0,0]
type = posadd
trigger1 = floor(p2dist y) != 0
y = floor(p2dist y)

[State 2125, effect]
type = Explod
trigger1 = time = 1050
anim = 2111
postype = left
pos = ifelse(teamside != 1,40,290),60
ownpal = 0
sprpriority = 5
ontop = 1
pausemovetime = 999999
supermovetime = 999999
bindtime = -1
scale = 0.4,0.4
[State 2125, effect]
type = Explod
trigger1 = time = 1050
persistent = 10
anim = 2112
postype = left
pos = ifelse(teamside != 1,24,274),60
ownpal = 0
sprpriority = 5
ontop = 1
pausemovetime = 999999
supermovetime = 999999
bindtime = -1
scale = 0.4,0.4
[State 2125, effect]
type = Explod
trigger1 = time = 1050
persistent = 10
anim = 2113
postype = left
pos = ifelse(teamside != 1,0,250),60
ownpal = 0
sprpriority = 5
ontop = 1
pausemovetime = 999999
supermovetime = 999999
bindtime = -1
scale = 0.5,0.5

[state 0,0]
type = varset
trigger1 = time = 1200
v = 27
value = 3
[state 0,0]
type = varadd
trigger1 = time > 1200
;trigger1 = enemy,movetype != H
v = 27
value = -1
persistent = 60

[State 2125, 3]
type = ChangeState
trigger1 = time > 5
trigger1 = var(27) < 0
value = 2130

[state 0,0]
type = destroyself
trigger1 = roundstate >= 3
trigger2 = var(27) < 0

;---------------------------------------------------------------------------
; (HELPER)北斗残悔拳
[Statedef 2126]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 9999
sprpriority = -5

[state 0,0]
type = posadd
trigger1 = floor(p2dist x) != 0
x = floor(p2dist x)
[state 0,0]
type = posadd
trigger1 = floor(p2dist y) != 0
y = floor(p2dist y)

[State 2126, effect]
type = Explod
trigger1 = time = 0
anim = 2115
postype = left
pos = ifelse(teamside != 1,40,290),60
ownpal = 0
sprpriority = 5
ontop = 1
pausemovetime = 999999
supermovetime = 999999
bindtime = -1
scale = 0.4,0.4
[State 2126, effect]
type = Explod
trigger1 = time = 1050
persistent = 10
anim = 2116
postype = left
pos = ifelse(teamside != 1,24,274),60
ownpal = 0
sprpriority = 5
ontop = 1
pausemovetime = 999999
supermovetime = 999999
bindtime = -1
scale = 0.4,0.4
[State 2126, effect]
type = Explod
trigger1 = time = 1050
persistent = 10
anim = 2117
postype = left
pos = ifelse(teamside != 1,0,250),60
ownpal = 0
sprpriority = 5
ontop = 1
pausemovetime = 999999
supermovetime = 999999
bindtime = -1
scale = 0.5,0.5

[state 0,0]
type = varset
trigger1 = time = 5
v = 27
value = 3
[state 0,0]
type = varadd
trigger1 = time > 5
;trigger1 = enemy,movetype != H
v = 27
value = -1
persistent = 60

[State 2125, 3]
type = ChangeState
trigger1 = time > 5
trigger1 = var(27) < 0
value = 2130

[state 0,0]
type = destroyself
trigger1 = roundstate >= 3
trigger2 = var(27) < 0

;---------------------------------------------------------------------------
[Statedef 2130]
type    = S
movetype= A
physics = N
ctrl = 0
anim = 2130
sprpriority = -5

[state 0,0]
type = posadd
trigger1 = floor(p2dist x) != 0
x = floor(p2dist x)
[state 0,0]
type = posadd
trigger1 = floor(p2dist y) != 0
y = floor(p2dist y)

[State 2130, HitDef1]
type = HitDef
trigger1 = time >= 1
persistent = 0
attr = S, HT
damage = 999999999
getpower = 0
givepower = 0
animtype = heavy
hitflag = MAFD
numhits = 0
priority = 5, hit
pausetime = 1, 32
sparkno = -1
sparkxy = -8, -54
hitsound = S400, 4
guardsound = S120, 2
ground.type = low
ground.slidetime = 10
ground.hittime  = 10
ground.velocity = 0,0
air.velocity = 0,0
air.fall = 1
fall.recover = 0

[State 1010, effect]
type = Explod
persistent = 0
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
anim = 1016
postype = p2
pos = -40+random%80, -40-random%80
random = 20,20
ownpal = 1
sprpriority = 5
pausemovetime = 100
supermovetime =100
bindtime = -1
;removeongethit = 1
scale = 1,1

[State 1010, effect]
type = Explod
persistent = 0
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
anim = 1016
postype = p2
pos = -40+random%80, -40-random%80
random = 20,20
ownpal = 1
sprpriority = 5
pausemovetime = 100
supermovetime =100
bindtime = -1
;removeongethit = 1
scale = 1,1

[State 1010, effect]
type = Explod
persistent = 0
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
anim = 1016
postype = p2
pos = -40+random%80, -40-random%80
random = 20,20
ownpal = 1
sprpriority = 5
pausemovetime = 100
supermovetime =100
bindtime = -1
;removeongethit = 1
scale = 1,1

[state 3500]
type = helper
trigger1 = !NumHelper(9800)&& WinKO
id = 9800
stateno= 9888
name="super_ko"
pos = floor(160-screenpos x)*facing,floor(120-screenpos y)
potype = p1
ownpal = 1
facing=facing
ignorehitpause=1

[state 0,0]
type = destroyself
trigger1 = roundstate >= 3
trigger2 = animtime = 0

;---------------------------------------------------------------------------
; 無想転生
[Statedef 2210]
type    = S
movetype= I
physics = S
velset = 0,0
juggle = 0
poweradd= -1000
anim = 2200
ctrl = 0

[State 2200]
Type = varset
Trigger1 = time=1
v = 48
value = 6

;---------------------[超必殺技演出]
[State 2200, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 33+66

[state a];
type = Helper
trigger1 = time = 4
trigger1 = numhelper(9700)=0
id = 9700
persistent = 0
name = "BG"
sprpriority = -10
pos = 0,0
postype = back
stateno = 9777
helpertype = normal
supermovetime = 999999999
pausemovetime = 999999999
keyctrl = 0 
ownpal = 1
[State 2200, 2]
type = SuperPause
trigger1 = time = 4
time = 94+17
movetime = 94+17
darken = 0
anim = -1

[State 3040, 7]
type = null;BGPalfx
trigger1 = 1
;persistent = 0
ignorehitpause = 1
time = 1
mul = 20,20,195
under = 1

[State 2000, 6]
type = PlaySnd
trigger1 = Time = 4
value = 900,0

;---------------------[発動エフェクト]
[State 2300]
Type = Explod
trigger1 = Time = 4
ID = 9776
Anim = 9776
Pos = 2,-97
OnTop = 1
Scale = 0.5,0.5
OwnPal = 1
PauseMoveTime = 2147483648
SuperMoveTime = 2147483648

[state a];
type = Helper
trigger1 = Time = 4
id = 3000
name = "カットイン"
sprpriority = -5
pos = 0,-200
postype = back
stateno = 8000
helpertype = normal
supermovetime = 70
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[コマンド判定]
;---------------------[効果音]
[State 2200, 6]
type = PlaySnd
trigger1 = time = 2
value = 2200,0
channel = 0

;---------------------[ヘルパー]
[State 0, 0]
type = Helper
trigger1 = time = 1
helpertype = normal
name = "無想転生"
ID = 2201
stateno = 2201
postype = p1
pos = 0,0
keyctrl = 0
ownpal = 1
pausemovetime = 200
supermovetime = 200
;---------------------[]
[state 0,0]
type = velmul
trigger1 = vel x>0
x = 0.97
[state 0,0]
type = veladd
triggerall = pos y < 0
trigger1 = time > 0
trigger1 = time != [4,84]
y = 0.58
[state 0,0]
type = velset
triggerall = pos y >= 0
trigger1 = time > 0
y = 0
[state 0,0]
type = PosFreeze
trigger1 = time = [0,94]

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------
; 無想転生_エフェクト
[Statedef 2201]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 9999
sprpriority = 1
velset = 0,0

[state 0,0]
type = palfx
trigger1 = time <= 80
time = 1
mul = 255-(time*3),255-(time*3),255-(time*3)

[state 0,0]
type = bindtoparent
trigger1 = time >= 0
pos = 0,0
ignorehitpause = 1

[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2201
postype = p1
pos = -55,0
vel = 0.9
accel = -0.005
ownpal = 0
sprpriority = 5
ontop = 1
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)
[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2201
postype = p1
pos = -30,0
vel = 0.6
accel = -0.005
ownpal = 0
sprpriority = 5
ontop = 1
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)
[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2201
postype = p1
pos = -15,0
vel = 0.4
accel = -0.005
ownpal = 0
sprpriority = 5
ontop = 1
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)
[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2201
postype = p1
pos = 55,0
vel = -0.9
accel = 0.005
ownpal = 0
sprpriority = 5
ontop = 1
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)
[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2201
postype = p1
pos = 30,0
vel = -0.6
accel = 0.005
ownpal = 0
sprpriority = 5
ontop = 1
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)
[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2201
postype = p1
pos = 15,0
vel = -0.4
accel = 0.005
ownpal = 0
sprpriority = 5
ontop = 1
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)

[state 0,0]
type = destroyself
trigger1 = time = 80

;---------------------------------------------------------------------------
;無想転生当身
[Statedef 2250]
Type = S
MoveType = I
phySics = S
Anim = 2202
Ctrl = 0
velset = 0,0
SprPriority = 5

[State 2250]
Type = varadd
Trigger1 = Time= 0
var(48) = -1
;-------------------[サウンド]
[State 2250]
Type = PlaySnd
Trigger1 = time = 2
value = 2250,0
channel = 0

;-------------------[無敵]
[State 2250]
Type = NotHitBy
Trigger1 = 1
value = SCA
;-------------------[押し合い判定]
[State 2250]
Type = PlayerPush
Trigger1 = 1
value = 0
igNoreHitPause = 1
;-------------------[時間停止]
[State 2250]
Type = SuperPause
Trigger1 = time = 1
Time=60
Anim = -1
Sound = -1
MoveTime=60
darken = 0
unHittable = 0
igNoreHitPause = 1

;-------------------[移動]
[State 2250]
Type = PosAdd
Trigger1 = FrontEdgeDist>15
Trigger1 = p2dist x>-35
Trigger1 = Time<40
x = 3.5
igNoreHitPause = 1

;-------------------[アニメ変更]
[State 2250]
Type = ChangeAnim
Trigger1 = FrontEdgeDist > 0
Trigger1 = P2Dist X<0
value = 2203
elem = 1

;-------------------[振り向き]
[State 2250]
Type = Turn
TriggerAll=P2Dist X<0
Trigger1 = Time=60

;-------------------[残像]

[State 2250]
Type = ChangeState
Trigger1 = Time>=64
value = 0
Ctrl = 1

;---------------------------------------------------------------------------
; 天将奔烈
[Statedef 2300]
type    = S
movetype= A
physics = S
juggle = 0
poweradd= -1000
anim = 2300
sprpriority = 2
ctrl = 0

;---------------------[超必殺技演出]
[state a];
type = Helper
trigger1 = animelem = 11
trigger1 = numhelper(9700)=0
id = 9700
persistent = 0
name = "BG"
sprpriority = -10
pos = 0,0
postype = back
stateno = 9777
helpertype = normal
supermovetime = 999999999
pausemovetime = 999999999
keyctrl = 0 
ownpal = 1
[State 2000, 2]
type = SuperPause
trigger1 = animelem = 11
time = 30
movetime = 30
darken = 0
anim = -1

[State 3040, 7]
type = null;BGPalfx
trigger1 = 1
;persistent = 0
ignorehitpause = 1
time = 1
mul = 20,20,195
under = 1

[State 2000, 6]
type = PlaySnd
trigger1 = animelem = 11
value = 900,0

;---------------------[発動エフェクト]
[State 2300]
Type = Explod
trigger1 = animelem = 11
ID = 9776
Anim = 9776
Pos = 2,-97
OnTop = 1
Scale = 0.5,0.5
OwnPal = 1
PauseMoveTime = 2147483648
SuperMoveTime = 2147483648

[state a];
type = Helper
trigger1 = animelem = 11
id = 3000
name = "カットイン"
sprpriority = -5
pos = 0,-200
postype = back
stateno = 8000
helpertype = normal
supermovetime = 70
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[State 2300, a]
type = envshake
trigger1 = Animelem = 14
time = 30
freq = 60
ampl = -10
phase = 0

;---------------------[効果音]
[State 2300, 6]
type = PlaySnd
trigger1 = Animelem = 11
value = 2300,0
channel = 0

[State 2300, 6]
type = PlaySnd
trigger1 = Animelem = 12
value = 600,8

;---------------------[]
[State 2300, 1]
type = HitDef
trigger1 = animelem = 14
attr = S, HA
damage = ceil(fvar(0)*396), ifelse(var(24)>0,11,6)
getpower = ceil(fvar(0)*119),119
animtype = hard
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 3
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17;+(P2StateType=C)
guard.hittime = 15;+(P2StateType=C)
guard.ctrltime = 15;+(P2StateType=C)
ground.velocity = -1.5,-9.5
airguard.velocity = -2.5,-2
air.type = high
air.velocity = -3.5,ifelse(fvar(25)>0,-0.1,-7.5)
air.hittime = 12
fall = 1
air.fall = 1
p2facing = 1
ground.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,ifelse(fvar(25)>0,-7.5*1.3*1.2-var(30)*0.05,-7.5*1.3-var(30)*0.05))
down.cornerpush.veloff = ifelse((var(11)>0||(var(23)=[1,25])),0,-7.5*1.3*1.2-var(30)*0.05)
fall.recovertime = 100
fall.xvelocity = var(3)*-0.2-1.0;-2.5
fall.yvelocity = var(3)*-0.2-2.5-(var(31)*0.05)/2
yaccel = 0.45*ifelse(p2statetype=A,1.5,1) + (var(3) - 1)*0.07
ID = 2300

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
name = "hit"
pos = Ceil(P2Dist X/2-15), -80-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -110-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1010,0]
Type = attackdist
Trigger1 = animelem=15,>0
value = 0

;---------------------[エフェクト]
[State 2300, effect]
type = Explod
persistent = 0
trigger1 = time = 8
anim = 2305
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 1
pausemovetime = 99999
supermovetime = 99999
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)

[State 2300, effect]
type = Explod
persistent = 0
trigger1 = time = 0
anim = 2301
id = 2301
postype = p1
pos = 0,-80
ownpal = 1
sprpriority = 0
pausemovetime = 99999
supermovetime = 99999
bindtime = -1
removeongethit = 1
scale = 0.75,0.75

[State 2300, effect]
type = Explod
persistent = 0
trigger1 = animelem = 11
anim = 2302
id = 2302
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 1
pausemovetime = 99999
supermovetime = 99999
bindtime = -1
removeongethit = 1
scale = const(size.xscale),const(size.yscale)

[State 2300, effect]
type = Explod
persistent = 0
trigger1 = animelem = 14
anim = 2303
id = 2303
sprpriority = 1
postype = p1
pos = 30,-100
ownpal = 1
facing = 1
vel = 5,0
scale = 1,1
removetime = -1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999

[State 2300, 4]
type = ModifyExplod
trigger1 = NumExplod(2303)
ID = 2303
scale = 0.5,0.5+Animelemtime(14)*-0.1

[state a]
Type = removeexplod
trigger1 = NumExplod(2303)
trigger1 = Animelemtime(14) = 5
Trigger2 = MoveType = H
ID = 2303

;---------------------[]
[State 2300, 8]
type = VelSet
trigger1 = Animelemtime(12) > 0
trigger1 = Animelemtime(13) < 0
x = 13.8

[State 2300, 9]
type = ChangeAnim
trigger1 = Animelemtime(12) > 0
trigger1 = Animelemtime(13) < 0
trigger1 = P2BodyDist X <= 20
value = 2300
elem = 13

[State 2300, 10]
type = VelSet
trigger1 = Animelemtime(13) = 0
x = 0

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 1000000 < 100000
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 1000000 < 100000
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 1000000 < 100000
persistent = 0
v = 34
value = 100000
ignorehitpause = 1

;---------------------[有情ブースト]
[state 0,0]
type = velmul
trigger1 = vel x>0
x = 0.97
[state 0,0]
type = veladd
triggerall = pos y < 0
trigger1 = time > 0
;trigger1 = time != [11,36]
y = 0.58
[state 0,0]
type = velset
triggerall = pos y >= 0
trigger1 = time > 0
y = 0
;[state 0,0]
;type = PosFreeze
;trigger1 = time = [11,36]

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 2300, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 北斗旋風連撃
[Statedef 2400]
type    = S
movetype= A
physics = S
juggle = 0
poweradd= -1000
anim = 2400
sprpriority = 2
ctrl = 0

;---------------------[超必殺技演出]
[state a];
type = Helper
trigger1 = animelem = 9
trigger1 = numhelper(9700)=0
id = 9700
persistent = 0
name = "BG"
sprpriority = -10
pos = 0,0
postype = back
stateno = 9777
helpertype = normal
supermovetime = 999999999
pausemovetime = 999999999
keyctrl = 0 
ownpal = 1
[State 2000, 2]
type = SuperPause
trigger1 = animelem = 9
time = 30
movetime = 30
darken = 0
anim = -1

[State 3040, 7]
type = null;BGPalfx
trigger1 = 1
;persistent = 0
ignorehitpause = 1
time = 1
mul = 20,20,195
under = 1

[State 2000, 6]
type = PlaySnd
trigger1 = animelem = 9
value = 900,0

;---------------------[発動エフェクト]
[State 2400]
Type = Explod
trigger1 = animelem = 9
ID = 9776
Anim = 9776
Pos = 2,-97
OnTop = 1
Scale = 0.5,0.5
OwnPal = 1
PauseMoveTime = 2147483648
SuperMoveTime = 2147483648

[state a];
type = Helper
trigger1 = animelem = 9
id = 3000
name = "カットイン"
sprpriority = -5
pos = 0,-200
postype = back
stateno = 8000
helpertype = normal
supermovetime = 70
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[効果音]
[State 2400, 6]
type = PlaySnd
trigger1 = animelem = 5
trigger2 = animelem = 9
value = 190,0

;---------------------[]
[State 2400, 1]
type = HitDef
trigger1 = animelem = 14
attr = S, HA
damage = 200, ifelse(var(60)>0,40,50)
guarddamage =
getpower = 0,0
animtype = hard
guardflag = MA
hitflag = MAFD
priority = 7, Hit
pausetime = 14,13
sparkno = -1;s7000+(random%8)
sparkxy = -15, -220/2
hitsound = s400, 4
guard.sparkno = -1;s7100
guardsound = s121, 0
ground.type = high
ground.slidetime = 8
ground.hittime  = 17+(P2StateType=C)
guard.hittime = 15+(P2StateType=C)
guard.ctrltime = 15+(P2StateType=C)
ground.velocity = -1.5,-9.5
airguard.velocity = -2.5,-2
fall = 1
air.fall = 1
p2facing = 1
ID = 2400
p2stateno = 2406

[State 2400, effect]
type = Explod
persistent = 0
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
anim = 1016
postype = p2
pos = -40+random%80, -40-random%80
random = 20,20
ownpal = 1
sprpriority = 5
pausemovetime = 100
supermovetime =100
bindtime = -1
;removeongethit = 1
scale = 1,1

[State 2400, effect]
type = Explod
persistent = 0
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
anim = 1016
postype = p2
pos = -40+random%80, -40-random%80
random = 20,20
ownpal = 1
sprpriority = 5
pausemovetime = 100
supermovetime =100
bindtime = -1
;removeongethit = 1
scale = 1,1

[State 2400, effect]
type = Explod
persistent = 0
Trigger1 = P2MoveType=H
Trigger1 = MoveHit=1
anim = 1016
postype = p2
pos = -40+random%80, -40-random%80
random = 20,20
ownpal = 1
sprpriority = 5
pausemovetime = 100
supermovetime =100
bindtime = -1
;removeongethit = 1
scale = 1,1

[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -110-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0
[State 1010,0]
Type = attackdist
Trigger1 = animelem=15,>0
value = 0

;---------------------[エフェクト]
[State 2300, effect]
type = Explod
persistent = 0
trigger1 = time = 80
anim = 2401
postype = p1
pos = 0,0
ownpal = 1
sprpriority = 1
pausemovetime = 99999
supermovetime = 99999
bindtime = -1
removeongethit = 1
scale = 0.3,const(size.yscale)

;---------------------[]
[State 2400, a]
type = PosFreeze
trigger1 = Time = [32,30+24]
value = 1

[State 2400, a]
type = VelSet
trigger1 = AnimElem = 14
x = 35

[State 2400, a]
type = VelMul
trigger1 = Time = [32,30+24]
trigger1 = !HitPauseTime
x        = 0.90

[State 2400, a]
type = Width
trigger1 = EnemyNear,BackEdgeBodyDist <= 5
edge = ifelse(EnemyNear,StateType!=A,EnemyNear,Const(size.ground.front),EnemyNear,Const(size.air.front))+Const(size.ground.front), 0

[State 2400, a]
type = Width
trigger1 = EnemyNear,FrontEdgeBodyDist <= 5
edge = ifelse(EnemyNear,StateType!=A,EnemyNear,Const(size.ground.back),EnemyNear,Const(size.air.back))+Const(size.ground.front), 0

;---------------------[相手制御]
[state a]
type = varset
trigger1 = movehit
v = 11
value = 0
ignorehitpause = 1

;---------------------[七星ゲージ]
[state 2,]
type = varadd
trigger1 = var(8) >0
trigger1 = var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 10000000 < 1000000
trigger1 = var(35) < 3
v = 4
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 10000000 < 1000000
trigger1 = var(35) < 3
v = 35
value = 1
persistent = 0
ignorehitpause = 1
[state 2,a]
type = varadd
trigger1 = var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = var(34) % 10000000 < 1000000
persistent = 0
v = 34
value = 1000000
ignorehitpause = 1

;---------------------[有情ブースト]
[state 0,0]
type = velmul
trigger1 = vel x>0
x = 0.97
[state 0,0]
type = veladd
triggerall = pos y < 0
trigger1 = time > 0
;trigger1 = time != [11,36]
y = 0.58
[state 0,0]
type = velset
triggerall = pos y >= 0
trigger1 = time > 0
y = 0

;---------------------[ブーストゲージ増加]
[state a]
type = varadd
trigger1 = movecontact = 1
trigger1 = var(23) = 0
v = 16
value = ifelse(MoveGuarded,11,ceil(11*fvar(0)))
ignorehitpause = 1
persistent = 0

[State 2400, 7]
type = ChangeState
triggerall = AnimElem = 15
trigger1 = NumEnemy <= 1 || NumEnemy >= 2
trigger1 = EnemyNear(0),MoveType = H
trigger1 = EnemyNear(0),StateNo = 2406
trigger2 = NumEnemy >= 2
trigger2 = EnemyNear(1),MoveType = H
trigger2 = EnemyNear(1),StateNo = 2406
value = 2405
IgnoreHitPause = 1

[State 2400, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 北斗旋風連撃_終了
[Statedef 2405]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 2405
sprpriority = 1
velset = 0,0

;---------------------[効果音]
[state a]
type = playsnd
trigger1 = animelem = 3
value = 2400,0
channel = 0

[state 0,0]
type = PlaySnd
trigger1 = time = 164
trigger2 = time = 165
trigger3 = time = 166
trigger4 = time = 167
trigger5 = time = 168
trigger6 = time = 169
trigger7 = time = 170
trigger8 = time = 171
trigger9 = time = 172
trigger10 = time = 173
trigger11 = time = 202
value = 400,3

[state 0,0]
type = hitadd
trigger1 = time = 164
trigger2 = time = 165
trigger3 = time = 166
trigger4 = time = 167
trigger5 = time = 168
trigger6 = time = 169
trigger7 = time = 170
trigger8 = time = 171
trigger9 = time = 172
trigger10 = time = 173
trigger11 = time = 202
value = 1

[state 0,0]
type = targetlifeadd
trigger1 = time = 164
trigger2 = time = 165
trigger3 = time = 166
trigger4 = time = 167
trigger5 = time = 168
trigger6 = time = 169
trigger7 = time = 170
trigger8 = time = 171
trigger9 = time = 172
trigger10 = time = 173
trigger11 = time = 202
value = ceil(-28*fvar(0))

[state 0,0]
type = targetlifeadd
trigger1 = time = 172
value = ceil(-79*fvar(0))

[state a];ヒットエフェクト
type = Helper
trigger1 = time = 164
trigger2 = time = 165
trigger3 = time = 166
trigger4 = time = 167
trigger5 = time = 168
trigger6 = time = 169
trigger7 = time = 170
trigger8 = time = 171
trigger9 = time = 172
trigger10 = time = 173
name = "hit"
pos = -40+random%80, -40-random%80
Postype = p2
stateno = 16095
helpertype = normal
persistent = 2
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = time = 202
name = "hit"
pos = 0,-100
Postype = p2
stateno = 16010
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = varadd
trigger1 = time = 0
v = 44
value = 12

[State 2405, a]
type = Width
trigger1 = EnemyNear,BackEdgeBodyDist <= 5
edge = ifelse(EnemyNear,StateType!=A,EnemyNear,Const(size.ground.front),EnemyNear,Const(size.air.front))+Const(size.ground.front), 0

[State 2405, a]
type = Width
trigger1 = EnemyNear,FrontEdgeBodyDist <= 5
edge = ifelse(EnemyNear,StateType!=A,EnemyNear,Const(size.ground.back),EnemyNear,Const(size.air.back))+Const(size.ground.front), 0

[State 2405, effect]
type = Explod
trigger1 = animelem = 3
anim = 2402
postype = left
pos = 0,30
ownpal = 1
sprpriority = 5
;removeongethit = 1
pausemovetime = 200
supermovetime = 200
scale = 0.5,0.5

;---------------------[立ちステートに戻る]
[State 2405, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 相手
[Statedef 2406]
type    = A
movetype= H
physics = S
ctrl = 0
sprpriority = 0
velset =0,0

[state 0,0]
type = changeanim2
trigger1 = time = 0
value = 2406

[state 0,0]
type = playerpush
trigger1 = 1
value = 0

[state 0,0]
type = changestate
type     = ChangeState
trigger1 = NumEnemy <= 1 || NumEnemy >= 2
trigger1 = EnemyNear(0),Name = "Kenshiro"
trigger1 = EnemyNear(0),AuthorName = "Cameron"
trigger1 = EnemyNear(0),StateNo = 2405
trigger2 = NumEnemy >= 2
trigger2 = EnemyNear(1),Name = "Kenshiro"
trigger2 = EnemyNear(1),AuthorName = "Cameron"
trigger2 = EnemyNear(1),StateNo = 2405
value    = 2407

[state 0,0]
type = changestate
type     = selfstate
trigger1 = time >= 60
value    = 5030

;---------------------------------------------------------------------------
; 北斗旋連撃_相手
[Statedef 2407]
type    = A
movetype= H
physics = S
ctrl = 0
sprpriority = 0
velset =0,0

[state 0,0]
type = velset
trigger1 = time >= 202
y = -5

[state 0,0]
type = changeanim2
trigger1 = time = 0
value = 2406

[state 0,0]
type = playerpush
trigger1 = 1
value = 0

[state 0,0]
type = changestate
trigger1 = time >= 202
value = 55050

;---------------------------------------------------------------------------
; 強敵の記憶
[Statedef 2500]
type    = S
movetype= I
physics = S
velset = 0,0
juggle = 0
poweradd= -1000
anim = 2200
ctrl = 0
sprpriority = 2

[State 2200]
Type = varset
Trigger1 = time=1
v = 50
value = 1200
ignorehitpause = 1

;---------------------[超必殺技演出]
[State 2200, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 33+66

[state a];
type = Helper
trigger1 = time = 4
trigger1 = numhelper(9700)=0
id = 9700
persistent = 0
name = "BG"
sprpriority = -10
pos = 0,0
postype = back
stateno = 9777
helpertype = normal
supermovetime = 999999999
pausemovetime = 999999999
keyctrl = 0 
ownpal = 1
[State 2200, 2]
type = SuperPause
trigger1 = time = 4
time = 94+17
movetime = 94+17
darken = 0
anim = -1

[State 3040, 7]
type = null;BGPalfx
trigger1 = 1
;persistent = 0
ignorehitpause = 1
time = 1
mul = 20,20,195
under = 1

[State 2000, 6]
type = PlaySnd
trigger1 = Time = 4
value = 900,0

;---------------------[発動エフェクト]
[State 2300]
Type = Explod
trigger1 = Time = 4
ID = 9776
Anim = 9776
Pos = 2,-97
OnTop = 1
Scale = 0.5,0.5
OwnPal = 1
PauseMoveTime = 2147483648
SuperMoveTime = 2147483648

[state a];
type = Helper
trigger1 = Time = 4
id = 3000
name = "カットイン"
sprpriority = -5
pos = 0,-200
postype = back
stateno = 8000
helpertype = normal
supermovetime = 70
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[コマンド判定]
;---------------------[効果音]
[State 2200, 6]
type = PlaySnd
trigger1 = time = 2
value = 2500,0
channel = 0

;---------------------[ヘルパー]
[State 0, 0]
type = Helper
trigger1 = time = 1
helpertype = normal
name = "強敵の記憶"
ID = 2501
stateno = 2501
postype = p1
pos = 0,0
keyctrl = 0
ownpal = 1
sprpriority = -1
pausemovetime = 200
supermovetime = 200
;---------------------[]
[state 0,0]
type = velmul
trigger1 = vel x>0
x = 0.97
[state 0,0]
type = veladd
triggerall = pos y < 0
trigger1 = time > 0
trigger1 = time != [4,84]
y = 0.58
[state 0,0]
type = velset
triggerall = pos y >= 0
trigger1 = time > 0
y = 0
[state 0,0]
type = PosFreeze
trigger1 = time = [0,94]

;---------------------[立ちステートに戻る]
[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------
; 強敵の記憶_エフェクト
[Statedef 2501]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 9999
sprpriority = 0
velset = 0,0

[state 0,0]
type = palfx
trigger1 = time <= 80
time = 1
mul = 255-(time*3),255-(time*3),255-(time*3)

[state 0,0]
type = bindtoparent
trigger1 = time >= 0
pos = 0,0
ignorehitpause = 1

[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2501
postype = p1
pos = -55,0
vel = 0.9
accel = -0.005
ownpal = 0
sprpriority = 3
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)
[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2502
postype = p1
pos = -30,0
vel = 0.6
accel = -0.005
ownpal = 0
sprpriority = 3
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)
[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2503
postype = p1
pos = -15,0
vel = 0.4
accel = -0.005
ownpal = 0
sprpriority = 3
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)
[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2504
postype = p1
pos = 55,0
vel = -0.9
accel = 0.005
ownpal = 0
sprpriority = 3
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)
[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2505
postype = p1
pos = 30,0
vel = -0.6
accel = 0.005
ownpal = 0
sprpriority = 3
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)
[State 2201, effect]
type = Explod
trigger1 = time = 1
anim = 2506
postype = p1
pos = 15,0
vel = -0.4
accel = 0.005
ownpal = 0
sprpriority = 3
removeongethit = 1
supermovetime = 100
;bindtime = -1
scale = const(size.xscale),const(size.yscale)

[state 0,0]
type = destroyself
trigger1 = time = 80

;---------------------------------------------------------------------------
; 北斗剛掌波
[Statedef 2600]
type    = S
movetype= A
physics = S
velset = 0,0
juggle = 0
poweradd= -2000
anim = 2600
ctrl = 0

;---------------------[超必殺技演出]
[State 2000, NotHitBy]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 160

[state a];
type = Helper
trigger1 = time = 5
trigger1 = numhelper(9700)=0
id = 9700
persistent = 0
name = "BG"
sprpriority = -10
pos = 0,0
postype = back
stateno = 9777
helpertype = normal
supermovetime = 999999999
pausemovetime = 999999999
keyctrl = 0 
ownpal = 1
[State 2000, 2]
type = SuperPause
trigger1 = time = 5
time = 36
movetime = 36
darken = 0
anim = -1

[State 2000, 6]
type = PlaySnd
trigger1 = Time = 5
value = 900,0

;---------------------[発動エフェクト]
[State 2300]
Type = Explod
trigger1 = animelem = 2
ID = 9776
Anim = 9776
Pos = 2,-97
OnTop = 1
Scale = 0.5,0.5
OwnPal = 1
supermovetime = 999999999
pausemovetime = 999999999

[state a];
type = Helper
trigger1 = animelem = 2
id = 3000
name = "カットイン"
sprpriority = -5
pos = 0,-200
postype = back
stateno = 8000
helpertype = normal
supermovetime = 70
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[コマンド判定]
;---------------------[効果音]
[State 2000, 6]
type = PlaySnd
trigger1 = time = 5
value = 1080,0
channel = 0

;---------------------[ヘルパー]
[state a]
Type = Explod
Trigger1 = AnimElem=2,>=0
Trigger1 = AnimElem=3,<0
sprpriority = 4
pos = 16,-125
postype = p1
anim = 1082
id = 1082
OnTop = 1
OwnPal = 1
ignorehitpause = 1
bindtime = -1
Scale = (0.01+time*0.02),(0.01+time*0.02)
PauseMoveTime = 999999
SuperMoveTime = 999999

[state a]
Type = Explod
trigger1 = animelem = 5
sprpriority = 4
pos = -5,-110
postype = p1
anim = 2604
id = 2604
OnTop = 1
OwnPal = 1
ignorehitpause = 1
bindtime = -1
Scale = 1.5,1.5
PauseMoveTime = 999999
SuperMoveTime = 999999

[state a]
Type = removeexplod
Trigger1 = AnimElem=  4
id = 1082

[state a]
type = Helper
trigger1 = animelem = 5
id = 2605
name = "北斗剛掌波"
sprpriority = 2
pos = 16,-110
postype = p1
stateno = 2605
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999

;---------------------[有情ブースト]
[state 0,0]
type = velmul
trigger1 = vel x>0
x = 0.97
[state 0,0]
type = veladd
triggerall = pos y < 0
trigger1 = time > 0
trigger1 = time != [11,36]
y = 0.58
[state 0,0]
type = velset
triggerall = pos y >= 0
trigger1 = time > 0
y = 0
[state 0,0]
type = PosFreeze
trigger1 = time = [11,36]

;---------------------[立ちステートに戻る]
[State 2200]
Type = varset
Trigger1 = animtime = 0
v = 50
value = 0
ignorehitpause = 1

[state a]
type = changestate
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(HELPER)北斗剛掌波
[Statedef 2605]
type = A
ctrl = 0
anim = 2605
velset = 0,0
movetype = A
physics = N
sprpriority = 2

[state 0,0]
type = assertspecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1

[State 2005, 3]
type = SprPriority
trigger1 = 1
value = 5
ignorehitpause = 1

[state 0,0]
type = bindtoparent
trigger1 = time >= 0
pos = 16,-110
ignorehitpause = 1

;---------------------[効果音]
[State 0, 0]
type = PlaySnd
trigger1 = time = 1
value = 600, 7

;---------------------[]
[State 2005, 3]
type = HitDef
trigger1 = Time%3 = 0
trigger1 = hitcount < 30
trigger1 = moveguarded < 1
attr = A, HP
animtype  = High
damage    = ceil(root,fvar(0)*40),6
priority = 7, Hit
hitflag = MAFD
guardflag = MA
pausetime = 1, 35
sparkno = -1;s7010+(random%8)
sparkxy = -10,0
hitsound   = s400,2
guardsound = s121,0
guard.sparkno = -1;s7101
ground.type = high
ground.slidetime = 2
ground.hittime  = 14+(P2StateType=C)
guard.hittime = 12+(P2StateType=C)
guard.ctrltime = 12+(P2StateType=C)
ground.velocity = -5
air.velocity = -5.0,0
fall = 1
air.fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
fall.xvelocity = -1.5
fall.yvelocity = -1.5
yaccel = 0.45*ifelse(p2statetype=A,1.5,1)
ID = 2605

[state a];ヒットエフェクト
type = Helper
Trigger1 = P2MoveType=H
Trigger1 = MoveHit
name = "hit"
pos = Ceil(P2Dist X), 0
Postype = p1
stateno = 16095
helpertype = normal
persistent = 4
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X), 0
Postype = p2
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[State 13000]
type = Varset
trigger1 = time = 0
var(0) = 30

[State 13000]
type = VarAdd
trigger1 = MoveGuarded
var(0) = -1

[State 13000]
type = MoveHitReset
trigger1 = var(0) > 0
trigger1 = MoveGuarded

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256

[State a]
Type = AngleDraw
Trigger1 = 1
Scale = 1.0+time, 2.0
IgnoreHitPause = 1

[State 2005, effect]
type = Explod
trigger1 = Time%4 = 0
anim = 2601
id = 2601
Postype = p1
pos = 0,-10
ownpal = 1
scale = 1,1
vel = 16,0
sprpriority = 10
supermovetime = 999999
pausemovetime = 999999
removetime = 18

[State 2005, effect]
type = Explod
trigger1 = Time%4 = 0
anim = 2602
id = 2602
Postype = p1
pos = 0,-10
ownpal = 1
scale = 1,1
vel = 16,0
sprpriority = 10
supermovetime = 999999
pausemovetime = 999999
removetime = 18

;---------------------[当身関係]
[state a]
type = HitBy
trigger1 = 1
value = SCA,AP
time = 1
ignorehitpause = 1

[state a]
type = hitoverride
trigger1 = 1
attr = SCA,AP
stateno = 2606

;---------------------[七星ゲージ]
[state 2,]
type = parentvaradd
trigger1 = root,var(8) >0
trigger1 = root,var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,]
type = parentvaradd
trigger1 = root,var(20) > 1
trigger1 = root,var(4) < 7
trigger1 = movehit=1
trigger1 = time>1
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state 2,a]
type = parentvaradd
trigger1 = root,var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = root,var(33) % 100000000 < 10000000
trigger1 = root,var(35) < 3
v = 4
value = 2
persistent = 0
ignorehitpause = 1
[state 2,a]
type = parentvaradd
trigger1 = root,var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = root,var(33) % 100000000 < 10000000
trigger1 = root,var(35) < 3
v = 35
value = 2
persistent = 0
ignorehitpause = 1
[state 2,a]
type = parentvaradd
trigger1 = root,var(4) < 7
trigger1 = movehit
trigger1 = time>1
trigger1 = root,var(33) % 100000000 < 10000000
persistent = 0
v = 33
value = 10000000
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 1
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 2
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 3
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 4
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 5
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 6
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 7
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 8
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 9
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 10
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 11
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 12
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 13
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 14
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 15
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 16
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 17
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 18
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 19
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 20
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 21
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 22
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 23
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 24
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 25
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 26
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 27
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 28
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 29
v = 30
value = 1
persistent = 0
ignorehitpause = 1

[state a]
type = parentvaradd
trigger1 = movehit=1
trigger1 = hitcount = 30
v = 30
value = 1
persistent = 0
ignorehitpause = 1

;---------------------[ブーストゲージ増加]
[state a]
type = parentvaradd
trigger1 = movecontact = 1
trigger1 = root,var(23) = 0
v = 16
value = ifelse(MoveGuarded,4,ceil(4*root,fvar(0)))
ignorehitpause = 1
persistent = 0

;---------------------[]
;==changed
[state a];弱攻撃吹き飛ばし
type = parentvarset
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y>-5
v = 11
value = 0

;==changed
[state a];弱攻撃吹き飛ばし
type = targetstate
trigger1 = movehit = 1
trigger1 = root,var(11) = 1 && enemynear,pos Y<=-5
value = 551
persistent=0

[State 2005, 3]
type = destroyself
trigger1 = parent,movetype = H

[state a]
type = changestate
trigger1 = time >= 90
value = 2606

;---------------------------------------------------------------------------
;(HELPER)北斗剛掌波
[Statedef 2606]
type    = A
movetype= A
physics = N
ctrl = 0
anim = 9999
sprpriority = 5
velset = 0,0

[State 2006, effect]
type = Explod
trigger1 = time = 0
anim = 2606
bindtime = -1
ignorehitpause = 1
postype = p1
pos = 0,0
ownpal = 0
sprpriority = 5
supermovetime = 1
id = 2606
removetime = 24

[state 0,0]
type = palfx
trigger1 = time <= 1
time = 1
mul = 255-(time*20),255-(time*20),255-(time*20)

[state 0,0]
type = ModifyExplod
trigger1 = 1
ID = 2606
scale = 5,1.0-(time*0.04)

[State 2006, 3]
type = destroyself
trigger1 = time >= 24

;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; 北斗百裂拳
[Statedef 3000]
type    = S
movetype= A
physics = S
velset = 0,0
juggle = 0
anim = 3000
ctrl = 0

[state a]
type = varset
trigger1 = time = 0
v = 2
value = 0

[state a]
type = varset
trigger1 = time = 0
v = 9
value = 0

[state a]
type = varset
trigger1 = time = 0
v = 11
value = 0

[state a]
type = turn
trigger1 = time = 0
trigger1 = p2dist x < 0

;---------------------[超必殺技演出]
[state a];
type = Helper
trigger1 = time = 7
trigger1 = numhelper(9780)=0
id = 9780
persistent = 0
name = "BG"
sprpriority = -10
pos = 0,0
postype = back
stateno = 9780
helpertype = normal
supermovetime = 999999999
pausemovetime = 999999999
keyctrl = 0 
ownpal = 1
[State 2000, 2]
type = SuperPause
trigger1 = time = 7
time = 64
movetime = 64
pos = -14,-9
ownpal = 1
anim = -1
sound = S4000,1
poweradd = 0
darken = 0

;---------------------[発動エフェクト]
[state a]
type = Helper
trigger1 = time = 2
pos = 0,0
postype = p1
stateno = 9775
helpertype = normal
pausemovetime = 99999
supermovetime = 99999
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 1
size.yscale = 1

[state a];
type = Helper
trigger1 = time = 7
id = 3000
name = "カットイン"
sprpriority = -5
pos = 0,-200
postype = back
stateno = 8000
helpertype = normal
supermovetime = 70
pausemovetime = 0
keyctrl = 0 
ownpal = 1

;---------------------[コマンド判定]
[State 3000, HitDef1]
type = HitDef
trigger1 = animelem=8
attr = S, HA
damage = 25, 1
kill = 0
getpower = 0
givepower = 0
animtype = heavy
hitflag = MAFD
guardflag = MA
priority = 7, hit
pausetime = 10, 15
guard.pausetime = 15, 14
sparkno = -1
sparkxy = -18, -106
hitsound = S400,3
guard.sparkno = -1
guardsound = S121,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 14+(P2StateType=C)
guard.hittime = 12+(P2StateType=C)
guard.ctrltime = 12+(P2StateType=C)
ground.velocity = -4.0
air.velocity = -4.0,-7.0
fall = 1
air.fall = 1
p2facing = 1
fall.recovertime = 50
ground.cornerpush.veloff = 0
yaccel = 0.45*ifelse(p2statetype=A,1.5,1)
p2stateno = 3050
envshake.ampl = 8
fall.recover = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
name = "hit"
pos = Ceil(P2Dist X/2-15), -106-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Explod
trigger1 = MoveGuarded=1
id = 9740
anim = 9740
pos = Ceil(P2Dist X/2-15), -106-Ceil(P2BodyDist Y)
Postype = p1
bindtime = 1
sprpriority = 9
persistent = 0
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

;---------------------[効果音]
[State 3000, 6]
type = PlaySnd
trigger1 = time = 1
value = 3050,0
channel = 0

[State 3000, 6];
type = PlaySnd
trigger1 = animelem = 4
value = 3050,1
channel = 0

;---------------------[]
[state 0,0]
type = assertspecial
trigger1 = movehit
flag = nomusic

[State 0, 1]
type = TargetBind
trigger1 = movehit
pos = 50,-15
ignorehitpause = 1

[State 3000,0]
Type = attackdist
Trigger1 = animelem=9,>0
value = 0

;---------------------[立ちステートに戻る]
[State 3000, 3]
type = ChangeState
trigger1 = movehit
value = 3010

[state a]
type = changestate
trigger1 = animtime = 0
value = 3040
ctrl = 1

;---------------------------------------------------------------------------
; 北斗百裂拳_HIT
[Statedef 3010]
type    = S
movetype= A
physics = S
velset = 0,0
juggle = 0
anim = 3010
ctrl = 0

[state a];テーレッテーフラグ
type = varset
trigger1 = time = 0
v = 21
value = 1

[state 3000, 0]
type = varrandom
trigger1 = time >= 0
v = 19
range = -15,15

;---------------------[効果音]
[State 3000, 3]
type = PlaySnd
trigger1 = time >= 57
value = 400, 6
persistent = 20
channel = 3

[state 3000, 3]
type = playsnd
persistent = 6
trigger1 = time >= 56
value = 400,3
channel = 4

[state 3000, 3]
type = playsnd
persistent = 6
trigger1 = time >= 59
value = 400,3
channel = 6

[State 3000, 6]
type = PlaySnd
trigger1 = time = 55
value = 3055,0
channel = 0

[State 3000, 6];
type = PlaySnd
trigger1 = time = 200
value = 3055,1
channel = 0

[state a];ヒットエフェクト
type = Helper
triggerall = var(55) = 0
trigger1 = time >= 56
name = "hit"
pos = Ceil(P2Dist X/2-random%30), -69-random%60-Ceil(P2BodyDist Y)
Postype = p2
stateno = 16095
helpertype = normal
persistent = 4
ignorehitpause = 2
keyctrl = 0 
ownpal = 1
size.xscale = .5
size.yscale = .5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
triggerall = var(55) != 0
Trigger1 = time = 62
name = "hit"
pos = 0,-100
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
triggerall = var(55) != 0
Trigger1 = time = 86
name = "hit"
pos = 0,-80
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
triggerall = var(55) != 0
Trigger1 = time = 110
name = "hit"
pos = 0,-60
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
triggerall = var(55) != 0
Trigger1 = time = 134
name = "hit"
pos = 20,-90
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
triggerall = var(55) != 0
Trigger1 = time = 158
name = "hit"
pos = 10,-90
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
triggerall = var(55) != 0
Trigger1 = time = 182
name = "hit"
pos = -10,-90
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
triggerall = var(55) != 0
Trigger1 = time = 206
name = "hit"
pos = -20,-90
Postype = p2
stateno = 16095
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

;---------------------[ヘルパー]
[State 0, 0]
type = Helper
trigger1 = time = 18
helpertype = normal
name = "efe"
ID = 3015
stateno = 3015
postype = p1
pos = 0,0
keyctrl = 0
ownpal = 1
pausemovetime = 300
supermovetime = 300

[State 3000, face]
type = Explod
;persistent = 0
trigger1 = time >= 56
anim = 3001
postype = back
pos = -8,0
ownpal = 1
random = 4,4
sprpriority = -4
pausemovetime = 200
supermovetime = 200
bindtime = -1
removeongethit = 1
scale = 0.5,0.5
removetime = 1
id = 3005
[State 3000, handF]
type = Explod
persistent = 30
trigger1 = random >= 800
trigger1 = time >= 50
anim = 3002
postype = back
pos = -80,125
random = 60,80
ownpal = 1
velocity = 10.5+(var(19)*0.1),0+(var(19)*0.1)
sprpriority = -3
pausemovetime = 200
supermovetime = 200
removeongethit = 1
scale = 0.5,0.5
removetime = 25
id = 3005
[State 3000, handB]
type = Explod
persistent = 30
trigger1 = random >= 800
trigger1 = time >= 52
anim = 3003
postype = back
pos = -80,112
random = 60,120
ownpal = 1
velocity = 10.5+(var(19)*0.1),0+(var(19)*0.1)
sprpriority = -5
pausemovetime = 200
supermovetime = 200
removeongethit = 1
scale = 0.5,0.5
removetime = 25
id = 3005

[State 3000, Backfire]
type = Explod
trigger1 = time = 56
anim = 3004
postype = back
pos = -40,0
ownpal = 1
velocity = 0,-10
sprpriority = -5
pausemovetime = 200
supermovetime = 200
removeongethit = 1
scale = 2,2
removetime = 48
[State 3000, Backfire]
type = Explod
persistent = 51
trigger1 = time >= 81;56
anim = 3004
postype = back
pos = -40,256
ownpal = 1
velocity = 0,-10
sprpriority = -5
pausemovetime = 190
supermovetime = 190
removeongethit = 1
scale = 2,2
removetime = 80;80;24
id = 3005
[state -2, destroy]
type = removeexplod
trigger1 = time >= 205
id = 3005

;---------------------[]
[state 0,0]
type = hitadd
trigger1 = time = 0
value = (enemy,gethitvar(hitcount))*-1-var(42)
persistent = 0
[state 0,0]
type = hitadd
triggerall = var(54) != 1
triggerall = var(55) = 0
trigger1 = time = [57,156]
value = 1
persistent = 2
[state 0,0]
type = hitadd
triggerall = var(54) != 1
triggerall = var(55) = 0
trigger1 = time >= 157
value = 1
persistent = 1

[state 0,0]
type = assertspecial
trigger1 = time = 0
flag = nomusic
[state 0,0]
type = assertspecial
trigger1 = 1
flag = nomusic
[state 0,0]
type = playsnd
trigger1 = time = 0
value = 3000,0+random%4
loop = 1
channel = 8
volume = 50
persistent = 0
[state 0,0]
type = varset
trigger1 = time = 0
v = 21
value = 1

[state 0,0]
type = envshake
trigger1 = time = 56
time = 120
ampl = 5

[State 3010,0]
type = AssertSpecial
trigger1 = 1
flag = timerfreeze

[state 0,0]
type = veladd
triggerall = pos y < 0
trigger1 = time >= 10
y = 0.58
[state 0,0]
type = velset
triggerall = pos y >= 0
trigger1 = time >= 10
y = 0

;---------------------[立ちステートに戻る]
[State a]
type = Width
trigger1 = time = 0
edge = 60,0

[State 3010, 3]
type = Changeanim
triggerall = var(54) != 1
triggerall = var(55) = 0
trigger1 = time = 131
value = 3020

[State 3010, 3]
type = Changeanim
triggerall = var(54) != 1
triggerall = var(55) = 0
trigger1 = time = 206
value = 3030

[State 3010, 3]
type = Changeanim
triggerall = anim = 3010
triggerall = var(54) = 1
triggerall = var(55) = 0
trigger1 = time = 0
value = 3110

[State 3010, 3]
type = Changeanim
triggerall = anim = 3110
triggerall = var(54) = 1
triggerall = var(55) = 0
trigger1 = time = 199
value = 3111

[State 3010, 3]
type = Changeanim
triggerall = anim = 3111
triggerall = var(54) = 1
triggerall = var(55) = 0
trigger1 = time = 206
value = 3112

[State 3010, 3]
type = Changeanim
triggerall = anim = 3010
triggerall = var(54) != 1
triggerall = var(55) != 0
trigger1 = time = 206
value = 3120

[state a]
type = changestate
trigger1 = time = 206
value = 3060
ctrl = 0

;---------------------------------------------------------------------------
; 北斗百裂拳_終了
[Statedef 3060]
type    = S
movetype= A
physics = S
ctrl = 0
sprpriority = 1
velset = 0,0

[state 0,0]
type = assertspecial
trigger1 = time = [0,230]
flag = noBG
flag2 = noFG

[State 3060, effect]
type = Explod
trigger1 = time = 1
anim = 3031+(var(54))+ifelse(var(55) = 0,0,2)
postype = left
pos = 2,150
ownpal = 0
sprpriority = 5
ontop = 1
scale = 0.5,0.5
pausemovetime = 9999
supermovetime = 9999

[State 3060, 0]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "efe"
ID = 3035
stateno = 3035
postype = p1
pos = 0,0
keyctrl = 0
ownpal = 1
sprpriority = 5
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1
bindtime = -1

[state 0,0]
type = pause
trigger1 = time = 1
time = 200
movetime = 200

[State 0, 0]
type = PlaySnd
trigger1 = time = 80
value = 3060,0+(var(54))+ifelse(var(55) = 0,0,2)
channel = 0

[State 0, 0]
type = PlaySnd
triggerall = var(55) = 3
trigger1 = enemy,stateno = 3052
trigger1 = time >= 200
value = 3055,5
channel = 0
persistent = 0

[state 0,0]
type = posadd
trigger1 = time >= 200
trigger1 = frontedgedist <= 150
x = -10

[state 0,0]
type = envshake
trigger1 = time = 0
time = 8
ampl = 9

[state 3060]
type = helper
trigger1 = !NumHelper(9800)&& WinKO && var(4)=7
id = 9800
stateno= 9888
name="super_ko"
pos = floor(160-screenpos x)*facing,floor(120-screenpos y)
potype = p1
ownpal = 1
facing=facing
ignorehitpause=1

;---------------------[立ちステートに戻る]
[State 3060, 3]
type = ChangeState
triggerall = var(55) <= 1
trigger1 = RoundState = 2
trigger1 = animtime = 0
value = 0
ctrl = 1

[State 3060, 3]
type = ChangeState
triggerall = var(55) <= 1
trigger1 = RoundState != 2
trigger1 = animtime = 0
value = 188
ctrl = 1

[State 3060, 3]
type = Changeanim
triggerall = var(55) > 1
trigger1 = time >= 200
value = 3121
persistent = 0

[State 3060, 3]
type = ChangeState
triggerall = var(55) = 2
trigger1 = RoundState != 2
trigger1 = time >= 1000
value = 188
ctrl = 1

[State 3060, 3]
type = ChangeState
triggerall = var(55) = 3
trigger1 = RoundState != 2
trigger1 = time >= 4410
value = 188
ctrl = 1

;---------------------------------------------------------------------------
;失敗　
[Statedef 3040]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 3040
sprpriority = 1
velset = 0,0

[state 0,0]
type = veladd
triggerall = pos y < 0
trigger1 = time >= 0
y = 0.58
[state 0,0]
type = velset
triggerall = pos y >= 0
trigger1 = time >= 0
y = 0

[state 0,0]
type = powerset
trigger1 = time = 0
value = 0
[state 0,0]
type = varset
trigger1 = time = 0
v = 4
value = 6
[state 0,0]
type = varset
trigger1 = time = 0
v = 16
value = 0

[State 3040,0]
Type = attackdist
Trigger1 = 1
value = 0

[State 3040, 3]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;相手
[Statedef 3050]
type    = A
movetype= H
physics = N
ctrl = 0
anim = 5000
sprpriority = 1
velset = 0,0

[State 210, 3]
type = Changeanim2
trigger1 = time = 0
value = 3050
[State 210, 3]
type = Changeanim
triggerall = authorname = "Drowin hokuto"
trigger1 = time = 215
value = 5320

[state a]
type = changeanim
triggerall = time = 215
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "KENSHIRO" || name = "KENSHIRO")&& authorname = "Cameron"
value = 560

[state 0,0]
type = changeanim
trigger1 = (name = "shin" || name = "shin")&& authorname = "konpeitou"
trigger1 = time = 215
value = 68000

[state 0,0]
type = lifeadd
trigger1 = time = [70,215]
trigger1 = enemy,var(55) <= 1
value = -5
kill = 0
[state 0,0]
type = lifeadd
triggerall = time = 219
trigger1 = enemy,var(55) <= 1
value = -10000
[state 0,0]
type = lifeset
triggerall = time = 219
trigger1 = enemy,var(55) <= 1
value = 0

[state 0,0]
type = lifeadd
triggerall = time = 219
trigger1 = enemy,var(55) > 1
value = -10000
kill = 0
[state 0,0]
type = lifeset
triggerall = time = 219
trigger1 = enemy,var(55) > 1
value = 1

[state 0,0]
type = velset
triggerall = time = 220
trigger1 = enemy,var(55) <= 1
x = -7
y = -2

[State 210, 3]
type = selfState
triggerall = time = 221
trigger1 = enemy,var(55) <= 1
value = 5050
ctrl = 0

[state 0,0]
type = changestate
triggerall = time = 220
trigger1 = enemy,var(55) > 1
value = 3056

;---------------------------------------------------------------------------
;(ENEMY)バニシングストライク、弱吹き飛び
[Statedef 3056]
type    = A
movetype= H
physics = N
velset = -12,0
sprpriority = 1

[state a]
type = turn
trigger1 = p2dist x < 0
trigger1 = time = 0

[State 820, 1]
type = null;ChangeAnim2
Trigger1 = Time = 0
value = 550

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
value = 560

[state 0,0]
type = changeanim
trigger1 = (name = "shin" || name = "shin")&& authorname = "konpeitou"
trigger1 = time = 0
value = 68000

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 821, 3] 
type = ChangeState
trigger1 = BackEdgeDist <= 5
trigger2 = time >= 200
trigger3 = frontEdgeDist <= 5
value = 3051

;---------------------------------------------------------------------------
;シン　ｻﾗﾊﾞﾀﾞｰ寸前
[Statedef 3051]
type    = A
movetype= H
physics = N
ctrl = 0
sprpriority = 1
velset = 0,0

[state a]
type = veladd
trigger1 = time > 11
y = 0.45

[state a]
type = playerpush
trigger1 = 1
value = 1

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -4
freq = 95
phase = 95

[state 0,0]
type = changeanim2
trigger1 = time = 0
value = 3051

[State 821, 3] 
type = ChangeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 3052

;---------------------------------------------------------------------------
;シン　ｻﾗﾊﾞﾀﾞｰ寸前
[Statedef 3052]
type    = A
movetype= H
physics = N
ctrl = 0
sprpriority = 1
velset = 0,0

[state 0,0]
type = changeanim2
trigger1 = enemy,var(55) = 2
trigger1 = time = 0
value = 3053

[state 0,0]
type = changestate
trigger1 = enemy,var(55) = 2
trigger1 = time >= 48
trigger1 = (name = "shin" || name = "shin")&& authorname = "konpeitou"
value = 3055

[state 0,0]
type = changestate
trigger1 = enemy,var(55) = 2
trigger1 = time >= 48
trigger1 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
value = 2200

[state 0,0]
type = changeanim2
trigger1 = enemy,var(55) = 3
trigger1 = time = 0
value = 3052

[state 0,0]
type = changeanim2
trigger1 = enemy,var(55) = 3
trigger1 = time = 3410
value = 3053

[state 0,0]
type = changestate
trigger1 = enemy,var(55) = 3
trigger1 = time >= 3458
trigger1 = (name = "shin" || name = "shin")&& authorname = "konpeitou"
value = 3055

[state 0,0]
type = changestate
trigger1 = enemy,var(55) = 3
trigger1 = time >= 3458
trigger1 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
value = 2200

;---------------------------------------------------------------------------
; 対シン専用サラダバー(こんぺいとう氏)
[Statedef 3055, お前の拳では死なん！]
type        = S
movetype    = I
physics     = S
ctrl        = 0
poweradd    = 0
facep2      = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 0
sprpriority = 2

[State 2101]
Type = ChangeAnim2
Trigger1 = !Time
Trigger1 = PrevStateNo!=50000
value = 3055

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                            特殊効果
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State 2600, 特殊効果01]
type     = Pause
trigger1 = animelem = 42
time     = 240
movetime = 240

[State 2000, Explod01]
type        = Explod
trigger1    = !numexplod(8000)
trigger1    = animelem = 42
ID          = 8000
anim        = 8000
pos         = 320, 240
postype     = back
bindtime    = -1
removetime  = -2
scale       = .5, .5
sprpriority = -10
facing      = -1
ownpal      = 1
supermovetime = 999999999999
pausemovetime = 999999999999

[State 2600, 特殊効果02]
type     = Trans
trigger1 = time >= 700
trans    = addalpha
alpha    = 256 - ((time-700) * 4), (time-700) * 4

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                             PlaySnd
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State 2600, PlaySnd01]
type     = PlaySnd
trigger1 = animelem = 3
value    = 2600, 0
channel  = 0

[State 2600, PlaySnd02]
type     = PlaySnd
trigger1 = animelem = 14
value    = 2600, 1
channel  = 0

[State 2600, PlaySnd03]
type     = PlaySnd
trigger1 = animelem = 4
trigger2 = animelem = 8
trigger3 = animelem = 12
value    = 2600, 2

[State 2600, PlaySnd04]
type     = PlaySnd
trigger1 = animelem = 18
value    = 52, 0

[State 2600, PlaySnd05]
type     = PlaySnd
trigger1 = animelem = 21
value    = 0, 0

[State 2600, PlaySnd06]
type     = PlaySnd
trigger1 = animelem = 17
trigger2 = animelem = 42, >= 0
trigger2 = !(time % 25)
value    = 100, 0

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                              Helper
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State 2600, Helper01]
type       = Helper
trigger1   = time = 700
helpertype = normal
name       = "MyHelper"
ID         = 800100
stateno    = 800100
pos        = 320, 0
postype    = back
facing     = -1
ownpal     = 1
supermovetime = 999999999999
pausemovetime = 999999999999

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                            位置設定
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State 2600, 位置設定01]
type     = PosAdd
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 8
trigger5 = animelem = 9
trigger6 = animelem = 10
trigger7 = animelem = 11
trigger8 = animelem = 12
x        = -4

[State 2600, 位置設定02]
type     = PosAdd
trigger1 = animelem = 17
x        = -18

[State 2600, 位置設定03]
type     = PosAdd
trigger1 = animelem = 18
x        = -24

[State 2600, 位置設定03]
type     = PosAdd
trigger1 = animelem = 40
x        = -24

[State 2600, 位置設定04]
type     = PosAdd
trigger1 = time = 790
y        = 800

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                            速度設定
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State 2600, 速度設定01]
type     = VelAdd
trigger1 = time >= 700
y        = .1

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                        ステート移行
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State 2600, ステート移行]
type     = LifeSet
trigger1 = time = 790
value    = 0

[State 1300000, Explod]
type       = Explod
triggerall = !numexplod(13000)
trigger1   = stateno  = 3055
trigger1   = animelem = 42
anim       = 13000
ID         = 13000
pos        = 160, 0
postype    = back
vel        = 0, 0
bindtime   = -1
scale      = .5,500
removetime = -1
supermovetime = 999999999999
pausemovetime = 999999999999
sprpriority   = -1000

[State 1300000, Explod]
type       = Explod
trigger1   = stateno  = 3055
trigger1   = animelem = 42, >= 0
anim       = 13010
ID         = 13010
pos        = (random % 320), 330
postype    = back
vel        = 0, -20
bindtime   = 1
scale      = 0.3,1 - ((random % 6) * .1)
removetime = 20
supermovetime = 999999999999
pausemovetime = 999999999999
sprpriority   = -500

[State 999900, 奥義背景]
type     = RemoveExplod
trigger1 = stateno != 3055
trigger2 = WinKO
trigger3 = time = 790
ID       = 13000

[State 999900, 奥義背景]
type     = RemoveExplod
trigger1 = stateno != 3055
trigger2 = WinKO
ID       = 13010

[State 999900, 特殊効果]
type       = assertspecial
triggerall = !(WinKO)
trigger1   = stateno  = 3055
trigger1   = animelem = 42, >= 0
flag  = noshadow
flag2 = noBG
flag3 = noFG
supermovetime = 999999999999
pausemovetime = 999999999999

[State 2600, ステート移行]
type     = ChangeState
trigger1 = time = 790
value    = 5150
;---------------------------------------------------------------------------
; 対シン専用サラダバー(アフロン氏)
[Statedef 2200, お前の拳では死なん！]
type        = S
movetype    = I
physics     = S
ctrl        = 0
poweradd    = 0
facep2      = 0
hitdefpersist   = 0
movehitpersist  = 0
hitcountpersist = 0
sprpriority = 2

[State 2101]
Type = ChangeAnim2
Trigger1 = !Time
Trigger1 = PrevStateNo!=50000
value = 3056

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                            特殊効果
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State 2600, 特殊効果01]
type     = Pause
trigger1 = animelem = 42
time     = 240
movetime = 240

[State a];発動エフェクト
Type = Helper
trigger1 = !numexplod(3000)
trigger1 = animelem = 42
ID = 3000
Name = "e"
Sprpriority = -5
Pos = 0,-200
PosType = back
StateNo = 8000
HelperType = Normal
SuperMoveTime = 99999
PauseMoveTime = 99999
KeyCtrl = 0 
OwnPal = 1

[State 3040,7]
Type = BGPalfx
trigger1 = animelem = 42,>=0
IgNoreHitPause = 1
Time = 1
mul = 35,0,0
under = 256

[State 2600, 特殊効果02]
type     = Trans
trigger1 = time >= 700
trans    = addalpha
alpha    = 256 - ((time-700) * 4), (time-700) * 4

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                             PlaySnd
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State 2000,6];フッ・・・どうやらここまでのようだな
Type = PlaySnd
Trigger1 = AnimElem=3
value = 2200,0

[State 2000,6];だがな・・・俺は、お前の拳法では死なん！サラダバー
Type = PlaySnd
Trigger1 = AnimElem=13
value = 2200,1

[State 2000,6];足音
Type = PlaySnd
Trigger1 = AnimElem=4
Trigger2 = AnimElem=8
Trigger3 = AnimElem=12
value = 2200,2

[State 2600, PlaySnd04]
type     = PlaySnd
trigger1 = animelem = 18
value    = 52, 0

[State 2600, PlaySnd05]
type     = PlaySnd
trigger1 = animelem = 21
value    = 0, 0

[State 2600, PlaySnd06]
type     = PlaySnd
trigger1 = animelem = 17
trigger2 = animelem = 42, >= 0
trigger2 = !(time % 25)
value    = 100, 0

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                              Helper
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State a];一枚絵
Type = Helper
trigger1 = time = 600
ID = 3000
Name = "e"
Sprpriority = 5
Pos = 0,0
PosType = back
StateNo = 8001
HelperType = Normal
SuperMoveTime = 70
PauseMoveTime = 0
KeyCtrl = 0 
OwnPal = 1

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                            位置設定
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State 2600, 位置設定01]
type     = PosAdd
trigger1 = animelem = 5
trigger2 = animelem = 6
trigger3 = animelem = 7
trigger4 = animelem = 8
trigger5 = animelem = 9
trigger6 = animelem = 10
trigger7 = animelem = 11
trigger8 = animelem = 12
x        = -4

[State 2600, 位置設定02]
type     = PosAdd
trigger1 = animelem = 17
x        = -18

[State 2600, 位置設定03]
type     = PosAdd
trigger1 = animelem = 18
x        = -24

[State 2600, 位置設定03]
type     = PosAdd
trigger1 = animelem = 40
x        = -24

[State 2600, 位置設定04]
type     = PosAdd
trigger1 = time = 790
y        = 800

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                            速度設定
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State 2600, 速度設定01]
type     = VelAdd
trigger1 = time >= 700
y        = .1

;━━━━━━━━━━━━━━━━━━━━━━━━━━●
;                                        ステート移行
;━━━━━━━━━━━━━━━━━━━━━━━━━━●
[State 2600, ステート移行]
type     = LifeSet
trigger1 = time = 790
value    = 0

[State a];テーレッテーフラグ
Type = varSet
Trigger1 = AnimElem=36
var(21) = 1

[State a]
Type = PowerSet
Trigger1 = Time=790
value = 0

[State a]
Type = varSet
Trigger1 = Time=790
var(16) = 300

[State 2600, ステート移行]
type     = ChangeState
trigger1 = time = 790
value    = 5150

;---------------------------------------------------------------------------
;(HELPER)北斗百裂拳
[Statedef 3015]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 9999
sprpriority = 3
velset = 0,0

[State 3000, effect]
type = Explod
trigger1 = time = 1
anim = 3011
postype = p1
pos = -10,-85
ownpal = 0
sprpriority = -4
scale = 0.5,0.5
pausemovetime = 100
supermovetime =100

[State 3000, effect]
type = Explod
trigger1 = time = [1,49]
anim = 3012
postype = p1
pos = 0,-90
ownpal = 0
sprpriority = -5
scale = 1+(time*0.01),1+(time*0.01)
pausemovetime = 100
supermovetime =100

[state 0,0]
type = assertspecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1


[state 0,0]
type = palfx
trigger1 = time >= 0
time = 1
mul = 255 - (time*5),255 - (time*5),255 - (time*5)

[state 0,0]
type = destroyself
trigger1 = time = 49

;---------------------------------------------------------------------------
;(HELPER)北斗百裂拳
[Statedef 3035]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 3035
sprpriority = 5
velset = 0,0

[state 0,0]
type = assertspecial
trigger1 = time >= 0
flag = noshadow
ignorehitpause = 1

[state 0,0]
type = bindtoparent
triggerall = time = 0
trigger1 = root,var(54) != 1
trigger1 = root,var(55) = 0
pos = 20,-115
ignorehitpause = 1

[state 0,0]
type = bindtoparent
triggerall = time = 0
trigger1 = root,var(54) = 1
trigger2 = root,var(55) != 0
pos = 50,-110
ignorehitpause = 1

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-25*var(1), 256

[State a]
Type = varset
Trigger1 = time < 200
var(1) = 0

[State a]
Type = varadd
Trigger1 = time >= 200
var(1) = 1

[state a]
type = AngleDraw
trigger1 = root,var(54) != 1
scale = 1.0 + var(1)*0.1,1.0 + var(1)*0.1
value = 0

[state a]
type = AngleDraw
trigger1 = root,var(54) = 1
scale = 1.0 + var(1)*0.1,1.0 + var(1)*0.1
value = -30

[state 0,0]
type = destroyself
trigger1 = time = 210

;---------------------------------------------------------------------------
;(HELPER)カットイン
[Statedef 8000]
type = S
ctrl = 0
anim = 8000
velset = 0,0
movetype = I
physics = N
sprpriority = -5

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-var(1), var(1)
;---------------------[]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = 0

[state a]
type = varadd
trigger1 = time >= 40
v = 1
value = 15

;---------------------[拡縮]
[State 1000, 0]
type = AngleDraw
trigger1 = 1
scale = 1.0,1.0

;---------------------[]
[state a]
type = destroyself
trigger1 = time >= 60

;---------------------------------------------------------------------------
;(HELPER)奥義背景
[Statedef 9777]
type = A
ctrl = 0
anim = 9999
sprpriority = -99

[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SCA
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[State -1]
Type = AssertSpecial
Trigger1 = 1
Flag = Invisible
Flag2 = Noshadow

IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999

[state 6200]
type = AssertSpecial
trigger1 = time<202
trigger2 = time<404
trigger2 = root,stateno = (2405) || root,prevstateno = (2405)
flag = NoBG
flag2 = NoFG

[state 6200]
type = Explod
trigger1 = time=0
trigger1 = P2Life>0
id = 9700
anim = 9777
pos = 0+(facing=-1)*320,0
postype = back
facing = facing
bindtime = -1
removetime = -1
sprpriority = -90
pausemovetime = 9999
supermovetime = 9999
scale = 1.0,1.0

[state 6200]
type = helper
trigger1 = !NumHelper(9800)&& WinKO
id = 9800
stateno= 9888
name="super_ko"
pos = floor(160-screenpos x)*facing,floor(120-screenpos y)
potype = p1
ownpal = 1
facing=facing
ignorehitpause=1

[state 6200]
type = RemoveExplod
triggerall = NumExplod(9800)=0
trigger1 = (root,stateno!=[2000,2999])
trigger2 = root,movetype=H

[state 6200]
type = RemoveExplod
trigger1 = NumHelper(9800)>0
ID = 9700

[state 6200]
type = DestroySelf
triggerall = NumExplod(9800)=0
trigger1 = (root,stateno!=[2000,2999])
trigger2 = root,movetype=H

;----------------------------------------------------------------------------
[Statedef 9775]
type = S
ctrl = 0
anim = 9770
velset = 0,0
movetype = I
physics = N
sprpriority = -2

[state a]
type = BindToRoot
trigger1 = 1
time = 1

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = varset
trigger1 = !time
var(1)=0

[state a]
type = varset
trigger1 = !time
var(2)=0

[state a]
type = varadd
trigger1 = time > 50
var(1)=1

[state a]
type = varadd
trigger1 = time = [60,64]
var(2)=1

[state a]
type = destroyself
trigger1 = var(1)*16 >=256
trigger2 = parent,movetype = H

[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256 - var(1)*16,256

[state a]
type = angledraw
trigger1 = 1
scale = ifelse(time<10,time*0.1,1),9

[State a, effect]
type = Explod
trigger1 = time = 0
anim = 9771
id = 9771
postype = p1
pos = 0,0
ownpal = 1
sprpriority = -4
pausemovetime = 99999
supermovetime = 99999
bindtime = -1
removeongethit = 1

[state 0, 0]
type = ModifyExplod
trigger1 = 1
id = 9771
scale = 1.0 - var(2)*0.125,0.25 - var(2)*0.03125
ignorehitpause = 1

[State a, effect]
type = Explod
trigger1 = time = 0
anim = 9772
id = 9772
postype = p1
pos = 0,0
ownpal = 1
sprpriority = -3
pausemovetime = 99999
supermovetime = 99999
bindtime = -1
removeongethit = 1
scale = 0.5,0.5

;---------------------------------------------------------------------------
;一撃奥義発動時背景
[statedef 9780]
ctrl = 0
anim = 9999

[state -2]
type = varset
trigger1 = time=0
var(0)=root,stateno

[state -2]
type = varset
trigger1 = root,stateno=2502
var(0)=root,stateno

[state -2]
type = assertspecial
trigger1 = 1
flag = noBG
flag2 = noFG
flag3 = noKOslow

;背景
[state 9780]
type = Explod
trigger1 = Time=0;||Time=60||Time=180||Time=300
id = 9780
anim = 9780
pos = -120+(facing=-1)*640,0;-(Time!=0)*240
postype = back
sprpriority = -10
vel = 0,4
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = 640,.5
facing=root,facing

;背景
[state 9780]
type = Explod
trigger1 = Time=0;||Time=120||Time=240
id = 9781
anim = 9781
pos = -120+(facing=-1)*640,-1
postype = back
sprpriority = -10
vel = 0,4
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = 640,.5
facing=root,facing

;バー1
[state 9780]
type = Explod
trigger1 = time=0||time=3||(Time%22=1&&time>26)
id = 9782
anim = 9782+(time>20)
pos = 0-(Time=0)*72-(time>0)*200+(teamside=2)*320,5-(Time>26&&(time%44=[1,12]))*5
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー2
[state 9780]
type = Explod
trigger1 = time=0||(Time%24=6&&time>26)
id = 9782
anim = 9782+(time>20)
pos = 0-(Time=0)*84-(time>0)*200+(teamside=2)*320,30-(Time>26&&(time%44=[1,12]))*10
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー3
[state 9780]
type = Explod
trigger1 = time=0||Time=2||(Time%26=0&&time>26)
id = 9782
anim = 9782+(time>20)
pos = 0-(Time=0)*60-(time>0)*200+(teamside=2)*320,ifelse(time=2,45,55)-(Time>26&&(time%44=[1,12]))*5
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー4
[state 9780]
type = Explod
trigger1 = time=0||Time=1||(Time%24=1&&time>26)
id = 9782
anim = 9782+(time>20)
pos = 0-(Time=0)*60-(time>0)*200+(teamside=2)*320,ifelse(Time=1,70,65)-(Time>26&&(time%44=[1,12]))*10
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー5
[state 9780]
type = Explod
trigger1 = time=0||(Time%32=5&&time>26)
id = 9782
anim = 9782+(time>20)
pos = 0-(Time=0)*108-(time>0)*200+(teamside=2)*320,75-(Time>26&&(time%44=[1,12]))*10
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー6
[state 9780]
type = Explod
trigger1 = time=0||time=2||(Time%25=1&&time>26)
id = 9782
anim = 9782+(time>20)
pos = 0-(Time=0)*48-(time>0)*200+(teamside=2)*320,ifelse(time=2,95,85)-(Time>26&&(time%44=[1,12]))*5
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー7
[state 9780]
type = Explod
trigger1 = time=0||time=1||(Time%28=1&&time>26)
id = 9782
anim = 9782+(time>20)
pos = 0-(time>0)*200+(teamside=2)*320,ifelse(time=1,115,110)-(Time>26&&(time%44=[1,12]))*5
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー8
[state 9780]
type = Explod
trigger1 = time=0||Time=2||(Time%22=3&&time>26)
id = 9782
anim = 9782+(time>20)
pos = 0-(Time=0)*96-(time>0)*200+(teamside=2)*320,ifelse(time=2,125,120)-(Time>26&&(time%44=[1,12]))*5
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー9
[state 9780]
type = Explod
trigger1 = time=0||time=1||Time=16||(Time%32=8&&time>26)
id = 9782
anim = 9782+(time>20)
pos = 0-(Time=0)*12-(time>0)*200+(teamside=2)*320,ifelse(time=1,155,140)-(Time>26&&(time%44=[1,12]))*15
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー10
[state 8000]
type = Explod
trigger1 = time=0||time=1||Time=16||(Time%28=10&&time>26)
id = 9782
anim = 9782+(time>10)
pos = 0-(Time=0)*84-(time>0)*200+(teamside=2)*320,ifelse(time=1,157,145)-(Time>26&&(time%44=[1,12]))*5
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー11
[state 8000]
type = Explod
trigger1 = time=0||time=2||Time=17||(Time%24=4&&time>26)
id = 9782
anim = 9782+(time>10)
pos = 0-(Time=0)*72-(time>0)*200+(teamside=2)*320,ifelse(time=2,175,170)-(Time>26&&(time%44=[1,12]))*10
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー12
[state 8000]
type = Explod
trigger1 = time=0||time=2||Time=17||(Time%22=5&&time>26)
id = 9782
anim = 9782
pos = 0-(Time=0)*84-(time>0)*200+(teamside=2)*320,ifelse(time=2,200,190)-(Time>26&&(time%44=[1,12]))*10
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー13
[state 8000]
type = Explod
trigger1 = time=0||time=3||Time=17||(Time%28=1&&time>26)
id = 9782
anim = 9782+(time>20)
pos = 0-(Time=0)*132-(time>0)*200+(teamside=2)*320,ifelse(time=3,215,205)-(Time>26&&(time%44=[1,12]))*15
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー14
[state 8000]
type = Explod
trigger1 = time=0||time=3||Time=17||(Time%26=0&&time>26)
id = 9782
anim = 9782+(time>10)
pos = 0-(Time=0)*120-(time>0)*200+(teamside=2)*320,ifelse(time=3,225,215)-(Time>26&&(time%44=[1,12]))*5
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5

;バー15
[state 8000]
type = Explod
trigger1 = time=0||time=5||time=19||(Time%24=0&&time>26)
id = 9782
anim = 9782+(time>20)
pos = 0-(Time=0)*72-(time>0)*200+(teamside=2)*320,ifelse(time=5,240,230)-(Time>26&&(time%44=[1,12]))*10
postype = back
sprpriority = -9
vel = 12,0
ownpal = 1
pausemovetime=9999
supermovetime=9999
ignorehitpause = 1
scale = .5,.5


[state -2]
type = RemoveExplod
trigger1 = root,movetype=H||root,numhelper(9800)
trigger2 = (root,stateno!=[3000,3050])

[state -2]
type = DestroySelf
trigger1 = root,movetype=H||root,numhelper(9800)
trigger2 = (root,stateno!=[3000,3050])

;---------------------------------------------------------------------------
;(HELPER)奥義KO
[statedef 9888]
ctrl = 0
anim = 9999

[state -2]
type = assertspecial
trigger1 = time<172
flag = noBG
flag2 = noFG
flag3 = globalnoshadow

[state 6300]
type = Explod
trigger1 = !time
id = 9800
anim = 9888
pos = 0+(facing=-1)*320,0
postype = back
bindtime=-1
sprpriority = -90
pausemovetime=9999
supermovetime=9999
scale = 1.0,1.0

[state 6300]
type = DestroySelf
triggerall = NumExplod(9800)=0
trigger1 = root,movetype=H
trigger2 = (root,stateno!=[3000,3999])


;==============================================================================
; {C:\Users\Alex\Documents\mugen-1.1b1copy\chars\Kenshiro_C\Kenshiro_-2_-3.cns}
;==============================================================================

;---------------------------------------------------------------------------
[Statedef -2]

;#ADD004BASIC PIEs#
;//==========================
;// add004-sctrls-start
;//==========================
;sys::-2::partners_standby ; ???????
[state 0]
	type=selfstate
	value=190190
	ctrl=0
	;;---
	triggerall=!ishelper && numpartner && roundstate=2 && alive && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	triggerall=(stateno!=[190190,190199]) && playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(22)=4
	;;---// switch / change ;(??)
	trigger1=sysfvar(4)<1 && ( ctrl || (time<2 && stateno<600) ) && playerid(floor(sysfvar(0))),var(48)=11
	trigger1=(pos y>=0) && movetype!=h && gethitvar(isbound)=0 && (stateno!=5120) && (stateno!=[5200,5210])
	;;---// assist ;(??)
	trigger2=sysfvar(4)=1 && ( ctrl || (stateno-playerid(floor(sysfvar(0))),var(53+id-playerid(floor(sysfvar(0))),sysvar(0))!=[0,999]) )
	trigger2=(pos y>=0) && movetype!=h && gethitvar(isbound)=0 && (stateno!=5120) && (stateno!=[5200,5210])
	;;---// switch-canceling ;(??????)
	trigger3=sysfvar(4)=2 && ( ctrl || stateno<160 )
	trigger3=(pos y>=0) && movetype!=h && gethitvar(isbound)=0 && (stateno!=5120) && (stateno!=[5200,5210])
	;;---// player-priority ;(??)
	trigger4=sysfvar(4)<1 && playerid(floor(sysfvar(0))),var(15)!=id
	;;---
	ignorehitpause=1

;sys::-2::partners_change_interrupted ; ??????
[state 0]
	type=varset
	trigger1=!ishelper && numpartner && roundstate=2 && alive && sysfvar(0)>0 && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(48)=21 && sysfvar(4)<1
	sysfvar(4)=2 ;; (0:main / 1:assist / 2:switch-canceling)

;sys::-2::helper::bar004 ; ?????
[state 0]
	type=helper
	triggerall=!ishelper && !numhelper(90900)
	trigger1=numpartner
	trigger1=id<(partner,id) && partner,numhelper(90900)=0
	trigger2=!numpartner
	id=90900
	stateno=90900
	helpertype=normal
	ownpal=1
	size.air.front=1903252 ;; <<-version
	size.height=0
	ignorehitpause=1
	supermovetime=88888
	pausemovetime=88888
	pos=0,88888

;sys::-2::get_helper::bar004_id ; ID??
[state 0]
	type=varset
	trigger1=!ishelper && numhelper(90900)
	trigger1=(helper(90900),var(0)=90900) && (sysfvar(0)!=helper(90900),id)
	sysfvar(0)=(helper(90900),id)
;sys::-2::get_players_id2
[state 0]
	type=varset
	trigger1=!ishelper && numpartner
	trigger1=!numhelper(90900) && (partner,numhelper(90900)) && (sysfvar(0)!=(partner,sysfvar(0)))
	sysfvar(0)=(partner,sysfvar(0))

;sys::-2::bk/jd_system ; ?????/????D
[state 0]
	type=hitoverride
	triggerall=!ishelper && roundstate=2 && alive && (ctrl || stateno=52)
	trigger1=numprojid(195502)||numprojid(195503)
	trigger2=numpartner
	trigger2=partner,numprojid(195502)||partner,numprojid(195503)
	attr=sca,na,sa,ha,np,sp,hp
	stateno=195500
	time=1
	ignorehitpause=1

;//==========================
;;>>@Config.Face>>
;sys::-2::face_d_mod
[state 0]
	type=removeexplod
	trigger1=roundstate!=2 || (stateno=5150 && time=5 && !alive)
	trigger2=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger2=(playerid(floor(sysfvar(0))),var(0)=90900)
	trigger2=!(playerid(floor(sysfvar(0))),var(9)&4) || (playerid(floor(sysfvar(0))),var(9)&262144)
	id=490600
	ignorehitpause=1

;sys::-2::face_d_main ; portrait (?)
[state 0]
	type=explod
	trigger1=!ishelper && alive && !numexplod(490600) && selfanimexist(909002)
	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0))) && roundstate=2
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),numexplod(490600)
	trigger1=id=playerid(floor(sysfvar(0))),var(15)
	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
	id=490600
	anim=909002
	space=screen
	postype=left
	facing=ifelse(teamside=1,1,-1)
	ownpal=1
	bindtime=-1
	removetime=-1
	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(20))), floor(const240p(playerid(floor(sysfvar(0))),fvar(22)))
	scale=playerid(floor(sysfvar(0))),fvar(24), playerid(floor(sysfvar(0))),fvar(26)
	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(32))
	trans=addalpha
	alpha=floor(playerid(floor(sysfvar(0))),fvar(28))/1000, floor(playerid(floor(sysfvar(0))),fvar(28))%1000
	ignorehitpause=1
	supermovetime=-1
	pausemovetime=-1

;;sys::-2::face_d_partner_#+option
[state 0]
	type=explod
	trigger1=numpartner
	trigger1=!ishelper && alive && !numexplod(490600) && selfanimexist(909001)
	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0))) && roundstate=2
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),numexplod(490601+(gametime%numpartner))
	trigger1=(id+numpartner+1-playerid(floor(sysfvar(0))),var(15))%(numpartner+1)=(gametime%numpartner)+1
	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
	id=490600
	anim=909001
	space=screen
	postype=left
	facing=ifelse(teamside=1,1,-1)
	ownpal=1
	bindtime=-1
	removetime=-1
	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(21) +playerid(floor(sysfvar(0))),fvar(34)*(gametime%numpartner) )), floor(const240p(playerid(floor(sysfvar(0))),fvar(23) +playerid(floor(sysfvar(0))),fvar(35)*(gametime%numpartner) ))
	scale=playerid(floor(sysfvar(0))),fvar(25) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner), playerid(floor(sysfvar(0))),fvar(27) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner)
	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(33))+(gametime%numpartner)*10
	trans=addalpha
	alpha=floor(playerid(floor(sysfvar(0))),fvar(29))/1000, floor(playerid(floor(sysfvar(0))),fvar(29))%1000
	ignorehitpause=1
	supermovetime=-1
	pausemovetime=-1

;#Options_Char_Name
;sys::-2::name_d_main_left&right
[state 0]
	type=explod
	trigger1=numexplod(490600)=1 && selfanimexist(909010+teamside)
	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && id=playerid(floor(sysfvar(0))),var(15)
	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
	id=490600
	anim=909010+teamside
	space=screen
	postype=left
	facing=1
	ownpal=1
	bindtime=-1
	removetime=-1
	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(10))), floor(const240p(playerid(floor(sysfvar(0))),fvar(12)))
	scale=playerid(floor(sysfvar(0))),fvar(14), playerid(floor(sysfvar(0))),fvar(16)
	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(32))+2
	trans=addalpha
	alpha=floor(playerid(floor(sysfvar(0))),fvar(18))/1000, floor(playerid(floor(sysfvar(0))),fvar(18))%1000
	ignorehitpause=1
	supermovetime=-1
	pausemovetime=-1

;;sys::-2::name_d_partner_#left&right
[state 0]
	type=explod
	trigger1=numpartner
	trigger1=numexplod(490600)=1 && selfanimexist(909010+teamside)
	trigger1=(sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),numexplod(490601+(gametime%numpartner))
	trigger1=(id+numpartner+1-playerid(floor(sysfvar(0))),var(15))%(numpartner+1)=(gametime%numpartner)+1
	trigger1=movetype!=h || (stateno=[120,159]) || (stateno=[5000,5199]) || (stateno=[190190,190196])
	id=490600
	anim=909010+teamside
	space=screen
	postype=left
	facing=1
	ownpal=1
	bindtime=-1
	removetime=-1
	pos=floor(const240p(playerid(floor(sysfvar(0))),fvar(11) +playerid(floor(sysfvar(0))),fvar(34)*(gametime%numpartner) )), floor(const240p(playerid(floor(sysfvar(0))),fvar(13) +playerid(floor(sysfvar(0))),fvar(35)*(gametime%numpartner) ))
	scale=playerid(floor(sysfvar(0))),fvar(15) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner), playerid(floor(sysfvar(0))),fvar(17) +playerid(floor(sysfvar(0))),fvar(36)*(gametime%numpartner)
	sprpriority=floor(playerid(floor(sysfvar(0))),fvar(33))+(gametime%numpartner)*10+3
	trans=addalpha
	alpha=floor(playerid(floor(sysfvar(0))),fvar(19))/1000, floor(playerid(floor(sysfvar(0))),fvar(19))%1000
	ignorehitpause=1
	supermovetime=-1
	pausemovetime=-1

;//==========================
;;>>@Config.Camera>>
;sys::-2::camera_nc ; ????
[state 0]
	type=screenbound
	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && numpartner && (sysfvar(4)>0 || stateno=5150)
	value=0
	movecamera=0,0
	ignorehitpause=1
;sys::-2::camera_np
[state 0]
	type=playerpush
	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && numpartner && (sysfvar(4)>0 || stateno=5150)
	value=0
	ignorehitpause=1
;sys::-2::camera_nc2
[state 0]
	type=screenbound
	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && (playerid(floor(sysfvar(0))),var(7)&65536) ;; system_switch
	value= ((numpartner && sysfvar(4)<1) || !numpartner) ;; [def=0]
	movecamera=0,0 ;; [x,y]
	ignorehitpause=1

;//==========================
;sys::-2::add.option2-noko
[state 0] ;; opt-noko
	type=assertspecial
	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
	trigger1=id=playerid(floor(sysfvar(0))),var(15) && (playerid(floor(sysfvar(0))),var(9)&65536) ;; opt-noko
	flag=noko
	ignorehitpause=1
;sys::-2::add.option3-life-mod
[state 0] ;; opt-life-mod
	type=lifeadd
	trigger1=!ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900
	trigger1=id=playerid(floor(sysfvar(0))),var(15) && playerid(floor(sysfvar(0))),var(23)!=0 ;; opt-mod-life
	value=playerid(floor(sysfvar(0))),var(23)
	kill=0
	ignorehitpause=1

;//==========================
;// optional settings
;sys::-2::guard_crush_fx ; ????????
[state 0]
	type=palfx
	trigger1=(stateno=150 || stateno=152) && alive && !ishelper && (gametime%5=0) && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(36)>=800
	time=2
	add=200,0,0
;sys::-2::guard_crush_cs
[state 0]
	type=changestate
	trigger1=(stateno=150 || stateno=152) && alive && !ishelper && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(36)>=1000
	value=190010
	ignorehitpause=1
;;--- dizzy
;sys::-2::goto-dizzy_s/c
[state 0] ;[.03-2d1]
	type=selfstate
	trigger1=(stateno=5001 || stateno=5011) && hitover     && alive && !ishelper && life>1 && roundstate=2 && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(50)>=1000
	value=195201 ;; (goto-dizzy:190116)
;sys::-2::goto-dizzy_a/l
[state 0] ;[.03-2d2]
	type=selfstate
	trigger1=(stateno=5030 || stateno=5071) && hitshakeover && alive && !ishelper && life>1 && roundstate=2 && (sysfvar(0)>0) && playeridexist(floor(sysfvar(0)))
	trigger1=playerid(floor(sysfvar(0))),var(0)=90900 && playerid(floor(sysfvar(0))),var(50)>=1000
	value=195050
;;--- fadeout when KOed ; KO????
;sys::-2::st5150-1
[state 0]
	type=varset
	trigger1=stateno=5150 && time=1 && alive=0 && !ishelper && numpartner
	sysvar(1)=(roundstate<=2)
;sys::-2::st5150-2
[state 0]
	type=assertspecial
	trigger1=stateno=5150 && alive=0 && !ishelper && numpartner && sysvar(1) && (((time=[80,150]) && time%10<5) || time>150)
	flag=invisible
	flag2=noshadow
;;--- intro-pos-reset ;IKEMEN????
;sys::-2::st5900-p3
[state 0]
	type=turn
	trigger1=stateno=5900 && time=0
	trigger1=!ishelper && numpartner>1 && facing=ifelse(teamside=1,-1,1)
;sys::-2::st5900-p4
[state 0]
	type=posset
	trigger1=stateno=5900 && time=0
	trigger1=!ishelper && numpartner>1 && playeridexist(id-2)
	trigger1=playerid(id-2),ishelper=0 && playerid(id-2),teamside=teamside
	x=const240p(120)*ifelse(teamside=1,-1,1)
;sys::-2::st5900-p5
[state 0]
	type=posset
	trigger1=stateno=5900 && time=0
	trigger1=!ishelper && numpartner>2 && playeridexist(id-3)
	trigger1=playerid(id-3),ishelper=0 && playerid(id-3),teamside=teamside
	x=const240p(144)*ifelse(teamside=1,-1,1)

;//==========================
;// add004-sctrls-end
;//==========================

[State -2,]
Type = ChangeAnim
trigger1 = stateno=807
trigger1 = enemy,name="REI"
trigger1 = movetype=H
value = 807
[state a]
type = varset
trigger1 = stateno!=510&&stateno!=515
v = 41
value = 0
Ignorehitpause = 0
[state a]
type = varset
triggerall = movehit=1&&time>1
triggerall = hitpausetime>0
triggerall = hitpausetime<9
trigger1 = stateno=200||stateno=205
trigger2 = stateno=220||stateno=225
trigger3 = stateno=400||stateno=420
trigger4 = stateno=600||stateno=620
trigger5 = stateno=1300||stateno=1310||stateno=1320||stateno=1330
v = 41
value = hitpausetime
Ignorehitpause = 1
[state a]
type = varset
triggerall = movehit=1&&time>1
triggerall = hitpausetime>0
triggerall = hitpausetime<13
trigger1 = stateno=210||stateno=215
trigger2 = stateno=230||stateno=235
trigger3 = stateno=250||stateno=260||stateno=265
trigger4 = stateno=410||stateno=430
trigger5 = stateno=610||stateno=630
trigger6 = stateno=300||stateno=310||stateno=321||stateno=322
trigger7 = stateno=1000||stateno=1010
v = 41
value = hitpausetime
Ignorehitpause = 1
;
[State -2,相手の高さ]
type = varset
trigger1 = var(30)<=30
v = 31
value = abs(ceil(enemy,pos y*0.45))
ignorehitpause = 1
[State -2,相手の高さ]
type = varset
trigger1 = var(30)>30
v = 31
value = abs(ceil(enemy,pos y*0.5))
ignorehitpause = 1

[state -2, a];右向き設定
type = varset
trigger1 = var(10) = 0
trigger1 = facing = 1
v = 10
value = 1

[state -2, a];左向き設定
type = varset
trigger1 = var(10) = 0
trigger1 = facing = -1
v = 10
value = 2

[State -2, 1];ダッシュの音止め
type = stopSnd
trigger1 = stateno != 100
channel = 1

[State -2, 3]
type = stopSnd
trigger1 = MoveType = H
channel = 2

[state -2,tenha]
type = varset
triggerall = stateno != 290
trigger1 = var(20) = 1
trigger1 = movetype = A
v = 20
value = 2
[state -2,tenha]
type = varset
triggerall = var(20) = 2
triggerall = stateno != 290
trigger1 = movetype != A
trigger2 = movecontact
v = 20
value = 3
ignorehitpause = 1

[state 2, hoshi]
type = varadd
trigger1 = var(20) = 3
trigger1 = var(4) < 7
trigger1 = var(42) <= 2
trigger1 = movehit
v = 4
value = 1
persistent = 0
ignorehitpause = 1

[state -2,tenha]
type = varset
trigger1 = var(20) = 3
v = 20
value = 0
ignorehitpause = 1

[State -2, 4];ハイジャンプ判定
type = varadd
trigger1 = 1
v = 15
value = -1

[state -2,0];醒鋭孔
type = varadd
trigger1 = var(24) > 0
v = 24
value = -1

[state -2,0];醒鋭孔
type = varset
trigger1 = var(24) > 0
trigger1 = roundstate = 3
v = 24
value = 0

[state -2,0];強敵の記憶
type = varadd
trigger1 = var(50) > 0
v = 50
value = -1

[state -2,0];強敵の記憶
type = varset
trigger1 = var(50) > 0
trigger1 = roundstate = 3
v = 50
value = 0

[state -2,0];強敵の記憶
type = varadd
trigger1 = var(50) > 0
trigger1 = gametime % 8 = 0
v = 16
value = 1

[state -2,0];強敵の記憶
type = poweradd
trigger1 = var(50) > 0
trigger1 = gametime % 2 = 0
value = 1

[State -2,PlaySnd]
Type = PlaySnd
TriggerAll=Time=1
TriggerAll=Alive
triggerAll=random%3=0
TriggerAll=StateNo=5000||StateNo = 5010
Trigger1 = Anim = 5000||Anim = 5010||Anim = 5020
value = 0,0+(Random%2)
channel = 0

[State -2,PlaySnd]
Type = PlaySnd
TriggerAll=Time=1
TriggerAll=Alive
triggerAll=random%3=0
TriggerAll=StateNo=5000||StateNo=5010
Trigger1 = Anim=5001||Anim=5011||Anim=5021
Trigger2 = Anim=5002||Anim=5012||Anim=5022
value = 0,10+(Random%2)
channel = 0

[State -2,PlaySnd]
Type = PlaySND
TriggerAll=Time=1
TriggerAll=Alive
triggerAll=random%3=0
Trigger1 = StateNo=5000
Trigger1 = GetHitVar(fall)
Trigger2 = StateNo=5020
Trigger3 = StateNo=5070
value = 0,20+(Random%2)
channel = 0

[state a]
Type = removeexplod
trigger1 = animelem = 9
trigger1 = StateNo = 1080
trigger2 = animelem = 3
trigger2 = StateNo = 1081
Trigger3 = MoveType = H
id = 1082

[state a]
Type = removeexplod
trigger1 = animelem = 4
trigger1 = StateNo = 1081
Trigger2 = MoveType = H
id = 1083

[state a]
Type = removeexplod
trigger1 = animelem = 5
trigger1 = StateNo = 1081
Trigger2 = MoveType = H
id = 1084

[state a]
type = varset
trigger1 = p2movetype != H
v = 42
value = 0
ignorehitpause = 0

[State -2, Varset]
type = Varset
trigger1 = enemy,authorname = "ahuron"
trigger1 = enemy,name = "SHIN"
trigger1 = enemy,var(21) = 1
trigger1 = enemy,stateno = 2200
v = 21
value = 1

[State -2, Varset]
type = Varset
trigger1 = enemy,authorname = "konpeitou"
trigger1 = enemy,name = "shin"
trigger1 = enemy,animelemtime(41) >= 0
trigger1 = enemy,stateno = 2600
v = 21
value = 1

[State -2]
type = AssertSpecial
triggerall = movetype = H
triggerall = stateno = 901
triggerall = numenemy >= 1
triggerall = enemynear, name = "JAGI"
trigger1 = enemynear,Authorname = "Drowin hokuto"
flag = invisible

[State -2, ドロウィンさん作ジャギ投げ専用ヘルパー呼び出し]
type = Helper
triggerall = numhelper(3005) = 0
triggerall = movetype = H
triggerall = stateno = 901
triggerall = numenemy >= 1
triggerall = enemynear, name = "JAGI"
trigger1 = enemynear,Authorname = "Drowin hokuto"
helpertype = normal
name = "isu"
ID = 3005
pos = 0,0
postype = p1
facing = 1
stateno = 3005
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State -2]
type = ChangeAnim
triggerall = movetype = H
triggerall = stateno = 805
triggerall = numenemy >= 1
trigger1 = enemynear, name = "JAGI"
trigger1 = enemynear,Authorname = "Ahuron"
trigger1 = statetime >= 10
trigger2 = enemynear, name = "Jagi"
trigger2 = enemynear,Authorname = "Ts"
trigger2 = statetime = [10,141]
value = 820

[State -2]
type = VarSet
triggerall = numenemy
triggerall = enemynear,name = "MAMIYA" && enemynear,authorname = "YU-TOHARU"
trigger1 = enemynear,var(37) = 2
trigger1 = var(4) <= 6
var(4) = 1
ignorehitpause=1

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;::::::::変数設定(多分ダメージ関係が殆ど)
[state a]
type = varset
trigger1 = movetype = H
v = 13
value = 0

;::::::::ボイス変更の乱数
[State 180, 1]
type = null;VarRandom
trigger1 = 1
v = 6
range = 0,2

;::::::::カウンターヒット設定
[state a]
type = varset
trigger1 = p2movetype = A
v = 8
value = 1
ignorehitpause = 1
[state a]
type = varset
trigger1 = p2movetype != A
v = 8
value = 0
ignorehitpause = 0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;ダメージ時のエフェクト、サウンドの消去
;//////////////////////////////////////////////////////////////////////////
;ダッシュ終了時のエフェクトの消去
[State 1];ブレスレットのエフェクト消去、主に通常動作
type = removeexplod
trigger1 = MoveType = H && stateno != [120,159]
ID = 3000


[State 1]
type = removeexplod
trigger1 = stateno != 101
ID = 102


[state a]
type = removeexplod
trigger1 = MoveType = H
id = 1860

;ダメージ時のサウンドの消去
[state a]
type = stopsnd
trigger1 = MoveType = H
channel = 1

;ダメージ時のサウンドの消去
[state a]
type = stopsnd
trigger1 = MoveType = H
channel = 4

;ダメージ時の残像の消去
[state a];
type = afterimagetime
trigger1 = MoveType = H
time = 0

;///////////////////////////////////////////////////////////////////////
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;コンボによるダメージ補正
;//////////////////////////////////////////////////////////////////////////
; 
;---------------------[連続技補正（聖帝）]
[state a]
type = varset
trigger1 = var(30) = 0
fvar(5) = 1.0

[state a]
type = varset
trigger1 = var(30) = 1
fvar(5) = 0.8

[state a]
type = varset
trigger1 = var(30) = 2
fvar(5) = 0.6

[state a]
type = varset
trigger1 = var(30) = 3
fvar(5) = 0.55

[state a]
type = varset
trigger1 = var(30) = 4
fvar(5) = 0.5

[state a]
type = varset
trigger1 = var(30) = 5
fvar(5) = 0.45

[state a]
type = varset
trigger1 = var(30) = 6
fvar(5) = 0.4

[state a]
type = varset
trigger1 = var(30) = 7
fvar(5) = 0.35

[state a]
type = varset
trigger1 = var(30) = 8
fvar(5) = 0.3

[state a]
type = varset
trigger1 = var(30) = 9
fvar(5) = 0.25

[state a]
type = varset
trigger1 = var(30) = 10
fvar(5) = 0.2

[state a]
type = varset
trigger1 = var(30) = 11
fvar(5) = 0.15

[state a]
type = varset
trigger1 = var(30) = 12
fvar(5) = 0.1

[state a]
type = varset
trigger1 = var(30) = 13
fvar(5) = 0.08

[state a]
type = varset
trigger1 = var(30) >= 14
fvar(5) = 0.05

;---------------------[連続技補正（グレイブシュート）]
[state a]
type = varset
trigger1 = var(30) >= 0
trigger1 = var(30) <= 3
fvar(3) = 0.8

[state a]
type = varset
trigger1 = var(30) > 3
trigger1 = var(30) <= 5
fvar(3) = 0.7

[state a]
type = varset
trigger1 = var(30) = 6
fvar(3) = 0.6

[state a]
type = varset
trigger1 = var(30) >= 7
fvar(3) = 0.5

;---------------------[連続技補正（バニシングストライク）]
[state a]
type = varset
trigger1 = (stateno=[1000,2999])
trigger1 = var(30) >= 0
trigger1 = var(30) <= 3
fvar(4) = 0.85
[state a]
type = varset
trigger1 = (stateno!=[1000,2999])
trigger1 = var(30) >= 0
trigger1 = var(30) <= 3
fvar(4) = 0.7

[state a]
type = varset
trigger1 = var(30) > 3
trigger1 = var(30) <= 6
fvar(4) = 0.6

[state a]
type = varset
trigger1 = var(30) > 6
fvar(4) = 0.5


;---------------------[]
[state a]
type = varset
trigger1 = p2movetype != H
fvar(3) = 1.0
[state a]
type = varset
trigger1 = p2movetype != H
fvar(4) = 1.0
[state a]
type = varset
trigger1 = p2movetype != H
fvar(5) = 1.0
;;;;;;;;;;;;;
[state a]
type = varset
trigger1 = 1
fvar(9) = 1.0
[state a]
type = varset
trigger1 = 1
fvar(10) = 1.0
;;;;;;;;;;;;;
;;;;;;;;;;;;;
[state a]
type = varset
trigger1 = 1
fvar(0) = 1.0
[state a]
type = varset
trigger1 = var(8) = 1
fvar(9) = 1.2
[state a]
type = varset
trigger1 = p2statetype=C||p2statetype=A
trigger1 = var(30)<1
fvar(10) = 1.1
;ネバリ補正関係
[State -2, konjou];根性値補正
type = varSet
trigger1 = life >= 500
value = 1
fv = 8
ignorehitpause = 1
[State -2, konjou];根性値補正
type = varSet
trigger1 = life = [332,499]
value = 0.85
fv = 8
ignorehitpause = 1
[State -2, konjou];根性値補正
type = varSet
trigger1 = life = [251,332]
fv = 8
value = 0.8
ignorehitpause = 1
[State -2, konjou];根性値補正
type = varSet
trigger1 = life <= 250
fv = 8
value = 0.75
ignorehitpause = 1
;
[state a]
type = varset
trigger1 = p2statetype=C||p2statetype=S||(p2statetype=A&&var(30)<1)
trigger1 = var(11)=0
trigger1 = var(32)=0
trigger1 = var(23)<=0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)
[state a]
type = varset
trigger1 = p2statetype=C||p2statetype=S||(p2statetype=A&&var(30)<1)
trigger1 = var(11)=0
trigger1 = var(32)=0
trigger1 = var(23)>0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*0.8
;
[state a]
type = varset
trigger1 = (p2statetype=A&&var(30)>=1)||p2statetype=L
trigger1 = (stateno!=[1000,2999])
trigger1 = var(11)=0
trigger1 = var(32)=0
trigger1 = var(23)<=0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*0.5
[state a]
type = varset
trigger1 = (p2statetype=A&&var(30)>=1)||p2statetype=L
trigger1 = (stateno!=[1000,2999])
trigger1 = var(11)=0
trigger1 = var(32)=0
trigger1 = var(23)>0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*0.5*0.8
[state a]
type = varset
trigger1 = (p2statetype=A&&var(30)>=1)||p2statetype=L
trigger1 = (stateno=[1000,2999])
trigger1 = var(11)=0
trigger1 = var(32)=0
trigger1 = var(23)<=0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)
[state a]
type = varset
trigger1 = (p2statetype=A&&var(30)>=1)||p2statetype=L
trigger1 = (stateno=[1000,2999])
trigger1 = var(11)=0
trigger1 = var(32)=0
trigger1 = var(23)>0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*0.8
;
[state a]
type = varset
trigger1 = (stateno!=[1000,2999])
trigger1 = var(11)=0
trigger1 = var(32)>0
trigger1 = var(23)<=0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)
[state a]
type = varset
trigger1 = (stateno!=[1000,2999])
trigger1 = var(11)=0
trigger1 = var(32)>0
trigger1 = var(23)>0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*0.8
[state a]
type = varset
trigger1 = (stateno=[1000,2999])
trigger1 = var(11)=0
trigger1 = var(32)>0
trigger1 = var(23)<=0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*fvar(3)
[state a]
type = varset
trigger1 = (stateno=[1000,2999])
trigger1 = var(11)=0
trigger1 = var(32)>0
trigger1 = var(23)>0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*fvar(3)*0.8
;
[state a]
type = varset
trigger1 = var(11)>0
trigger1 = var(32)=0
trigger1 = var(23)<=0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*fvar(4)
[state a]
type = varset
trigger1 = var(11)>0
trigger1 = var(32)=0
trigger1 = var(23)>0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*fvar(4)*0.8
;
[state a]
type = varset
trigger1 = (stateno!=[1000,2999])
trigger1 = var(11)>0
trigger1 = var(32)>0
trigger1 = var(23)<=0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*fvar(4)
[state a]
type = varset
trigger1 = (stateno!=[1000,2999])
trigger1 = var(11)>0
trigger1 = var(32)>0
trigger1 = var(23)>0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*fvar(4)*0.8
[state a]
type = varset
trigger1 = (stateno=[1000,2999])
trigger1 = var(11)>0
trigger1 = var(32)>0
trigger1 = var(23)<=0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*fvar(3)*fvar(4)
[state a]
type = varset
trigger1 = (stateno=[1000,2999])
trigger1 = var(11)>0
trigger1 = var(32)>0
trigger1 = var(23)>0
fvar(0) = fvar(0)*fvar(9)*fvar(10)*fvar(5)*fvar(3)*fvar(4)*0.8
;
[state a]
type = varset
trigger1 = (stateno=[1000,1999])
trigger1 = fvar(0)<=0.2
fvar(0) = 0.2
[state a]
type = varset
trigger1 = (stateno=[2000,2999])
trigger1 = fvar(0)<=0.4
fvar(0) = 0.4
;
[state a];補正
type = null;varset
trigger1 = p2movetype = H
fvar(0) = fvar(5)
[state a];補正・グレイブシュート
type = null;varset
trigger1 = p2movetype = H
trigger1 = var(32) > 0
fvar(0) = fvar(5)*fvar(3)
[state a];補正・バニシングストライク
type = null;varset
trigger1 = p2movetype = H
trigger1 = var(11) > 0
fvar(0) = fvar(5)*fvar(4)

[State -2,]
type = defenceMulSet
trigger1 = 1
value = fvar(8)
ignorehitpause = 1

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;勝利時のサウンドストップ
;//////////////////////////////////////////////////////////////////////////
;
[State 1]
type = AssertSpecial
;triggerall = Win
trigger1 = var(21) = 1
flag = nomusic
ignorehitpause = 1

[State 1]
type = varset
;triggerall = Win
trigger1 = RoundState != 2
v = 26
value = 0

[state a]
type = stopsnd
trigger1 = RoundState = 2
channel = 2
ignorehitpause = 1

[state a];イントロ時ボイスの消去
type = stopsnd
trigger1 = RoundState = 2
channel = 5
ignorehitpause = 1

[state a]
type = varset
trigger1 = RoundState = 3
IgnoreHitPause = 1
v = 12
value = 1

[state a]
type = varset
trigger1 = RoundState = 2
IgnoreHitPause = 1
v = 12
value = 0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
;//////////////////////////////////////////////////////////////////////////
[State -2, a];タイムカウントテスト用
type = null;palfx
trigger1 = var(25) >= 1
trigger1 = var(20) >= 1
trigger1 = var(21) >= 1
time = 1
add = 126,126,0
;mul = 126,126,0
color = 1
ignorehitpause = 1

[State -2, a];グレイブシュートテスト
type = null;palfx
trigger1 = var(9) != 0
time = 1
add = 126,126,0
;mul = 126,126,0
color = 1

[State -2, a];バニシングストライクテスト
type = null;palfx
trigger1 = var(11) != 0
time = 1
add = 0,126,126
;mul = 126,126,0
color = 1

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;相手落下速度
;//////////////////////////////////////////////////////////////////////////
[state a]
type = varset
triggerall = !(ishelper)
trigger1 = p2movetype != H
trigger2 = Enemy,stateno=95121
v = 3
value = 0

[state a]
type = varadd
triggerall = !(ishelper)
trigger1 = (movehit=1)
trigger1 = p2statetype=A||p2statetype=L
trigger1 = (stateno!=[850,899])&&(stateno!=800)
trigger1 = var(11)=0
v = 3
value = 1
;
[state a]
type = varset
triggerall = !(ishelper)
trigger1 = p2movetype != H
trigger2 = Enemy,stateno=95121
v = 30
value = 0

[state a]
type = varadd
triggerall = !(ishelper)
trigger1 = (movehit=1)
v = 30
value = 1
;
[state a]
type = varset
triggerall = !(ishelper)
trigger1 = p2movetype != H
trigger2 = Enemy,stateno=95121
v = 33
value = 0
[state a]
type = varset
triggerall = !(ishelper)
trigger1 = p2movetype != H
trigger2 = Enemy,stateno=95121
v = 34
value = 0
[state a]
type = varset
triggerall = !(ishelper)
trigger1 = p2movetype != H
trigger2 = Enemy,stateno=95121
v = 35
value = 0
[state a]
type = varset
triggerall = !(ishelper)
trigger1 = p2movetype != H
trigger2 = var(11) = 0
trigger3 = Enemy,stateno=95121
v = 36
value = 0

;///////////////////////////////////////////////////////////////////////
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[state a];七星ゲージ
type = Helper
trigger1 = numhelper(4000) = 0
id = 4000
name = "sichisei"
sprpriority = -5
pos = -50,-150
postype = back
stateno = 4000
helpertype = normal
supermovetime = 999999999
pausemovetime = 999999999
bindtime = -1
keyctrl = 0 
ownpal = 1

[state a]
type = varset
trigger1 = var(4) <= 0
v = 4
value = 0

[state a]
type = varset
trigger1 = var(4) >= 7
v = 4
value = 7


[state a];ブーストゲージ
type = Helper
trigger1 = numhelper(4100) = 0
id = 4100
name = "boost"
sprpriority = 99999999
pos = 50,-160
postype = front
stateno = 4100
helpertype = normal
supermovetime = 999999999
pausemovetime = 999999999
bindtime = -1
keyctrl = 0 
ownpal = 1
ontop = 1

[state a]
type = varset
trigger1 = var(16) <= 0
v = 16
value = 0

[state a]
type = varset
trigger1 = var(16) >= 300
v = 16
value = 300




[state a]
type = varadd
triggerall = gametime%2
triggerall = roundstate = 2
triggerall = var(23) >= 1
trigger1 = var(16) < 300 && var(16) >= 201
trigger2 = var(16) < 200 && var(16) >= 101
trigger3 = var(16) < 100 && var(16) >= 1
v = 16
value = -1

[state a];ブーストテスト用デバッグ
type = null;varset
trigger1 = stateno = 11
v = 16
value = 300

[state -2,0];ブースト時間差減少
type = varadd
triggerall = gametime%1 = 0
trigger1 = var(23) > 0
trigger1 = var(23) < 60
v = 23
value = 1
[state a];ゲージ減少フラグ
type = varset
triggerall = var(23) >= 1
trigger1 = var(16) = 300
trigger2 = var(16) = 200
trigger3 = var(16) = 100
trigger4 = var(16) = 0
v = 23
value = -1

[state ,変更]
type = varadd
triggerall = !(ishelper)
trigger1 = var(23) <= -1
v = 23
value = -1
ignorehitpause = 1
[state ,変更]
type = varset
triggerall = !(ishelper)
trigger1 = var(23) <= -480
trigger2 = roundstate != 2
v = 23
value = 0
ignorehitpause = 1

[State -3,]
Type = varset
Trigger1 = movetype=H
Trigger1 = (stateno!=[150,155])
var(45) = 0

;---------------------------------------------------------------------------
; ここから下は-3のステートを書いてください、ここに書いたものはゲーム中
; に条件が成立すればいつでも開始するステートです。
;---------------------------------------------------------------------------

[Statedef -3]
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;
;//////////////////////////////////////////////////////////////////////////
;
;ゲーム中に常にいつでも開始したいステート、ここでは「着地音」に使用しています
;下の条件は「52か106のステートに移動して１フレーム目に」と言う事です。
;52と106はバックステップとジャンプの着地のステートです。
[state a]
type = posset
trigger1 = time = 0
trigger1 = prevstateno = 500
trigger1 = statetype != A
y = 0

[state a]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 500
trigger1 = statetype != A
y = 0

[State -3, Landing Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = stateno = 52 
trigger2 = stateno = 107 
trigger3 = stateno = 103
trigger4 = stateno = 1073
value = 40, 0

[State explod];着地エフェクト
type = Explod
triggerall = time = 1
trigger1 = stateno = 52
trigger2 = stateno = 1073
anim = 9410
id = 9410
sprpriority = -5
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
scale = 0.5,0.5
ownpal = 1

[State -3, 2];ジャンプ音
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 40&&var(59)<=0||stateno=39||stateno=49||stateno=48
trigger1 = var(15) <= 0
value = 40, 1
channel = 3

[State -3, 2];ジャンプ音
type = PlaySnd
triggerall = time = 1
trigger1 = stateno = 40&&var(59)<=0||stateno=41
trigger1 = var(15) > 1
value = 40, 2
channel = 3

[State -3, Landing Sound]:
type = PlaySnd
triggerall = Time = 1
;trigger1 = stateno = 100 
trigger1 = stateno = 105 
value = 105, 0

;ダメージ時のエフェクトの消去
[State 1]
type = removeexplod
trigger1 = MoveType = H
ID = 1000

[state a];残像消去
type = afterimagetime
trigger1 = movetype = H
time = 0

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = statetype=A
trigger1 = stateno!=110
edge = 30,0

[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = statetype!=A
trigger1 = stateno != 52&&stateno!=410&&stateno!=0
edge = 2,0
[State 210, Width];画面端の押し戻し判定
type = Width
trigger1 = stateno=1300||stateno=1310||stateno=1320||stateno=1330
edge = 20+(stateno=1320)*20,0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
; ハイジャンプ処理
[State -3, 5];ハイジャンプ判定
type = varset
triggerall = command = "h_jump"
trigger1 = ctrl||stateno=100
trigger2 = 0;stateno=215&&movecontact&&time>1
trigger3 = stateno=245&&movecontact&&time>1
v = 15
value = 20

[State -3, 5];ハイジャンプ消去
type = varset
trigger1 = stateno = 52
trigger1 = time = 0
v = 15
value = 0

[State -3, 5];ハイジャンプ消去
type = varset
trigger1 = stateno = 50
trigger1 = var(15)>0
fv = 26
value = 1
[State -3, 5];ハイジャンプ消去
type = varset
trigger1 = stateno = 52
trigger2 = statetype!=A
fv = 26
value = 0
[State -3, 5];ハイジャンプ消去
type = varset
trigger1 = stateno = 52
trigger2 = statetype!=A
fv = 28
value = 0
[State -3, 5];ハイジャンプ消去
type = varset
trigger1 = stateno = 52
trigger2 = statetype!=A
fv = 29
value = 0
[State -3, 5];ハイジャンプ消去
type = varset
trigger1 = stateno = 52
trigger2 = statetype!=A
fv = 33
value = 0

[State -3, 5]
type = velset
trigger1 = stateno = 50
trigger1 = anim = 42
trigger1 = time = 1
trigger1 = var(15) >= 1
x = 5
;y = -9


[State -3, 5]
type = velset
trigger1 = stateno = 50
trigger1 = anim = 43
trigger1 = time = 1
trigger1 = var(15) >= 1
x = -5
;y = -9

[State -3, 5]
type = velset
trigger1 = stateno = 50 && prevstateno!=45 && prevstateno!=53
trigger1 = time = 1
trigger1 = var(15) >= 1
y = -14.0;5

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;

[State -3, 5];グレイブシュート判定
type = varset
triggerall = time>1
triggerall = movehit
trigger1 = stateno = 300
v = 9
value = 1
ignorehitpause = 1
[State -3, 5];グレイブシュート判定
type = varset
triggerall = time>1
triggerall = movehit
trigger1 = stateno = 300
v = 32
value = 1
ignorehitpause = 1

[State -3, 5];グレイブシュート判定
type = varset
trigger1 = p2movetype != H
v = 9
value = 0
[State -3, 5];グレイブシュート判定
type = varset
trigger1 = p2movetype != H
v = 32
value = 0

[State -3, 5];グレイブシュート判定
type = varset
trigger1 = stateno = 52
trigger2 = stateno = 0
trigger3 = stateno = 11
trigger4 = stateno = 20
trigger5 = stateno = 100
trigger6 = stateno = 105
trigger7 = (stateno=[200,205])&&Time>1
trigger8 = (stateno=[230,235])&&Time>1
trigger9 = (stateno=[240,245])&&Time>1
trigger10 = stateno=210
trigger11 = stateno=310||stateno=320||stateno=2000||stateno=2100||stateno=2200
trigger12 = (stateno=[1300,1330])
trigger13 = (stateno=[400,440])&&Time>1
v = 9
value = 0
[State -3, 5];グレイブシュート判定
type = varset
trigger1 = stateno = 52
trigger2 = stateno = 0
trigger3 = stateno = 11
trigger4 = stateno = 20
trigger5 = stateno = 100
trigger6 = stateno = 105
trigger7 = (stateno=[200,205])&&Time>1
trigger8 = (stateno=[230,235])&&Time>1
trigger9 = (stateno=[240,245])&&Time>1
trigger10 = stateno=210
trigger11 = stateno=310||stateno=320||stateno=2000||stateno=2100||stateno=2200
trigger12 = (stateno=[1300,1330])
trigger13 = (stateno=[400,440])&&Time>1
v = 32
value = 0

[state a];エリアルジャンプ速度
type = null;velset
trigger1 = stateno = 50
trigger1 = prevstateno = 49
trigger1 = time = 2
trigger1 = var(9) = 1
y = -14.5+1.5



;[State -3, 5];グレイブシュート攻撃ヒット
;type = velset
;trigger1 = movecontact = [1,5]
;trigger1 = var(32) > 0
;trigger1 = var(11)=0
;trigger1 = statetype = A
;trigger1 = stateno!=2150&&stateno!=1100&&time>1
;y = -2.0-(var(3)>75)*2.5;+0.5
;persistent = 0
;[State -3, 5];グレイブシュート攻撃ヒット
;type = velset
;trigger1 = movecontact = [1,5]
;trigger1 = var(32) > 0
;trigger1 = var(11)=0
;trigger1 = statetype = A
;trigger1 = stateno=1100&&time>1
;y = -5.0
;persistent = 0
;[State -3, 5];グレイブシュート攻撃ヒット
;type = velset
;trigger1 = movecontact = 1
;trigger1 = var(32) > 0
;trigger1 = var(11)=0
;trigger1 = statetype != A
;trigger1 = stateno=1000&&time>1
;y = -2.0
;persistent = 0

;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[State -3, 5];バニシングストライク判定
type = varset
trigger1 = enemy,movetype != H
trigger2 = enemy,stateno = 5100
trigger3 = enemy,stateno = 55100
trigger4 = enemy,stateno = 55101
trigger5 = enemy,stateno = 55102
v = 11
value = 0

[state a];弱攻撃吹き飛ばし
type = varset
triggerall = movehit=1&&Time>1
triggerall = var(11) = 1
trigger1 = stateno = 200
trigger2 = stateno = 205
trigger3 = stateno = 400
trigger4 = stateno = 600
v = 36
value = 1
ignorehitpause = 1
persistent = 0

[state a];相手吹き飛ばし
type = targetstate
trigger1 = movehit=1
trigger1 = var(11) = 1
trigger1 = stateno!=322&&stateno!=265&&stateno!=2100;&&stateno!=2101&&stateno!=2150
value = 550+(var(36)>0)*5

[state a];弱攻撃吹き飛ばし
type = targetstate
triggerall = movehit = 1
triggerall = var(11) = 1
trigger1 = stateno = 200
trigger2 = stateno = 205
trigger3 = stateno = 400
trigger4 = stateno = 600
value = 551

[State a]
Type = posadd
triggerall = (movehit=1)
triggerall = var(11) > 0
triggerall = var(23)>25||var(23)<=0
triggerall = time>1
trigger1 = stateno=210||stateno=215||stateno=260
trigger2 = stateno=230||stateno=235||stateno=300
trigger3 = stateno=410||stateno=430
trigger4 = stateno=610||stateno=630
trigger5 = stateno=1000
;trigger6 = stateno=1010||stateno=1020||stateno=1030||stateno=1040
x = -var(30)*7.5
[State a]
Type = posadd
triggerall = (movehit=1)
triggerall = var(11) > 0
triggerall = var(23)>25||var(23)<=0
triggerall = time>1
trigger1 = stateno=200||stateno=205
trigger2 = stateno=220||stateno=225
trigger3 = stateno=400||stateno=420
trigger4 = stateno=600||stateno=620
x = -var(30)*5.0
[State a]
Type = posadd
triggerall = (movehit=4)
triggerall = var(11) > 0
triggerall = var(23)>25||var(23)<=0
triggerall = time>1
trigger1 = stateno=1010||stateno=1020||stateno=1025||stateno=1060
x = -var(30)*8
[State a]
Type = posadd
triggerall = (movehit=1)
triggerall = var(11) > 0
triggerall = var(23)>25||var(23)<=0
triggerall = time>1
trigger1 = stateno=1027||stateno=1028||stateno=1050||stateno=1070
x = -var(30)*6.0

[State a]
Type = playerpush
trigger1 = movetype!=H
trigger1 = p2statetype!=A
trigger1 = statetype=A
trigger1 = p2bodydist Y!=(-20,20)
trigger1 = stateno<999
value = 0
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[state a];ブースト
type = null;varset
trigger1 = command = "z"
trigger1 = movetype != H
trigger1 = var(16) >= 20
v = 23
value = 1
;
[state -2];世紀末体力
type = varadd
trigger1 = var(37)
var(37) = 1
[state -2]
type = varset
trigger1 = (stateno=[5000,5100])
trigger1 = (movetype=H)&&(time>=0)
var(37) = 1
[state -2]
type = varset
trigger1 = var(37)
trigger1 = var(37) >= 420
var(37) = 0
[state -2]
type = varset
trigger1 = (var(37)>210)||(var(37)=0&&var(38)>=5)
trigger1 = statetype=A
var(37) = 210
;
[state -2]
type = varadd
TriggerAll = !(ishelper)
trigger1 = movetype = H
trigger1 = gethitvar(damage)
v = 38
value = floor(gethitvar(damage)/2)
ignorehitpause = 1
persistent = 0
[state -2]
type = varset
TriggerAll = !(ishelper)
trigger1 = roundstate!=2
v = 38
value = 0
ignorehitpause = 1
persistent = 0

[state -2]
type = lifeadd
triggerall = var(37)=0
TriggerAll = !(ishelper)
triggerall = gametime%20 = 0
triggerall = var(38) >= 5
triggerall = life < lifemax 
triggerall = roundstate = 2
triggerall = statetype!=A
trigger1 = movetype != H
trigger2 = stateno = [120,155]
value = 5
absolute = 1
ignorehitpause = 1
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999

[state -2]
type = varadd
triggerall = var(37)=0
TriggerAll = !(ishelper)
triggerall = gametime%20 = 0
triggerall = var(38) >= 5
triggerall = life < lifemax 
triggerall = roundstate = 2
triggerall = statetype!=A
trigger1 = movetype != H
trigger2 = stateno = [120,155]
v = 38
value = -5
absolute = 1
ignorehitpause = 1
persistent = 0
SuperMoveTime = 9999
PauseMoveTime = 9999
;
[state -2]
type = Varset
TriggerAll = !(ishelper)
trigger1 = command != "holdback"
trigger1 = var(59)<=0
v = 39
value = 0
[state -2]
type = Varadd
TriggerAll = !(ishelper)
trigger1 = command = "holdback"
trigger1 = var(59)<=0
v = 39
value = 1
[state -2]
type = Varset
TriggerAll = !(ishelper)
trigger1 = var(39) >= 60
v = 39
value = 60
[State -2]
type = PlaySnd
triggerall = !ishelper
triggerall = Time = 1
triggerall = random%3=0
triggerall = var(40) = 1
trigger1 = stateno = 150
trigger2 = stateno = 152
trigger3 = stateno = 154
value = 6,0+random%2
persistent = 0
channel = 0
[state a]
type = Explod
triggerall = !ishelper
triggerall = Time = 1
triggerall = var(40) = 1
triggerall = numhelper(9292) = 0
trigger1 = stateno = 150
trigger2 = stateno = 152
trigger3 = stateno = 154
id = 9295
anim=9295
pos = floor(40*const(size.xscale)),-floor(140*const(size.xscale))
postype = p1
sprpriority = 3
scale = .5,.5
ownpal = 1
ignorehitpause=1
pausemovetime=999
supermovetime=999

[State -2]
type = palfx
triggerall = !ishelper
triggerall = Time = 1
triggerall = var(40) = 1
triggerall = numhelper(9292) = 0
trigger1 = stateno = 150
trigger2 = stateno = 152
trigger3 = stateno = 154
time = 5
add = 255,255,255
color = 1
persistent = 0
[State -2]
type = poweradd
triggerall = !ishelper
triggerall = Time = 0
triggerall = var(40) = 1
triggerall = numhelper(9292) = 0
trigger1 = stateno = 150
trigger2 = stateno = 152
trigger3 = stateno = 154
value = 50
persistent = 0
[state -2]
type = VarAdd
triggerall = !ishelper
triggerall = Time = 0
triggerall = var(40) = 1
triggerall = var(23)=0
triggerall = numhelper(9292) = 0
trigger1 = stateno = 150
trigger2 = stateno = 152
trigger3 = stateno = 154
v = 16
value = 10
persistent = 0
[state -2]
type = Varset
TriggerAll = !(ishelper)
Trigger1 = (stateno!=[120,155])
trigger2 = numhelper(9292) > 0
v = 40
value = 0
;
[State -1,]
type = velset
TriggerAll = !(ishelper)
triggerall = var(59)<=0&&fvar(39)=0
triggerall = var(32) > 0
triggerall = statetype = A && (ctrl||movetype=I)
trigger1 = (command="holdfwd")||(command="holdback")
x = ifelse((command="holdfwd"),const(velocity.jump.fwd.x),const(velocity.jump.back.x))
[State -1,]
type = velset
TriggerAll = !(ishelper)
triggerall = var(59)>0||fvar(39)>0
triggerall = var(32) > 0
triggerall = statetype = A && (ctrl||movetype=I)
trigger1 = 1
x = const(velocity.jump.fwd.x)
;
[State -3,]
Type = varset
Trigger1 = (stateno!=[150,155])
Trigger2 = ctrl
var(45) = 0
[State -2,]
Type = varset
triggerall = var(59)<=0
triggerall = Command="おしっぱなしz"
triggerall = Command="holdback"
triggerall = power>0
triggerall = stateno!=110&&stateno!=115&&stateno!=100&&stateno!=101
trigger1 = ctrl
trigger2 = (stateno=[120,155])
var(45) = 100
[State -2,]
Type = varset
triggerall = var(59)>0
triggerall = power>0
triggerall = stateno!=110&&stateno!=115&&stateno!=100&&stateno!=101
triggerall = ctrl||(stateno=[120,155])&&(Vel X<4||statetype=A)
triggerall = p2movetype!=H&&p2statetype!=L
trigger1 = P2BodyDist X<150
trigger1 = power<800&&BackEdgeBodyDist<20
trigger1 = var(47)>30
trigger1 = var(53)<300
trigger2 = Life<100
trigger2 = var(53)<500
trigger3 = var(47)>60
trigger3 = var(53)<500
trigger4 = statetype=A
trigger4 = var(53)<950
trigger5 = P2BodyDist X<150
trigger5 = var(53)%7<2
trigger5 = var(47)<50
trigger5 = power>400
var(45) = 100
[state a];ID9292
type = Helper
trigger1 = stateno!=110&&stateno!=115&&stateno!=100&&stateno!=101
trigger1 = numhelper(9292) = 0
trigger1 = var(45) = 100
id = 9292
name = "oraga"
sprpriority = 9
pos = 0,0
postype = p1
stateno = 9292
helpertype = normal
pausemovetime = 999999
supermovetime = 999999
keyctrl = 0 
ownpal = 1
[state -2]
type = varset
trigger1 = stateno != [150,155]
v = 46
value = Life
[state -2]
type = lifeset
trigger1 = stateno = [150,155]
trigger1 = numhelper(9292) > 0
value = var(46)
Ignorehitpause = 1
;
[State -2]
type = PowerAdd
trigger1 = numhelper(9292) > 0
trigger1 = Power > 0
value    = -1
[State -2]
type = PowerAdd
trigger1 = numhelper(9292) > 0
trigger1 = Power > 0
trigger1 = stateno=150||stateno=152||stateno=154
trigger1 = time=1
value    = -75
;
[state -2]
type = velmul
trigger1 = stateno=151||stateno=153||stateno=155
trigger1 = numhelper(9292) > 0
trigger1 = vel x!=0
trigger1 = time<2
trigger1 = GetHitVar(slidetime)>=2
x = 2.25
[state a];ID9291
type = Helper
trigger1 = stateno=151||stateno=153||stateno=155
trigger1 = numhelper(9292) > 0
trigger1 = numhelper(9291) = 0
trigger1 = time<2
trigger1 = GetHitVar(slidetime)>=2
trigger1 = BackEdgeBodyDist<20
id = 9291
name = "olaga"
sprpriority = 9
pos = 0,0
postype = p1
stateno = 9291
helpertype = normal
pausemovetime = 999999
supermovetime = 999999
keyctrl = 0 
ownpal = 1
Ignorehitpause = 0
;
[State -3,]
Type = varset
Trigger1 = movetype!=H
fvar(21) = 0
[State -2,]
Type = varset
trigger1 = movetype=H
fvar(21) = GetHitVar(xvel)
IgNoreHitPause = 1

[State -3,]
Type = varadd
triggerall = (stateno=150||stateno=152||stateno=154)&&time=1
triggerall = var(40)=0
trigger1 = numhelper(9292) = 0
trigger2 = numhelper(9292)>0&&(helper(9292),Time<10)
var(47) = 4+random%3

[State -3,]
Type = varadd
Triggerall = var(16)<300
Triggerall = var(23)=0
trigger1 = (stateno=150||stateno=152||stateno=154)&&time=0
trigger2 = (stateno=5000||stateno=5010)&&time=0
var(16) = 5
;
[State a]
type = varset
trigger1 = movetype != H
trigger1 = stateno=1300||stateno=260||stateno=640
var(56) = animelemno(0)
ignorehitpause = 1
;
[state -2]
type = varset
TriggerAll = !(ishelper)
trigger1 = command != "holdfwd"
trigger1 = var(59)<=0
v = 49
value = 0
[state -2]
type = Varadd
TriggerAll = !(ishelper)
trigger1 = command = "holdfwd"
trigger1 = var(59)<=0
trigger1 = gametime%1 = 0
v = 49
value = 1
[state -2]
type = Varset
TriggerAll = !(ishelper)
trigger1 = var(49) >= 60
v = 49
value = 60
;
[State -3,タイマー処理]
Type = VarAdd
Trigger1 = fvar(23)>0
fvar(23) = -1
IgNoreHitPause = 1
;
[State -3,a]
Type = Varset
Trigger1 = Enemy,stateno=55101||Enemy,stateno=5101
Trigger1 = fvar(25)=0
Trigger1 = var(30)>33
fvar(25) = 100
IgNoreHitPause = 1
[State -3,a]
Type = Varset
Trigger1 = Enemy,stateno=95101||Enemy,stateno=55101||Enemy,stateno=5101
Trigger1 = fvar(25)=0
fvar(25) = 1
IgNoreHitPause = 1
[State -3,a]
Type = Varset
Trigger1 = Enemy,stateno=15120||Enemy,stateno=5120||Enemy,stateno=95120
Trigger2 = Enemy,movetype!=H
fvar(25) = 0
IgNoreHitPause = 1
;
[State -2, 0]
type = VarAdd
trigger1 = command = "holdup"
fv= 27
value = 1
ignorehitpause = 1

[State -2, 0]
type = VarSet
triggerall = fvar(27) != 0
trigger1 = command != "holdup"
fvar(27) = 0
;
[State -2]
type = DisplayToClipboard
trigger1 = 1
ignorehitpause = 1
text = "time1 = %d, time2 = %d, p2pos y= %f, ichi = %d"
params = (var(3)),(var(23)),(p2dist x),(var(3))
;
[State -3,]
type = Explod
triggerall=stateno=40&&var(59)<=0||stateno=49&&var(59)<=0||stateno=41||stateno=48
trigger1 = time = 1
trigger1 = pos y>=0
anim = 9400
id = 9400
pos = 0,0
postype = p1
bindtime = 1 
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
under = 0
[State -3,]
type = Explod
triggerall=stateno=100
trigger1 = time = 1||time%14=3;&&NumExplod(9500)=0
trigger1 = pos y>=0
anim = 9500
id = 9500
pos = 0,0
postype = p1
bindtime = 1 
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0
under = 0

[State 1200, 9]
type = StateTypeSet
triggerall = stateno != 105
triggerall = stateno != 1081
triggerall = stateno != [2000,2030]
triggerall = stateno != [1070,1079]
triggerall = stateno != [8800,8919]
trigger1 = pos y < 0
trigger1 = statetype != A
trigger1 = statetype != L
trigger1 = movetype!=H
physics = N
ignorehitpause = 1
[State 1200, 9]
type = velmul
triggerall = stateno != 105
triggerall = stateno != 1081
triggerall = stateno != [2000,2999]
triggerall = stateno != [1070,1079]
triggerall = stateno != [3000,3999]
trigger1 = pos y < 0
trigger1 = vel x!=0
trigger1 = statetype != A
trigger1 = statetype != L
trigger1 = movetype!=H
x = 0.85
ignorehitpause = 0
[State 1200, 9]
type = veladd
triggerall = stateno != 105
triggerall = stateno != 1081
triggerall = stateno != [2000,2999]
triggerall = stateno != [1070,1079]
triggerall = stateno != [3000,3999]
trigger1 = pos y < 0
trigger1 = statetype != A
trigger1 = statetype != L
trigger1 = movetype!=H
y = 0.45
ignorehitpause = 0
[State 1200, 9]
type = StateTypeSet
triggerall = stateno != 105
triggerall = stateno != 1081
triggerall = stateno != 2105
triggerall = stateno != [2000,2999]
triggerall = stateno != [1070,1079]
triggerall = stateno != [3000,3999]
trigger1 = pos y >= 0
trigger1 = statetype = A
trigger1 = movetype!=H
;statetype = A
physics = S
ignorehitpause = 1
[State 1200, 9]
type = posset
trigger1 = pos y >= 0
trigger1 = vel y >= 0
trigger1 = movetype=A||movetype=I||ctrl
y = 0
ignorehitpause = 1
[State 1200, 9]
type = velset
trigger1 = pos y >= 0
trigger1 = vel y >= 0
trigger1 = movetype=A||movetype=I||ctrl
y = 0
ignorehitpause = 1

[state a]
type = Helper
trigger1 = numhelper(9999) = 0
id = 9999
name = "config"
sprpriority = -5
pos = 0,0
postype = back
stateno = 9999
helpertype = normal
pausemovetime = 0
bindtime = -1
keyctrl = 0 
ownpal = 1

[State -3,強化モード]
Type = varset
Trigger1 = palno=11
fvar(34) = 1

[State -3,強化モード]
Type = varset
Trigger1 = palno=12
fvar(35) = 1

[State -3,強化モード]
Type = varset
Trigger1 = RoundState = 0
Trigger1 = fvar(34) = 1
Trigger2 = fvar(35) = 1
var(16) = 300

[State -3,強化モード]
Type = varset
Trigger1 = RoundState = 0
Trigger1 = fvar(34) = 1
Trigger2 = fvar(35) = 1
Trigger2 = time%60 = 0
var(20) = 1

[State -3,強化モード]
Type = varset
Trigger1 = RoundState = 0
Trigger1 = fvar(34) = 1
Trigger2 = fvar(35) = 1
var(24) = 1200

[State -3,強化モード]
Type = varset
Trigger1 = RoundState = 0
Trigger1 = fvar(34) = 1
Trigger2 = fvar(35) = 1
var(48) = 7

[State -3,強化モード]
Type = varset
Trigger1 = fvar(34) = 1
Trigger2 = fvar(35) = 1
var(50) = 1200

[State -3,強化モード]
Type = powerset
Trigger1 = RoundState = 0
Trigger1 = fvar(34) = 1
Trigger2 = fvar(35) = 1
value = PowerMax

[State -3,強化モード]
type = Helper
triggerall = Numhelper(2125) = 0
triggerall = stateno != [2105,2125]
triggerall = var(51) = 1
trigger1 = fvar(34) = 1
trigger1 = var(8) != 0
trigger1 = movehit = 1
trigger1 = RoundState = 2
trigger2 = fvar(35) = 1
trigger2 = movehit = 1
trigger2 = RoundState = 2
helpertype = normal
name = "北斗残悔拳"
ID = 2125
stateno = 2126
postype = left
pos = 0,0
keyctrl = 0
ownpal = 1
pausemovetime = 0
supermovetime = 0


;==============================================================================
; {C:\Users\Alex\Documents\mugen-1.1b1copy\chars\Kenshiro_C\Helper.cns}
;==============================================================================

;---------------------------------------------------------------------------
;(HELPER)七星ゲージ
[Statedef 4000]
type = A
ctrl = 0
anim = 4000
velset = 0,0
movetype = I
physics = N
sprpriority = 0

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

;---------------------[]
[state -2,a];ゲージ枠
type = Explod
trigger1 = numexplod(4000) = 0
anim = 4000
id = 4000
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,270,50),50+(root,var(43))
sprpriority = -3
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state -2,a];星１
type = Explod
trigger1 = root,var(4) = 0
trigger1 = numexplod(4001) = 0
anim = 4001
id = 4001
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,270,50),50+(root,var(43))
sprpriority = -2
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];星１消滅
type = removeexplod
trigger1 = root,var(4) >= 1
id = 4001
ignorehitpause = 1

[state -2,a];星２
type = Explod
trigger1 = root,var(4) <= 1
trigger1 = numexplod(4002) = 0
anim = 4002
id = 4002
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,270,50),50+(root,var(43))
sprpriority = -2
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];星２消滅
type = removeexplod
trigger1 = root,var(4) >= 2
id = 4002
ignorehitpause = 1

[state -2,a];星３
type = Explod
trigger1 = root,var(4) <= 2
trigger1 = numexplod(4003) = 0
anim = 4003
id = 4003
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,270,50),50+(root,var(43))
sprpriority = -2
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];星３消滅
type = removeexplod
trigger1 = root,var(4) >= 3
id = 4003
ignorehitpause = 1

[state -2,a];星４
type = Explod
trigger1 = root,var(4) <= 3
trigger1 = numexplod(4004) = 0
anim = 4004
id = 4004
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,270,50),50+(root,var(43))
sprpriority = -2
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];星４消滅
type = removeexplod
trigger1 = root,var(4) >= 4
id = 4004
ignorehitpause = 1

[state -2,a];星５
type = Explod
trigger1 = root,var(4) <= 4
trigger1 = numexplod(4005) = 0
anim = 4005
id = 4005
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,270,50),50+(root,var(43))
sprpriority = -2
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];星５消滅
type = removeexplod
trigger1 = root,var(4) >= 5
id = 4005
ignorehitpause = 1

[state -2,a];星６
type = Explod
trigger1 = root,var(4) <= 5
trigger1 = numexplod(4006) = 0
anim = 4006
id = 4006
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,270,50),50+(root,var(43))
sprpriority = -2
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];星６消滅
type = removeexplod
trigger1 = root,var(4) >= 6
id = 4006
ignorehitpause = 1

[state -2,a];星７
type = Explod
trigger1 = root,var(4) <= 6
trigger1 = numexplod(4007) = 0
anim = 4007
id = 4007
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,270,50),50+(root,var(43))
sprpriority = -2
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];星７消滅
type = removeexplod
trigger1 = root,var(4) >= 7
id = 4007
ignorehitpause = 1

[state -2,a];死兆星
type = Explod
trigger1 = root,var(4) = 7
trigger1 = numexplod(4010) = 0
anim = 4010
id = 4010
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,270,50),50+(root,var(43))
sprpriority = -3
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];死兆星消滅
type = removeexplod
trigger1 = root,var(4) <= 6
id = 4010
ignorehitpause = 1

[state -2,a];死兆星
type = Explod
trigger1 = root,var(4) = 7
trigger1 = numexplod(4020) = 0
anim = 4020
id = 4020
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,270,50),50+(root,var(43))
sprpriority = -2
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];死兆星消滅
type = removeexplod
trigger1 = root,var(4) <= 6
id = 4020
ignorehitpause = 1

[State -2, effect]
type = Explod
trigger1 = gametime % 16 = 0
trigger1 = root,var(24) > 0;醒鋭孔
anim = 1016
postype = left
pos = ifelse(TeamSide = 1,270,50),50+(root,var(43))
ownpal = 1
sprpriority = -1
bindtime = -1
id = 4030
ignorehitpause = 1
scale = 0.25,0.25
supermovetime = 999999999
pausemovetime = 999999999
facing = ifelse(TeamSide = 1,1,-1)

;---------------------------------------------------------------------------
;(HELPER)ブーストゲージ
[Statedef 4100]
type = A
ctrl = 0
anim = 4100
velset = 0,0
movetype = I
physics = N
sprpriority = 99999999

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[state a]
type = null;posset
trigger1 = 1
y = pos y - screenpos y +90

;---------------------[透過]
[state a]
type = null;Trans
trigger1 = 1
trans = addalpha
alpha = 256, 256
;---------------------[]
[state -2,a];ゲージ枠
type = Explod
trigger1 = numexplod(4100) = 0
anim = ifelse(TeamSide = 1,4100,4101)
id = 4100
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,65,255),160+(root,var(44))
sprpriority = 100
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state -2,a];ゲージ枠2
type = Explod
trigger1 = numexplod(4105) = 0
anim = 4105
id = 4105
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,65,255),215+(root,var(44))
sprpriority = 95
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state -2,a];ゲージ１
type = Explod
trigger1 = numexplod(4110) = 0
trigger1 = root,var(16) >= 100
anim = 4110
id = 4110
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,65,255),160+(root,var(44))
sprpriority = 99
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];消滅
type = removeexplod
trigger1 = root,var(16) < 100
id = 4110

[state -2,a];ゲージ２
type = Explod
trigger1 = numexplod(4111) = 0
trigger1 = root,var(16) >= 200
anim = 4111
id = 4111
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,65,255),160+(root,var(44))
sprpriority = 99
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];消滅
type = removeexplod
trigger1 = root,var(16) < 200
id = 4111

[state -2,a];ゲージ３
type = Explod
trigger1 = numexplod(4112) = 0
trigger1 = root,var(16) = 300
anim = 4112
id = 4112
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,65,255),160+(root,var(44))
sprpriority = 99
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];消滅
type = removeexplod
trigger1 = root,var(16) < 300
id = 4112

[state -2,a];ゲージ減少1
type = Explod
trigger1 = numexplod(4115) = 0
trigger1 = root,var(16) < 300
trigger1 = root,var(16) >= 201
anim = 4114
id = 4115
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,82,238),160+(root,var(44))
sprpriority = 98
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];消滅
type = removeexplod
trigger1 = root,var(16) <= 200
trigger2 = root,var(16) = 300
id = 4115

[state a]
type = ModifyExplod
trigger1 = 1
ID = 4115
scale = (root,var(16)-200)*0.005,0.5

[state -2,a];ゲージ減少2
type = Explod
trigger1 = numexplod(4116) = 0
trigger1 = root,var(16) < 200
trigger1 = root,var(16) >= 101
anim = 4114
id = 4116
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,45,275),160+(root,var(44))
pos = 45,225
sprpriority = 98
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];消滅
type = removeexplod
trigger1 = root,var(16) <= 100
trigger2 = root,var(16) >= 200
id = 4116

[state a]
type = ModifyExplod
trigger1 = 1
ID = 4116
scale = (root,var(16)-100)*0.005,0.5

[state -2,a];ゲージ減少3
type = Explod
trigger1 = numexplod(4117) = 0
trigger1 = root,var(16) < 100
trigger1 = root,var(16) >= 1
anim = 4113
id = 4117
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,5,315),160+(root,var(44))
sprpriority = 98
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[state a];消滅
type = removeexplod
trigger1 = root,var(16) = 0
trigger2 = root,var(16) >= 100
id = 4117

[state a]
type = ModifyExplod
trigger1 = 1
ID = 4117
scale = root,var(16)*0.005,0.5

[State -2, effect]
type = Explod
trigger1 = gametime % 16 = 0
trigger1 = root,var(20) > 0;天破の構え
anim = 4115
id = 4118
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,5,315),140+(root,var(44))
sprpriority = 100
ownpal = 1
scale = 0.5,0.5
facing = ifelse(TeamSide = 1,1,-1)

[State -2, effect]
type = Explod
trigger1 = gametime % 16 = 0
trigger1 = root,var(48) > 0;無想転生
anim = 4116
id = 4119
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,105,215),140+(root,var(44))
sprpriority = 100
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999999
pausemovetime = 999999999
facing = ifelse(TeamSide = 1,1,-1)

[State -2, effect]
type = Explod
trigger1 = gametime % 16 = 0
trigger1 = root,var(50) > 0;強敵の記憶
anim = 4117
id = 4119
postype = left
bindtime = -1
pos = ifelse(TeamSide = 1,90,230),140+(root,var(44))
sprpriority = 100
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999999
pausemovetime = 999999999
facing = ifelse(TeamSide = 1,1,-1)

;----------------------------------------------------------------------------
;(HELPER)
[Statedef 16010]
type = A
ctrl = 0
anim = 16010
velset = 0,0
movetype = I
physics = N
sprpriority = 7

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[state a]
type = destroyself
trigger1 = animtime = 0

;----------------------------------------------------------------------------
;(HELPER)斬撃攻撃ヒット
[Statedef 16020]
type = A
ctrl = 0
anim = 16020
velset = 0,0
movetype = I
physics = N
sprpriority = 7

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = random%179

[state a]
type = varset
trigger1 = time = 0
v = 2
value = 20

[state a]
type = varadd
trigger1 = time<=5
v = 2
value = -5

[state a]
type = varadd
trigger1 = time>5
v = 2
value = 1
;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*7,256

;---------------------[ヘルパー]
[state b]
type = Helper
trigger1 = time = 0
id = 16021
name = "hit"
pos = 20 , 0
postype = p1
stateno = 16021
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
facing = ifelse(random%2=1,1,-1)
supermovetime = 999999
pausemovetime = 999999

[state b]
type = Helper
trigger1 = time = 4
id = 16022
name = "hit"
pos = -20 , -40
postype = p1
stateno = 16021
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0
facing = ifelse(random%2=1,1,-1)
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

;---------------------[エフェクト]
;---------------------[拡縮・回転]
[state a]
type = angleset
trigger1 = time = 0
value = var(1)

[state a]
type = angledraw
trigger1 = 1
scale = 0.7-var(2)*0.035,0.1+time*0.15

;---------------------[]
[state a]
type = destroyself
trigger1 = var(2) >= 20


;----------------------------------------------------------------------------
[Statedef 16021]
type = A
ctrl = 0
anim = 16021
velset = 0,4
movetype = I
physics = N
sprpriority = 9

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = parent,var(1)

[state a]
type = varset
trigger1 = time = 0
v = 2
value = 0

[state a]
type = varadd
trigger1 = 1
v = 2
value = 1

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*18,256

;---------------------[エフェクト]
;---------------------[拡縮・回転]
[state a]
type = angledraw
trigger1 = ishelper(16021)
scale = 1,1+var(2)*0.1

[state a]
type = angledraw
trigger1 = ishelper(16022)
scale = 1,.8+var(2)*0.1
;---------------------[]
[state a]
type = destroyself
trigger1 = var(2) >= 20
;----------------------------------------------------------------------------
;(HELPER)必殺技ヒット
[Statedef 16095]
type = A
ctrl = 0
anim = 16096
velset = 0,0
movetype = I
physics = N
sprpriority = 7

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = random%180


;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = add

;---------------------[ヘルパー]
[state a];必殺技ヒット2
type = Helper
trigger1 = time = 1
id = 16097
name = "hit"
pos = 0 , 0
postype = p1
stateno = 16097
helpertype = normal
persistent = 0
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];必殺技ヒット3
type = Helper
trigger1 = time = 1
id = 0
name = "hit"
pos = 0 , 0
postype = p1
stateno = 16096
helpertype = normal
persistent = 0
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];必殺技ヒット3
type = Helper
trigger1 = time = 1
id = 1
name = "hit"
pos = 0 , 0
postype = p1
stateno = 16096
helpertype = normal
persistent = 0
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];必殺技ヒット3
type = Helper
trigger1 = time = 1
id = 2
name = "hit"
pos = 0 , 0
postype = p1
stateno = 16096
helpertype = normal
persistent = 0
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];必殺技ヒット3
type = Helper
trigger1 = time = 1
id = 3
name = "hit"
pos = 0 , 0
postype = p1
stateno = 16096
helpertype = normal
persistent = 0
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];必殺技ヒット3
type = Helper
trigger1 = time = 1
id = 4
name = "hit"
pos = 0 , 0
postype = p1
stateno = 16096
helpertype = normal
persistent = 0
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];必殺技ヒット3
type = Helper
trigger1 = time = 1
id = 5
name = "hit"
pos = 0 , 0
postype = p1
stateno = 16096
helpertype = normal
persistent = 0
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

;---------------------[エフェクト]
[state a]
type = angledraw
trigger1 = 1
scale = 1.2-time*0.08,1.2-time*0.08

;---------------------[]
[state a]
type = destroyself
trigger1 = time >= 15

;----------------------------------------------------------------------------
[Statedef 16097]
type = A
ctrl = 0
anim = 16097
velset = 0,0
movetype = I
physics = N
sprpriority = 7

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = addalpha
alpha = 256-time*18,256

;---------------------[拡縮・回転]
[state a]
type = angledraw
trigger1 = 1
scale = 0.15+time*0.1,0.15+time*0.1

;---------------------[]
[state a]
type = destroyself
trigger1 = time >= 16

;----------------------------------------------------------------------------
;(HELPER)必殺技ヒット3
[Statedef 16096]
type = A
ctrl = 0
anim = 16095
velset = 0,0
movetype = I
physics = N
sprpriority = 7

[state a]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
v = 1
value = parent,var(1)

[state a]
type = varset
trigger1 = ishelper(0)
v = 2
value = 0

[state a]
type = varset
trigger1 = ishelper(1)
v = 2
value = 1

[state a]
type = varset
trigger1 = ishelper(2)
v = 2
value = 2

[state a]
type = varset
trigger1 = ishelper(3)
v = 2
value = 3

[state a]
type = varset
trigger1 = ishelper(4)
v = 2
value = 4

[state a]
type = varset
trigger1 = ishelper(5)
v = 2
value = 5

;---------------------[透過]
[state a]
type = Trans
trigger1 = 1
trans = add

;---------------------[拡縮・回転]
[state a]
type = angledraw
trigger1 = ishelper(0)
trigger2 = ishelper(1)
trigger3 = ishelper(2)
trigger4 = ishelper(3)
trigger5 = ishelper(4)
trigger6 = ishelper(5)
value = 60*var(2) + var(1)

[state a]
type = velset
trigger1 = time = 0
y = -cos((60*var(2) + var(1))*pi/180)*6
x = -sin((60*var(2) + var(1))*pi/180)*6

[state a]
type = angledraw
trigger1 = ishelper(0)
trigger2 = ishelper(1)
trigger3 = ishelper(2)
trigger4 = ishelper(3)
trigger5 = ishelper(4)
trigger6 = ishelper(5)
scale = 1.1-time*0.073,1

;---------------------[]
[state a]
type = destroyself
trigger1 = time >= 15
;
;----------------------------------------------------------------------------
;(HELPER)オーラガード
[Statedef 9291]
Type = A
Physics = N
Velset = 0,0
SprPriority = 5
Anim = 9999
ctrl=0
[State -1]
Type = playerpush
Trigger1 = p2dist x>0
Trigger1 = vel x>0
value = 1
[State -1]
Type = posset
Trigger1 = Time=0
X = enemy,pos x-10*facing
Y = enemy,pos y
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
[State -1]
Type = null;turn
Trigger1 = root,facing != facing
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SCA
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
[State -1]
Type = AssertSpecial
Trigger1 = 1
Flag = Invisible
Flag2 = Noshadow
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
[State -1]
type=selfstate
trigger1=!ishelper
value=0
ctrl=1
;
[State -1]
Type = velset
Trigger1 = Time=0
X = abs(root,fvar(21)*0.80);0.75
IgnoreHitPause = 0
[State -1]
Type = velmul
Trigger1 = Time>0
Trigger1 = vel x>=0
X = root,fvar(20)
[State -1]
Type = velset
trigger1 = root,var(45)!=100&&(root,stateno!=[150,155])
trigger2 = root,stateno!=[150,155]
trigger3 = root,ctrl=1
trigger4 = time>20
trigger5 = root,stateno=150||root,stateno=152||root,stateno=154
X = 0
;
[state a]
type = destroyself
trigger1 = root,var(45)!=100&&(root,stateno!=[150,155])
trigger2 = root,stateno!=[150,155]
trigger3 = root,ctrl=1
trigger4 = time>20
trigger5 = root,stateno=150||root,stateno=152||root,stateno=154

;----------------------------------------------------------------------------
;(HELPER)オーラガード
[Statedef 9292]
Type = A
Physics = N
Velset = 0,0
SprPriority = 9
ctrl=0
[State -1]
type=changeanim
triggerall=anim!=9292
trigger1=root,power<300
trigger2=(root,stateno!=[150,155])
value=9292
[State -1]
type=changeanim
triggerall=anim!=9294
trigger1=root,power>=300
trigger1=(root,stateno=[150,155])
value=9294
[State -1]
Type = playerpush
Trigger1 = 1
value = 0
[State -1]
Type = posset
Trigger1 = 1
X = root,pos x
Y = root,pos y-40-(root,statetype!=C)*35
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
[State -1]
Type = turn
Trigger1 = root,facing != facing
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
[State -1]
Type = NotHitBy
Trigger1 = 1
Value = SCA
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
[State -1]
Type = AssertSpecial
Trigger1 = 1
Flag = Noshadow
IgnoreHitPause = 1
SuperMoveTime = 9999
PauseMoveTime = 9999
[State -1]
type=selfstate
trigger1=!ishelper
value=0
ctrl=1
[state -1]
type = velset
Trigger1 = 1
x = 0
y = 0
[state a]
type = destroyself
trigger1 = root,var(45)!=100&&(root,stateno!=[150,155])
trigger2 = root,power<=0
trigger3 = root,stateno=110||root,stateno=115||root,stateno=100


;==============================================================================
; {C:\Users\Alex\Documents\mugen-1.1b1copy\chars\Kenshiro_C\config.txt}
;==============================================================================

;--------------------------------------------------------------------------
;Config
;--------------------------------------------------------------------------
[Statedef 9999]
type = A
movetype = I
physics = N
ctrl = 0
anim = 9999
velset = 0,0
sprpriority = 0
;--------------------------------------------------------------------------
;七星ゲージ　y軸
;--------------------------------------------------------------------------
[state -3,七星ゲージ]
type = parentvarset
trigger1 = 1
v = 43

value = 0
;       ↑ ここの数値を変更してください。(初期0)
;　　　　  数値を大きくするほど下にいきます。（マイナスの値で上に移動）
;--------------------------------------------------------------------------
;ブーストゲージ　y軸
;--------------------------------------------------------------------------
[state -3,ブーストゲージ]
type = parentvarset
trigger1 = 1
v = 44

value = 0
;       ↑ ここの数値を変更してください。(初期0)
;　　　　  数値を大きくするほど下にいきます。（マイナスの値で上に移動）
;--------------------------------------------------------------------------
;ブースト量(開幕)
;--------------------------------------------------------------------------
[State -3,ブースト量]
Type = parentvarset
Trigger1 = RoundState = 0
Trigger1 = RoundNo = 1
v = 16

value = 0
;       ↑ ここの数値を変更してください。(初期0)
;　　　　  100でゲージ1本 200でゲージ2本 300でゲージ3本です。
;　　　　　マイナスにはしないでください
;--------------------------------------------------------------------------
;☆制御(開幕)
;--------------------------------------------------------------------------
[State -3,☆制御]
Type = parentvarset
Trigger1 = RoundState = 0
Trigger1 = RoundNo = 1
v = 4

value = 0
;       ↑ ここの数値を変更してください。(初期0)
;　　　　  0で☆7、1で☆6、2で☆5、3で☆4、4で☆3、5で☆2、6で☆1、
;　　　　  7で☆0(死兆星)なので注意して変えてください
;　　　　　マイナスにはしないでください
;--------------------------------------------------------------------------
;『お前の命は?と3秒だ！！』制御
;--------------------------------------------------------------------------
[State -3,懴悔]
Type = parentvarset
Trigger1 = 1
v = 51

value = 0
;       ↑ ここの数値を変更してください。(初期0)
;　　　　  1でon 0でoff
;--------------------------------------------------------------------------
;北斗柔破斬　対応キャラ追加
;--------------------------------------------------------------------------
[state -3,北斗柔破斬]
type = parentvarset
triggerall = (Enemy,TeamMode = Single) || (Enemy,TeamMode = Turns)
trigger1 = enemy,name = "Mr.HEART"
trigger2 = enemy,name = "Mr.Heart"

v = 54
value = 1
;       ↑ 0にすることで北斗百裂拳にできます。

;「trigger2 = enemy,name = "Mr.Heart"」と「v = 54」の間に
;『trigger3 = enemy,name = "キャラ名"』と入れてください。
;　　　　 ↑複数追加するときは、ここの数字に１足しながら入れてください。
;--------------------------------------------------------------------------
;北斗十字斬　設定
;--------------------------------------------------------------------------
[state -3,北斗十字斬]
type = parentvarset
triggerall = (Enemy,TeamMode = Single) || (Enemy,TeamMode = Turns)
trigger1 = enemy,name = "SHIN" && enemy,authorname = "konpeitou"
trigger2 = enemy,name = "shin" && enemy,authorname = "ahuron"
v = 55
value = 3
;       ↑ ここの数値を変更してください。(初期3)
;　　　　  0で北斗百裂拳 1はｻﾗﾀﾞﾊﾞｰなし 2で強制的にｻﾗﾀﾞﾊﾞｰ(演出無)
;          3で強制的にｻﾗﾀﾞﾊﾞｰ(演出有り)※長いです
;※こちらには、対応キャラを追加しないでください。

;==============================================================================
; {C:\Users\Alex\Documents\mugen-1.1b1copy\chars\Kenshiro_C\KenCommon.cns}
;==============================================================================

;---------------------------------------------------------------------------
; 立ち
[Statedef 0]
type = S
physics = S
sprpriority = 0

[State 0, 1]
type = ChangeAnim
trigger1 = Anim != 0 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0 ;Turn anim over
value = 0

[State 0, 2]
type = VelSet
trigger1 = Time = 0
y = 0

[State 0, 3] ;Stop moving if low velocity or 4 ticks pass
type = VelSet
trigger1 = abs(vel x) < 2
trigger2 = Time = 4
x = 0

[State 0, 4] ;Are you dead?
type = ChangeState
trigger1 = !alive
value = 5050

;---------------------------------------------------------------------------
; しゃがみ移行
[Statedef 10]
type    = C
physics = C
anim = 10

[State 10, 1]
type = VelMul
trigger1 = Time = 0
x = .75

[State 10, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; しゃがみ
[Statedef 11]
type    = C
physics = C
anim = 11
sprpriority = 0

[State 11, 1] ;Change from turning animation
type = ChangeAnim
trigger1 = Anim = 6 && AnimTime = 0
value = 11

;---------------------------------------------------------------------------
; しゃがみ解除
[Statedef 12]
type    = S
physics = S
anim = 12

[State 12, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
; 歩き
[Statedef 20]
type    = S
physics = S
sprpriority = 0

[State 20, 1]
type = VelSet
trigger1 = command = "holdfwd"
x = const(velocity.walk.fwd.x)

[State 20, 2]
type = VelSet
trigger1 = command = "holdback"
x = const(velocity.walk.back.x)

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 20

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21 && Anim != 5
trigger2 = Anim = 5 && AnimTime = 0
value = 21

;---------------------------------------------------------------------------
; ジャンプ開始
[Statedef 40]
type    = S
physics = S
anim = 40
ctrl = 0
;velset = 0,0
sprpriority = 1

[State 40,0]
type = HitBy
trigger1 = var(59)<=0
value = SAC, NA,SA,HA,NP,SP,HP
time=1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100 ;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; ハイジャンプ
[Statedef 49]
type    = S
physics = S
anim = 40
ctrl = 0
;velset = 0,0
sprpriority = 1

[State 40,0]
type = HitBy
trigger1 = var(59)<=0
value = SAC, NA,SA,HA,NP,SP,HP
time=1

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 40, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 40, 2]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 40, 3]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 40, 4]
type = VelSet
trigger1 = AnimTime = 0
x = ifelse(sysvar(1)=0, const(velocity.jump.neu.x), ifelse(sysvar(1)=1, const(velocity.jump.fwd.x), const(velocity.jump.back.x)))
y = -13.7;const(velocity.jump.y)

[State 40, 5]
type = VelSet
trigger1 = AnimTime = 0
trigger1 = prevstateno = 100;RUN_FWD
trigger1 = sysvar(1) = 1
x = const(velocity.runjump.fwd.x)

[State 40, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; 空中ジャンプ開始
[Statedef 45]
type    = A
physics = N
ctrl = 0
velset = 0,0

[State 45, 4]
type = VarSet
trigger1 = 1
fvar(28) = 1

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 44

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = 41

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = command = "holdfwd"
sysvar(1) = 1

[State 45, 5]
type = VarSet
trigger1 = command = "holdback"
sysvar(1) = -1

[State 45, 4]
type = VarSet
trigger1 = var(59)>0||fvar(39)>0
trigger1 = p2movetype=H
sysvar(1) = 1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x), const(velocity.airjump.back.x)))
y = const(velocity.airjump.y)

[State 00]
type = PlaySnd
trigger1 = time = 0
value = 40, 1

[State 45, 7]
type = ChangeState
trigger1 = Time = 2
value = 50
ctrl = 1
[Statedef 53]
type    = A
physics = N
ctrl = 0
velset = 0,0


[State 45, 4]
type = VarSet
trigger1 = 1
fvar(29) = 1

[State 45, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(44)
value = 44

[State 45, 2]
type = ChangeAnim
trigger1 = !SelfAnimExist(44)
value = 41

[State 45, 3]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 45, 4]
type = VarSet
trigger1 = 1
sysvar(1) = 1

[State 45, 4]
type = VarSet
trigger1 = var(59)>0||fvar(39)>0
trigger1 = p2movetype=H
sysvar(1) = 1

[State 45, 6]
type = VelSet
trigger1 = Time = 2
x = ifelse(sysvar(1)=0, const(velocity.airjump.neu.x), ifelse(sysvar(1)=1, const(velocity.airjump.fwd.x)*1.1, const(velocity.airjump.back.x)*1.1))
y = const(velocity.airjump.y)*1.1

[State 00]
type = PlaySnd
trigger1 = time = 0
value = 40, 1

[State 45, 7]
type = ChangeState
trigger1 = Time >= 2
value = 50
ctrl = 1
;---------------------------------------------------------------------------
; ジャンプ上昇
[Statedef 50]
type    = A
physics = A

[State 1100, AngleDraw]
Type = AngleDraw
Trigger1 = 1
Value = 0

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;---------------------------------------------------------------------------
; 着地
[Statedef 51]
type    = A
physics = A

[State 51, 1]
type = Null
trigger1 = 1

;---------------------------------------------------------------------------
; 着地
[Statedef 52]
type    = S
physics = S
ctrl = 0
;velset = 0,0
anim = 47

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 1]
type = null;Velmul
trigger1 = 1
x = 0.87

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time >= 1
value = 1

[state a]
type = turn
trigger1 = time >1
trigger1 = p2dist x < 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ダッシュ
[Statedef 100]
type    = S
physics = N
anim = 100
sprpriority = 1
ctrl = 0

[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 00]
type = PlaySnd
trigger1 = time%14 = 3
value = 100, 0

[State 01]
type = VelSet
trigger1 = time = 0
x = const(velocity.run.fwd.x)

[state a]
type = veladd
trigger1 = vel x <= 9.5
x = 0.1

[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
var(23) = 1

[state a];ブースト
type = velset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
x = const(velocity.run.fwd.x)*1.5

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
v = 16
value = -20
;
[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 1]
type = ChangeState
trigger1 = var(59)<=0
trigger1 = command = "holdup"
trigger1 = time>0
value = 40

[State 04]
type = ChangeState
trigger1 = var(59)<=0&&fvar(39)=0;&&helper(29000+id)
trigger1 = command != "holdfwd"
trigger1 = time>4
value = 101
ctrl = 0

[State 100, 4]
type = ChangeState
triggerall = var(59)>0
triggerall = var(55)<=0
triggerall = time>4
trigger1 = time>60
trigger2 = P2dist X<2
trigger3 = helper(25000+id),var(59)=3
trigger4 = (P2MoveType=H&&var(54)<4)&&(p2statetype!=A)&&(p2statetype!=L)
trigger5 = p2bodydist x<10&&p2movetype=H&&(p2statetype!=L)
trigger6 = p2bodydist x<15&&inguarddist
value = 101
ctrl = 0

;---------------------------------------------------------------------------
; ダッシュ終了
[Statedef 101]
type    = S
physics = S
anim = 101
sprpriority = 1

[State 00, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 空中ダッシュ
[Statedef 110]
type    = A
physics = N
anim = 110
sprpriority = 1
velset = 0,0
ctrl = 1

[State 00]
type = PlaySnd
trigger1 = time = 1
value = 100, 1

[State -1]
type = ChangeState
value = 120
triggerall = var(59)<=0
triggerall = command = "z"
triggerall = command = "holdback"
triggerall = time>2
trigger1 = inguarddist
trigger1 = power>0
ctrl = 1

[State -3,投げ対策]
Type = AssertSpecial
Trigger1 = 1
flag = nocrouchguard
flag2 = nostandguard
flag3 = noairguard

[State 45, 4]
type = VarSet
trigger1 = 1
fvar(33) = 1

[State 01]
type = VelSet
trigger1 = time=0;animelem = 2
x = 6.5
y = 0

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
trigger1 = time >= 12
value = 111

;---------------------------------------------------------------------------
; 空中バックダッシュ
[Statedef 115]
type    = A
physics = N
anim = 115
sprpriority = 1
velset = 0,0
ctrl = 1

[State 00]
type = PlaySnd
trigger1 = time = 1
value = 100, 1

[State -1]
type = ChangeState
value = 120
triggerall = var(59)<=0
triggerall = command = "z"
triggerall = command = "holdback"
triggerall = time>2
trigger1 = inguarddist
trigger1 = power>0
ctrl = 1

[State -3,投げ対策]
Type = AssertSpecial
Trigger1 = 1
flag = nocrouchguard
flag2 = nostandguard
flag3 = noairguard

[State 45, 4]
type = VarSet
trigger1 = 1
fvar(33) = 1

[State 01]
type = VelSet
trigger1 = time = 0
x = -6.0;-6.5
y = 0

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
trigger1 = time >= 12
value = 111

;---------------------------------------------------------------------------
; 空中ダッシュ終了
[Statedef 111]
type    = A
physics = A
anim = 111
sprpriority = 1
ctrl = 1

[state a]
type = turn
trigger1 = time <2
trigger1 = p2dist x < 0

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

;---------------------------------------------------------------------------
; バックステップ
[Statedef 105]
type    = S
physics = N
ctrl = 0
anim = 105
velset = 0,0


[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 00]
type = PlaySnd
trigger1 = animelem = 2
value = 300, 1

[State 01]
type = VelAdd
trigger1 = animelem = 3
x = -5
y = -3.0

[state a]
type = PlayerPush
trigger1 = (var(23)=[1,20])
value = 0
[state a]
type = NotHitBy
trigger1 = time<15
value = SCA
time=1
;
[state a];ブースト
type = varset
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = time=1&&prevstateno=104
var(23) = 1

[state a];ブースト
type = veladd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = time=1&&prevstateno=104
x = 10

[State a];ブースト
type = palfx
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = time=1&&prevstateno=104
time = 5
add = 255,255,255
color = 1

[state a];ブーストゲージ減少
type = varadd
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = time=1&&prevstateno=104
v = 16
value = -20

[State -3,]
type = Explod
trigger1 = var(59)<=0
trigger1 = command = "z"
trigger1 = animelem = 3,<0
trigger1 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = var(16)>=100 || (var(23)>0&&var(16)>=20)
trigger2 = time=1&&prevstateno=104
anim = 9600
id = 9600
pos = 0,-60
postype = p1
supermovetime = 99999999
pausemovetime = 99999999
scale = 0.5,0.5
sprpriority = 9
ownpal = 1
removeongethit =0
ignorehitpause = 1
persistent = 0

[state a]
type = veladd
trigger1 = animelem = 3,>=0
y = 0.45

[state a]
type = turn
trigger1 = animelem = 3,>0
trigger1 = vel x>0
trigger1 = p2dist x<0

[State 00]
type = ChangeState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 106

;---------------------------------------------------------------------------
; バックステップ・着地
[Statedef 106]
type    = S
physics = S
anim = 106
sprpriority = 1
velset = 0,0
ctrl = 1

[state a]
type = posset
trigger1 = time = 0
y = 0

[State 00]
type = PlaySnd
trigger1 = animelem = 1
value = 40, 0

[State explod];着地エフェクト
type = Explod
trigger1 = animelem = 1
anim = 9410
id = 9410
sprpriority = -5
postype = p1
pos = 0,0
bindtime = 1
supermove = 0
ignorehitpause = 0
under = 0
scale = 0.5,0.5
ownpal = 1

[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 04]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; GUARD (start)
[Statedef 120]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged

[State 120, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 120 + (statetype = C) + (statetype = A)*2

[State 120, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 120, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 120, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 120, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59)<=0
Trigger1 = command = "holddown"
statetype = C
physics = C

[State 120, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)<=0
Trigger1 = command != "holddown"
statetype = S
physics = S

[State 120, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 130 + (statetype = C) + (statetype = A)*2

[State 120, Stop Guarding]
type = ChangeState
Trigger1 = command != "holdback"&&var(59)<=0
value = 140

;---------------------------------------------------------------------------
; STAND GUARD (guarding)
[Statedef 130]
type    = S
physics = S

[State 130, 1]
type = ChangeAnim
triggerall = prevstateno!=60&&prevstateno!=62
trigger1 = Anim != 130
value = 130

[State 130, Hi to Lo]
type = ChangeState
trigger1 = prevstateno!=60&&prevstateno!=62
Trigger1 = var(59)<=0
Trigger1 = command = "holddown"
value = ifelse(prevstateno=60,61,ifelse(prevstateno=62,63,131))

[State 130, Stop Guarding]
type = ChangeState
triggerall = prevstateno!=60&&prevstateno!=62
Trigger1 = command != "holdback"&&var(59)<=0
value = 140
;prev62;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
[state a]
type = statetypeset
trigger1 = prevstateno=62
trigger1 = Time = 0
physics = N
[state a]
type = velset
trigger1 = prevstateno=62
trigger1 = time = 0
y = 0
[state a]
type = posset
trigger1 = prevstateno=62
trigger1 = time = 0
y = 0
[State 01]
type = VelSet
trigger1 = prevstateno=62
trigger1 = time = 0
trigger1 = var(20) = 0
trigger1 = vel X<const(velocity.run.fwd.x)
x = const(velocity.run.fwd.x)
[State 01]
type = VelSet
trigger1 = prevstateno=62
trigger1 = time = 0
trigger1 = var(20) >1
trigger1 = vel X<const(velocity.run.fwd.x)*1.5
x = const(velocity.run.fwd.x)*1.5
[state a]
type = veladd
trigger1 = prevstateno=62
trigger1 = vel x <= 9.5
trigger1 = var(20) = 0
x = 0.1
[state a]
type = veladd
trigger1 = prevstateno=62
trigger1 = vel x <= 12.5
trigger1 = var(20) >1
x = 0.15
[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = prevstateno=62
flag = NoWalk
[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = prevstateno=62
flag = NoAutoTurn
[State 20, 3]
type = ChangeAnim
triggerall = prevstateno=62
trigger1 = Anim != 100&&Anim != 3100
value = 100
[State 105, 2]
type = CtrlSet
triggerall = prevstateno=62||prevstateno=60
trigger1 = 1
value = 0
[State 100, 4]
type = ChangeState
triggerall = prevstateno=62
trigger1 = time>60
trigger2 = P2dist X<2
value = 101
ctrl = 0
;---------------------------------------------------------------------------
; CROUCH GUARD (guarding)
[Statedef 131]
type    = C
physics = C

[State 131, 1]
type = ChangeAnim
triggerall = prevstateno!=61&&prevstateno!=63
trigger1 = Anim != 131
value = 131

[State 131, Lo to Hi]
type = ChangeState
trigger1 = prevstateno!=61&&prevstateno!=63
Trigger1 = var(59)<=0
Trigger1 = command != "holddown"
value = ifelse(prevstateno=61,60,ifelse(prevstateno=63,62,130))

[State 131, Stop Guarding]
type = ChangeState
triggerall = prevstateno!=61&&prevstateno!=63
Trigger1 = command != "holdback"&&var(59)<=0
value = 140
;prev63
[state a]
type = statetypeset
trigger1 = prevstateno=63
trigger1 = Time = 0
physics = N
[state a]
type = velset
trigger1 = prevstateno=63
trigger1 = time = 0
y = 0
[state a]
type = posset
trigger1 = prevstateno=63
trigger1 = time = 0
y = 0
[State 01]
type = VelSet
trigger1 = prevstateno=63
trigger1 = time = 0
trigger1 = vel X<const(velocity.run.fwd.x)
x = const(velocity.run.fwd.x)
[state a]
type = veladd
trigger1 = prevstateno=63
trigger1 = vel x <= 9.5
x = 0.1
[State 02] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = prevstateno=63
flag = NoWalk
[State 03] ;Prevent from turning
type = AssertSpecial
trigger1 = prevstateno=63
flag = NoAutoTurn
[State 20, 3]
type = ChangeAnim
triggerall = prevstateno=63
trigger1 = Anim != 100&&Anim != 3100
value = 100
[State 105, 2]
type = CtrlSet
triggerall = prevstateno=63||prevstateno=61
trigger1 = 1
value = 0
[State 100, 4]
type = ChangeState
triggerall = prevstateno=63
trigger1 = time>60
trigger2 = P2dist X<2
value = 101
ctrl = 0
;---------------------------------------------------------------------------
; AIR GUARD (guarding)
[Statedef 132]
type    = A
physics = N

[State 132, 1]
type = ChangeAnim
trigger1 = Anim != 132
value = 132

[State 132, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 132, 3]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 132, 4]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 132, 5]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 132, 6]
type = ChangeState
triggerall = sysvar(0)
trigger1 = inguarddist
trigger1 = command = "holdback"&& var(59)<=0
value = 130

[State 132, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

[State 132, Stop Guarding]
type = ChangeState
Trigger1 = command != "holdback"&&var(59)<=0
value = 140

;---------------------------------------------------------------------------
; GUARD (end)
[Statedef 140]
type = U    ;Leave state type unchanged
physics = U ;Leave physics unchanged
ctrl = 1

[State 140, 1]
type = ChangeAnim
trigger1 = Time = 0
value = 140 + (statetype = C) + (statetype = A)*2

[State 140, 2]
type = StateTypeSet
trigger1 = Time = 0 && statetype = S
physics = S

[State 140, 3]
type = StateTypeSet
trigger1 = Time = 0 && statetype = C
physics = C

[State 140, 4]
type = StateTypeSet
trigger1 = Time = 0 && statetype = A
physics = A

[State 140, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59)<=0
Trigger1 = command = "holddown"
statetype = C
physics = C

[State 140, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)<=0
Trigger1 = command != "holddown"
statetype = S
physics = S

;[State 140, 5] ;Implemented within engine
;type = ChangeState
;trigger1 = AnimTime = 0
;value = (statetype = C)*11 + (statetype = A)*51

;---------------------------------------------------------------------------
; SGUARDHIT (shaking)
[Statedef 150]
type    = S
movetype= H
physics = N
velset = 0,0

[state -2]
type = Varset
TriggerAll = !(ishelper)
Trigger1 = Time = 0
v = 40
value = 0

[state -2]
type = Varset
TriggerAll = !(ishelper)
TriggerAll= Time = 0
Trigger1 = var(39)>0
Trigger1 = var(39)<8
Trigger1 = var(59)<=0
Trigger1 = command = "holdback"
v = 40
value = 1

[State 150, 1]
type = ChangeAnim
trigger1 = 1
value = 150

[State 150, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 151; + 2*ifelse(var(59)<=0,(command = "holddown"),(helper(25000+id),var(59)=1))

[State 150, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59)<=0
Trigger1 = command = "holddown"
statetype = C
physics = C

[State 150, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)<=0
Trigger1 = command != "holddown"
statetype = S
physics = S

[State 150, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 3

;---------------------------------------------------------------------------
; SGUARDHIT2 (knocked back)
[Statedef 151]
type    = S
movetype= H
physics = S
anim = 150

[State 151, 1]
type = HitVelSet
trigger1 = Time = 0
trigger1 = var(40) = 0
x = 1

[State 151, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 151, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)+(numhelper(9292)>0)*2
trigger1 = var(40) = 0
value = 1
[State 151, 3]
type = CtrlSet
trigger1 = Time = floor(GetHitVar(ctrltime)*0.7)+(numhelper(9292)>0)*2
trigger1 = var(40) = 1
value = 1

[State 151, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59)<=0
Trigger1 = command = "holddown"
statetype = C
physics = C

[State 151, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)<=0
Trigger1 = command != "holddown"
statetype = S
physics = S

[State 151, 4]
type = ChangeState
trigger1 = HitOver
value = 130
ctrl = 1

;---------------------------------------------------------------------------
; CGUARDHIT (shaking)
[Statedef 152]
type    = C
movetype= H
physics = N
velset = 0,0

[state -2]
type = Varset
TriggerAll = !(ishelper)
Trigger1 = Time = 0
v = 40
value = 0

[state -2]
type = Varset
TriggerAll = !(ishelper)
TriggerAll= Time = 0
Trigger1 = var(39)>0
Trigger1 = var(39)<8
Trigger1 = var(59)<=0
Trigger1 = command = "holdback"
v = 40
value = 1

[State 152, 1]
type = ChangeAnim
trigger1 = 1
value = 151

[State 152, 3]
type = ChangeState
trigger1 = HitShakeOver
value = 151; + 2*ifelse(var(59)<=0,(command = "holddown"),(helper(25000+id),var(59)=1))

[State 152, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59)<=0
Trigger1 = command = "holddown"
statetype = C
physics = C

[State 152, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)<=0
Trigger1 = command != "holddown"
statetype = S
physics = S


[State 152, 4]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; CGUARDHIT2 (knocked back)
[Statedef 153]
type    = C
movetype= H
physics = C
anim = 151

[State 153, 1]
type = HitVelSet
trigger1 = Time = 0
trigger1 = var(40) = 0
x = 1

[State 153, 2]
type = VelSet
trigger1 = Time = GetHitVar(slidetime)
trigger2 = HitOver
x = 0

[State 153, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)+(numhelper(9292)>0)*2
trigger1 = var(40) = 0
value = 1
[State 151, 3]
type = CtrlSet
trigger1 = Time = floor(GetHitVar(ctrltime)*0.7)+(numhelper(9292)>0)*2
trigger1 = var(40) = 1
value = 1

[State 153, Hi to Lo]
type = StateTypeSet
TriggerAll=Statetype = S
Trigger1 = var(59)<=0
Trigger1 = command = "holddown"
statetype = C
physics = C

[State 153, Lo to Hi]
type = StateTypeSet
TriggerAll=Statetype = C
Trigger1 = var(59)<=0
Trigger1 = command != "holddown"
statetype = S
physics = S

[State 153, 4]
type = ChangeState
trigger1 = HitOver
value = 131
ctrl = 1

;---------------------------------------------------------------------------
; AGUARDHIT (shaking)
[Statedef 154]
type    = A
movetype= H
physics = N
velset = 0,0

[state -2]
type = Varset
TriggerAll = !(ishelper)
Trigger1 = Time = 0
v = 40
value = 0

[state -2]
type = Varset
TriggerAll = !(ishelper)
TriggerAll= Time = 0
Trigger1 = var(39)>0
Trigger1 = var(39)<8
Trigger1 = var(59)<=0
Trigger1 = command = "holdback"
v = 40
value = 1

[State 154, 1]
type = ChangeAnim
trigger1 = 1
value = 152

[State 154, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 155 ;AGUARDHIT2

[State 154, 3]
type = ForceFeedback
trigger1 = time = 0
waveform = square
time = 4

;---------------------------------------------------------------------------
; AGUARDHIT2 (knocked away)
[Statedef 155]
type    = A
movetype= H
physics = N
anim = 152

[State 155, 1]
type = HitVelSet
trigger1 = Time = 0
trigger1 = var(40) = 0
x = 1
y = 1

[State 155, 2]
type = VelAdd
trigger1 = 1
y = Const(movement.yaccel)

[State 155, 3]
type = CtrlSet
trigger1 = Time = GetHitVar(ctrltime)+(numhelper(9292)>0)*2
trigger1 = var(40) = 0
value = 1
[State 155, 3]
type = CtrlSet
trigger1 = Time = floor(GetHitVar(ctrltime)*0.7)+(numhelper(9292)>0)*2
trigger1 = var(40) = 1
value = 1

[State 155, 4]
type = VarSet
trigger1 = 1
sysvar(0) = (pos y >= 0) && (vel y > 0)

[State 155, 5]
type = VelSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = PosSet
trigger1 = sysvar(0)
y = 0

[State 155, 6]
type = ChangeState
triggerall = sysvar(0)
trigger1 = inguarddist
trigger1 = command = "holdback"&&var(59)<=0
value = 130

[State 155, 7]
type = ChangeState
trigger1 = sysvar(0)
value = 52

;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; DRAWGAME (Time over)
[Statedef 175]
type = S
ctrl = 0
velset = 0,0

[State 175, 1] ; If no anim, use go to lose state.
type = ChangeState
trigger1 = Time = 0
trigger1 = !SelfAnimExist(175)
value = 170

[State 175, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 175

[State 175, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; PREINTRO
[Statedef 190]
type = S
ctrl = 0
velset = 0,0

[State 190, 1]
type = ChangeAnim
trigger1 = SelfAnimExist(190)
value = 190

[State 190, 2] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0
value = 191

;---------------------------------------------------------------------------
; INTRO (override this state to give character an intro)
[Statedef 191]
type = S
ctrl = 0

[State 191, 1]
type = ChangeState
trigger1 = Time = 0
value = 0

;---------------------------------------------------------------------------
; HITG_SHAKE
[Statedef 5000]
type    = S
movetype= H
physics = N
velset = 0,0

[State 5000, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(groundtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5001 ;HITG_SLIDE

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5000, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5000, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5000, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITG_SLIDE
[Statedef 5001]
type    = S
movetype= H
physics = S

[State 5001, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5001, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5005 + GetHitVar(animtype) + (GetHitVar(groundtype)=2)*10

[State 5001, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5001, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5001, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5001, 6]
type = ChangeState
trigger1 = HitOver
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HITC_SHAKE
[Statedef 5010]
type    = C
movetype= H
physics = N
velset = 0,0

[State 5010, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = 5020 + GetHitVar(animtype)

[State 5010, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5010, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5010, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5010, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
triggerall = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5010, 6]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0 && !GetHitVar(fall)
value = 5011 ;HITC_SLIDE

[State 5010, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5010, FFB Light]
type = ForceFeedback
trigger1 = anim = 5020
persistent = 0
time = 6
waveform = square

[State 5010, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5021
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5010, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5022
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITC_SLIDE
[Statedef 5011]
type    = C
movetype= H
physics = C

[State 5011, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5011, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
value = 5025 + GetHitVar(animtype)

[State 5011, 3] ;Stop sliding back
type = VelMul
trigger1 = Time >= GetHitVar(slidetime)
x = .6

[State 5011, 4]
type = VelSet
trigger1 = HitOver
x = 0

[State 5011, 5]
type = DefenceMulSet
trigger1 = HitOver
value = 1

[State 5011, 6]
type = ChangeState
trigger1 = HitOver
value = 11
ctrl = 1


;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 5020]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)

[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030

[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 5030

[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square

[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3

[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 5030]
type    = A
movetype= H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5040 ;HITA_RECOV

[State 5030, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 5050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 5035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 5035]
type    = A
movetype= H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 3]
type = ChangeState
triggerall = !HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Animation over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5040 ;HITA_RECOV

[State 5035, 4]
type = ChangeState
triggerall = HitFall
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 5050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_RECOV (recovering in air, not falling)
[Statedef 5040]
type    = A
movetype= H
physics = N

[State 5040, 1]
type = ChangeState
trigger1 = !Alive
value = 5050

[State 5040, 2]
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim != 5040
trigger2 = Time = 0
trigger2 = Anim != 5035
value = 5040

[State 5040, 3]
type = CtrlSet
trigger1 = HitOver
value = 1

[State 5040, 4]
type = StateTypeSet
trigger1 = HitOver
movetype = I

[State 5040, 5]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5040, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 52 ;JUMPLAND

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 5050]
type    = A
movetype= H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 4] ;Recover near ground
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200 ;HITFALL_RECOVER

[State 5050, 5]; Recover in mid air
type = ChangeState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 ;HITFALL_AIRRECOVER


[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 5100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 5070]
type    = A
movetype= H
physics = N
velset = 0,0

[State 5070, 1]
type = ChangeAnim 
trigger1 = 1
value = 5070

[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 5071

[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140

;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 5071]
type    = A
movetype= H
physics = N

[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 15
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 5080]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 5081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 5030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 5081]
type    = L
movetype= H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 5110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 5100]
type    = L
movetype= H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 5110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 9]
type = HitFallDamage
trigger1 = Time = 3

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 5101

[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 5101]
type    = L
movetype= H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 5110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 5110]
type    = L
movetype= H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 4]
type = HitFallDamage
trigger1 = Time = 0

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = ChangeState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine

[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine

;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 5120]
type    = L
movetype= I
physics = N

[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120

[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)

[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0

[State 5120, 3]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime = 0
value = 1

[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime = 0
value = , NT,ST,HT
time = 12

[State 5120, 6] ;Can't be hit right after getting up (short time)
type = NotHitBy
trigger1 = AnimTime = 0
value2 = SCA
time = 5

[State 5120, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; HIT_LIEDEAD
[Statedef 5150]
type    = L
movetype= H
physics = N
sprpriority = -3

[State 5150, 1] ;Normal anim
type = ChangeAnim
triggerall = Time = 0
triggerall = SelfAnimExist(5140)
trigger1 = (anim != [5111,5119]) && (anim != [5171,5179])
trigger2 = !SelfAnimExist(5140 + (anim % 10))
value = 5140

[State 5150, 3] ;Hit up type anim
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (anim = [5111,5119]) || (anim = [5171,5179])
trigger1 = SelfAnimExist(5140 + (anim % 10))
value = 5140 + (anim % 10)

[State 5150, 4] ;Match over anim
type = ChangeAnim
persistent = 0
;trigger1 = Time = 0
trigger1 = MatchOver = 1
trigger1 = Anim = [5140,5149]
trigger1 = SelfAnimExist(anim+10)
value = anim+10

[State 5150, 5] ;Switch to 5110 if liedead anim does not exist
type = ChangeAnim
trigger1 = Time = 0
trigger1 = Anim != [5140,5159]
trigger1 = Anim != [5110,5119]
value = 5110

[State 5150, 6] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

[State 5150, 7] ;Friction
type = VelSet
trigger1 = Vel x < .05
persistent = 0
x = 0

[State 5150, 8]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 0, 0]
type = AssertSpecial
trigger1 = name = "shin"
trigger1 = authorname = "konpeitou"
trigger1 = prevstateno = 3055
trigger2 = name = "SHIN"
trigger2 = authorname = "ahuron"
trigger2 = prevstateno = 2200
flag = invisible

;---------------------------------------------------------------------------
;受身
[Statedef 5200]
Type = A
MoveType = H
Physics = N

[State 5200]
Type = SelfState
Trigger1 = 1
Value = 5210

;---------------------------------------------------------------------------
;受身
[Statedef 5201]
Type = A
MoveType = H
Physics = A
Anim = 5200

[State 5201]
Type = SelfState
Trigger1 = 1
Value = 5210

;---------------------------------------------------------------------------
;受身
[Statedef 5210]
Type = A
MoveType = I
Physics = N
Anim = 5210
Ctrl = 0

[State 5210]
Type = PlaySnd
Trigger1 = Time = 0
Value = s5200,0

[State 5210]
Type = Explod
Trigger1 = Time = 0
ID = 9520
Anim = 9520
Pos = 0,-36
SprPriority = 2
Scale = 0.5,0.5
OwnPal = 1
PauseMoveTime = 999999999
SuperMoveTime = 999999999

[State 5210]
Type = PowerAdd
Trigger1 = Time = 0
Value = 150

[State 5120]
Type = VarAdd
Trigger1 = Time = 0
Trigger1 = Var(16) < 300
V = 16
Value = 20

[State 5210]
Type = PalFX
Trigger1 = Time = 0
Time = 3
Add = 128,128,128

[State 5210]
Type = PosFreeze
Trigger1 = Time = 0

[State 5210]
Type = Turn
Trigger1 = Time = 0
Trigger1 = P2Dist x < -20

[State 5210]
Type = PlaySnd
Trigger1 = Time = 0
Trigger1 = random%3=0
Value = s6,1
Channel = 1

[State 5210]
Type = VelSet
Trigger1 = Time = 4
y = 0.5*Const(Velocity.Jump.y)

[State 5210]
Type = VelSet
TriggerAll = Time = 4
Trigger1 = (Command="holdfwd")*(!Var(59))
x = Const(Velocity.Jump.Fwd.x)

[State 5210]
Type = VelSet
TriggerAll = Time = 4
Trigger1 = (Command!="holdfwd")*(Command!="holdback")*(!Var(59))
x = 0

[State 5210]
Type = VelSet
TriggerAll = Time = 4
Trigger1 = (Command="holdback")*(!Var(59))
x = Const(Velocity.Jump.Back.x)

[State 5210]
Type = NotHitBy
Trigger1 = Time = 5
Value = SCA, NA, SA, HA, NT, ST, HT, NP, SP, HP
Time = 15

[State 5210]
Type = VelAdd
Trigger1 = Time >= 4
y = 0.54

[state a]
type = ctrlset
trigger1 = animelem = 4
value = 1

[State 5210]
Type = ChangeState
TriggerAll = Time > 4
Trigger1 = Vel y > 0
Trigger1 = Pos y >= 0
Value = 52
Ctrl = 1

;---------------------------------------------------------------------------
; Continue?
[Statedef 5500]
type = S
ctrl = 0
anim = 5300
velset = 0,0

[State 5500, 1] ;Use continue animation if available
type = ChangeAnim
trigger1 = time = 0
trigger1 = SelfAnimExist(5500)
value = 5500

;---------------------------------------------------------------------------
; Initialize (at the start of the round)
[Statedef 5900]
type = S

[State 5900, 1] ;Clear all int variables
type = VarRangeSet
trigger1 = roundsexisted = 0
value = 0

[State 5900, 2] ;Clear all float variables
type = VarRangeSet
trigger1 = roundsexisted = 0
fvalue = 0

[State 5900, 3] ;Intro for round 1
type = ChangeState
trigger1 = roundno = 1
value = 190

;---------------------------------------------------------------------------
; HITA_SHAKE
[Statedef 65020]
type    = A
movetype= H
physics = N
velset = 0,0
[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)
[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030
[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type
[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim
[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 65030
[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square
[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3
[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
; HITA_UP (initial going up)
[Statedef 65030]
type    = A
movetype= H
physics = N
ctrl = 0
[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)
[State 5030, 2]
type = HitVelSet
trigger1 = Time < 1
x = 1
y = 1
[State 5030, 4]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 65050 ;HITA_FALL
[State 5030, 5]
type = ChangeState
trigger1 = time>0
trigger1 = AnimTime = 0
value = 65035 ;HITA_UP (transition)
;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 65035]
type    = A
movetype= H
physics = N
[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035
[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)
[State 5035, 4]
type = ChangeState
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 65050 ;HITA_FALL
; HITA_FALL (knocked up, falling)
[Statedef 65050]
type    = A
movetype= H
physics = N
[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050
[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0
[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)
[State 5050, 4] ;Recover near ground
type = null;SelfState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
trigger2 = command="a"||command="b"||command="x"||command="y"
value = 5200 ;HITFALL_RECOVER
[State 5050, 5]; Recover in mid air
type = null;SelfState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
trigger2 = command="a"||command="b"||command="x"||command="y"
value = 5210 ;HITFALL_AIRRECOVER
[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 65100 ;HIT_BOUNCE
;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 65070]
type    = A
movetype= H
physics = N
velset = 0,0
[State 5070, 1]
type = ChangeAnim
trigger1 = 1
value = 5070
[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 65071
[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140
;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 65071]
type    = A
movetype= H
physics = N
[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1
[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)
[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 65110
;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 65080]
type    = L
movetype= H
physics = N
velset = 0,0
[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)
[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10
[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030
[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)
[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 65081 ;HITL_SLIDE
[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 65030 ;HITA_UP
;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 65081]
type    = L
movetype= H
physics = C
[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0
[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1
[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 65110 ;HIT_LIEDOWN
;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 65100]
type    = A
movetype= H
physics = N
[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1
[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0
[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)
[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100
[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)
[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0
[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0
[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75
[State 5100, 7]
type = ChangeState
trigger1 = Time > 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 65110 ;HIT_LIEDOWN
[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10
[State 5100, 9]
type = lifeadd
trigger1 = Time = 2
value = -6
kill = 0
absolute = 1
persistent = 0
[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
[State 5100, 11]
type = PosFreeze
trigger1 = 1
[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 65101
[State 15100]
Type = ChangeState
Trigger1 = Pos Y >= 0
value = 65101
[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20
;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 65101]
type    = A
movetype= H
physics = N
[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = anim != 5075
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160
[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = anim != 5075
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)
[State 5101, 3]
type = null;HitFallVel
trigger1 = Time = 0
[State 5101, 3]
type = VelSet
trigger1 = Time = 0
x = GetHitVar(fall.xvel)*0.5
y = GetHitVar(fall.yvel)*0.5
[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 5;20
[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .385;0.4
[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0;12
type = ChangeState
value = 55110
;
; HITA_SHAKE
[Statedef 55020]
type    = A
movetype= H
physics = N
velset = 0,0
[State 5020, 1] ;Anim for HIT_LIGHT to HIT_HARD
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) != [3,5]
value = ifelse((GetHitVar(airtype) = 1),5000,5010) + GetHitVar(animtype)
[State 5020, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
trigger1 = GetHitVar(animtype) = [3,5]
value = 5030
[State 5020, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type
[State 5020, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim
[State 5020, 5]
type = ChangeState
trigger1 = HitShakeOver
value = 55030
[State 5020, FFB Light]
type = ForceFeedback
trigger1 = anim = 5000
trigger2 = anim = 5010
persistent = 0
time = 6
waveform = square
[State 5020, FFB Medium]
type = ForceFeedback
trigger1 = anim = 5001
trigger2 = anim = 5011
persistent = 0
time = 8
waveform = sinesquare
ampl = 110,-1,-.3
[State 5020, FFB Hard]
type = ForceFeedback
trigger1 = anim = 5012
trigger2 = anim = 5002
trigger3 = anim = 5030
trigger4 = anim = [5051,5059]
persistent = 0
time = 15
waveform = sinesquare
ampl = 140
; HITA_UP (initial going up)
[Statedef 55030]
type    = A
movetype= H
physics = N
ctrl = 0
[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)
[State 5030, 2]
type = HitVelSet
trigger1 = Time < 1
x = 1
y = 1
[State 5030, 4]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0    ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 55050 ;HITA_FALL
[State 5030, 5]
type = ChangeState
trigger1 = time>0
trigger1 = AnimTime = 0
value = 55035 ;HITA_UP (transition)
;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 55035]
type    = A
movetype= H
physics = N
[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035
[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)
[State 5035, 4]
type = ChangeState
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0    ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0     ;No transition anim
trigger4 = Anim != 5035 ;.
value = 55050 ;HITA_FALL
; HITA_FALL (knocked up, falling)
[Statedef 55050]
type    = A
movetype= H
physics = N
[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0     ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050
[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0
[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)
[State 5050, 4] ;Recover near ground
type = SelfState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
trigger2 = command="a"||command="b"||command="x"||command="y"
value = 5200 ;HITFALL_RECOVER
[State 5050, 5]; Recover in mid air
type = SelfState
triggerall = Vel Y > -1
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
trigger2 = command="a"||command="b"||command="x"||command="y"
value = 5210 ;HITFALL_AIRRECOVER
[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 55100 ;HIT_BOUNCE
;---------------------------------------------------------------------------
; HIT_TRIP (shaking)
[Statedef 55070]
type    = A
movetype= H
physics = N
velset = 0,0
[State 5070, 1]
type = ChangeAnim
trigger1 = 1
value = 5070
[State 5070, 2]
type = ChangeState
trigger1 = HitShakeOver
value = 55071
[State 5070, 3]
type = ForceFeedback
trigger1 = time = 0
time = 12
waveform = sinesquare
ampl = 140
;---------------------------------------------------------------------------
; HIT_TRIP2 (fall through air)
[Statedef 55071]
type    = A
movetype= H
physics = N
[State 5071, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1
[State 5071, 2] ;Acceleration
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)
[State 5071, 3] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 55110
;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 55080]
type    = L
movetype= H
physics = N
velset = 0,0
[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse (GetHitVar(yvel) = 0, 5080, 5090)
[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10
[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030
[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)
[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 55081 ;HITL_SLIDE
[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 55030 ;HITA_UP
;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 55081]
type    = L
movetype= H
physics = C
[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1
[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0
[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1
[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 55110 ;HIT_LIEDOWN
;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 55100]
type    = A
movetype= H
physics = N
[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1
[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0
[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
;trigger1 = GetHitVar(fall.yvel) = 0
sysvar(1) = floor(vel y)
[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100
[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)
[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0
[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0
[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75
[State 5100, 7]
type = ChangeState
trigger1 = Time > 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 55110 ;HIT_LIEDOWN
[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
;value = 61
;pos = 0, 0
;under = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10
[State 5100, 9]
type = lifeadd
trigger1 = Time = 2
value = -6
kill = 0
absolute = 1
persistent = 0
[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
[State 5100, 11]
type = PosFreeze
trigger1 = 1
[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 55101
[State 15100]
Type = ChangeState
Trigger1 = Pos Y >= 0
value = 55101
[State 5100, 13]
type = ForceFeedback
trigger1 = Time = 0
waveform = sinesquare
ampl = 128,-3,-.2,.005
time = 20

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 55101]
type    = A
movetype= H
physics = N
[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = anim != 5075
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160
[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = anim != 5075
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)
[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0
[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 10;20
[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .35;0.4
[State 5101, 6] ;Hit ground
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0;12
value = 55110
;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 55110]
type    = L
movetype= H
physics = N
[State 5110, 1]
type = ChangeAnim
persistent = 0
trigger1 = prevstateno = 5071
value = 5075
[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0
[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
triggerall = anim != 5075
triggerall = prevstateno != 5071
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)
[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = anim != 5075
triggerall = prevstateno != 5071
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170
[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = anim != 5075
triggerall = prevstateno != 5071
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)
[State 5110, 4]
type = lifeadd
trigger1 = Time = 2
value = -6
kill = 0
absolute = 1
persistent = 0
[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0
[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)
[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
;value = F7, 0 ;Hit ground
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)
[State 5110, 7]
type = GameMakeAnim
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 10
[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0
[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim != 5075
triggerall = prevstateno != 5071
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)
[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = anim != 5075
triggerall = prevstateno != 5071
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110
[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150
[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = 5075
value = 5150
[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0
[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85
[State 5110, 14]
type = ForceFeedback
trigger1 = alive
trigger1 = Time = 0
time = 8
ampl = 240
waveform = sine
[State 5110, 15]
type = ForceFeedback
trigger1 = !alive
trigger1 = Time = 0
ampl = 200, 7, -.467
time = 30
waveform = sine
[State 5120, 5]
type = NotHitBy
trigger1 = Time>10
value = SCA
time = 1
[State 15110]
Type = ChangeState
TriggerAll=alive
Trigger1 = Time>30
value = 15120
;---------------------------------------------------------------------------
; HIT_GETUP
[Statedef 15120]
type    = L
movetype= I
physics = N
[State 5120,a]
Type = NotHitBy
Trigger1 = 1
value = SCA
time = 1
[State 5120, 1a]
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = 5075
value = 5077
[State 5120, 1a] ;Get up anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != 5075
triggerall = anim != 5077
trigger1 = anim != [5111,5119]
trigger2 = !SelfAnimExist(5120 + (anim % 10))
value = 5120
[State 5120, 1b] ;Get up anim (for hit up/diag-up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != 5075
triggerall = anim != 5077
trigger1 = anim = [5111,5119]
trigger1 = SelfAnimExist(5120 + (anim % 10))
value = 5120 + (anim % 10)
[State 5120, 2]
type = VelSet
trigger1 = Time = 0
x = 0
[State 5120, 4]
type = HitFallSet
trigger1 = AnimTime =0
value = 1
[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime =0
value = ,NT,ST,HT
time = 12
[State 5120, 5] ;Can't be thrown right after getting up
type = NotHitBy
trigger1 = AnimTime =0
value2 = SCA
time = 3
[state 0,0]
type = playerpush
trigger1 = 1
value = 1
[State 5120, 7]
type = SelfState
trigger1 = AnimTime = 0
trigger2 = Time>240
value = 0
ctrl = 1

