;==============================================
; CNS File for Gohan Z2 by Team Z2
; Special and EX moves
;==============================================

;===========================================================================
; <<<<< KI BLAST SHOOTING >>>>>
; LP	= state 1000  >>>>>  state 1001
; MP	= state 1003  >>>>>  state 1004
; HP	= state 1006  >>>>>  state 1007
; EX	= state 1050
;===========================================================================

;Light ki blast 1
[Statedef 1000]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2
poweradd = 35

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(4)=0
var(14) = 0

[State 200, 1];voice
type = PlaySnd
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(3)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .7,.7

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet] ;L fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000200)
var(3) = 1
[State 800, VarSet] ;M fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000210)
var(3) = 2
[State 800, VarSet] ;H fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000220)
var(3) = 3
[State 800, VarSet] ;LVL 1 masenko
type = VarSet
trigger1 = time > 15 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225) 
var(3) = 4
[State 800, VarSet] ;EX fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) ;|| (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 5
[State 800, VarSet] ;LVL 2 masenko
type = VarSet
trigger1 = time > 15 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 6

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<100+(AILevel**2/64.0))
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(random<700,3,IfElse(random<200,2,1))
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy
trigger1 = power>1200+(AILevel**2/64.0) && random<40+(AILevel**2/64.0)
var(3) = 4+random%3

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(4)=0
value = 1007,0

[State 1000, lkb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(4)=0
name = "kiblastL1"
postype = P1
pos = 60,-67
ownpal = 1
stateno = 1010
id = 1010

[State 1000, Lvl 2 Chou Masenko];Lvl 1/2 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 2000
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 1/2 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0


[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 1000
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0

[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 5
value = IfElse(power >=500,1050,1007)
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 1
value = 1001
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 2
value = 1004
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 3
value = 1007
ctrl = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElemTime(6)>=23;20
value = 1000
elem = 7
persistent = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Light ki blast 2
[Statedef 1001]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1001
ctrl = 0
sprpriority = 2
poweradd = 10

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(3)=0
var(14) = 1

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,1
channel = 0

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(3)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .7,.7

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet] ;LVL 1 Masenko
type = VarSet
trigger1 = time > 14 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225)
var(3) = 1
[State 800, VarSet] ;EX Fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) ;|| (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 2
[State 800, VarSet] ;LVL 2 Masenko
type = VarSet
trigger1 = time > 15 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 3

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 14 && numenemy && ceil(random<100+(AILevel**2/64.0))
triggerall = power>=1000
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = 1
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<50+(AILevel**2/64.0))
triggerall = power>=500
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(power>=1000,3,2)

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(3)=0
value = 1007,0

[State 1000, lkb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(3)=0
name = "kiblastL2"
postype = P1
pos = 60,-67  ;-62
ownpal = 1
stateno = 1010
id = 1011

[State 1000, Lvl 2 Chou Masenko];Lvl 2/1 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 2000 ;power>=1000 && var(18)=0
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 2/1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0

[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 1000;power>=1000 && var(18)=0
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0

[State 1000, EX Ki Blast]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 2
triggerall = AnimElem = 4, >= 6
trigger1 = power>=500
value = 1050
ctrl = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElemTime(5)>=20
value = Anim
elem = 6
persistent = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=======================================
;Medium ki blast 1
[Statedef 1003]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2
poweradd = 35

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(4)=0
var(14) = 0

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,0
channel = 0

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(4)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet] ;L fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000200) ;|| NumExplod(90000205)
var(3) = 1
[State 800, VarSet] ;M fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000210) ;|| NumExplod(90000215)
var(3) = 2
[State 800, VarSet] ;H fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000220) ;|| NumExplod(90000225)
var(3) = 3
[State 800, VarSet] ;LVL 1 masenko
type = VarSet
trigger1 = time > 15 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225) 
var(3) = 4
[State 800, VarSet] ;EX fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) ;|| (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 5
[State 800, VarSet] ;LVL 2 masenko
type = VarSet
trigger1 = time > 15 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 6

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<100+(AILevel**2/64.0))
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(random<700,3,IfElse(random<200,2,1))
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy
trigger1 = power>1200+(AILevel**2/64.0) && random<40+(AILevel**2/64.0)
var(3) = 4+random%3

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(4)=0
value = 1007,0

[State 1000, mkb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(4)=0
name = "kiblastM1"
postype = P1
pos = 60,-67
ownpal = 1
stateno = 1011
id = 1013

[State 1000, Lvl 2 Chou Masenko];Lvl 1/2 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 2000
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 1/2 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0


[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 1000
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0




[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 5
value = IfElse(power >=500,1050,1007)
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 1
value = 1001
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 2
value = 1004
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 3
value = 1007
ctrl = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElemTime(6)>=25
value = Anim
elem = 7
persistent = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------
;Medium ki blast 2
[Statedef 1004]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1001
ctrl = 0
sprpriority = 2
poweradd = 10

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(3)=0
var(14) = 1

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,1
channel = 0

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(3)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .8,.8

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet] ;LVL 1 Masenko
type = VarSet
trigger1 = time > 14 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225)
var(3) = 1
[State 800, VarSet] ;EX Fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) ;|| (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 2
[State 800, VarSet] ;LVL 2 Masenko
type = VarSet
trigger1 = time > 15 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 3

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 14 && numenemy && ceil(random<100+(AILevel**2/64.0))
triggerall = power>=1000
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = 1
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<50+(AILevel**2/64.0))
triggerall = power>=500
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(power>=1000,3,2)

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(3)=0
value = 1007,0

[State 1000, mkb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(3)=0
name = "kiblastM2"
postype = P1
pos = 60,-67  ;-62
ownpal = 1
stateno = 1011
id = 1014

[State 1000, Lvl 2 Chou Masenko];Lvl 2/1 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 2000 ;power>=1000 && var(18)=0
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 2/1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0

[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 1000;power>=1000 && var(18)=0
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0

[State 1000, EX Ki Blast]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 2
triggerall = AnimElem = 4, >= 6
trigger1 = power>=500
value = 1050
ctrl = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElemTime(5)>=25
value = Anim
elem = 6
persistent = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;=======================================
;Strong ki blast 1
[Statedef 1006]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2
poweradd = 35

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(4)=0
var(14) = 0

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,0
channel = 0

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(4)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .9,.9

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet] ;L fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000200) ;|| NumExplod(90000205)
var(3) = 1
[State 800, VarSet] ;M fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000210) ;|| NumExplod(90000215)
var(3) = 2
[State 800, VarSet] ;H fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = NumExplod(90000220) ;|| NumExplod(90000225)
var(3) = 3
[State 800, VarSet] ;LVL 1 masenko
type = VarSet
trigger1 = time > 15 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225) 
var(3) = 4
[State 800, VarSet] ;EX fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) ;|| (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 5
[State 800, VarSet] ;LVL 2 masenko
type = VarSet
trigger1 = time > 15 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 6

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<100+(AILevel**2/64.0))
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(random<700,3,IfElse(random<200,2,1))
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy
trigger1 = power>1200+(AILevel**2/64.0) && random<40+(AILevel**2/64.0)
var(3) = 4+random%3

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(4)=0
value = 1007,0

[State 1000, skb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(4)=0
name = "kiblastS1"
postype = P1
pos = 60,-67
ownpal = 1
stateno = 1012
ID = 1016

[State 1000, Lvl 2 Chou Masenko];Lvl 1/2 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 2000
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 1/2 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 6 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0


[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 1000
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0



[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 5
value = IfElse(power >=500,1050,1007)
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 1
value = 1001
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 2
value = 1004
ctrl = 0
[State 1000, 6]
type = ChangeState
triggerall = roundstate = 2
triggerall = AnimElem = 5, >= 11
trigger1 = Var(3) = 3
value = 1007
ctrl = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;------------------------------------
;Strong ki blast 2
[Statedef 1007]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1001
ctrl = 0
sprpriority = 2
poweradd = 10

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
id = 90010006

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !Time
trigger1 = (ifElse(P2DisT x < -12, Facing = 1, Facing = -1))
id = 90010104

[State 220, gethit gut ?]
type = VarSet
trigger1 = AnimElemtime(3)=0
var(14) = 1

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 3,5+random%3
channel = 0

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1001,1
channel = 0

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 3,220+random%9
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(3)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .9,.9

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet] ;LVL 1 Masenko
type = VarSet
trigger1 = time > 14 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225)
var(3) = 1
[State 800, VarSet] ;EX Fireball
type = VarSet
trigger1 = time > 15 && !AILevel
trigger1 = command = "holdfwd"
;trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90010006)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90010104)))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) ;|| (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 2
[State 800, VarSet] ;LVL 2 Masenko
type = VarSet
trigger1 = time > 15 && !AILevel
;trigger1 = ifElse(Facing = 1,(NumExplod(90030101) || NumExplod(90030104)),(NumExplod(90030003) || NumExplod(90030006))) 
trigger1 = ifElse(Facing = 1,(NumExplod(90030006) || NumExplod(90030003)),(NumExplod(90030104) || NumExplod(90030101))) 
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 3

[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 14 && numenemy && ceil(random<100+(AILevel**2/64.0))
triggerall = power>=1000
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = 1
[State 800, VarSet]
type = VarSet
triggerall = AILevel && time > 15 && numenemy && ceil(random<50+(AILevel**2/64.0))
triggerall = power>=500
trigger1 = enemynear,Movetype=H
trigger2 = enemynear,Stateno!=[1000,4999]
var(3) = IfElse(power>=1000,3,2)

[State 200, 1]
type = PlaySnd
trigger1 = AnimElemtime(3)=0
value = 1007,0

[State 1000, skb]
type = Helper
helpertype = normal
trigger1 = AnimElemtime(3)=0
name = "kiblastS2"
postype = P1
pos = 60,-67  ;-62
ownpal = 1
stateno = 1012
id = 1017

[State 1000, Lvl 2 Chou Masenko];Lvl 2/1 Chou Masenko
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 2000 ;power>=1000 && var(18)=0
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 2/1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3 ;2qcb2p
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0

[State 1000, Lvl 1 Chou Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 1000;power>=1000 && var(18)=0
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbp
triggerall = AnimElem = 4, >= 6
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 && var(18)=0 && var(28)=0
value = 2000
ctrl = 0

[State 1000, EX Ki Blast]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 2
triggerall = AnimElem = 4, >= 6
trigger1 = power>=500
value = 1050
ctrl = 0



[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;===========================================================================
; RISING HURRICANE KICK
;
; STATES
;---------------------------------------
; Attack		= state 1100
; Land		= state 1105
; EX		= state 1150
;
; VARS/EXPLODS
;---------------------------------------
; Version Set	= var(9)
; Limiter		= fvar(15)
;===========================================================================
[Statedef 1100]
type = S
movetype = A
physics	= N
ctrl = 0
velset = 0,0
poweradd = 20
sprpriority = 3
juggle = 0

[state 1100, Strength] 
type = varset
trigger1 = !time && !AILevel
var(9) = cond(NumExplod(90000230) || NumExplod(90000235),0,cond(NumExplod(90000240)|| NumExplod(90000245),1,2))
[state 1100, AI Strength]
type = varset
trigger1 = !time && AILevel
var(9) = IfElse(random<100, 0, IfElse(random<350, 1, 2))

[state 1100, strength]
type = changeanim
trigger1 = !time
value = 1100+var(9)

[state 1100, width]
type = width
trigger1 = 1
value = 20,0

[State 1100, VoiceJPN]
type		= null;PlaySnd
triggerall	= var(55)=0		;Voice=Japan
trigger1	= AnimElem=3
value		= 1100,0
channel		= 0
[State 1100, VoiceENG]
type		= null;PlaySnd
triggerall	= var(55)=1		;Voice=English
trigger1	= AnimElem=3
value		= 1100,100+(random%5)
channel		= 0
[State 1100, VoiceCUSTOM]
type		= PlaySnd
;triggerall	= var(55)=2		;Voice=Custom Corey Holland
trigger1	= AnimElem=3
value		= 1500,random%3   ;1100,200
channel		= 0

[State 1100, Aerial state type]
type		= StateTypeSet
trigger1	= AnimElem=4 
statetype	= A
ignorehitpause	= 1

[State 1100, Velocity set]
type		= VelSet
trigger1	= AnimElem = 4
x		= 3
y		= -4.7
ignorehitpause	= 1

[State 1100, Velocity set]
type		= VelSet
trigger1	= AnimElem = 6 && anim = 1100
trigger2	= AnimElem = 12 && anim = 1101
trigger3	= AnimElem = 20 && anim = 1102
x		= 1
ignorehitpause	= 1

[State 1100, Velocity add]
type		= VelAdd
trigger1	= AnimElemtime(6) > 0 && anim = 1100
trigger2	= AnimElemtime(12) > 0 && anim = 1101
trigger3	= AnimElemtime(20) > 0 && anim = 1102
y		= 0.75

[State 1100, 1];Dragon Roar
type		= PlaySnd
trigger1	= AnimElem = 3
trigger2	= AnimElem = 10 && (anim = [1101,1102])
trigger3	= AnimElem = 18 && anim = 1102
value		= 1200,0

[State 1100, 1st Hit]
type		= HitDef
trigger1	= AnimElem = 4
attr		= A, SA
hitflag		= MAF
guardflag	= MA
animtype	= Back
priority	= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (50-30*(var(9)=1)-20*(var(9)=2)) < 7, 7, fvar(11) * (50-30*(var(9)=1)-20*(var(9)=2)))), 6-(var(9)=1)-2*(var(9)=2)
pausetime	= 11,14
guard.pausetime = 10,15
sparkno		= s IfElse(var(9)>=1,7020,7030)
guard.sparkno	= s7000
sparkxy		= -10, -75
hitsound	= s5,IfElse(var(9)>=1,4,5)
guardsound	= S6,0
p2facing	= 1
ground.type	= High
ground.slidetime = 12
ground.hittime	= 12
ground.velocity	= -2.6,-10
air.velocity	= -2.6,-10+1*fvar(15)
fall		= 1
fall.recover	= 0;ifelse(var(9)>=1,0,ifelse(numexplod(1101) < 3,1,0)) ;techable when limiter >= 3
getpower	= IfElse(P2MoveType = H,40,140), 35
givepower	= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5
ID = 1098

[State 1100, 2nd Hit]
type		= HitDef
trigger1	= AnimElem = 11
attr		= A, SA
hitflag		= MAF
guardflag	= MA
animtype	= Back
priority	= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (50-20*(var(9)=2)) < 7, 7, fvar(11) * (50-20*(var(9)=2)))), 6-(var(9)=1)-2*(var(9)=2)
pausetime	= 11,14
guard.pausetime = 10,15
sparkno		= s IfElse(var(9)=2,7020,7030)
guard.sparkno	= s7000
sparkxy		= -10, -75
hitsound	= s5,IfElse(var(9)=2,4,5)
guardsound	= S6,0
p2facing	= 1
ground.type	= High
ground.slidetime = 12
ground.hittime	= 12
ground.velocity	= -2,-10
air.velocity	= -3,ifelse(var(9)=2,-9.5+1*fvar(15),-9.2+1*fvar(15)) ;M version sends lower 
fall		= 1
fall.recover	= 0;ifelse(var(9)=2,0,ifelse(numexplod(1101) < 3,1,0)) ;techable when limiter >= 3
getpower	= IfElse(P2MoveType = H,40,140), 35
givepower	= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5
ID		= 1099

[State 1100, 3rd Hit]
type		= HitDef
trigger1	= AnimElem = 19
attr		= A, SA
hitflag		= MAF
guardflag	= MA
animtype	= Back
priority	= 7, Hit
damage		= Ceil(IfElse(fvar(11) * 40 < 20, 20, fvar(11) * 40)), 6-(var(9)=1)-2*(var(9)=2)
pausetime	= 11,14
sparkno		= s7030
guard.sparkno	= s7000
sparkxy		= -10, -75
hitsound	= s5,5
guardsound	= S6,0
p2facing	= 1
ground.type	= High
ground.slidetime = 12
ground.hittime	= 12
ground.velocity	= -3,-9
air.velocity	= -3,-9.5+1*fvar(15);-9.5 ;launches lower with more uses
fall		= 1
fall.recover	= 0;ifelse(numexplod(1101) < 3,0,1) ;techable when limiter >= 3
getpower	= IfElse(P2MoveType = H,40,140), 35 
givepower	= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5
ID = 1100

;limiter, increasing gravity
[state 0, Limiter]
type = varadd
triggerall = numtarget && movehit
trigger1 = numtarget(1098+var(9))
fvar(15) = 2
persistent = 0
ignorehitpause = 1

;cannot ground recover
[State 0, Explod]
type = Explod
trigger1 = !NumExplod(95052000)
trigger1 = MoveHit = 1 && numexplod(1101) < 3
anim = 1
ID = 95052000
removetime = -1

[State 0, AttackDist]
type = AttackDist
trigger1 = Anim = 1100
trigger1 = AnimElemTime(6) >= 0
trigger2 = Anim = 1101
trigger2 = AnimElemTime(13) >= 0
trigger3 = Anim = 1102
trigger3 = AnimElemTime(20) >= 0
value = 0

[State 1100, 7]
type = ChangeState
Triggerall = AnimElemtime(5) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1105
ctrl = 0

;------------------------------
; Landing

[StateDef 1105]
type = S
MoveType = I
VelSet = 0, 0
Anim = 1105
SprPriority = 2 
ctrl = 0

[state 17100, Landing Effect]
type = explod
trigger1 = !time
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

[State 17100, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 0
persistent = 0

[State 1011, 0]
type = PosSet
trigger1 = !time
y = 0

[State 0, CtrlSet]
type = null;CtrlSet
triggerall = P2MoveType = H && (P2StateNo != [120,155])
trigger1 = PrevStateNo = 1100
trigger1 = Time = 10
trigger2 = PrevStateNo = 1102
trigger2 = Time = 10
trigger3 = PrevStateNo = 1150
trigger3 = Time = 10
value = 1

[State 1011, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 



;===========================================================================
; <<<<< DIVING KICK FLURRY >>>>>
; State : 1200
; Landing : 1201
; Hitting : 1202
;===========================================================================

;Diving Kick Flurry
[StateDef 1200]
type		= A
MoveType		= A
Physics		= N
VelSet		= 0, 0
Anim		= 1200
SprPriority	= 2 
ctrl		= 0
poweradd		= 65

[State 1200, VarSet]; light = 0; medium = 1; heavy = 2
type		= VarSet
trigger1		= Time = 0 && !AILevel
var(9)		= IfElse((ifElse(Facing = 1, NumExplod(90001006),NumExplod(90001104)) && (NumExplod(90000230) || NumExplod(90000235))), 0, IfElse((ifElse(Facing = 1, NumExplod(90001006),NumExplod(90001104)) && (NumExplod(90000240) || NumExplod(90000245))), 1, 2))
[State 1200, VarSet]; for the AI (this may have to be removed)
type		= VarSet
trigger1		= Time = 0 && AILevel
var(9)		= IfElse(P2BodyDist x<70, 0, IfElse((P2BodyDist x=[70,130]), 1, 2))

[State 1200, 2]
type		= VelSet
trigger1		= AnimElem = 4
x		= IfElse(!var(9), 6, IfElse(var(9) = 1, 8.4, 10))
y		= IfElse(!var(9), 11, IfElse(var(9) = 1, 9.6, 8))
ignorehitpause	= 1


[State 1200, VoiceJPN]
type		= PlaySnd
triggerall	= var(55) = 0		;Voice=Japan
trigger1		= AnimElem = 2
value		= 1100,0
channel		= 0
[State 1200, VoiceENG]
type		= PlaySnd
triggerall	= var(55) = 1		;Voice=English
trigger1		= AnimElem = 2
value		= 1100,100+(random%5)
channel		= 0
[State 1200, VoiceCUSTOM]
type		= PlaySnd
triggerall	= var(55) = 2		;Voice=Custom Corey Holland
trigger1		= AnimElem = 2
value		= 1200,1
channel		= 0

[State 1200, Sound effect 1];Dragon Roar
type		= PlaySnd
trigger1		= AnimElem = 2
value		= 1200,0
[State 1200, Sound effect 2]
type		= PlaySnd
trigger1		= AnimElem = 4
value		= 21,1

[State 1200, Hitdef]
type		= HitDef
trigger1		= AnimElemno(0) = [5,6]
attr		= A, SA
hitflag		= MAF
guardflag		= MA
;animtype = hard
priority		= 7, Hit
damage		= Ceil(IfElse(fvar(11) * (20+3*(var(9)=1)+6*(var(9)=2)) < 1, 1, fvar(11) * (20+3*(var(9)=1)+6*(var(9)=2)))), 2+(var(9)=1)+2*(var(9)=2)
;Ceil(IfElse(fvar(11) * (20+3*(var(9)=1)+6*(var(9)=2)) < 7, 7, fvar(11) * (20+3*(var(9)=1)+6*(var(9)=2)))), 2+(var(9)=1)+2*(var(9)=2)
;20+3*(var(9)=1)+6*(var(9)=2),2+(var(9)=1)+2*(var(9)=2)
pausetime		= 11,20
sparkno		= s7030
guard.sparkno	= s7000
sparkxy		= -10, -9
hitsound		= s5,6
guardsound	= S6,0
p2facing		= 1
ground.type	= low
ground.slidetime	= 12
ground.hittime	= 12
ground.velocity	= -2,-9
air.velocity	= -2,-8
;fall = 1
fall.recover	= 0
getpower		= IfElse(P2MoveType = H,40,140), 35
givepower		= 35,35
envshake.time	= 16
envshake.freq	= 60
envshake.ampl	= 4
yaccel		= 0.5
;p1stateno = 1202
persistent	= 0
;snap		= 20,50


[State 1200, TargetBind]
type = TargetBind
trigger1 = MoveHit = 1
time = 1
pos = 5+p2bodydist x, p2bodydist y;60
ignorehitpause = 1
persistent = 0




[State 1200, Fill Destiny Gauge - Hit]
type		= null;VarAdd
trigger1		= fvar(27)>0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 1200, go]
type = VelAdd
trigger1 = AnimElemtime(3) > 0 
Y = 0.5

[State 1200, ChangeState]
type = ChangeState
trigger1 = MoveHit = 1 && Enemy,Movetype = H ;if you write "Target, MoveType = H" you'll get debug flood. :(
value = 1202
ctrl = 0
ignorehitpause = 1
persistent = 0


[State 1200, 7]
type = ChangeState
Triggerall = AnimElemtime(3) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1201
ctrl = 1  

;------------------------------------
;Landing
[StateDef 1201]
type = S
MoveType = I
VelSet = 0, 0
Anim = 1201
SprPriority = 2 
ctrl = 0

[state 17100, Landing Effect]
type = explod
trigger1 = !time
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

[State 17100, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 0
persistent = 0

[State 1011, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1011, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 

;------------------------------------
;Hitting
[StateDef 1202]
type = A
MoveType = A
Physics = N
VelSet = 0, 0
Anim = 1202
SprPriority = 2 
ctrl=0

[State 17100, flurry voice]
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = !time
value = 1202, 2
channel = 0

[State 17100, flurry Sound]
type = PlaySnd
trigger1 = !time
value = 1202, 0

[State 1100, Hit]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 11
trigger4 = AnimElem = 14
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 23
trigger8 = AnimElem = 26
attr = A, SA
hitflag = MAF
guardflag = MA
;animtype = hard
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (3+2*(var(9)=1)+3*(var(9)=2)) < 3, 3, fvar(11) * (3+2*(var(9)=1)+3*(var(9)=2)))), 2+(var(9)=1)+2*(var(9)=2)
;Ceil(IfElse(fvar(11) * (8+2*(var(9)=1)+4*(var(9)=2)) < 7, 7, fvar(11) * (8+2*(var(9)=1)+4*(var(9)=2)))), 2+(var(9)=1)+2*(var(9)=2)
;8+2*(var(9)=1)+4*(var(9)=2),2+(var(9)=1)+2*(var(9)=2)
pausetime = 3,9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20+5*(random%5), -20+(5*random%5)
hitsound = s5,4
guardsound = S6,0
p2facing = 1
ground.type = low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = 0,-9
air.velocity = 0,-8
;fall = 1
fall.recover = 0
getpower = 0,0  ;IfElse(P2MoveType = H,40,140), 35
givepower = 0,0 ;35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit]
type = HitDef
trigger1 = AnimElem = 29
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = diagup
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (10+3*(var(9)=1)+6*(var(9)=2)) < 1, 1, fvar(11) * (20+3*(var(9)=1)+6*(var(9)=2)))), 2+(var(9)=1)+2*(var(9)=2)
;Ceil(IfElse(fvar(11) * (20+3*(var(9)=1)+6*(var(9)=2)) < 7, 7, fvar(11) * (20+3*(var(9)=1)+6*(var(9)=2)))), 2+(var(9)=1)+2*(var(9)=2)
; 20+3*(var(9)=1)+6*(var(9)=2),2+(var(9)=1)+2*(var(9)=2)
pausetime = 11,20
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -48
hitsound = s5,5;s2604,0
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6,-6
air.velocity = -6,-6
fall = 1
fall.recover = 0
getpower = 60,35
givepower = 50,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
persistent = 0

[State 280, go]
type = VelSet
trigger1 = AnimElem = 30
x = -6.75
Y = -7

[State 280, go]
type = VelSet
trigger1 = AnimElem = 36
x = -1

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(30) > 0 
Y = 0.5

[State -2, Explod];State 5052 Twist FX
type = null ;PlaySnd
trigger1 = (AnimElemtime(30) > 0 && AnimElemtime(44) <0)  && !(gametime%10)
value = 5052,0
volume = -100

[State 17100, Dismount Sound]
type = PlaySnd
trigger1 = AnimElemtime(30) = 0
value = 1202, 1

[State 1000, 7]
type = ChangeState
Triggerall = AnimElemtime(32) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1201
ctrl = 0

;------------------------------------
; Hitting, strong
[StateDef 1205]
type = A
MoveType = A
Physics = N
VelSet = 0, 0
Anim = 1205
SprPriority = 2 
ctrl=0

[State 1100, Hit]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 8
trigger3 = AnimElem = 11
trigger4 = AnimElem = 14
trigger5 = AnimElem = 17
trigger6 = AnimElem = 20
trigger7 = AnimElem = 23
trigger8 = AnimElem = 26
attr = A, SA
hitflag = MAF
guardflag = MA
;animtype = hard
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (1+2*(var(9)=1)+4*(var(9)=2)) < 1, 1, fvar(11) * (8+2*(var(9)=1)+4*(var(9)=2)))), 2+(var(9)=1)+2*(var(9)=2)
;Ceil(IfElse(fvar(11) * (8+2*(var(9)=1)+4*(var(9)=2)) < 7, 7, fvar(11) * (8+2*(var(9)=1)+4*(var(9)=2)))), 2+(var(9)=1)+2*(var(9)=2)
; 8+2*(var(9)=1)+4*(var(9)=2),2+(var(9)=1)+2*(var(9)=2)
pausetime = 3,9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20+5*(random%5), -20+(5*random%5)
hitsound = s5,6
guardsound = S6,0
p2facing = 1
ground.type = low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = 0,-9
air.velocity = 0,-8
;fall = 1
fall.recover = 0
getpower = 0,0  ;IfElse(P2MoveType = H,40,140), 35
givepower = 0,0 ;35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit]
type = HitDef
trigger1 = AnimElemno(0) = [31,32]
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = diagup
priority = 7, Hit
damage =  Ceil(IfElse(fvar(11) * (10+3*(var(9)=1)+6*(var(9)=2)) < 1, 1, fvar(11) * (20+3*(var(9)=1)+6*(var(9)=2)))), 2+(var(9)=1)+2*(var(9)=2)
;Ceil(IfElse(fvar(11) * (20+3*(var(9)=1)+6*(var(9)=2)) < 7, 7, fvar(11) * (20+3*(var(9)=1)+6*(var(9)=2)))), 2+(var(9)=1)+2*(var(9)=2)
; 20+3*(var(9)=1)+6*(var(9)=2),2+(var(9)=1)+2*(var(9)=2)
pausetime = 11,20
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -48
hitsound = s2604,0
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6,-6
air.velocity = -6,-6
fall = 1
fall.recover = 0
getpower = 60,35
givepower = 50,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
persistent = 0

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(34) > 0 
Y = 0.5

[State 1000, 7]
type = ChangeState
Triggerall = AnimElemtime(34) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1201
ctrl = 0



;===========================================================================
; <<<<< SLASHING CHOP >>>>>
; Charge state 1 = 1300
; Charge state 2 (when hit) = 1301
; Actual attack = 1302
; Helper for repel = 1305
; Destroyed helper = 1306
; Reflect with random projectile = 1308
; Reflected projectile = 1315
; Reflected projectile explods = 1316
; Custom state when hit by slashing chop max charge = 1320
;===========================================================================

;Focus Strike - charge state 1
;This state covers the charging aspect of the Focus Strike attack at the start.
[Statedef 1300]
type = S
movetype = I
physics = S
juggle = 10
anim = 1300
ctrl = 0
poweradd = 0
velset = 0,0
 
; These next two sctrls cover initial charge value and building it up
[State 900, starting value]
type = VarSet
triggerall = PrevStateNo != 9000
trigger1 =! time
fvar(9) = 0
 
[State 0, HitOverride]
type = HitOverride
triggerall = PrevStateNo != 8452
trigger1 = !Time
attr = SCA, AA,AP   ;SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 1301
time = 1	

[State 900, adding to value]
type = VarAdd
trigger1 = time >= 1
fv = 9
value = 1
persistent = 1 

[State 8000, flash]
type = PalFX
trigger1 = time =10 
add = 40, 30, -40
sinadd = 50,50,50,16
time = 40
 
; These change states control dash cancels and moving into the attack portion
[State 900, dash cancel back]
type = ChangeState
trigger1 = time >= 8 && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001064)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001016)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x>=1)
value = Cond(P2Dist X < -12, 100, 105)
 
[State 900, dash cancel forward]
type = ChangeState
trigger1 = time >= 8 && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001016)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001064)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x<=1) 
value = Cond(P2Dist X < -12, 105, 100)
 
[State 900, stopping early]
type = ChangeState
trigger1 = time >= 8 && command != "holdc" && command !="holdz" && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,inguarddist) || (enemynear, hitdefattr = SCA, NP, SP)
value = 1302
 
[State 900, fully charged]
type = ChangeState
trigger1 = fvar(9)>=60
value = 1302
 
;---------------------------------------------
;Focus Strike - charge state 2
;This state covers the charging aspect of the Focus Strike attack if hit
[Statedef 1301]
type = S
movetype = I
physics = S
juggle = 10
ctrl = 0
poweradd = 0
velset = 0,0
 
; This part covers the after effects of getting hit from earlier.
[state 901, no more saving hit]
type = varset
trigger1 = time = 1
var(20) = 0

[State 8000, flash]
type = PalFX
trigger1 = time =1
add = 40, 30, -40
sinadd = 50,50,50,16
time = 10
 
[State 901, life removal]
type = LifeAdd
trigger1 = time = 1 && !var(20)
value = -(gethitvar(damage))
kill = 1

[State 901, Killed]
type = ChangeState
trigger1 = life <= 0
value = 5950
 
; This ctrl changes the animframe back to the last active one
[State 901, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 1300
elem = var(23)
 
; This varset is the continuation of charging
[State 901, adding to charge]
type = VarAdd
trigger1 = time >= 1
fv = 9
value = 1
persistent = 1
 
; These change states control dash cancels and moving into the attack portion
[State 900, dash cancel back]
type = ChangeState
trigger1 = time >= 8 && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001064)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001016)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x>=1)
value = Cond(P2Dist X < -12, 100, 105)
 
[State 900, dash cancel forward]
type = ChangeState
trigger1 = time >= 8 && (ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001016)) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001064)) && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,vel x<=1) 
value = Cond(P2Dist X < -12, 105, 100)
 
[State 900, stopping early]
type = ChangeState
trigger1 = time >= 8 && command != "holdc" && command !="holdz" && !AILevel
trigger2 = time >= 8 && AILevel>0 && numenemy && (enemynear,inguarddist) || (enemynear, hitdefattr = SCA, NP, SP)
value = 1302
 
[State 901, fully charged]
type = ChangeState
trigger1 = fvar(9)>=60
value = 1302
 
;----------------------------------------
;Focus Attack - actual attack
[Statedef 1302]
type = S
movetype = A
physics = S
juggle = 10
anim = 1301
ctrl = 0
velset = 0,0
 
[State 0, NotHitBy]
type = NotHitBy
trigger1 = !Time
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
;value2 = S,NA
time = 2

;PalFX sctrls; the first removes any earlier stuff, and the second the white flash that appears if you have maxed out focus
[state 901, cancel earlier fx flash]
type = PalFx
trigger1 = time = 0
add = 0,0,0
time = 0
 
[state 901, bright flash if maxed out]
type = PalFx
triggerall = FVar(9) = 60
trigger1 = time = 1
add = 128,128,128
sinadd = -128,-128,-128,32
time = 8

;chop FX
[state 1302, front FX]
type = explod
trigger1 = !time
anim = 1302
sprpriority = 4
postype = P1
pos = 0,0
removetime = -2
[state 1302, back FX]
type = explod
trigger1 = animelem = 3
anim = 1303
sprpriority = 0
postype = P1
pos = 0,0
removetime = -2

[State 1302, voice]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem = 2
value = 3,10
channel = 0

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 1100,104
channel = 0

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 1050,0
channel = 0

[State 1302, 2]
type = PlaySnd
trigger1 = AnimElem = 2 && (FVar(9) < 60)
value = 0,2

[State 1302, 2]
type = PlaySnd
trigger1 = AnimElem = 2 && (FVar(9) = 60)
value = 0,2

[State 4000, Invincible]
type = NotHitBy
trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(8) < 0
value = ,NP, SP

[State 1300, repel helper]
type = helper
trigger1 = AnimElemtime(2) = 0
helpertype = normal
stateno = 1305
ID = 1305
name = "repel"
postype = p1
pos = 50, -40

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(2)=1
anim = 1206+(var(2)=0)
id = 1206
pos = 30,0
postype = P1
sprpriority = -3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
 
;; The hitdef used depends on the how long you've been charging. In case you are wondering why there are 2 versions of each lvl's
; hitdef, the second one has been refined to compensate for hitting air opponents.
; LV 1
[State 902, 0-30]
type = HitDef
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
trigger1 = AnimElem = 2 && (FVar(9) < 60)
attr = S, NA
damage = 32,0
animtype = Hard
guardflag = M
hitflag = M
priority = 4, Hit
pausetime = 9, 9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -17,-73
hitsound   = s5, 5
guardsound = S6,1
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -8.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
fall = (p2movetype=H)
 
[State 902, 0-30]
type = HitDef
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
triggerall = p2statetype = A
trigger1 = AnimElem = 2 && (FVar(9) < 60)
attr = S, NA
damage= 32,0
animtype = Hard
guardflag = A
hitflag = A
priority = 4, Hit
pausetime = 9, 9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -17,-73
hitsound   = s5, 5
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -6.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
fall = (p2movetype=H)
 
;LV 2 MAX 1-limiter
[State 902, max-charge] 
type = HitDef 
triggerall = P2stateno != [5020,5040]
triggerall = p2stateno != [154,155]
triggerall = ifelse(enemy,time <= 10,enemy, prevstateno != 5300,1) ;Checks if the opponent has been in the dizzy state for the past 10 ticks 
triggerall = p2stateno != 5300 ;Checks if the opponent is in the dizzy state
trigger1 = AnimElem = 2 && FVar(9) = 60
attr = S, NA
damage = 59,0
animtype = Hard
;guardflag = MA ;<-- Commented out as you will not be blocking this. This will hurt, and you will fall!
hitflag = MAF
priority = 4, Hit
pausetime = 14, 14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -17,-73
hitsound   = s5, 6
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -4.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
;p2stateno = 1320 ; <- Opponent sent to flying state
ID = 1302
 
; LV 2 MAX
[State 902, max-charge]
type = HitDef
triggerall = AnimElem = 2 && FVar(9) = 60
trigger1 = p2stateno = 5300 ;Checks if the opponent is in the dizzy state
trigger2 = ifelse(enemy,time <= 10,enemy, prevstateno = 5300,0)
trigger3 = NumExplod(1302)
trigger4 = P2MoveType = H 
attr = S, NA
damage = 59,0
animtype = Hard
;guardflag = MA ;<-- Commented out as you will not be blocking this. This will hurt, and you will fall!
hitflag = MAF
priority = 4, Hit
pausetime = 14, 14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -17,-73
hitsound   = s5, 6
guardsound = S6,0
ground.type = Low
ground.slidetime = 20  ;14
ground.hittime  = 20   ;14
ground.velocity = -4.95
guard.slidetime = 18
guard.hittime = 18
guard.ctrltime = 12
airguard.velocity = -3.5,-4
air.type = High
air.velocity = -3.5,-6
air.hittime = 9
getpower = 101,101
givepower = 35,35
ground.cornerpush.veloff = -7.25
air.cornerpush.veloff = 0
yaccel = .55
air.fall = 1
air.juggle = 15
;p2stateno = 1320 ; <- Opponent sent to flying state
ID = 1322
 
[State 902, fvar reset]
type = VarSet
trigger1 = !AnimTime
fvar(9) = 0

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(3) >= 0
value = 0
 
;Dash Cancels upon movecontact
[State 902, dash cancel forward]
type = ChangeState
trigger1 = time >= 8 && movehit && !AILevel;time >= 8 && movecontact && !AILevel
trigger1 = (cond(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001016)) || (cond(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001064))
trigger2 = AILevel>=1 && movehit && random<150
value = Cond(P2Dist X < -12, 105, 100)
ignorehitpause = 1

[State 902, dash cancel back]
type = ChangeState
trigger1 = time >= 8 && movehit && !AILevel;time >= 8 && movecontact && !AILevel
trigger1 = (cond(P2DisT x < -12, Facing = -1, Facing = 1) && NumExplod(90001064)) || (cond(P2DisT x < -12, Facing = 1, Facing = -1) && NumExplod(90001016))
trigger2 = AILevel>=1 && movehit && random<250
value = Cond(P2Dist X < -12, 100, 105)
ignorehitpause = 1
 
[State 1302, TargetState]  ;Limiter state
type = TargetState
triggerall = Numtarget(1322)
trigger1 = movehit = 1
value = 1322
ID = 1322
ignorehitpause = 1
persistent = 0

[State 1302, TargetState]  ;New state
type = TargetState
triggerall = Numtarget(1302)
trigger1 = movehit = 1
value = 1320
ID = 1302
ignorehitpause = 1
persistent = 0

;Focus Limiter 2 Limiter
[State 0, Explod]
type = Explod
trigger1 = !NumExplod(1302)
trigger1 = NumTarget(1302)
anim = 1
ID = 1302
removetime = -1
removeongethit = 1
ignorehitpause = 1

[State 902, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------
;Hit by Focus
[Statedef 1320]
type = A
movetype = H
physics = N
ctrl = 0
velset = 0,0
facep2 = 1
 
[state 1320, changeanim2]
type = changeanim2
trigger1 = !time
value = 651 
ignorehitpause = 1

[state 1320, velset]
type = velset    ;Add this
trigger1 = time = 1
x = -20

[state 1320, ScreenBound]
type = ScreenBound ;Falling out of the screen
trigger1 = !alive
value  = 0

[State 9011, ChangeState]
type = changeState
triggerall = !alive
triggerall = Vel X != 0 ;Update
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1330

[State 9011, ChangeState]
type = changeState
triggerall = alive
triggerall = Vel X != 0 ;Update
trigger1 = BackEdgeBodyDist <= 20
trigger2 = FrontEdgeBodyDist <= 20
value = 1321

;-------------------------------------
;Hit Wall
[Statedef 1321]
type = A
movetype = H
physics = N
velset = 0,0 
ctrl = 0
facep2 = 1

[state 1321, envshake]
type = envshake
trigger1 = !time
time = 10
ampl = 4
freq = 60

[state 1321, changeanim]
type = changeanim
trigger1 = time = 2
value = 5051

[state 1321, changeanim]
type = changeanim 
triggerall = anim = 5051
trigger1 = animtime = -1 ;Freezes opponent in last frame of animation
value = anim
elem = animelemno(0)

[state 1321, velset]
type = velset
trigger1 = time = 3
x = 1
y = -5

[state 1321, veladd]
type = veladd
trigger1 = time >= 3
y = .35

[state 1321, posset]
type = posset
trigger1 = pos y > 0
y = 0


[State 9011, ChangeState]
type = changeState
triggerall = anim = 5051
trigger1 = pos y >= 0 && vel y > 0
value = 5300

;-------------------------------------
;Focus Limiter
[Statedef 1322]
type = A
movetype = H
physics = N
anim = ifelse(selfanimexist(5937),5937,5030)
ctrl = 0
velset = -6, -5
facep2 = 1

[State 0, SelfState]
type = SelfState
trigger1 = Time >= 10
trigger1 = command = "recovery"
value = 5210

[State 0, SelfState]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= -3)
trigger1 = command = "recovery"
value = 5200
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = (Pos Y < 0)
y = 0.55
 
[State 9011, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA
 
[State 9011, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100

;---------------------------------------------------------------------
;Wallbounce Kill
[Statedef 1330]
type = A
movetype = H
physics = N

[State 0, Turn]
type = Turn
trigger1 = FrontEdgeBodyDist <20
persistent = 0

[state 1323, nothitby]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[state 1320, ScreenBound]
type = ScreenBound ;Falling out of the screen
trigger1 = Pos X =[-640,640] 
value  = 0

;----------------Prevent Freezing after Ko----------------------------
[state 1321, envshake]
type = envshake
triggerall = !alive
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
time = 20
ampl = 6
freq = 60
 
[State 182, 1]
type = screenbound
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
movecamera = 0,0
value = 1
 
[State 49999, 1]
type = LifeSet
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
value = 0
 
[State 49999, 1]
type = PosSet
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
y = 9000
 
[State 49999, 5]
type = ChangeAnim2
triggerall = anim != 15999
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
value = 15999
 
[State 182, 1]
type = screenbound
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
movecamera = 0,0
value = 1
 
[State 49999, 1]
type = PosSet
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
y = 9000
 
[State 49999, 5]
type = ChangeAnim2
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
value = 15999
 
[State 9011, ChangeState]
type = ChangeState
triggerall = !IsHelper
triggerall = !alive
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
trigger3 = Time >= 70
value = 5150
     
[State 9011, SelfState]
type = selfState
triggerall = IsHelper
triggerall = !alive
trigger1 = Pos X !=[-640,640]
trigger2 = pos y >= 0 && vel y > 0 
trigger3 = Time >= 70
value = 5150

;===========================================================================
; <<<<< OMNI KICK >>>>>
; Up		= 1400
; Up diagonal	= 1410
; Forward/backward	= 1420
; Down diagonal	= 1430
; Down		= 1430
;===========================================================================

; UP KICK
[Statedef 1400]
type = A
movetype = A
physics = A
anim = 1400
ctrl = 0
sprpriority = 2
juggle = IfElse(p2statetype=A ,3,7)

[State 1010, VarAdd - for 'dmg dampening']
type = VarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 2
ignorehitpause = 1

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 3,4+random%4
channel = 0

[State 200, 1];voice
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 3,104+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 3,220+random%9
channel = 0

[State 650, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 640, 2]
type = HitDef
triggerall = numexplod(1400) < 2 && Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
guardflag = HA
hitflag = MAF
animtype  = Hard
priority = 4,Hit
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-70
hitsound   = s5,9;s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 16
ground.hittime  = 16
ground.velocity = -5,-8
air.velocity = -5,-8
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
pausetime = 10,13
guard.pausetime = 11,12
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
;p2stateno = 1401 ; <- Opponent sent to flying state
id = 1401

[State 0, Explod]
type = Explod
trigger1 = NumExplod(1400)<3
trigger1 = MoveHit = 1
anim = 1
ID = 1400
removetime = -1

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1401
ID = 1401
ignorehitpause = 1
persistent = 0

[State 1211, AllPalFX Destiny mode]
type = null;AllPalFX
triggerall = fvar(27)>0
trigger1 = Movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(5) >= 0
value = 0

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 1405 ;IfElse(vel X >= 0,50,116)
ctrl = 0

;-------------------------------------
;P2 custom state, sent away (Up Omni Kick)

[Statedef 1401]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5937),5937,IfElse(selfanimexist(5052),5052,5030))
ctrl = 0
facep2 = 1

[State 0, NotHitBy]
type = null;NotHitBy
trigger1 = enemy,NumExplod(1400)>1
value = SCA
time = 1

[state 3052] ;pos set if too close to the ground
type = posadd
trigger1 = !time && pos y >= -10
y = -10
persistent = 0

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -2
y = -10
persistent = 0

[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.35
 
[State 9011, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100

;-----------------------------------------
; Falling from Omni Kick

[Statedef 1405]
type    = A
physics = A

[State 0, NotHitBy]
type = null;NotHitBy
trigger1 = enemy,NumExplod(1400)>1
value = SCA
time = 1

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = 1405

;------------------------------------------
; UP FWD KICK
[Statedef 1410]
type = A
movetype = A
physics = A
anim = 1410
ctrl = 0
sprpriority = 2
juggle = IfElse(p2statetype=A ,3,7)

[State 1010, VarAdd - for 'dmg dampening']
type = VarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 3,4+random%4
channel = 0

[State 200, 1];voice
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 3,104+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 3,220+random%9
channel = 0

[State 650, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 640, 2]
type = HitDef
triggerall = numexplod(1400) < 2 && Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
guardflag = HA
hitflag = MAF
animtype  = Hard
priority = 4,Hit
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-70
hitsound   = s5,9;s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7,-6
air.velocity = -7,-6+NumExplod(1411)
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
pausetime = 10,13
guard.pausetime = 11,12
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
;p2stateno = 1411 ; <- Opponent sent to flying state
id = 1411
p2facing = 1

[State 0, Explod]
type = Explod
trigger1 = NumExplod(1400)<3
trigger1 = MoveHit = 1
anim = 1
ID = 1400
removetime = -1

[State 0, Explod]
type = Explod
trigger1 = MoveGuarded = 1
anim = 1
ID = 1411
removetime = -1
persistent = 0

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1411
ID = 1411
ignorehitpause = 1
persistent = 0

[State 1211, AllPalFX Destiny mode]
type = null;AllPalFX
triggerall = fvar(27)>0
trigger1 = Movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(5) >= 0
value = 0

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 1405
ctrl = 0

;-------------------------------------
;P2 custom state, sent away (Up Forward Omni Kick)

[Statedef 1411]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5052),5052,5030)
ctrl = 0
facep2 = 1

[State 0, PlayerPush]
type = PlayerPush
triggerall = p2stateno = 1410
trigger1 = time < 5
value = 0
ignorehitpause = 1
;persistent = 

[state 3052] ;pos set if too close to the ground
type = posadd
trigger1 = !time && pos y >= -10
y = -10
persistent = 0

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -7
y = -7
persistent = 0
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.35
 
[State 0, NotHitBy]
type = NotHitBy
trigger1 = enemy,NumExplod(1400)>1
value = SCA
time = 1
 
[State 9011, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100

;------------------------------------------
; FWD KICK
[Statedef 1420]
type = A
movetype = A
physics = A
anim = 1420
ctrl = 0
sprpriority = 2
juggle = IfElse(p2statetype=A ,2,7)

[State 1010, VarAdd - for 'dmg dampening']
type = VarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 3,220+random%9
channel = 0

[State 650, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 640, 2]
type = HitDef
triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
guardflag = HA
hitflag = MAF
animtype  = Hard
priority = 4,Hit
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-70
hitsound   = s5,9;s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -7,-6
air.velocity = -7,-6
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
pausetime = 10,13
guard.pausetime = 11,12
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5
fall = 1
fall.recover = 0
;p2stateno = 1421 ; <- Opponent sent to flying state
id = 1421
p2facing = 1

[State 0, Explod]
type = Explod
trigger1 = NumExplod(1400)<3
trigger1 = MoveHit = 1
anim = 1
ID = 1400
removetime = -1

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1421
ID = 1421
ignorehitpause = 1
persistent = 0

[State 1211, AllPalFX Destiny mode]
type = null;AllPalFX
triggerall = fvar(27)>0
trigger1 = Movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(5) >= 0
value = 0

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 1405
ctrl = 0

;-------------------------------------
;P2 custom state, sent away (Forward Omni Kick)

[Statedef 1421]
type = A
movetype = H
physics = N
anim = IfElse(selfanimexist(5052),5052,5030)
ctrl = 0
facep2 = 1

[State 0, PlayerPush]
type = PlayerPush
triggerall = p2stateno = 1420
trigger1 = time < 5
value = 0
ignorehitpause = 1
;persistent = 

[state 3052] ;pos set if too close to the ground
type = posadd
trigger1 = !time && pos y >= -10
y = -10
persistent = 0

[State 4005, vel]
type = velset
trigger1 = AnimElemtime(2)=0
x = -10
y = -4
persistent = 0
 
[State 9011, VelAdd]
type = VelAdd
trigger1 = Pos Y < 0
y = 0.35
 
[State 0, NotHitBy]
type = null;NotHitBy
trigger1 = enemy,NumExplod(1400)>1
value = SCA
time = 1
 
[State 9011, ChangeState]
type = SelfState
trigger1 = (Pos Y >= 0) && (Vel Y > 0)
value = 5100

;------------------------------------------
; DOWN FWD KICK
[Statedef 1430]
type = A
movetype = A
physics = A
anim = 1430
ctrl = 0
sprpriority = 2
juggle = IfElse(p2statetype=A ,2,7)

[State 1010, VarAdd - for 'dmg dampening']
type = VarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 620, Only once - explod] ;only once
type = Explod
triggerall = NumTarget
triggerall = !NumExplod(620)
trigger1 = MoveHit && Target,StateNo = 651
anim = 9741	;blank anim
ID = 620
removeongethit = 1
ignorehitpause = 1
removetime = -1
persistent = 0


[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 3,4+random%4
channel = 0

[State 200, 1];voice
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 3,104+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 3,220+random%9
channel = 0

[State 650, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 5

[State 650, 3];opponent on ground
type = HitDef
triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype != A
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,9;s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5

[State 0, Explod]
type = Explod
trigger1 = NumExplod(1400)<3
trigger1 = MoveHit = 1
anim = 1
ID = 1400
removetime = -1

[State 650, 3];Opponent in air sent to custom bounce state
type = HitDef

triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype = A && NumExplod(620) = 0; && var(42)!=1 ;&& var(7)!=2
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (40.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (40.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (40.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (40.0+20.0*(fvar(27)>0)))), 6
;ceil((40.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 11,12
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.35
;p2stateno = 651
id = 651

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 651
ID = 651
ignorehitpause = 1
persistent = 0


[State 650, 3];Opponent in air with bounce juggling limiter
type = HitDef

triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype=A && NumExplod(620)>=1; && var(42)>=1
trigger1 = AnimElem = 4
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5


[State 1211, AllPalFX Destiny mode]
type = null;AllPalFX
triggerall = fvar(27)>0
trigger1 = Movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State varset]
type = VarSet
trigger1 = p2stateno = 651
var(6) = 1

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(5) >= 0
value = 0

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 1405
ctrl = 0

;------------------------------------------
; DOWN KICK
[Statedef 1440]
type = A
movetype = A
physics = A
anim = 1440
ctrl = 0
sprpriority = 2
juggle = IfElse(p2statetype=A ,2,7)

[State 1010, VarAdd - for 'dmg dampening']
type = VarAdd
trigger1 = MoveHit
trigger1 = P2MoveType = H
fvar(13) = 1
ignorehitpause = 1

[State 1440, Only once - explod] ;only once
type = Explod
triggerall = !NumExplod(620)
triggerall = NumTarget
trigger1 = MoveHit && Target,StateNo = 1441
anim = 9741	;blank anim
ID = 620
removeongethit = 1
ignorehitpause = 1
removetime = -1
persistent = 0


[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 3,4+random%4
channel = 0

[State 200, 1];voice
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 3,104+random%4
channel = 0

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 3,220+random%9
channel = 0

[State 650, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5

[State 650, 3];opponent on ground
type = HitDef

triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype != A
trigger1 = AnimElem = 5
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,9;s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5
id = 1440

[State 0, Explod]
type = Explod
trigger1 = NumExplod(1400)<3
trigger1 = MoveHit = 1
anim = 1
ID = 1400
removetime = -1

[State 650, 3];Opponent in air sent to custom bounce state
type = HitDef

triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype = A && NumExplod(620) = 0; && var(42)!=1 ;&& var(7)!=2
trigger1 = AnimElem = 5
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (40.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (40.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (40.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (40.0+20.0*(fvar(27)>0)))), 6
;ceil((40.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 11,12
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.35
;p2stateno = 1441
id = 1441

[State 802, TargetState]
type = TargetState
trigger1 = movehit
trigger1 = numtarget
trigger1 = !(target, ishelper)
value = 1441
ID = 1441
ignorehitpause = 1
persistent = 0


[State 650, 3];Opponent in air with bounce juggling limiter
type = HitDef

triggerall = Var(1) <= 20 && Var(18) = 0 || Var(18) = 1
triggerall = p2statetype=A && NumExplod(620) >= 1; && var(42)>=1
trigger1 = AnimElem = 5
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 7, 7, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
;ceil((60.0+20.0*(fvar(27)>0))/fvar(15)),6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 15,16
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,10
envshake.time = 12
envshake.freq = 60
envshake.ampl = 3
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
getpower= IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
yaccel = 0.5
id = 1442

[State 1211, AllPalFX Destiny mode]
type = null;AllPalFX
triggerall = fvar(27)>0
trigger1 = Movehit
time = 5
color = 0
invertall = 1
ignorehitpause = 1
persistent = 0

[State varset]
type = VarSet
trigger1 = p2stateno = 1441
var(6) = 1

[State 650, Fill Destiny Gauge - Hit]
type		= VarAdd
trigger1		= fvar(27)> 0 && MoveHit
fvar(28)		= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1100
trigger1 = AnimElemTime(6) >= 0
value = 0

[State 1400, Turn]
type = Turn
trigger1 = !animtime

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 1405
ctrl = 0

;------------------------------------------
;P2 going to the ground from Omni Kick Down

[Statedef 1441]
type = S
movetype = H
physics = N
ctrl = 0
sprpriority = -1
velset = 0,0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = enemy,NumExplod(1400)>1
value = SCA
time = 1

[State 3020, 2]
type = changeanim2
trigger1 = !time && anim !=651
value = 651

[State 4005, vel Y]
type = velset
trigger1 = AnimElemtime(2)=0
y = 10
x = -1

[State 3052, Land]
type = changestate
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 652

;------------------------------------------
; DOWN BACK KICK
[Statedef 1450]
type = A
movetype = A
physics = A
ctrl = 0

[State 1400, Turn]
type = Turn
trigger1 = !time

[State 3052, Land]
type = changestate
trigger1 = !time
value = 1430

;------------------------------------------
; BACK KICK
[Statedef 1460]
type = A
movetype = A
physics = A
ctrl = 0

[State 1400, Turn]
type = Turn
trigger1 = !time

[State 3052, Land]
type = changestate
trigger1 = !time
value = 1420

;------------------------------------------
; UP BACK KICK
[Statedef 1470]
type = A
movetype = A
physics = A
ctrl = 0

[State 1400, Turn]
type = Turn
trigger1 = !time

[State 3052, Land]
type = changestate
trigger1 = !time
value = 1410



;===========================================================================
; HURRICANE KICK
;
; STATES
;---------------------------------------
; Attack 			= 1500
; Landing 		= 1501
; L tatsu landing 		= 1502
; Hit by tatsu 		= 1503
; EX 			= 1550
; Hit by EX 		= [1555,1558]
;
; VARS/EXPLODS
;---------------------------------------
; version set 		= var(9)
; limiter 		= explod(1502)
; air version check 	= explod(1501)
;===========================================================================
[Statedef 1500]
type = U
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = 20
sprpriority = 3
juggle = 0

[state 0, width]
type = width
trigger1 = 1
edge = 25,0
player = 20,0

[state 1500, Strength] 
type = varset
trigger1 = !time && !AILevel
var(9) = cond(NumExplod(90000230) || NumExplod(90000235),0,cond(NumExplod(90000240)|| NumExplod(90000245),1,2))
[state 1500, AI Strength]
type = varset
trigger1 = !time && AILevel
var(9) = IfElse(random<100, 0, IfElse(random<350, 1, 2))

[State 1500, strength] ;set anim for strength
type = ChangeAnim
trigger1 = !time
value = 1500+var(9)

[State 1500, Air Version?] ;if done in the air
type = explod
triggerall = numexplod(1501)<1
trigger1 = prevstateno = 50
trigger2 = prevstateno = [600,650]
anim = 1
ignorehitpause = 1
ID = 1501

[State 0, ChangeAnim] ;reduced startup in combos
type = ChangeAnim
trigger1 = !Time
trigger1 = enemynear, MoveType = H
trigger1 = StateType = S
value = 1500+var(9)
elem = 3

[State 0, ChangeAnim] ;reduced startup in air
type = ChangeAnim
trigger1 = !Time
trigger1 = StateType = A
value = 1500+var(9)
elem = 2

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 1500,random%3
channel = 0

[State 220, jump]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 3
x = 4.5
y = ifelse(numexplod(1501),-1.0,-1.7) ;less initial vel for air version
ignorehitpause = 1

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(7) > 0 && anim = 1500
trigger2 = AnimElemtime(11) > 2 && anim = 1501
trigger3 = AnimElemtime(16) > 0 && anim = 1502
Y = 0.32

[State 250, 1];Dragon Roar
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14 && (anim = [1501,1502])
trigger3 = AnimElem = 21 && anim = 1502
value = 1200,0
[State 250, 1];Kick
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14 && (anim = [1501,1502])
trigger3 = AnimElem = 21 && anim = 1502
value = 0, 5

[State 1100, 1st Hit]
type = HitDef
trigger1 = AnimElem = 10
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (30+10*(var(9)=0)+3*(var(9)=1)) < 7, 7, fvar(11) * (30+10*(var(9)=0)+3*(var(9)=1)))), 6
pausetime = 11,14
guard.pausetime = 10,15
sparkno = s IfElse(var(9)>=1,7020,ifelse(numexplod(1502),7020,7030))
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,IfElse(var(9)>=1,4,ifelse(numexplod(1502),4,5))
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -3-2*(anim!=1500),-4
air.velocity = -3-2*(anim!=1500),-3+1*fvar(15) ;-4
guard.velocity = -6
airguard.velocity = -6,-6
guard.hittime = 22
guard.ctrltime = 22
guard.slidetime = 18
fall = 1
fall.recover = ifelse(var(9)>=1,0,1)
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
ID = 1500

[State 1100, 2nd Hit]
type = HitDef
trigger1 = AnimElem = 15 && enemy,statetype != C
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * (30+2*(var(9)=1)) < 7, 7, fvar(11) * (30+2*(var(9)=1)))), 6
pausetime = 11,14
guard.pausetime = 10,15
sparkno = s ifelse(var(9)=2,7020,ifelse(numexplod(1502),7020,7030))
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,IfElse(var(9)=2,4,ifelse(numexplod(1502),4,5))
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -7+2*(anim!=1501),-5.5;-4
air.velocity = -7+2*(anim!=1501),-3+1*fvar(15);-4
guard.velocity = -6
airguard.velocity = -6,-6
guard.hittime = 22
guard.ctrltime = 22
guard.slidetime = 18
fall = 1
fall.recover = ifelse(var(9)=2,0,1)
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
ID = 1501

[State 1100, 3rd Hit]
type = HitDef
trigger1 = AnimElem = 23 && enemy,statetype != C
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 30 < 7, 7, fvar(11) * 30)), 6
pausetime = 11,14
guard.pausetime = 18,15
sparkno = s ifelse(numexplod(1502),7020,7030)
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,ifelse(numexplod(1502),4,5)
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -9,-3
air.velocity = -9,-1+1*fvar(15) ;-2.7
guard.velocity = -6
airguard.velocity = -6,-4
guard.hittime = 22
guard.ctrltime = 22
guard.slidetime = 18
fall = 1
fall.recover = 1
getpower = IfElse(P2MoveType = H,40,140), 35
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
ID = 1502

;limiter, increasing gravity
[state 0, Limiter]
type = varadd
triggerall = numtarget && movehit
trigger1 = numtarget(1500+var(9))
fvar(15) = 2
persistent = 0
ignorehitpause = 1

[state 1501, targetstate]
type = targetstate
triggerall = numtarget
triggerall = !target,ishelper
trigger1 = movehit && !numexplod(1502)
ID = 1500+var(9)
value = ifelse(numexplod(1501),1503,1504) ;Ground version sends to HKD state

[state 0, limiter]
type = explod
triggerall = numtarget && movehit
trigger1 = numtarget(1500+var(9)) && !numexplod(1502)
anim = 1
ID = 1502

[State 650, Fill Destiny Gauge - Hit]
type		= null;VarAdd
trigger1	= fvar(27)> 0 && MoveHit
fvar(28)	= IfElse(fvar(28)+15 > 300, 300-fvar(28), 15)
persistent	= 0
ignorehitpause	= 1

[State 0, AttackDist]
type = AttackDist
trigger1 = Anim = 1500
trigger1 = AnimElemTime(11) >= 0
trigger2 = Anim = 1501
trigger2 = AnimElemTime(16) >= 0
trigger3 = Anim = 1502
trigger3 = AnimElemTime(24) >= 0
value = 0

[state 1500, ctrl]
type = ctrlset
triggerall = !numexplod(1502)
triggerall = numtarget && animelem = 26
trigger1 = movehit && numtarget(1500+var(9))
value = 1

[State 1000]
type = changestate
triggerall = numexplod(1501)
triggerall = movecontact
trigger1 = Vel Y + Pos Y >= 0
trigger1 = animelemtime(5) > 0
value = 52
ctrl = 1

[State 1000, 7]
type = ChangeState
Triggerall = AnimElemtime(5) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1501
ctrl = 0

[State 1000, 7]
type = ChangeState
trigger1 = !AnimTime
value = 50
ctrl = movehit


;------------------------------
; Landing

[StateDef 1501]
type = S
MoveType = I
VelSet = 0, 0
Anim = 1105
SprPriority = 2 
ctrl = 0

[state 1501, Landing Effect]
type = explod
trigger1 = !time
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

[State 1501, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 0
persistent = 0

[State 1501, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1501, Start] ;for light tatsumaki only
type = ChangeState
trigger1 = PrevStateNo = 1500 && var(9) = 0
value = 1502
ctrl = 1 

[State 1501, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 


;------------------------------
; Landing - light tatsumaki

[StateDef 1502]
type = S
MoveType = I
VelSet = 0, 0
Anim = 1105
SprPriority = 2 
ctrl = 0

[state 1501, Landing Effect]
type = explod
trigger1 = !time
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

[State 1501, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 0
persistent = 0

[State 1501, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1501, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 

;-----------------------------------
;P2 Hit by Hurricane Kick

[statedef 1503]
type = A
movetype = H
physics = A
anim = ifelse(selfanimexist(5052),5052,5030)
velset = -5,ifelse(enemy,numexplod(1501),-4,-6) ;checks if Gohan did air tatsu
ctrl = 0
sprpriority = 2

[state 1503, posset] ;so it doesn't break if enemy is too close to ground
type = posset
trigger1 = !time && (pos y + vel y >= 0)
y = pos y - 10

[state 1503, land]
type = changestate
trigger1 = pos y + vel y >= 0
value = 5100
ctrl = 0

;-----------------------------------
;HKD from Ground Hurricane Kick

[statedef 1504]
type = A
movetype = H
physics = A
anim = ifelse(selfanimexist(5052),5052,5030)
velset = -5,ifelse(enemy,numexplod(1501),-4,-6) ;checks if Gohan did air tatsu
ctrl = 0
sprpriority = 2

[state 1503, NotHitBy]
type = nothitby
trigger1 = 1
value = SCA

[state 1503, posset] ;so it doesn't break if enemy is too close to ground
type = posset
trigger1 = !time && (pos y + vel y >= 0)
y = pos y - 10

[state 1503, land]
type = selfstate
trigger1 = AuthorName != "Team Z2" 
trigger1 = pos y + vel y >= 0
value = 5100
ctrl = 0

[state 1503, land]
type = selfstate
trigger1 = AuthorName = "Team Z2" 
trigger1 = pos y + vel y >= 0
value = 5954
ctrl = 0



;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========
;===========| EX MOVES |===========;===========| EX MOVES |===========;===========| EX MOVES |===========

;===========================================================================
; <<<<< EX KI BLAST >>>>>
;===========================================================================

;Ex Ki Blasts
[Statedef 1050]
type    = S
movetype= A
physics = N
juggle  = 7
velset = 0,0
anim = 1000
ctrl = 0
sprpriority = 2
poweradd = -500;IfElse(fvar(27)>0,-250,-500);IfElse(fvar(27)>0,0,-500)

[State 6100, snd]
type = PlaySnd
trigger1 = !time
value = 7,0
channel = 1

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 8000, Train]
type = AfterImage
trigger1 = Time = 0
time = 30
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 800, VarSet]
type = VarSet
trigger1 = !time
var(3) = 0
[State 800, VarSet]
type = VarSet
trigger1 = time > 10
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90032506))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90032404))))
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225)
var(3) = 1
[State 800, VarSet]
type = VarSet
trigger1 = time > 10
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90032506))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90032404))))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 2
[State 800, VarSet]
type = VarSet
trigger1 = time > 10
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90032506))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90032404))))
trigger1 = NumExplod(90000200) || NumExplod(90000205) || NumExplod(90000210) || NumExplod(90000215) || NumExplod(90000220) || NumExplod(90000225)
var(3) = 3
[State 800, VarSet]
type = VarSet
trigger1 = time > 10
trigger1 = ((ifElse(P2DisT x < -12, Facing = -1, Facing = 1) && (NumExplod(90032506))) || (ifElse(P2DisT x < -12, Facing = 1, Facing = -1) && (NumExplod(90032404))))
trigger1 = (ifElse(NumExplod(90000200), 1, 0) + ifElse(NumExplod(90000210), 1, 0) + ifElse(NumExplod(90000220), 1, 0) >= 2) || (ifElse(NumExplod(90000205), 1, 0) + ifElse(NumExplod(90000215), 1, 0) + ifElse(NumExplod(90000225), 1, 0) >= 2)
var(3) = 4
[State 800, VarSet]
type = VarSet
triggerall = fVar(27) >0 && RoundState = 2
triggerall = fvar(28)= [0,300]
trigger1 = time > 10
triggerall = NumExplod(90012602)
triggerall = NumExplod(90000210) && NumExplod(90000240) || NumExplod(90000215) && NumExplod(90000245)
var(3) = 5

[State 220, gethit gut ?]
type = VarSet
trigger1 = anim = 1000
trigger1 = AnimElemtime(4)=0
var(14) = 0

[State 220, gethit gut ?]
type = VarSet
trigger1 = anim = 1001
trigger1 = AnimElemtime(3)=0
var(14) = 1


[State 220, snd]
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = anim = 1000
trigger1 = AnimElem=3
value = 1050,0
channel = 0

[state 1215, Smoke FX]
type = explod
trigger1 = AnimElemtime(3)=0
anim = 1206+(var(2)=0)
id = 1206
pos = -25,3
postype = P1
sprpriority = 3
ownpal = 1
removetime = -2
persistent = 0
ignorehitpause = 1
scale = .7,.7

[State 200, 1]
type = PlaySnd
trigger1 = anim = 1000
trigger1 = AnimElemtime(4)=0
value = 1007,0

[State 200, 1]
type = PlaySnd
trigger1 = anim = 1001
trigger1 = AnimElemtime(3)=0
value = 1008,0

[State 1000, lkb]
type = Helper
helpertype = normal
trigger1 = anim = 1000
trigger1 = AnimElemtime(4)=0
name = "kiblastEX"
postype = P1
pos = 60,-67
ownpal = 1
stateno = 1060
id = 1060

[State 1000, lkb]
type = Helper
helpertype = normal
trigger1 = anim = 1001
trigger1 = AnimElemtime(3)=0
name = "kiblastEX"
postype = P1
pos = 60,-67
ownpal = 1
stateno = 1061
id = 1061

[State 1000, 6]
type = ChangeAnim
trigger1 = anim = 1000
triggerall = AnimElem = 5, >= 5
value = 1001

[State 1000, Relax]
type = StateTypeSet
trigger1 = anim = 1001
trigger1 = AnimElem = 4
movetype = I

[State 0, Emo Exit]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 5
triggerall = AnimElem = 4, >= 6
trigger1 = anim = 1001
value = 3400
ctrl = 0

[State 1000, SDU]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 4
triggerall = AnimElem = 4, >= 6
trigger1 = anim = 1001
trigger1 = power>=1000
value = IfElse(power>=2000, 2200, 2100)
ctrl = 0
[State 1000, SDS]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 3
triggerall = AnimElem = 4, >= 6
trigger1 = anim = 1001
trigger1 = power>=1000
value = 2100
ctrl = 0

[state 1050] ;prevents 2nd ki blast whiffing on thin characters in the corner
type = width
trigger1 = anim = 1001
value = 6,0
persistent = 0

[State 1000, Lvl 1/2 Chou Masenko]  ;this must be fixed
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 2 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 2000;power>=1000 && var(18)=0
value = 2300;IfElse(Power>=2000,2300,2330)
ctrl = 0
[State 1000, Lvl 1/2 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 2 ;2qcb2p
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 ;&& var(18)=0 && var(28)=0
value = IfElse(Power>=2000,2030,2000)
ctrl = 0


[State 1000, Lvl 1 Chou Masenko] ;this must be fixed
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 0 ;Destiny mode
trigger1 = var(18)=0 && power >= 1000;power>=1000 && var(18)=0
value = 2330
ctrl = 0
[State 1000, Lvl 1 Normal Masenko]
type = ChangeState
triggerall = roundstate = 2
triggerall = Var(3) = 1 ;2qcbx/y/z
triggerall = AnimElem = 5, >= 10
triggerall = fvar(27) = 1 ;no Destiny mode
trigger1 = power>=1000 ;&& var(18)=0 && var(28)=0
value = 2000
ctrl = 0

[State 650, Fill Destiny Gauge - Hit - EX]
type = null;VarAdd
trigger1 = fvar(27)>0
fvar(28) = IfElse(fvar(28)+30 > 300, 300-fvar(28), 30);-50;IfElse(fvar(28)+30 > 300, 300-fvar(28), 30)
persistent = 0
ignorehitpause = 1

[State 3000, if Destiny bar = 0]
type = null;VarSet
trigger1 = fvar(28) <= 0
fvar(27) =0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Anim = 1001
trigger1 = AnimElemTime(5)>=15
value = Anim
elem = 6
persistent = 0

[State 1000, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1





;===========================================================================
; <<<<< EX Rising Hurricane KICK >>>>>
; State = 1150
; Anim = 1102
; Land = 1105
;===========================================================================

;EX Rising Hurricane Kick
[Statedef 1150]
type = S
movetype = A
physics = N
ctrl = 0
velset = 0,0
sprpriority = 3
anim = 1102
poweradd = -500

[state 0, anim loop check]
type = varset
trigger1 = !time
var(9) = 0
[state 0]
type = varadd
trigger1 = animelemtime(15)>=0
var(9) = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(9) = 0
trigger1 = AnimElemTime(4)<=1
value = SCA

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = AnimElemTime(15)>=0
value = 1102
elem = 3
persistent = 0

[State 6100, snd]
type = PlaySnd
trigger1 = !time
value = 7,0
channel = 1

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 8000, Train]
type = AfterImage
trigger1 = Time = 0
time = 30
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=3
value = 1100,0
channel = 0

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=3
value = 1100,100+(random%5)
channel = 0

[State 220, snd]
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=3
value = 1500,random%3
channel = 0

[State 220, jump]
type = StateTypeSet
trigger1 = AnimElem=4 
statetype = A
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 3
y = -4.7
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 20
x = 1
ignorehitpause = 1

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(20) > 0
Y = 0.75

[State 250, 1];Aura SFX
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10 && (anim = [1101,1102])
trigger3 = AnimElem = 18 && anim = 1102
value = 1150,0
[State 250, 1];Burst Aura SFX
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10 && (anim = [1101,1102])
trigger3 = AnimElem = 18 && anim = 1102
value = 1150,1

[State 250, 1];Dragon Roar
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10 && (anim = [1101,1102])
trigger3 = AnimElem = 18 && anim = 1102
value = 1200,0
volume = 10
[State 250, 1];Kick
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10 && (anim = [1101,1102])
trigger3 = AnimElem = 18 && anim = 1102
value = 0, 5

[State 1100, Hit]
type = HitDef
trigger1 = NumExplod(1150)<2
trigger1 = AnimElem = 4
trigger2 = AnimElem = 11
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 20 < 7, 7, fvar(11) * 20)), 4
pausetime = 10,13
;pausetime = 6,10
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,5;s5,6
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
;ground.velocity = -2,-9
ground.velocity = -4,-9.7
;air.velocity = -2,-8
air.velocity = -4,-8.7
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, 3rd Hit, more vels]
type = HitDef
trigger1 = NumExplod(1150)<2
trigger1 = AnimElem = 19
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4
pausetime = 19,22
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,6
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
;ground.velocity = -2,-12
;air.velocity = -2,-16
ground.velocity = -3,-9.7
air.velocity = -3,-9.7
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 20
envshake.freq = 80
envshake.ampl = 6
yaccel = 0.5

[State 6100, slowmo woosh snd]
type = PlaySnd
trigger1 = AnimElem = 20 && movehit
value = 2907,0

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(24) >= 0
value = 0

[State 1000, 7]
type = ChangeState
Triggerall = AnimElemtime(5) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1105
ctrl = 0


;===========================================================================
; <<<<< EX DIVING KICK FLURRY >>>>>
; State : 1250
; Landing : 1201
; Hitting : 1251
;===========================================================================

;EX Diving Kick Flurry
[StateDef 1250]
type = A
MoveType = A
Physics = N
VelSet = 0, 0
Anim = 1200
SprPriority = 2 
ctrl=0
poweradd = -500;IfElse(fvar(27)>0,-250,-500)

;Limiter
[State 0, Explod]
type = Explod
trigger1 = NumExplod(2102)<3
trigger1 = !Time
anim = 15999
ID = 2102
bindtime = -1
removeongethit = 1
removetime = -1

[State 6100, snd]
type = PlaySnd
trigger1 = !time
value = 7,0
channel = 1

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 8000, Train]
type = AfterImage
trigger1 = Time = 0
time = 30
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 4
x = 11
y = 9
ignorehitpause = 1

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=0		;Voice=Japan
trigger1 = AnimElem=2
value = 1100,0
channel = 0

[State 220, snd]
type = null;PlaySnd
triggerall = var(55)=1		;Voice=English
trigger1 = AnimElem=2
value = 1100,100+(random%5)
channel = 0

[State 220, snd]
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 1200,1
channel = 0

[State 250, 1];Dragon Roar
type = PlaySnd
trigger1 = AnimElem = 2
value = 1200,0

[State 250, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 21,1

[State 1100, Hit]
type = HitDef
trigger1 = NumExplod(2102)<2
trigger1 = AnimElemno(0) = [5,6]
attr = A, SA
hitflag = MAF
guardflag = MA
;animtype = hard
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 26 < 7, 7, fvar(11) * 26)), 5 
;Ceil(IfElse(fvar(11) * 26 < 7, 7, fvar(11) * 26)), 5 
;26,5
pausetime = 11,20
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -9
hitsound = s5,6
guardsound = S6,0
p2facing = 1
ground.type = low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -2,-9
air.velocity = -2,-8
;fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
;p1stateno = 1251
persistent = 0

[State 1200, TargetBind]
type = TargetBind
trigger1 = MoveHit = 1
time = 1
pos = 5+p2bodydist x, p2bodydist y;60
ignorehitpause = 1
persistent = 0

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(3) > 0 
Y = 0.5

[State 650, Fill Destiny Gauge - Hit - EX]
type		= null;VarAdd
trigger1		= fvar(27)>0 ;&& MoveHit
fvar(28)		= IfElse(fvar(28)+30 > 300, 300-fvar(28), 30);-50;IfElse(fvar(28)+30 > 300, 300-fvar(28), 30)
persistent	= 0
ignorehitpause	= 1

[State 3000, if Destiny bar = 0]
type = null;VarSet
trigger1 = fvar(28) <= 0
fvar(27)=0

[State 1200, ChangeState]
type = ChangeState
trigger1 = MoveHit = 1 && Enemy,Movetype = H
value = 1251
ctrl = 0
ignorehitpause = 1
persistent = 0

[State 1000, 7]	;-Landing- normal landing
type = ChangeState
Triggerall = AnimElemtime(3) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1201
ctrl = 0

;------------------------------------
; Hitting, EX Version1
[StateDef 1251]
type = A
MoveType = A
Physics = N
VelSet = 0, 0
Anim = 1251
SprPriority = 2 
ctrl=0

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 8000, Train]
type = AfterImage
trigger1 = Time = 0
time = 60
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 17100, flurry voice]
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = !time
value = 1202, 2
channel = 0

[State 17100, flurry Sound]
type = PlaySnd
trigger1 = !time
value = 1202, 0

[State 1100, Hit]
type = HitDef
trigger1 = AnimElem = 5
trigger2 = AnimElem = 7
trigger3 = AnimElem = 9
trigger4 = AnimElem = 11
trigger5 = AnimElem = 13
trigger6 = AnimElem = 15
trigger7 = AnimElem = 17
trigger8 = AnimElem = 19
trigger9 = AnimElem = 21
trigger10 = AnimElem = 23
trigger11 = AnimElem = 25
trigger12 = AnimElem = 27
trigger13 = AnimElem = 29
trigger14 = AnimElem = 31
attr = A, SA
hitflag = MAF
guardflag = MA
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 5 < 4, 4, fvar(11) * 5)), 1
pausetime = 3,9
sparkno = s7020
guard.sparkno = s7000
sparkxy = -20+5*(random%5), -20+(5*random%5)
hitsound = s5,4
guardsound = S6,0
p2facing = 1
ground.type = low
ground.slidetime = 12
ground.hittime = 12
ground.velocity = 0,-9
air.velocity = 0,-8
;fall = 1
fall.recover = 0
getpower = 0,0
givepower = 0,0
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit]
type = HitDef
trigger1 = AnimElemno(0) = [35,36]
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Hard;diagup
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 0 < 7, 7, fvar(11) * 20)), 2
;Ceil(IfElse(fvar(11) * 0 < 7, 7, fvar(11) * 20)), 2
;20,2
pausetime = 11,20
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -48
hitsound = s5,6;s2604,0
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -6,-6
air.velocity = -6,-6
fall = 1
fall.recover = 0
getpower = 0,0 ;getpower = 100,35
givepower = 50,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
persistent = 0
id = 1251

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(38) > 0 
Y = 0.5

[State 1251] ;to last hit
type = changestate
trigger1 = animelem = 32
value = 1256

;;------------------------------------
;; Hitting, EX Version2
;[StateDef 1252]
;type = A
;MoveType = A
;Physics = N
;;VelSet = 0, 0
;;Anim = 1251
;SprPriority = 2 
;ctrl=0

;[State 0, ChangeAnim]
;type = ChangeAnim
;trigger1 = Time = 0
;value = 1251
;elem = 33
;;ignorehitpause = 
;persistent = 0


;[State 1100, Hit]
;type = HitDef
;trigger1 = NumExplod(1254)<2
;trigger1 = AnimElemno(0) = [35,36]
;attr = A, SA
;hitflag = MAF
;guardflag = MA
;animtype = Hard;diagup
;priority = 7, Hit
;damage = Ceil(IfElse(fvar(11) * 0 < 7, 7, fvar(11) * 20)), 2
;;Ceil(IfElse(fvar(11) * 0 < 7, 7, fvar(11) * 20)), 2
;;20,2
;pausetime = 11,20
;sparkno = s7030
;guard.sparkno = s7000
;sparkxy = -10, -48
;hitsound = s5,6;s2604,0
;guardsound = S6,0
;p2facing = 1
;ground.type = High
;ground.slidetime = 12
;ground.hittime = 12
;ground.velocity = -6,-6
;air.velocity = -6,-6
;fall = 1
;fall.recover = 0
;getpower = 0,0 ;getpower = 100,35
;givepower = 50,35
;envshake.time = 16
;envshake.freq = 60
;envshake.ampl = 4
;yaccel = 0.5
;persistent = 0
;id = 1251

;[State 802, TargetState]
;type = TargetState
;trigger1 = movehit
;trigger1 = numtarget
;trigger1 = !(target, ishelper)
;value = 1253
;ID = 1251
;ignorehitpause = 1
;persistent = 0

;[State 280, go]
;type = VelAdd
;trigger1 = AnimElemtime(38) > 0 
;Y = 0.5

;[State 1000, 7]	;-Landing- only for EX
;type = ChangeState
;Triggerall = AnimElemtime(38) > 0 
;trigger1 = Vel Y + Pos Y >= 0
;value = 1255
;ctrl = 0

;------------------------------------------
;P2 going to the ground from EX Dive Kick

[Statedef 1253]
type = S
movetype = H
physics = N
ctrl = 0
sprpriority = -1

[state 0, nothitby]
type = nothitby
trigger1 = 1
value = SCA

[state 1253, velset]
type = velset
trigger1 = !time
x = gethitvar(xvel)*facing
y = gethitvar(yvel)

[State 3020, 2]
type = changeanim2
trigger1 = !time && anim !=651
value = 651

[State 4005, vel Y]
type = null;velset
trigger1 = AnimElemtime(2)=0
y = 10
x = -5

[State 3052, Land]
type = selfstate
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5954


;---------------------------------------------------------------------------
;Ground bounce- EX
[Statedef 1254]
type    = L
movetype= H
physics = N
velset = 0,0

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 0, NotHitBy]
type = null;NotHitBy
trigger1 = 1
value = SCA,HA,HP,HT
time = 1

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.5


[State 5100, 5]
type = VelSet
trigger1 = AnimTime = 0
y = -10
x = -2

[State 111, 1]
type = StateTypeSet
trigger1 = AnimTime = 0
physics = A

[State 5100, 12]
type = SelfState
trigger1 = AnimTime = 0
value = 5050

;------------------------------------
;Landing - EX version
[StateDef 1255]
type = S
MoveType = I
VelSet = 0, 0
Anim = 1201
SprPriority = 2 
ctrl = 0

[state 17100, Landing Effect]
type = explod
trigger1 = !time
anim = 17100
id = 17100
pos = 0,0
postype = P1
sprpriority = -3
ownpal = 1
supermovetime = -1

;;Air Dash Forward
;[State -1, Fwd]
;type = ChangeState
;value = 113
;triggerall = !AILevel
;`trigger1 = ifElse(Facing = 1, NumExplod(90001016),NumExplod(90001064))

[State 17100, Landing Sound]
type = PlaySnd
trigger1 = !time
value = 40, 0
persistent = 0

[State 1011, 0]
type = PosSet
trigger1 = !time
y = 0

[State 1011, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1 

;-----------------------------------------------
;EX Dive Kick - Final Hit
[Statedef 1256]
type = A
movetype = A
physics = N
anim = 1441
ctrl = 0
sprpriority = 2

[State 650, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 5

[State 650, 3]
type = HitDef
trigger1 = AnimElem = 5
attr = A, SA
damage = Ceil(IfElse(fvar(11) * (60.0+20.0*(fvar(27)>0)) < 10, 10, fvar(11) * (60.0+20.0*(fvar(27)>0)))), 6
hitflag = MAF
guardflag = HA
animtype = Hard
priority = 4, Hit
pausetime = 17,18
sparkno = s7030
guard.sparkno = s7000
sparkxy = -30,-55
hitsound   = s5,5
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5
air.velocity = -2,15
envshake.time = 12
envshake.freq = 60
envshake.ampl = 4
fall = 1
fall.recover = 0
p2facing = 1
airguard.cornerpush.veloff= 0
air.animtype = Back
fall.animtype = Back
givepower = 35,35
yaccel = 0.5
id = 1442

[state 1256, to HKD]
type = targetstate
trigger1 = numtarget
trigger1 = !target,ishelper
ID = 1442
value = 59510

[State 0, AttackDist]
type = AttackDist
trigger1 = AnimElemTime(6) >= 0
value = 0

[State 1400]
type = statetypeset
trigger1 = animelem = 5
physics = A

[State 1400, Turn]
type = Turn
trigger1 = !animtime

[State 1400, EndState]
type = ChangeState
trigger1 = !animtime
value = 1405
ctrl = 0

;===========================================================================
; <<<<< EX HURRICANE KICK >>>>>
; State = 1550
;===========================================================================

; EX Hurricane Kick
[Statedef 1550]
type = U
movetype = A
physics = N
ctrl = 0
velset = 0,0
poweradd = -500;IfElse(fvar(27)>0,-250,-500)
sprpriority = 3
anim = 1502

[state 0, nothitby] ;projectile invuln
type = nothitby
trigger1 = anim = 1502 && animelemtime(10) < 1
value = SCA,AP
[state 0, hitby]
type = hitby
trigger1 = anim = 1502 && animelemtime(10) < 1
value = SCA,AA

[State 0]
type = explod
triggerall = numexplod(1501)<1
trigger1 = prevstateno = 50
trigger2 = prevstateno = [600,650]
anim = 1
ignorehitpause = 1
ID = 1501

[State 6100, snd]
type = PlaySnd
trigger1 = !time
value = 7,0
channel = 1

[State 8000, flash]
type = PalFX
trigger1 = 1
add = 40, 30, -40
time=1
ignorehitpause = 1

[State 8000, Train]
type = AfterImage
trigger1 = Time = 0
time = 50
palbright = 40,30,-40
palcontrast = 256,206,206
trans = add1
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = enemynear, MoveType = H
trigger1 = StateType = S
value = 1502
elem = 3

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !Time
trigger1 = StateType = A
value = 1502
elem = 2

[State 200, 1];voice
type = PlaySnd
;triggerall = var(55)=2		;Voice=Custom Corey Holland
trigger1 = AnimElem=2
value = 1550,0
channel = 0

[State 220, jump]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
ignorehitpause = 1

[State 1100, 2]
type = VelSet
trigger1 = AnimElem = 3
x = 7
y = -2
ignorehitpause = 1

[State 280, go]
type = VelAdd
trigger1 = AnimElemtime(16) > 0
Y = 0.30

[State 1100, 2]
type = VelMul
trigger1 = AnimElemtime(10) > 0
x = 0.98
;ignorehitpause = 1

[State 250, 1];Aura SFX
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14
trigger3 = AnimElem = 21
value = 1150,0
[State 250, 1];Burst Aura SFX
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14
trigger3 = AnimElem = 21
value = 1150,1

[State 250, 1];Dragon Roar
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14
trigger3 = AnimElem = 21
value = 1200,0
volume = 10
[State 250, 1];Kick
type = PlaySnd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 14
trigger3 = AnimElem = 21
value = 0, 5

[State 0, Width]
type = Width
trigger1 = 1
value = 35,0
ignorehitpause = 1

[State 1100, Hit HK 1]
type = HitDef
trigger1 = AnimElem = 10
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4
;Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4
;35,4
;pausetime = 11,14
pausetime = 6,10
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,5
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -5,-5
air.velocity = -5,-4
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit HK 2]
type = HitDef
trigger1 = AnimElem = 15
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4
;Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4
;35,4
;pausetime = 11,14
pausetime = 6,10
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,5
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -5,-5
air.velocity = -5,-4
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5

[State 1100, Hit HK 3];wall bounce
type = HitDef
triggerall = var(12)=0
trigger1 = AnimElem = 23
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage =  Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4 
;Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4 
;35,4
pausetime = 11,14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,6
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -9,-4
air.velocity = -9,-4
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
p2facing = 1        ;Force to face p1
id = 1555

[State 0, TargetState]  
type = TargetState
trigger1 = Numtarget(1555)
trigger1 = movehit = 1
value = 1555
ID = 1555
ignorehitpause = 1
persistent = 0

[State 1100, Hit HK 3];no bounce
type = HitDef
triggerall = var(12)!=0
trigger1 = AnimElem = 23
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Back
priority = 7, Hit
damage = Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4 
;Ceil(IfElse(fvar(11) * 35 < 7, 7, fvar(11) * 35)), 4 
pausetime = 11,14
sparkno = s7030
guard.sparkno = s7000
sparkxy = -10, -75
hitsound = s5,6
guardsound = S6,0
p2facing = 1
ground.type = High
ground.slidetime = 12
ground.hittime = 12
ground.velocity = -9,-4
air.velocity = -9,-4
fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
envshake.time = 16
envshake.freq = 60
envshake.ampl = 4
yaccel = 0.5
p2facing = 1        ;Force to face p1
id = 1421

[State 0, TargetState]  
type = TargetState
triggerall = numtarget
triggerall = !target,ishelper
trigger1 = Numtarget(1421)
trigger1 = movehit = 1
value = 1421
ID = 1421
ignorehitpause = 1
persistent = 0

[State 1061, No Multi-hit]
type = varset
trigger1 = AnimElem = 23 && movehit
var(12) = 1

[State 650, Fill Destiny Gauge - Hit - EX]
type		= null;VarAdd
trigger1	= fvar(27)>0
fvar(28)	= IfElse(fvar(28)+30 > 300, 300-fvar(28), 30);-50;IfElse(fvar(28)+30 > 300, 300-fvar(28), 30)
persistent	= 0
ignorehitpause	= 1

[State 3000, if Destiny bar = 0]
type = null;VarSet
trigger1 = fvar(28) <= 0
fvar(27)=0

[State 0, AttackDist]
type = AttackDist
;trigger1 = Anim = 1500
trigger1 = AnimElemTime(24) >= 0
value = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = Time <58
trigger1 = Pos Y > -80
Triggerall = AnimElemtime(26) > 1 
value = Anim
elem = 26

[State 1000]
type = changestate
triggerall = numexplod(1501)
triggerall = movehit
trigger1 = Vel Y + Pos Y >= 0 
trigger1 = animelemtime(5) > 0
value = 52
ctrl = 1

[State 1000]
type = changestate
triggerall = movehit
trigger1 = Vel Y + Pos Y >= 0 
trigger1 = animelemtime(5) > 0
value = 1105
ctrl = 0

[State 1000, 7]
type = ChangeState
triggerall = Time <58
triggerall = !movehit
Trigger1 = AnimElemtime(5) > 0 
trigger1 = Vel Y + Pos Y >= 0
value = 1105
ctrl = 0

[State 1000, 7]
type = ChangeState
trigger1 = !AnimTime
value = 50
ctrl = movehit

;------------------
; Hit by EX Hurricane Kick - shaking from the hit
[Statedef 1555]
type    = A
movetype= H
physics = N
velset = 0,0

[State 1555, Anim] ;Custom animation
type = ChangeAnim2
trigger1 = 1
value = 1555

[State 1555, State]
type = ChangeState
trigger1 = HitShakeOver = 1
value = 1556

;------------------
; Hit by EX Hurricane Kick - flying through the air
[Statedef 1556]
type = A
movetype = H
physics = N

[State 1556, Velocity]
type = VelSet
trigger1 = Time = 0
x = gethitvar(xvel)*facing
y = gethitvar(yvel)

[State 1556, Gravity]
type = VelAdd
trigger1 = 1
y = .45

[State 1556, No scroll]
type = ScreenBound
triggerall = time > 10		;to send further
triggerall = Pos y < -15
triggerall = alive
trigger1 = BackEdgeBodyDist < 35
trigger2 = FrontEdgeBodyDist < 35
value = 1
movecamera = 0,1

[State 1330, Wallbounce ko] 
type = ChangeState
triggerall = !alive
trigger1 = BackEdgeBodyDist <= 16
trigger2 = FrontEdgeBodyDist <= 16
value = 1330

[State 1556, Hit wall]
type = ChangeState
triggerall = Pos y < -15
triggerall = alive
trigger1 = BackEdgeBodyDist <= 18
trigger2 = FrontEdgeBodyDist <= 18
value = 1557

[State 1556, Hit ground]
type = SelfState
triggerall = alive
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100

;------------------
; Hit by EX Hurricane Kick - hit wall
[Statedef 1557]
type    = A
movetype= H
physics = N

[State 1557, Turn]
type = Turn
trigger1 = (Time = 0) && (FrontEdgeBodyDist <= 30)

[State 1557, Pos]
type = PosAdd
trigger1 = Time = 0
x = 15 - BackEdgeBodyDist

[State 1557, Stop moving]
type = PosFreeze
trigger1 = 1
x = 1
y = 1

[State 1557, No scroll]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1

[State 1557, Anim]
type = ChangeAnim2
trigger1 = Time = 0
value = 1557

;[State 1557, Sound]
;type = PlaySnd
;trigger1 = Time = 0
;value = F7,0

[State 1557, State]
type = ChangeState
trigger1 = AnimTime = 0
value = 1558

;------------------
; Hit by EX Hurricane Kick - bounce off wall
[Statedef 1558]
type    = A
movetype= H
physics = N

[State 1558, Vel Y]
type = VelSet
trigger1 = Time = 0
y = -6

[State 1558, Vel X]
type = VelSet
trigger1 = Time = 0
x = 1.6

[State 1558, Turn]
type = Turn
trigger1 = (Time = 0) && (BackEdgeDist < 30)

[State 1558, Gravity]
type = VelAdd
trigger1 = 1
y = .35

[State 1028, Anim 5050] ;Self falling animation
type = ChangeAnim
trigger1 = Time = 0
trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1028, Anim 5052] ;Self falling animation (diagup type)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5052)
value = 5052

[State 1028, Anim 5060] ;Coming down - normal
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5050
trigger1 = SelfAnimExist(5060)
persistent = 0
value = 5060

[State 1028, Anim 5062] ;Coming down - diagup type
type = ChangeAnim
trigger1 = Vel Y > -2
trigger1 = Anim = 5052
trigger1 = SelfAnimExist(5062)
persistent = 0
value = 5062

[State 1028, Hit ground]
type = SelfState
trigger1 = (Vel y > 0) && (Pos y >= 0)
value = 5100
