;Var 59まで
;0boolean エリアル判定
;1int バスターのチャージ用
;2int バスター用・そのままちょっぱったんで、いらないなら除外
;3boolean ハイジャンプフラグ
;4boolean ﾃｨｳﾝﾃｨｳﾝ てぃうんしてないならfalse した後はtrue
;5int	サブゲージ・現在の装備武器判定　0は無装備　-1はパワーＭＡＸ　1-*****はそれぞれの武器
;					-2はアクセルフォーム
;6int	サブゲージ　0-3000
;7int	サブゲージ関連・装備武器の最大弾数
;	Helper 0int	サブゲージ・カウンター　１の位
;	Helper 1int	サブゲージ・カウンター１０の位
;8int	特殊武器用var　主に敵判定

;9int FAY418さんが作ってくださった武器ゲットシステム改良版で使用

;10int マスターブレードなどのアーマー技用カウンター

;15int 一つの動作内で完結可能な値・１

;20boolean ＢＧＭ変更中かどうか　1で音楽止めてテーレッテーやらイチローやら流す
;21boolean 勝利演出中かどうか	-3で拾って判定をする

;30int　ストライカー用スイッチ１（アリス）
;31int　ストライカー用スイッチ２（スピリティア）
;32int　ストライカー用スイッチ３（パチュリー）
;33int　ストライカー用スイッチ４（？？？）
;34int　ストライカー用スイッチ５（？？？）

;39boolean ＡＩ用チャージスイッチ　ＡＩ用のショットボタンと考える。これが1の時Xおしっぱ、0の時離したって感じ
;		あるいは、1が押した瞬間で2以降が押しっぱなしってやったほうが良いかもしれませんが、
;		そこらへんは保留。ＡＩ製作者様に処理を委ねます
;以下、持ち越し可能変数
;40boolean ボイスを出すかどうか　詳しくは「Config.st」にて

;41int 北斗七星　次回ラウンド時一個増える
;42boolean 一撃リミッター　1の場合テーレッテー不可

;45int 特定キャラクター確認スイッチ　1 ヤバそうな相手　~　5以降 絶対勝てそうにない相手
;			8　鬼巫女　9　鬼巫女開幕キンクリ

;58int ＡＩレベル　0(ＡＩオフ)〜？？
;59int ＡＩスイッチ

;fvar---------------
;10float 簡易攻撃力補正
;11float マスタースパーク攻撃力補正

;---------------------------------------------------------------------------
; ステイトの解説
; [Statedef STATENO]
; type = ?      S/C/A/L  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｌ：ダウン
; movetype = ?  I/A/H    Ｉ：通常状態/Ａ：攻撃状態/Ｈ：ダメージをくらってる状態
; physics = ?   S/C/A/N  Ｓ：立ち/Ｃ：屈み/Ａ：空中/Ｎ：無し
; juggle = ?             その攻撃に使うジャグル数
;

;====================================================================
;マッチ開始時にVar(0)〜Var(52)までをリセット。
;つまりVar(53)〜Var(59)まではマッチを持ち越せる。
;====================================================================

;------------------------
[Statedef 190000]
type = S
anim = 9999

[State To190]
type = changestate
trigger1 = Time = 301
value = 190

;---------------------------------------------------------------------------
; タイムオーバーで負けた時
[Statedef 170]
type = S
ctrl = 0
anim = 5010;170
velset = 0,0

[State 35030 FINISH];特殊武器２７番装備中に時間切れ
type = ChangeState
trigger1 = var(5) = 27;IWBTG
value = 35270;勝利カウンターが付いてから死ぬのでこのままでもおｋ

[State 170, 1]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 20
value = 1,12
channel = 1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; 勝った動作１
[Statedef 180]
type = S

[State 35030 FINISH];ＦＡＴＡＬ　ＫＯ
type = ChangeState
trigger1 = Prevstateno = 70009
value = 70010
[State 35030 FINISH];ＦＡＴＡＬ　ＫＯ(シン)
type = ChangeState
trigger1 = Prevstateno = 7604
value = 7605

[State 35030 FINISH];特殊武器２７番装備中にフィニッシュ
type = ChangeState
trigger1 = var(5) = 27;IWBTG
value = 35270;勝利カウンターが付いてから死ぬのでこのままでもおｋ
[State 35030 FINISH];特殊武器２１番でフィニッシュ
type = ChangeState
trigger1 = Prevstateno = 35212
value = 35213
[State 35030 FINISH];特殊武器３番でフィニッシュ
type = ChangeState
trigger1 = Prevstateno = 65037
value = 65038

[State 180, 1]
type = ChangeState
trigger1 = MatchOver;
value = 182;勝利音楽

[State 180, 1]
type = ChangeState
triggerall = (100*life/const(data.life)) <= 70
triggerall = (100*life/const(data.life)) > 30
triggerall = Random < 555;やく半分の確立かな
trigger1 = Time = 0
value = 183;フフフフフフフフフ

[State 180, 1]
type = ChangeState
triggerall = (100*life/const(data.life)) <= 70
triggerall = (100*life/const(data.life)) > 30
trigger1 = Time = 0
value = 185;おまえの最期が近づいてきたぜ

[State 180, 1]
type = ChangeState
triggerall = (100*life/const(data.life)) <= 30
trigger1 = Time = 0
value = 184;残念だったなあ

[State 180, 1]
type = ChangeState
triggerall = (100*life/const(data.life)) >70
trigger1 = Time = 0
value = 181;てめえよええなあ

;---------------------------------------------------------------------------
; 勝った動作２
[Statedef 181]
type = S
ctrl = 0
anim = 181;181うでくみ
velset = 0,0

[State *,*];てめーよえーなー
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,33
channel = 1;音声チャンネル
persistent = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;体力普通勝利------------------
[Statedef 183]
type = S
ctrl = 0
anim = 181;181うでくみ
velset = 0,0

[State *,*];ッフフフフフフ
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,30
channel = 1;音声チャンネル
persistent = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;体力普通勝利2------------------
[Statedef 185]
type = S
ctrl = 0
anim = 181;181うでくみ
velset = 0,0

[State *,*];おまえの最期が・・・
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,29
channel = 1;音声チャンネル
persistent = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[state 181, 1];しばらく待ちますよっと
type = assertspecial
trigger1 = time < 200
flag = roundnotover

;体力ぎりぎり勝利------------------
[Statedef 184]
type = S
ctrl = 0
anim = 181;181うでくみ
velset = 0,0

[State *,*];残念だったなあ
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,27
channel = 1;音声チャンネル
persistent = 0

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;大勝利用----------------
[Statedef 182]
type = S
ctrl = 0
anim = -1;900
velset = 0,0

[State *,*];BGMストップ
type = AssertSpecial
;triggerall = Win
trigger1 = 1
flag = nomusic
ignorehitpause = 1

[State *,*]
type = varset
trigger1 = Time = 0
var(20) = 1

[State *,*]
type = varset
trigger1 = Time = 0
trigger1 = NumPartner ;パートナーがいます　Teammodeでの判定は推奨されない？
trigger1 = (partner,name = "MegaMari")
trigger1 = partner,ID < ID
var(20) = 0

[State *,*];メガマリクリア
type = PlaySnd
trigger1 = Time = 0
value = 3,0
channel = 2;BGMチャンネル
persistent = 0

[State *,*];ワープアウト
type = ChangeAnim
trigger1 = Time = 90
value = 900;182;

[State *,*];じゃきいいいいん
type = PlaySnd
trigger1 = Time = 120;
value = 0,31;3,0
channel = 1;SEチャンネル
persistent = 0

[State *,*];ゲットだぜ！
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 120;
value = 1,39;3,0
channel = 0;VCチャンネル
persistent = 0

[State *,*];ワープアウト
type = ChangeAnim
trigger1 = Time = 180;90
value = 182;

[State *,*];ワープアウト
type = PlaySnd
trigger1 = Time = 180;90;
value = 0,32;3,0
channel = 1;SEチャンネル
persistent = 0

[state 181, 1];しばらく待ちますよっと
type = assertspecial
trigger1 = time < 250
flag = roundnotover

;---------------------------------------------------------------------------
; 開始前の動作
[Statedef 191]
type = S

[State 192, 3] 
type = AssertSpecial
trigger1 = 1
flag = Intro

;台詞分岐-----


[State 191, 1];対巨大キャラ
type = ChangeState
trigger1 = enemy,name = "MP-Suika"
trigger2 = enemy,name = "Giant_Mech-HISUI"
trigger3 = enemy,name = "Apocalypse"
value = 19101;でっでけえ

[State 191, 1];対本物とか、あれな人とか
type = ChangeState
trigger1 = enemy,name = "Seto Kaiba"		;現在海馬はいないけど、出た時の為に
trigger2 = enemy,name = "Marisa Kirisame"	;本家的な意味合いで社長って感じ（ワケワカメ
trigger3 = enemy,name = "Bulleta SXP"		;バレッタは
trigger4 = enemy,name = "Baby Bonnie Hood"	;なんか社長って感じなので。;
trigger5 = (enemy,name ="Rugal")||(enemy,name ="Rugal.B")||(enemy,name ="cvsrugal")||(enemy,name ="cvsg_rugal")
trigger6 = (enemy,name ="Omega Rugal")||(enemy,name ="Rugal94(BOSS)")||(enemy,name ="Rugal94")||(enemy,name ="S_Rugal")||(enemy,name ="God Rugal")||(enemy,name ="G Rugal")
						;運送屋！
value = 19102;よう社長

[State 191, 1];対スパイダーマ
type = ChangeState
trigger1 = enemy,name = "SPIDER-MAN"
value = 19103;誰だお前は！

[State 5900, 3] ;対タミフル
type = ChangeState
trigger1 = NumEnemy = 1;敵は一人
trigger1 = enemynear,name="Tamiflu Miko"
trigger2 = NumEnemy >= 2;敵がもう一人いる
trigger2 = enemynear(1),name="Tamiflu Miko";そいつはたみふるだ
trigger2 = enemynear(0),name="Tamiflu Miko";ふたりともたみふるだ
value = 19104;ゴマゴマゴマゴマ

[State 191, 1]
type = ChangeState
triggerall = Random < 555;らんだむで登場を変える、現在はどーでもええのでコメアウト
trigger1 =1
value = 192;わーぷいん

[State 191, 2]
type = ChangeState
triggerall = Random < 777;らんだむで登場を変える、現在はどーでもええのでコメアウト
trigger1 = Time = 0
value = 193;さあ、ゲームの・・・

[State 191, 2]
type = ChangeState
trigger1 = Time = 0
value = 194;邪魔するやつは消すぜ

;ワープイン--------------------
[Statedef 192]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 192, 1] 
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 192, 2]
type = PlaySnd
trigger1 = Time = 40
value = 0, 0

[State 192, 2];いくぜっ！
type = PlaySnd
triggerall = var(40);ボイスＯＫ
;trigger1 = Time = 130
trigger1 = Anim = 190
trigger1 = Animelemtime(35) = 0
value = 1, 0;いきます的せりふ
channel=0;VC

[State 192, 3] 
type = AssertSpecial
trigger1 = 1
flag = Intro
[State Inv]
type = AssertSpecial
trigger1 = Time <= 60;影なし
flag = NoShadow

[State 192, 4] 
type = ChangeState
trigger1 = Anim = 190
trigger1 = AnimTime = 0
value = 0

;---
;さあ、ゲームの始まりだぜ！
[Statedef 193]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 193, 1] 
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 193, 2]
type = PlaySnd
trigger1 = Time = 40
value = 0, 0

[State 193, 2]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
;trigger1 = Time = 130
trigger1 = Anim = 190
trigger1 = Animelemtime(35) = 0
value = 1, 1+ifelse(Random < 555,0,50);いきます的せりふ

[State 193, 3] 
type = AssertSpecial
trigger1 = 1
flag = Intro
[State Inv]
type = AssertSpecial
trigger1 = Time <= 60;影なし
flag = NoShadow

[State 193, 4] 
type = ChangeState
trigger1 = Anim = 190
trigger1 = AnimTime = 0
value = 0

;---
;邪魔する奴は消すぜ
[Statedef 194]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 193, 1] 
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 193, 2]
type = PlaySnd
trigger1 = Time = 40
value = 0, 0

[State 193, 2]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
;trigger1 = Time = 130
trigger1 = Anim = 190
trigger1 = Animelemtime(35) = 0
value = 1, 2;いきます的せりふ

[State 193, 3] 
type = AssertSpecial
trigger1 = 1
flag = Intro
[State Inv]
type = AssertSpecial
trigger1 = Time <= 60;影なし
flag = NoShadow

[State 193, 4] 
type = ChangeState
trigger1 = Anim = 190
trigger1 = AnimTime = 0
value = 0

;で　でけえ-----------
[Statedef 19101]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 192, 3] 
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 193, 1] 
type = ChangeAnim
trigger1 = enemy,name != "Apocalypse"
trigger1 = Time = 100;台詞いわすタイミング
trigger2 = enemy,name = "Apocalypse"
trigger2 = Time = 400;台詞いわすタイミング
value = 5300

[State 193, 2]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = enemy,name != "Apocalypse"
trigger1 = Time = 100
trigger2 = enemy,name = "Apocalypse"
trigger2 = Time = 400
value = 1, 3;でっ・・・

[State 193, 2]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = enemy,name != "Apocalypse"
trigger1 = Time = 130
trigger2 = enemy,name = "Apocalypse"
trigger2 = Time = 430
value = 1, 4;でけえ

[State dekee,F] 
type = ChangeState
trigger1 = enemy,name != "Apocalypse"
trigger1 = Time = 180;おわる時間
trigger2 = enemy,name = "Apocalypse"
trigger2 = Time = 480;おわる時間
value = 0

;よう社長-----------
[Statedef 19102]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State VSBBH]
type = explod
triggerall = Time = 0
triggerall = !Numexplod(7510)
trigger1 = enemy,name = "Bulleta SXP"		;バレッタは
trigger2 = enemy,name = "Baby Bonnie Hood"	;なんか社長って感じなので。
anim = 7510
ID = 7510
postype = left
pos = 0,0
ownpal = 0
bindtime = -1
ignorehitpause = 1
sprpriority = 9;5
ontop = 1
facing = 1;
pausemovetime = 500
supermovetime = 500
scale = 1,1


[State 193, 1] 
type = ChangeAnim
trigger1 = RoundState = 0
value = 190

[State 193, 2]
type = PlaySnd
trigger1 = Time = 40
value = 0, 0

[State 193, 2]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
;trigger1 = Time = 130
trigger1 = Anim = 190
trigger1 = Animelemtime(35) = 0
value = 1, 40;よう社長

[State 193, 3] 
type = AssertSpecial
trigger1 = 1
flag = Intro
flag2 = nobardisplay
[State Inv]
type = AssertSpecial
trigger1 = Time <= 60;影なし
flag = NoShadow


[State Changeanm]
type = ChangeAnim
trigger1 = Anim = 190
trigger1 = AnimTime = 0
value = 0

[State 193, 4] 
type = ChangeState
;trigger1 = Anim = 190
trigger1 = AnimTime = 0
;trigger1 = Time > 130
trigger1 = !Numexplod(7510)
value = 0

;誰だお前は！-----------
[Statedef 19103]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 193, 1] 
type = ChangeAnim
trigger1 = (enemy,stateno = 190)||(enemy,prevstateno = 190)
trigger1 = Time = 160;台詞いわすタイミング
value = 120

[State 193, 2]
type = PlaySnd
trigger1 = (enemy,stateno = 190)||(enemy,prevstateno = 190)
trigger1 = Time = 160
value = 1, 41;誰だお前は！

[State Wait] 
type = AssertSpecial
trigger1 = (enemy,stateno = 190)||(enemy,prevstateno = 190)
trigger1 = 230;おわる時間
flag = intro

[State dekee,F] 
type = ChangeState
trigger1 = (enemy,stateno = 190)||(enemy,prevstateno = 190)
trigger1 = Time = 230;おわる時間
trigger2 = (enemy,stateno != 190)&&(enemy,prevstateno != 190)
trigger2 = Time = 180;
value = 0

;ゴマゴマゴマゴマ-----------
[Statedef 19104]
type = S
movetype= A                      
physics = S                      
ctrl = 0
anim = 191040;あの体勢
velset = 0,0
sprpriority = -1

[State PalFX]
type = PalFX
Trigger1 = Time < 150
time = 1
add = 110,110,110
color = 0;例の動画を再現

[State Hitdef]
type = HitDef
trigger1 = AnimElemTime(2)=0
attr     = SCA, HA
damage = 0, 0                   ;ダメージ量（左が当たった時、右はガードした時）
animtype = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = MA                   ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 7, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 0, 0                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s4000                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -10, -46               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = S0,6                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guardsound = 6, 0                ;ガードした時の音（同上）
ground.type = High               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 5             ;相手が後にすべる時間
ground.hittime  = 12             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -18             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.9,-.8     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = High                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間

[State GuardSound];バスター音でいいっしょ。
Type = PlaySnd
Trigger1 = Time = 150
Value = S0,8
channel = 1;SE

[State goma];ごまごまごまごまごまごま
Type = PlaySnd
Triggerall = Time < 150
Triggerall = (Time+0) % 18 = 0
trigger1 = enemyNear(0),Stateno = [19104,19105];
trigger2 = NumEnemy >= 2
trigger2 = enemyNear(1),Stateno = [19104,19105];
Value = S6,1
channel = 6+ifelse((NumEnemy >= 2)&&(enemyNear(0),Stateno = 19106),1,0);特殊チャンネル
[State goma];ふぉぉぉぉ
Type = PlaySnd
Triggerall = Time < 150
Triggerall = (Time+0) % 10 = 0
trigger1 = enemyNear(0),Stateno = 19106;
trigger2 = NumEnemy >= 2
trigger2 = enemyNear(1),Stateno = 19106;
Value = S6,2
channel = 6;特殊チャンネル
[State goma];ふほほはははは
Type = PlaySnd
Triggerall = Time < 150
Triggerall = (Time+0) % 26 = 0
trigger1 = enemyNear(0),Stateno = 19107;
trigger2 = NumEnemy >= 2
trigger2 = enemyNear(1),Stateno = 19107;
Value = S6,3
channel = 7;特殊チャンネル

[State Voice];
Type = PlaySnd
Trigger1 = Time = 150
Value = S1,5
channel = 0;VC

;エフェクト
[State -1];ちょっとこりたいとこ
type = Explod
trigger1 = Time = 150
postype = p1
pos = 60,-50
anim = 4025
sprpriority = 0

[State Next]
Type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 挑発の動作
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 5
value = 1,47;Ｒｏｃｋｓ
channel=0;vc

[State FUKIDASI]
type = explod
trigger1 = Time = 5
anim = 196
pos = 50,-100
facing = ifelse(facing != -1,1,-1)
ontop = 1
bindtime = -1
removeongethit = 1
pausemovetime = 9999
supermovetime = 9999

[State 195, 1]
type = CtrlSet
trigger1 = Time = 40
value = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 挑発の動作２
[Statedef 196]
type = S
ctrl = 0
anim = 197
velset = 0,0
movetype = I
physics = S
poweradd = -1000                    ;このステートを使った時のパワー増加量(0で変化無し)
sprpriority = 2

[State MUTEKI]
Type     = NotHitBy
Trigger1 = AnimElemTime(9) < 0
Value    = ,NA,SA,NP,SP;通常・必殺攻撃をスルー　投げられたらおしめえだｗ

[State 99999, Voice]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = animelemTime(1) = 0
value = 195,0;ひゅう
channel = 0;VC

[State 99999, Voice]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = animelemTime(3) = 0
trigger2 = animelemTime(4) = 0
trigger3 = animelemTime(5) = 0
trigger4 = animelemTime(6) = 0
trigger5 = animelemTime(7) = 0
trigger6 = animelemTime(8) = 0
value = 195,1;ちっちっち
channel = 0;VC

[State 210, 1]
type = PlaySnd
trigger1 = animelemTime(13) = 0
value = 0,31;

[State 99999, End]
type = ChangeState
trigger1 = animtime = 0;Time > 90
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 立ち・弱・パンチ・の動作
[Statedef 200]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
;Commonly-used controllers:
velset = 0,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 200                       ;このステートで表示するスプライトステート番号(0で変化無し)
poweradd = 20                    ;このステートを使った時のパワー増加量(0で変化無し)
sprpriority = 2                  ;表示した絵の重なり具合(2一番前　0通常　-1奥)

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 18, 0                   ;ダメージ量（左が当たった時、右はガードした時）
animtype = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = MA                   ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 3, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 8, 8                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
guard.dist        = 100             ;相手がガード行動をとる距離
sparkno = s4000                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -10, -46               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = S0,6                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 5             ;相手が後にすべる時間
ground.hittime  = 12             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -4             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.9,-.8     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = High                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間
;getpower = 20, 10

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
;value = 0, 0;弱いパンチ
value = 0, 2;弱いパンチ

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,6;えいっ！
channel = 0;VC

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------
;弱パン派生パンチ
[Statedef 205]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
;Commonly-used controllers:
velset = 3,0                     ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 205                       ;このステートで表示するスプライトステート番号(0で変化無し)
poweradd = 30                  ;このステートを使った時のパワー増加量(0で変化無し)
sprpriority = 2                  ;表示した絵の重なり具合(2一番前　0通常　-1奥)

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 20, 5                   ;ダメージ量（左が当たった時、右はガードした時）
animtype = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = MA                   ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 3, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 8, 8                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s4000                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -10, -46               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = S0,6                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.dist        = 116            ;相手がガード行動をとる距離
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 5             ;相手が後にすべる時間
ground.hittime  = 12             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -4             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.9,-.8     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = High                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間
;getpower = 30, 10

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,ifelse(Random < 500,5,7);りゃ！orふんっ！
channel = 0;VC

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
;value = 0, 0;弱いパンチ
value = 0, 2;弱いパンチ

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------
;205派生パンチ　振り下ろし
[Statedef 230]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
;Commonly-used controllers:
velset = 3,0                    ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 230                       ;このステートで表示するスプライトステート番号(0で変化無し)
poweradd = 70                  ;このステートを使った時のパワー増加量(0で変化無し)
sprpriority = 2                  ;表示した絵の重なり具合(2一番前　0通常　-1奥)

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 24, 5                   ;ダメージ量（左が当たった時、右はガードした時）
animtype = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = MA                   ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 3, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 8, 8                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s4000                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -10, -46               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = S0,6                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.dist        = 100             ;相手がガード行動をとる距離
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 5             ;相手が後にすべる時間
ground.hittime  = 12             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -4             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.9,-.8     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = High                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間
;getpower = 35, 10

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
;value = 0, 0;弱いパンチ
value = 0, 2;弱いパンチ

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,ifelse(Random < 500,5,6);りゃ！orえいっ！
channel = 0;VC

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------
;205派生きっく　ドロップ
[Statedef 235]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
ctrl = 0
velset = 3,0
anim = 255;235
sprpriority = -1

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3;強パン

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 24, 5                   ;ダメージ量（左が当たった時、右はガードした時）
animtype = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = MA                   ;ガードできる状態（ｍaは全ての状態でガード可能）
hitflag = MAF                    ;当てる事のできる条件
priority = 3, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 8, 8                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
guard.dist        = 91             ;相手がガード行動をとる距離
sparkno = s4000                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -10, -46               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = S0,6                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 5             ;相手が後にすべる時間
ground.hittime  = 12             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -4             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.9,-.8     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = High                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間
;getpower = 30, 10

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 300;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,ifelse(Random < 500,5,7);りゃ！orふんっ！
channel = 0;VC

; 下のステートで表示順位を２にして相手より手前にしています。
[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------
;240 マスィブブルーム
[StateDef 240]
Type     = S
MoveType = A
Physics  = S
Ctrl     = 0
Anim     = 240

[State MUTEKI]
Type     = NotHitBy
Trigger1 = AnimElemTime(4) < 0
Value    = SCA

[State SPEED]
type = ChangeAnim
trigger1 = PrevStateNo = 230 || PrevStateNo = 235
trigger1 = time = 0
value = anim
elem = 3
[State SPEED]
type = null;ChangeAnim
trigger1 = PrevStateNo = 230 || PrevStateNo = 235
trigger1 = time = 10;8
value = anim
elem = 4


[State -1, HitDef]
Type = HitDef
Trigger1          = !MoveContACT
Trigger1          = 1
Attr              = S, SA
Damage            = 70, 5			;ダメージ
sparkno = S4006;
hitsound   = S0,5
guardsound = S0,7
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = H				;ガードできる状態
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 8, 16			;ヒット時の硬直時間
guard.dist        = 156             ;相手がガード行動をとる距離
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -40, -90			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 10				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -4,10			;ヒット時の相手の移動 地上
Air.Velocity      = -4,10			;ヒット時の相手の移動 空中
AirGuard.Velocity = -4,10			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0

[State North]
type = VarAdd;当たったら星を奪う
trigger1 = movehit
trigger1 = var(41) < 7
var(41) = 1
persistent=0
ignorehitpause=1

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
;trigger1 = Random < 300;無音にするか、声出すかをランダムで決める
trigger1 = Animelem = 5
value = 1,7;ふんっ！
channel = 0;VC

;[State -1]
;Type     = PlaySnd
;Trigger1 = Time = 20
;Value    = s0, 2

[State -1]
Type     = VelSet
Trigger1 = Time = 19
X        = 7

[State -1]
Type     = EnvShake
Trigger1 = Time = 23
Time     = 10
Freq     = 80
Ampl     = 3
IgnoreHitPause = 1

[State -1]
Type     = ChangeState
Trigger1 = AnimTime = 0
Value    = 0
Ctrl     = 1

;----------
;245 パワースィープ
[StateDef 245]
Type     = S
MoveType = A
Physics  = S
Ctrl     = 0
Anim     = 245

[State MUTEKI]
Type     = NotHitBy
Trigger1 = AnimElemTime(5) < 0
Value    = SCA

[State SPEED]
type = ChangeAnim
trigger1 = PrevStateNo = 230 || PrevStateNo = 235
trigger1 = time = 0
value = anim
elem = 4
[State SPEED]
type = null;ChangeAnim
trigger1 = PrevStateNo = 230 || PrevStateNo = 235
trigger1 = time = 10;8
value = anim
elem = 5

[State -1, HitDef]
Type = HitDef
Trigger1          = !MoveContACT
Trigger1          = 1
Attr              = S, SA
Damage            = 75, 5			;ダメージ
sparkno = S4006;
hitsound   = S0,5
guardsound = S0,7
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
guard.dist        = 193             ;相手がガード行動をとる距離
GuardFlag         = L				;ガードできる状態
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 9, 10			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -30, -5			;エフェクト表示位置
Ground.Type       = Trip			;どこに当たるか 地上
Air.Type          = Trip			;どこに当たるか 空中
Ground.SlideTime  = 10				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -0.5,-7			;ヒット時の相手の移動 地上
Air.Velocity      = -0.5,-7			;ヒット時の相手の移動 空中
AirGuard.Velocity = -0.5,-7			;ヒット時の相手の移動 空中ガード
YAccel            = 0.4
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0

[State North]
type = VarAdd;当たったら星を奪う
trigger1 = movehit
trigger1 = var(41) < 7
var(41) = 1
persistent=0
ignorehitpause=1

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
;trigger1 = Random < 300;無音にするか、声出すかをランダムで決める
trigger1 = Animelem = 6
value = 1,7;ふんっ！
channel = 0;VC

;[State -1]
;Type     = PlaySnd
;Trigger1 = Time = 24
;Value    = s0, 2

[State -1]
Type     = ChangeState
Trigger1 = AnimTime = 0
Value    = 0
Ctrl     = 1

;---------------------------------------------------------------------------
; 強パンチの設定は上とほぼ同じです。
; 違うのはsprpriority（表示順位）が-1になっている事です。
; これでは攻撃を出しても絵は相手の後ろに隠れてしまいます
; これはカンフーマンの強パンチを見れば分かるように奥から手前に手を振っている事を
; 表現するためです、最初は手が相手より奥、振り切った時は相手より手前になる
; 投げの場合もこういうことが必要です（掴んでいるようにみせたりするため）
;立ちキックになりますた
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 40
ctrl = 0
velset = 1.5,0
anim = 210
sprpriority = -1

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3;強パン

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Medium
damage    = 30
guardflag = MA
guard.dist        = 101             ;相手がガード行動をとる距離
pausetime = 12,12
sparkno = S4005;
sparkxy = -10,-50
hitsound   = S0,4
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
air.hittime  = 30
ground.velocity = -5.5;
;ハイジャンプの度合いを変えたので、あわせる
air.velocity = -2.5,-4
;getpower = 30, 10

;[State Explod]
;Type = Explod
;Trigger1 = Movehit
;Trigger1 = AnimElem = 3
;anim = 4006;3003
;sprpriority = 2
;postype = p1
;pos = 32,-51;93,-54
;bindtime = -1
;id = 4006

;[state HIGHJUMP];こいつが当たった時上を押せば追撃で飛ぶ
;type = changestate
;trigger1 = command = "holdup"
;trigger1 = movehit
;value = 40

[State 210, 3]
type = ChangeAnim
trigger1 = AnimElemTime(5) > 0 && AnimElemTime(6) <= 0
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
value = 210
elem = 6

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,6;りゃ！orえいっ！
channel = 0;VC

; 下のステートで表示順位を２にして相手より手前にしています。
[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------
;210派生パンチ　
[Statedef 250]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
;Commonly-used controllers:
velset = 3,0                    ;このステートが始まった時に移動するか（0,0で動かない）
ctrl = 0                         ;このステート中に他のコマンドを受け付けるか(1で受け付ける)
anim = 250                       ;このステートで表示するスプライトステート番号(0で変化無し)
poweradd = 50                  ;このステートを使った時のパワー増加量(0で変化無し)
sprpriority = 2                  ;表示した絵の重なり具合(2一番前　0通常　-1奥)

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 25, 5                   ;ダメージ量（左が当たった時、右はガードした時）
animtype = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = MA                   ;ガードできる状態（ｍaは全ての状態でガード可能）
guard.dist        = 111             ;相手がガード行動をとる距離
hitflag = MAF                    ;当てる事のできる条件
priority = 3, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 8, 8                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s4000                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -10, -46               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = S0,6                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 5             ;相手が後にすべる時間
ground.hittime  = 12             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -4             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.9,-.8     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = High                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間
;getpower = 20, 10

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,5;りゃ！
channel = 0;VC

[State 200, 1]
type = PlaySnd
trigger1 = Time = 1
;value = 0, 0;弱いパンチ
value = 0, 2;弱いパンチ

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------
;210派生きっく　
[Statedef 255]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 3,0
anim = 235
sprpriority = -1

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3;強パン

[State 200, 1]
type = HitDef
trigger1 = AnimElem = 3
attr = S, NA                     ;立ち状態で、通常の攻撃(ｓは立ち、ｎは通常、aは攻撃を表す)
damage = 25, 5                   ;ダメージ量（左が当たった時、右はガードした時）
animtype = Light                 ;当てた時の相手のポーズ（light/midium/hard/back）から選択
guardflag = MA                   ;ガードできる状態（ｍaは全ての状態でガード可能）
guard.dist        = 91             ;相手がガード行動をとる距離
hitflag = MAF                    ;当てる事のできる条件
priority = 3, Hit                ;攻撃の優先権（0弱い　4通常　7強い
pausetime = 8, 8                 ;攻撃が当たった時の硬直時間（左が自分、右が相手）
sparkno = s4000                      ;ヒットエフェクトのスプライトステート（無ければ0）
sparkxy = -10, -46               ;ヒットエフェクトを表示する場所（相手の座標で）
hitsound = S0,6                 ;ヒットした時の音（ｓ*,*にすると自分の音を使う）
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High               ;相手のくらった場所（High：頭、体, Low：足, Trip：足払い）
ground.slidetime = 5             ;相手が後にすべる時間
ground.hittime  = 12             ;コンボが繋がる時間（高くしすぎない事）
ground.velocity = -4             ;地上で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
airguard.velocity = -1.9,-.8     ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.type = High                  ;空中で相手がくらった場所（上と同じ）
air.velocity = -1.4,-3           ;空中で攻撃をくらった場合の相手の移動状況（ｘとｙで小数点可）
air.hittime = 12                 ;空中でコンボが繋がる時間
;getpower = 25, 10

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,ifelse(Random < 500,7,6);ふん！orえいっ！
channel = 0;VC

; 下のステートで表示順位を２にして相手より手前にしています。
[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------
;ヒップアタック
[StateDef 260]
Type     = S
MoveType = A
Physics  = S
Ctrl     = 0
Anim     = 260

[State Counter]
type = varset
trigger1 = 1
var(10) = 0

[State -1]
Type     = PlaySnd
Trigger1 = Time = 10;17
Trigger1 = Random < 333
Value    = s1, 6;えいっ！
channel = 0;VC

[State -1]
Type     = ChangeState
Trigger1 = Time >= 16;12
Value    = 261;1003
;----------
;ヒップアタック
[StateDef 261]
Type     = A
MoveType = A
Physics  = N
Ctrl     = 0

[State sheald];ナゼカシールドエフェクト
type = Explod
trigger1 = Time = 0
trigger1 = !numexplod(261)
postype = p1
pos = 40,-38
removetime = 15
bindtime = -1
anim = 4025
id = 261
ignorehitpause = 1
sprpriority = 2
removeongethit = 1
pausemovetime = 9999
supermovetime = 9999

[State -1, HitDef]
Type = HitDef
Trigger1          = !MoveContACT
Trigger1          = 1
Attr              = A, SA
;Damage            = 55, 5			;ダメージ
Damage            = 5, 5			;ダメージ
sparkno = S4006;
hitsound   = S0,5
guardsound = S0,7
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist        = 75             ;相手がガード行動をとる距離
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 9, 10			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
guard.sparkno = S4023
guardsound = S0,7;S6,0
Sparkxy           = 0, -40			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 10				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -7,-3.5			;ヒット時の相手の移動 地上
Air.Velocity      = -6,-4			;ヒット時の相手の移動 空中
AirGuard.Velocity = -6,-4			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0

[State sousai]
type = HitOverRide
trigger1 = 1
time = 1
;attr = SCA,NP,SP;必殺までの飛び道具を突き抜けて攻撃
attr = SCA,AP;カイザーウェイブすらかき消しそうな脅威のダイナマイツ
slot = 0
stateno = 261

;[State -1]
;Type      = StateTypeSet
;Trigger1  = var(10) = 12;17
;StateType = A

[State -1]
Type     = VelSet
Trigger1 = var(10) >= 0;12;17
X        = 6

[State -1]
Type     = VelSet
Trigger1 = var(10) = 0;12;17
Y        = -3

[State -1]
Type     = VelAdd
Trigger1 = var(10) >= 0;12;17
Y        = .3

[State -1]
Type     = ChangeState
Trigger1 = Time >= 4;16;20
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value    = 262;1003


[State Counter]
type = varadd
trigger1 = 1
var(10) = 1

;----------
;ヒップ着地
[StateDef 262]
Type     = S
Physics  = S
Ctrl     = 0
Anim     = 641
VelSet   = 0,0

[State remeff]
type = RemoveExplod
trigger1 = numexplod(261)
id = 261

[State -1]
Type     = PlaySnd
Trigger1 = Time = 0
Value    = s0, 35

[State -1]
Type     = PosSet
Trigger1 = Time = 0
Y        = 0

[State -1]
Type     = ChangeState
Trigger1 = AnimTime = 0
Value    = 0
Ctrl     = 1

;-------------------------------------
;横キック-----------------------------
[Statedef 215]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 1004;210
sprpriority = -1

[State 210, Width]
type = Width
trigger1 = (AnimElemTime (2) >= 0) && (AnimElemTime (7) < 0)
value = 15,0

[State 210, 1]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3;

[State 210, 2]
type = HitDef
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Up;Medium
damage    = 45
guardflag = MA
guard.dist        = 118             ;相手がガード行動をとる距離
pausetime = 12,12
sparkno = S4004;S4000;エリアルエフェクト＋ヒット強
sparkxy = -10,-50
hitsound   = S0,4
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = Low;High
ground.slidetime = 12
ground.hittime  = 15
air.hittime  = 30
ground.velocity = 0,-12;-15;-5.5;y座標に向けてでかい値を入れれば。だいたい15~16みたい
;ハイジャンプの度合いを変えたので、あわせる
air.velocity = 0,-13;-15;-2.5,-4
yaccel = 0.6
p2stateno = 6100;エリアルふっとばし

[State Explod]
Type = Explod
Trigger1 = Movehit
Trigger1 = HitPauseTime = 1
anim = 4006;3003
;sprpriority = 2
postype = p1
pos = 32,-51;93,-54
ontop = 1
ignorehitpause = 1
ownpal = 1
id = 4006

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,5;りゃ！
channel = 0;VC

[state HIGHJUMP];こいつが当たった時上を押せば追撃で飛ぶ
type = changestate
trigger1 = command = "holdup"
trigger1 = movehit
value = 40

[State 210, 3]
type = ChangeAnim
trigger1 = AnimElemTime(5) > 0 && AnimElemTime(6) <= 0
trigger1 = movecontact
ignorehitpause = 1
persistent = 0
value = 210
elem = 6

; 下のステートで表示順位を２にして相手より手前にしています。
[State 210, 4]
type = SprPriority
trigger1 = AnimElem = 5
value = 2

[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------
;魔理沙バスター（220番）
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
velset = 0,0
anim = 800

[State Anim]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = var(1) < 30
value = anim
elem = 2

[State Next]
type = ChangeState
Trigger1 = AnimelemTime(6) = 0
value = 225
ctrl=0

;発射------
[Statedef 225]
type    = S
movetype= A
physics = S
juggle  = 4
;poweradd= 65
ctrl = 0
velset = 0,0
;anim = 220
anim=801;射撃アニメのどれかを使う 暫定的にこれ

;[State 220, 0];Si
;type = ChangeState
;value = 220
;triggerall = Time > 25
;triggerall = NumProj < 1
;triggerall = command = "z"
;triggerall = command != "holddown"
;trigger1 = statetype = S

[State 210, 1]
type = StopSnd
trigger1 = Time = 0
channel=4;

[State 210, 1]
type = PlaySnd
triggerall = var(1) < 30
trigger1 = Time = 0
value = 0,8;小
channel=1;SE

[State 210, 1]
type = PlaySnd
triggerall = var(1) >= 30
triggerall = var(1) < 250
trigger1 = Time = 0
value = 0,9;チャージ大
channel=1;SE
[State 210, 1]
type = PlaySnd
triggerall = var(1) >= 250
trigger1 = Time = 0
value = 0,43;チャージＸ８
channel=1;SE

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
triggerall = var(1) < 100
trigger1 = Time = 0
value = 1,15;発射せりふ「バーン！」
channel=0;vc

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
triggerall = var(1) >= 100
triggerall = var(1) < 250
trigger1 = Time = 0
value = 1,9;発射せりふ「ほらよっ！」
channel=0;vc

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
triggerall = var(1) >= 250
trigger1 = Time = 0
value = 1,16;発射せりふ「バーン！」
channel=0;vc

[State 220, 3]
type = Explod
trigger1 = AnimElem = 1
anim = 4010;手前のケムリオブジェクト。
sprpriority = 5

[State 220, 4] ;Buster Disparo normal
type = Projectile
triggerall = var(1) < 30
trigger1 = Time = 0
projid = 10053
projanim = 3000;1002
;projanim = 3001;1002
projhitanim = 3010;1003
offset = 40,-44
velocity = 5,0
; HitDef
attr = S, SP
animtype = Light
damage    = 12
getpower  = 20
givepower = 20
hitflag = MAFD
guardflag = MAF
pausetime = 4,8
sparkno = S4006
guard.sparkno = S4023
priority = 3;,Dodge
;sparkxy = 69,-47;-35
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -5
air.velocity = -5
air.juggle = 9
air.fall = 1

[State 220, 4] 
type = Projectile
triggerall = var(1) >= 30
triggerall = var(1) < 100
trigger1 = Time = 0
projid = 10050
projanim = 3001;10050;
projhitanim = 3010;1003
;projhits = var(0)
projhits = 2
;projscale = 1.2,1.2
offset = 40,-44
velocity = 5, 0
;accel = .2,0
; HitDef
attr = S, SP
animtype = Medium
damage    = 45,5
hitflag = MAFD
guardflag = MAF
pausetime = 3,6
sparkno = S4001
guard.sparkno = S4023
;sparkxy = 69,-47;-35
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -5
air.velocity = -5
air.juggle = 9
air.fall = 1


[State 220, 4] 
type = Projectile
triggerall = var(1) >= 100
triggerall = var(1) < 250
trigger1 = Time = 0
projid = 10051
projanim = 3002;10051;フルバスター
projhitanim = 3010;10052
projhits = 3;var(0)
offset = 40,-44
velocity = 5, 0
;accel = .2,0
; HitDef
attr = S, SP
animtype = Hard
damage    = 50,15
hitflag = MAFD
guardflag = MAF
pausetime = 3,6
sparkno = S4002
guard.sparkno = S4023
;sparkxy = 69,-47;-35
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5,-5
airguard.velocity = -5
air.velocity = -5,-5
air.juggle = 9
air.fall = 1
fall = 1
Fall.Recover      = 0				;リカバーできるか

[State 4500, Helper];レーザーバスター
type = Helper
triggerall = var(1) >= 250
trigger1 = Time = 0
helpertype = Normal
name = "LAZER Helper"
ID = 3100
stateno = 3100;4501
pos =  40,-44
postype = p1
facing = 1
ownpal = 1
removeongethit = 1
pausemovetime = 9999
supermovetime = 9999

[State Pow];発射にコストが必要
type = null;PowerAdd
trigger1 = time = 0
value = ifelse(var(1) < 30,-40,ifelse(var(1) < 100,-100,-240))

[State 220, 2]
type = VarSet
trigger1 = 1
var(1) = 0;連射防止

[State 220, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; Buster Fast
[Statedef 10053]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 65
ctrl = 0
velset = 0,0
anim = 801;1000;発射モーション
sprpriority = 2

[State 10053, 1]
type = Explod
trigger1 = AnimElem = 1
anim = 4010
sprpriority = 5

[State 10053, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0,8;10, 2

[State 10053, 3]
type = PlaySnd
trigger1 = AnimElem = 7, = 2
value = 0,8;10, 1

[State 10053, 4]
type = Explod
trigger1 = AnimElem = 7
anim = 3010;1001
bindtime = -1
sprpriority = 5

[State 10053, 5]
type = Projectile
trigger1 = AnimElem = 7, = 2
ProjID = 10053
projanim = 3001;1002
projhitanim = 3010;1003
offset = 0, 0
velocity = 6, 0
attr = S, SP
damage    = 40,2
getpower  = 60
givepower = 40
guardflag = MA
pausetime = 0,12
sparkno = S4001
guard.sparkno = S4023
sparkxy = 69,-35
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
ground.velocity = -8
airguard.velocity = -3.5      
air.velocity = -2.5,-5.5
air.juggle = 3

;バスター衝撃波みたい。けしとこ
;[State 10053, 6]
;type = Helper
;trigger1 = AnimElem = 7, = 4
;name = "Dust"
;stateno = 10054

[State 10053, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
;屈み・弱・パンチ
;     これも通常の攻撃とはあまり変わらないが、変わった点といえばpriority（優先順位）
;     が３になっている事です。
;     これによって他の大抵の攻撃よりも優先権が下がる事になり相手と攻撃がかち合った
;     時は負けてしまいます。
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 5
poweradd= 35
ctrl = 0
anim = 400
sprpriority = 2

[State 400, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 1

[State 400, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 23
priority  = 3
animtype  = Light
hitflag = MAF
guard.dist        = 95             ;相手がガード行動をとる距離
guardflag = L
pausetime = 10,11
sparkno = S4000
sparkxy = -5,-50
hitsound   = S0,6
guardsound = S0,7
ground.type = Low
ground.slidetime = 4
ground.hittime  = 12
ground.velocity = -4
air.velocity = -1.5,-3
;getpower = 20, 10

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,5;りゃ！
channel = 0;VC

[State 400, 3]
type = null;CtrlSet
trigger1 = Time = 5
value = 1

[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;屈み・強・パンチ
; CNS difficulty: easy
; 　    これはパンチが二回当たるようになっています。
;       攻撃を２回当てるには２個のHitDefを書く必要があります
;       一発目の攻撃のHitDefにはguardflagが「M」（middle＝中段ガード）
;       にセットされているので、相手は空中でガードできません。二発目
;       の攻撃のguardflagは「MA」（middle+air＝中段＋空中ガード）で、
;       地上、空中でもガードすることができます。
;       ちなみに一つに統合する事もできますが、内容を変えたい時はやはり２個書くのが
;       いいと思います
;じゃなくてしゃがみ蹴りになりますた
;屈み・強・キック
;
;これは足払いの効果を出すためにground.typeがTripになっています。
;それ以外は特にありません。
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 50
ctrl = 0
anim = 410
sprpriority = 2

[State 410, 1]
type = PlaySnd
trigger1 = Time = 1
value = 0, 2

;一回目の攻撃ステート
[State 410, 2]
type = HitDef
trigger1 = Time = 0
attr = C, NA
damage    = 60
animtype  = Medium
hitflag = MAF
guardflag = M
guard.dist        = 115             ;相手がガード行動をとる距離
pausetime = 12,12
sparkno = S4000
sparkxy = -5,0
hitsound   = S0,5
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,-2
air.velocity = -1.2,-3
guard.velocity = -5
fall = 1
;getpower = 20, 10

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,6;えいっ！
channel = 0;VC

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;----------
;しゃがみバスター
[Statedef 420]
type    = C
movetype= A
physics = C
juggle  = 0
ctrl = 0
velset = 0,0
anim = 815

[State Anim]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = var(1) < 30
value = anim
elem = 2

[State Next]
type = ChangeState
Trigger1 = AnimelemTime(6) = 0
value = 425
ctrl=0

;発射------
[Statedef 425]
type    = C
movetype= A
physics = C
juggle  = 6
;poweradd= 50
ctrl = 0
anim = 816;420

;[State 420, 0]
;type = ChangeState
;value = 420
;triggerall = Time > 25
;triggerall = NumProj < 1
;triggerall = command = "x"
;triggerall = command = "holddown"
;trigger1 = statetype = C

;[State 420, 0]
;type = ChangeAnim
;triggerall = var(1) < 30
;trigger1 = Time = 0
;value =  816;420

;[State 420, 0]
;type = ChangeAnim
;triggerall = var(1) >= 30
;trigger1 = Time = 0
;value =  816;420

[State 420, 1]
type = StopSnd
trigger1 = Time =0
channel=4;

[State 210, 1]
type = PlaySnd
triggerall = var(1) < 30
trigger1 = Time = 0
value = 0,8;小
channel=1;SE

[State 210, 1]
type = PlaySnd
triggerall = var(1) >= 30
triggerall = var(1) < 250
trigger1 = Time = 0
value = 0,9;チャージ大
channel=1;SE
[State 210, 1]
type = PlaySnd
triggerall = var(1) >= 250
trigger1 = Time = 0
value = 0,43;チャージＸ８
channel=1;SE

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
triggerall = var(1) < 100
trigger1 = Time = 0
value = 1,15;発射せりふ「バーン！」
channel=0;vc

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
triggerall = var(1) >= 100
triggerall = var(1) < 250
trigger1 = Time = 0
value = 1,9;発射せりふ「ほらよっ！」
channel=0;vc

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
triggerall = var(1) >= 250
trigger1 = Time = 0
value = 1,16;発射せりふ「バーン！」
channel=0;vc
[State 420, 3]
type = Explod
trigger1 = AnimElem = 1
anim = 4010
sprpriority = 5

[State 420, 4];Disparo normal
type = Projectile
triggerall = var(1) < 30
trigger1 = Time = 0
projid = 10053
projanim = 3000;1002
projhitanim = 3010;1003
offset = 40,-28
velocity = 6, 0
; HitDef
attr = S, SP
animtype = Light
damage    = 12
getpower  = 20
givepower = 20
hitflag = MAFD
guardflag = MAF
pausetime = 4,8
sparkno = S4006
guard.sparkno = S4023
;sparkxy = 69,-47;-35
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = Low
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -5
air.velocity = -5
air.juggle = 9
air.fall = 1

[State 420, 4] 
type = Projectile
triggerall = var(1) >= 30
triggerall = var(1) < 100
trigger1 = Time = 0
projid = 10050
projanim = 3001;10050;
projhitanim = 3010;1003
projhits = 2;var(0)
;projscale = 1.2,1.2
offset = 40,-28
velocity = 5, 0
;accel = .50,0
; HitDef
attr = S, SP
animtype = Medium
damage    = 45,5
hitflag = MAFD
guardflag = MAF
pausetime = 3,6
sparkno = S4001
guard.sparkno = S4023
;sparkxy = 69,-47;-35
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = Low
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -5
air.velocity = -5
air.juggle = 9
air.fall = 1

[State 420, 4] 
type = Projectile
triggerall = var(1) >= 100
triggerall = var(1) < 250
trigger1 = Time = 0
projid = 10051
projanim = 3002;10051;フルバスター
projhitanim = 3010;10052
projhits = 3;var(0)
offset = 40,-28
velocity = 5,0
;accel = .50,0
; HitDef
attr = S, SP
animtype = Hard
damage    = 50,15
hitflag = MAFD
guardflag = MAF
pausetime = 3,6
sparkno = S4002
guard.sparkno = S4023
;sparkxy = 69,-47;-35
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = Low
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5,-5
airguard.velocity = -5
air.velocity = -5,-5
air.juggle = 9
air.fall = 1
fall = 1
Fall.Recover      = 0				;リカバーできるか

[State 4500, Helper];レーザーバスター
type = Helper
triggerall = var(1) >= 250
trigger1 = Time = 0
helpertype = Normal
name = "LAZER Helper"
ID = 3100
stateno = 3100;4501
pos =  40,-28
postype = p1
facing = 1
ownpal = 1
removeongethit = 1
pausemovetime = 9999
supermovetime = 9999

[State Pow];発射にコストが必要
type = null;PowerAdd
trigger1 = time = 0
value = ifelse(var(1) < 30,-40,ifelse(var(1) < 100,-100,-240))

[State 420, 2]
type = VarSet
trigger1 = 1
var(1) = 0;連射防止

[State 420, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;605-----
;魔理沙の振り下ろし攻撃なので、それっぽくする
[Statedef 605];弱攻撃
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 31
ctrl = 0
anim = 605
sprpriority = 2

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,5;
channel = 0;VC

[State 605, 2]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 15,2;20
guardflag = MA
guard.dist        = 100             ;相手がガード行動をとる距離
priority = 3,Hit
pausetime = 9,10
sparkno = S4000
;guard.sparkno = S4023
sparkxy = 0,0;0,-50
hitsound   = S0,5;5,0
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High
Air.Type          = High 
ground.slidetime = 5
ground.hittime  = 5
air.hittime = 20
ground.velocity = -4
air.velocity = 0,-5;-2,0;-2,10;-1.3,-3
yaccel = .6
;getpower = 20, 10

[state 410,3]
type = veladd
trigger1 = var(3) = 1
y = -0.09

[State 605, 1]
type = PlaySnd
trigger1 = Time = 4;11;600番なら11
value = 0, 2

[State 605, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

;630-----
;ミドルパンチ
[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 50
ctrl = 0
anim = 630
sprpriority = 2

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
;trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,ifelse(Random < 500,5,7);りゃ！orふんっ！
channel = 0;VC

[State 605, 2]
type = HitDef
trigger1 = animelem = 3;Time = 0
attr = A, NA
damage    = 25,10;20
guardflag = MA
guard.dist        = 128             ;相手がガード行動をとる距離
priority = 3,Hit
pausetime = 9,10
sparkno = S4005;中ひっと
;guard.sparkno = S4023
sparkxy = -20,-40;0,-50
hitsound   = S0,5;5,0
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High
Air.Type          = High 
ground.slidetime = 10;5
ground.hittime  = 20;5
air.hittime = 20
ground.velocity = -5.5;-4
air.velocity = 0,-6;-2,0;-2,10;-1.3,-3
yaccel = .6
;getpower = 30, 10

[state 420,3]
type = veladd
trigger1 = var(3) = 1
y = -0.09

[State 605, 1]
type = PlaySnd
trigger1 = Time = 4;11;600番なら11
value = 0, 2

[State 605, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1


;600----------
;空中・強・パンチ
;魔理沙の振り下ろし攻撃なので、それっぽくする
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 75
ctrl = 0
anim = 600
sprpriority = 2

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
;trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,ifelse(Random < 500,8,10);でりゃあ！orひっこんでろ！
channel = 0;VC

[State 600, 2];威力の高い叩きつけ
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage    = 65,2;100,2;20
guardflag = MA
guard.dist        = 109             ;相手がガード行動をとる距離
priority = 3,Hit
pausetime = 9,10
sparkno = S4006;つよいヒット
;guard.sparkno = S4023
sparkxy = 0,0;0,-50
hitsound   = S0,5;5,0
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High
Air.Type          = High 
ground.slidetime = 10;5
ground.hittime  = 20;5
air.hittime = 20
ground.velocity = -5;-4
AirGuard.Velocity = -2,10
;Guard.Kill        = 0				;この攻撃をガードで殺せるか
;Fall              = 0				;地面に叩き付けられるか
;Air.Fall          = 1				;地面に叩き付けられるか
;Fall.Recover      = 0				;リカバーできるか
;GetPower          = 25				;ヒット時のパワー増減
Persistent = 0
;air.velocity = -2,10;-1.3,-3
air.velocity = -24,10;-17,10;当てた時のふっとばし角度を決める　ジャンプの高さを調節したならここも要調整
p2stateno = 715;エリアル食らいモーションにさせるか
;getpower = 30, 10

[state 200, 1];Var(0)初期化
type = varset
trigger1 = time = 0
var(0) = 0

[state 200, 1];Var(0)セット
type = varset
trigger1 = movehit
var(0) = 1;これが立っている状態だと、ふっとび演出なので操作できないようにしたほうがいいな

[State North]
type = VarAdd;当たったら星を奪う
trigger1 = movehit
trigger1 = var(41) < 7
var(41) = 1
persistent=0
ignorehitpause=1

[State Ctrl]
type = CtrlSet
trigger1 = var(0) = 1;エリアルふっとばし状態のとき
Value = 0;操作不能にします

[state 451,6]
type = screenbound
triggerall = var(0) = 1
trigger1 = var(3) = 1
trigger1 = prevstateno != 50
;trigger1 = backedgebodydist <= -20
value = 0

[state 451,6]
type = posfreeze
triggerall = var(0) = 1
triggerall = pos Y < -210
trigger1 = var(3) = 1
trigger1 = prevstateno != 50

[state 451,3]
type = veladd
trigger1 = var(3) = 1
y = -0.09

[state 451,6]
type = changestate
triggerall = var(3) = 1
triggerall = prevstateno != 50
trigger1 = backedgebodydist <= -20
value = 710
ctrl = 1

[state 451,6]
type = changestate
trigger1 = animtime = 0
trigger2 = p2StateNo = 328
value = 460
ctrl = 1

[State -1];ちょっとこりたいとこ
type = Explod
trigger1 = Time = 11;600番なら11
postype = p1
pos = 20,-9;15,-55
anim = 4004
sprpriority = 3


[State 600, 1]
type = PlaySnd
trigger1 = Time = 11;600番なら11
value = 0, 2

[State 600, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

;---------------------------------------------------------------------------
;空中・強・パンチ
;じゃなくて弱キック
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 4
poweradd= 25
ctrl = 0
anim = 610
sprpriority = 2

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
;trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,6;えいっ！
channel = 0;VC

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 610, 3]
type = HitDef
trigger1 = Time = 0
attr = A, NA
damage = 24
guardflag = HA
guard.dist        = 102             ;相手がガード行動をとる距離
priority = 4
pausetime = 12,12
sparkno = S4000
;guard.sparkno = S4023
sparkxy = -20,-20;-15,-55
hitsound   = S0,4;5,0
guard.sparkno = S4023
guardsound = S0,7;S6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5
air.velocity = -0.3,-6
yaccel = .6
;getpower = 20, 10

[state 430,3]
type = veladd
trigger1 = var(3) = 1
y = -0.09

[state setctrl]
type = CtrlSet
trigger1 = animtime = 0
value = 1

;[state 222, 5]
;type = changestate
;trigger1 = animtime = 0
;value = 460

;--------------------------------
;キック中　ドロップキック
[Statedef 615]
type    = A
movetype= A
physics = A
juggle  = 1
poweradd= 65
ctrl = 0
anim = 615;610
sprpriority = 2

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,ifelse(Random < 500,5,7);りゃ！orふんっ！
channel = 0;VC

[State 610, 2]
type = PlaySnd
trigger1 = Time = 2
value = 0, 3

[State 615, 3]
type = HitDef
trigger1 = AnimElem = 4;Time = 0
attr = A, NA
damage = 30
guardflag = HA
guard.dist        = 91             ;相手がガード行動をとる距離
priority = 4
pausetime = 6,12
sparkno = S4005;中ひっと
;guard.sparkno = S4023
sparkxy = -15,0;-15,-55
hitsound   = S0,4;5,0
guard.sparkno = S4023
guardsound = S0,7;S6,0
animtype = Med
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
air.hittime = 20
ground.velocity = -5
air.velocity = -.3,-4
yaccel = .6
;getpower = 20, 10

[state 440,3]
type = veladd
trigger1 = var(3) = 1
y = -0.09

;[state 231, 4]
;type = changestate
;trigger1 = animtime = 0
;value = 460

;640----------
;空中・強・きっく
;魔理沙の振り下ろし攻撃なので、それっぽくする
[Statedef 640]
type    = A
movetype= A
physics = N;A
juggle  = 2
poweradd= 65
ctrl = 0
anim = 640
;velset = 1,10
sprpriority = 2

[State Gravity]
type = Gravity 
trigger1 = 1

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Animelem = 3;Time = 0
value = 1,6;えいっ！
channel = 0;VC

[State 640, 2];ひっぷ急降下
type = HitDef
trigger1 = Time > 2;Animelem = 3
attr = A, NA
damage    = 60,30;100,2;20
guardflag = MA
guard.dist        = 104             ;相手がガード行動をとる距離
priority = 3,Hit
pausetime = 9,10
sparkno = S4006;つよいヒット
;guard.sparkno = S4023
sparkxy = -10,0;0,-50
hitsound   = S0,5;5,0
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High
Air.Type          = High 
ground.slidetime = 10;5
ground.hittime  = 20;5
air.hittime = 20
ground.velocity = -5;-4
AirGuard.Velocity = -2,10
;Guard.Kill        = 0				;この攻撃をガードで殺せるか
;Fall              = 0				;地面に叩き付けられるか
;Air.Fall          = 1				;地面に叩き付けられるか
;Fall.Recover      = 0				;リカバーできるか
;GetPower          = 25				;ヒット時のパワー増減
Persistent = 0
;air.velocity = -2,10;-1.3,-3
air.velocity = -12,20;下方向に
p2stateno = 715;エリアル食らいモーションにさせるか
;getpower = 30, 10

[state 200, 1];Var(0)初期化
type = varset
trigger1 = time = 0
var(0) = 0

[state 200, 1];Var(0)セット
type = varset
trigger1 = movehit
var(0) = 1

[State Ctrl]
type = CtrlSet
trigger1 = var(0) = 1;エリアルふっとばし状態のとき
Value = 0;操作不能にします

[state 451,6]
type = screenbound
triggerall = var(0) = 1
trigger1 = var(3) = 1
trigger1 = prevstateno != 50
;trigger1 = backedgebodydist <= -20
value = 0

[state 451,6]
type = posfreeze
triggerall = var(0) = 1
triggerall = pos Y < -210
trigger1 = var(3) = 1
trigger1 = prevstateno != 50

[state 451,3]
type = veladd
trigger1 = 1;var(3) = 1
y = .6;-0.09

[state 451,3]
type = velset
trigger1 = var(3) = 1
x = .1;-0.09

[state 451,3]
type = veladd
trigger1 = var(3) = 1
trigger1 = Vel Y >= 100
y = .1;.3;-0.09

;[state 451,6]
;type = changestate
;triggerall = var(3) = 1
;triggerall = prevstateno != 50
;trigger1 = backedgebodydist <= -20
;value = 710
;ctrl = 1

[state 451,6]
type = changestate
trigger1 = animtime = 0
trigger2 = p2StateNo = 328
value = 460
ctrl = 1

[State -1]
Type     = ChangeState
;trigger1 = animtime = 0
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value    = 641;262;1003

[State 610, 2]
type = PlaySnd
trigger1 = Time = 4
value = 0, 3

[State 600, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

;--------------------------------
;空中バスター

[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 820

[State Anim]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = var(1) < 30
value = anim
elem = 2

;慣性制御
[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = Vel X >= 1
Trigger1 = var(1) >= 30
X        = 1

[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = var(3) = 2
Trigger1 = Vel X <= -3
Trigger1 = var(1) >= 30
X        = -3

[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = var(3) < 2
Trigger1 = Vel X <= -1
Trigger1 = var(1) >= 30
X        = -1

[State -1]
Type     = VelSet
Trigger1 = Time >= 0
Trigger1 = Time <= 25;50
Trigger1 = Vel Y > 1
Trigger1 = var(1) >= 30
Y        = 1

[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = Time >= 0
Trigger1 = Time <= 25;50
Trigger1 = Vel Y < -.5;1
Trigger1 = var(1) >= 30
Y        = -1

[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = Time >= 0
Trigger1 = Time <= 25;50
Trigger1 = Pos Y >= -10
Trigger1 = var(1) >= 30
Y        = 0

;[State -1]
;Type     = VelSet
;triggerall = var(0) = 0
;Trigger1 = Time >= 0
;Trigger1 = Time <= 25;50
;Trigger1 = Vel Y >= 0
;Trigger1 = Vel Y <= 2
;Trigger1 = var(1) >= 30
;Y        = 1;0

[State Next]
type = ChangeState
Trigger1 = AnimelemTime(6) = 0
value = 625
ctrl=0

;発射------
[Statedef 625]
type    = A
movetype= A
physics = A
juggle  = 4
;poweradd= 70
ctrl = 0
anim = 821;620

;[State 620, 0]
;type = ChangeState
;value = 620
;triggerall = Time > 80;25
;triggerall = NumProj < 1
;triggerall = command = "x"
;triggerall = command = "holddown"
;trigger1 = statetype = A

;慣性制御
[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = Vel X >= 1
Trigger1 = var(1) >= 30
X        = 1

[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = var(3) = 2
Trigger1 = Vel X <= -3
Trigger1 = var(1) >= 30
X        = -3

[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = var(3) < 2
Trigger1 = Vel X <= -1
Trigger1 = var(1) >= 30
X        = -1

[State -1]
Type     = VelSet
;Trigger1 = Time >= 0
;Trigger1 = Time <= 25;50
Trigger1 = Vel Y > 1
Trigger1 = var(1) >= 30
Trigger1 = IfElse(PalNo % 6 = 0, Time <= 10, 1)
Y        = 1

[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = Time >= 0
Trigger1 = Time <= 25;50
Trigger1 = Vel Y < -.5;1
Trigger1 = var(1) >= 30
Y        = -1

[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = Time >= 0
Trigger1 = Time <= 25;50
Trigger1 = Pos Y >= -10
Trigger1 = var(1) >= 30
Y        = 0

;[State 620, 0]
;type = ChangeAnim
;trigger1 = Vel y <= 0
;value = 821;620

;[State 620, 0]
;type = ChangeAnim
;trigger1 = Vel y >= 0
;value = 821;620620;621

[State 620, 1]
type = StopSnd
trigger1 = Time =0
channel=4;

[State 210, 1]
type = PlaySnd
triggerall = var(1) < 30
trigger1 = Time = 0
value = 0,8;小
channel=1;SE

[State 210, 1]
type = PlaySnd
triggerall = var(1) >= 30
triggerall = var(1) < 250
trigger1 = Time = 0
value = 0,9;チャージ大
channel=1;SE
[State 210, 1]
type = PlaySnd
triggerall = var(1) >= 250
trigger1 = Time = 0
value = 0,43;チャージＸ８
channel=1;SE

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
triggerall = var(1) < 100
trigger1 = Time = 0
value = 1,15;発射せりふ「バーン！」
channel=0;vc

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
triggerall = var(1) >= 100
triggerall = var(1) < 250
trigger1 = Time = 0
value = 1,9;発射せりふ「ほらよっ！」
channel=0;vc

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
triggerall = var(1) >= 250
trigger1 = Time = 0
value = 1,16;発射せりふ「バーン！」
channel=0;vc

[State 620, 4] ;通常バスター
type = Projectile
triggerall = var(1) < 30
trigger1 = Time = 0
;trigger1 = (prevstateno = 50)||(stateno = 620)
projid = 10053
projanim = 3000;1002
projhitanim = 3010;1003
offset = 40,-48
velocity = 6, 0
; HitDef
attr = S, SP
animtype = Light
damage    = 12
getpower  = 20
givepower = 20
hitflag = MAFD
guardflag = MAF
pausetime = 4,8
sparkno = S4006
guard.sparkno = S4023
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -5
air.velocity = -5
air.juggle = 9
air.fall = 1

[State 620, 4] ;みどるバスター
type = Projectile
triggerall = var(1) >= 30
triggerall = var(1) < 100
trigger1 = Time = 0
projid = 10050
projanim = 3001;10050;
projhitanim = 3010;1003
projhits = 2;var(0)
;projscale = 1.2,1.2
offset = 40,-48
velocity = 5,0
;accel = .50,0
; HitDef
attr = S, SP
animtype = Medium
damage    = 45,5
hitflag = MAFD
guardflag = MAF
pausetime = 3,6
sparkno = S4001
guard.sparkno = S4023
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -5
air.velocity = -5
air.juggle = 9
air.fall = 1

[State 620, 4] 
type = Projectile
triggerall = var(1) >= 100
triggerall = var(1) < 250
trigger1 = Time = 0
;trigger1 = prevstateno = 50
projid = 10051
projanim = 3002;10051;フルバスター
projhitanim = 3010;10052
projhits = 3;var(0)
offset = 40,-48
velocity = 5,0
;accel = .50,0
; HitDef
attr = S, SP
animtype = Hard
damage    = 50,15
hitflag = MAFD
guardflag = MAF
pausetime = 3,6
sparkno = S4002
guard.sparkno = S4023
hitsound   = S0,11;5,1
guardsound = S0,7;6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5,-5
airguard.velocity = -5
air.velocity = -5,-5
air.juggle = 9
air.fall = 1
fall = 1
Fall.Recover      = 0				;リカバーできるか

[State 4500, Helper];レーザーバスター
type = Helper
triggerall = var(1) >= 250
trigger1 = Time = 0
helpertype = Normal
name = "LAZER Helper"
ID = 3100
stateno = 3100;4501
pos =  40,-48
postype = p1
facing = 1
ownpal = 1
removeongethit = 1
pausemovetime = 9999
supermovetime = 9999

[State 620, 2]
type = VarSet
trigger1 = Time = 10;1
var(1) = 0;連射防止

[State Pow];発射にコストが必要
type = null;PowerAdd
trigger1 = time = 0
value = ifelse(var(1) < 30,-40,ifelse(var(1) < 100,-100,-240))

[State 620, 2];連射間隔制御
type = CtrlSet
trigger1 = Time = 18;10
value = 1

;エリアルフィニッシュ時------
[Statedef 626]
type    = A
movetype= A
physics = A
juggle  = 4
;poweradd= 70
ctrl = 0
anim = 821;620

;慣性制御
[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = Vel X >= 1
Trigger1 = var(1) >= 30
X        = 1

[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = var(3) = 2
Trigger1 = Vel X <= -3
X        = -3

[State -1]
Type     = VelSet
triggerall = var(0) = 0
Trigger1 = var(3) < 2
Trigger1 = Vel X <= -1
X        = -1

[State -1]
Type     = VelSet
;Trigger1 = Time >= 0
Trigger1 = Time <= 25;50
Trigger1 = Vel Y > 1
Y        = 1

[State -1]
Type     = VelSet
triggerall = var(0) = 0
;Trigger1 = Time >= 0
Trigger1 = Time <= 25;50
;Trigger1 = Animtime != 0
Trigger1 = Vel Y < -.5;1
Y        = -1

[State -1]
Type     = VelSet
triggerall = var(0) = 0
;Trigger1 = Time >= 0
Trigger1 = Time <= 25;50
;Trigger1 = Animtime != 0
Trigger1 = Pos Y >= -10
Y        = 0

[State -1]
Type     = Veladd
trigger1 = 1
Y        = .1

[State 620, 1]
type = StopSnd
trigger1 = Time =0
channel=4;


[State 210, 1]
type = PlaySnd
trigger1 = var(1) >= 30
trigger1 = Time = 0
trigger2 = Time = 0
trigger2 = prevstateno != 50
trigger2 = prevstateno != [620,625]
value = 0,9;チャージ大
;channel=1;SE

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
triggerall = var(1) < 100
trigger1 = Time = 0
value = 1,15;発射せりふ「バーン！」
channel=0;vc

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
triggerall = var(1) >= 100
trigger1 = Time = 0
value = 1,9;発射せりふ「ほらよっ！」
channel=0;vc

[State 620, 4] ;エリアルみどるバスター
type = Projectile
triggerall = var(1) < 100
trigger1 = Time = 0
;trigger1 = prevstateno != 50
;trigger2 = prevstateno != [620,625]
projid = 10051
projanim = 3001;10050;
projhitanim = 3010;1003
projhits = 4;var(0)
projremovetime = 20;消えるまでの時間射程時間 (int)
projscale = 1.2,1.2
offset = 40,-48
getpower  = 20
velocity = 5,0
;accel = .50,0
; HitDef
attr = S, SP
animtype = Medium
damage    = 12,1
hitflag = MAFD
guardflag = MAF
pausetime = 3,6
sparkno = S4001
guard.sparkno = S4023
;sparkxy = 69,-47;-35
hitsound   = S0,11;5,1
guardsound = S0,7;6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5,-5
airguard.velocity = -5
air.velocity = -30,8;10;-5,-5
air.fall = 1
fall = 1
Fall.Recover      = 0				;リカバーできるか
p2stateno = 715

[State 620, 4];エリアルバスター
type = Projectile
triggerall = var(1) >= 100
trigger1 = Time = 0
;trigger1 = prevstateno != 50
;trigger1 = stateno != 460
projid = 10051
projanim = 3002;10051;フルバスター
projhitanim = 3010;10052
projhits = 10;var(0)
projremovetime = 20;消えるまでの時間射程時間 (int)
offset = 40,-48
getpower  = 20
velocity = 5,0
;accel = .50,0
; HitDef
attr = S, SP
animtype = Hard
damage    = 13,1
hitflag = MAFD
guardflag = MAF
pausetime = 3,6
sparkno = S4002
guard.sparkno = S4023
;sparkxy = 69,-47;-35
hitsound   = S0,11;5,1
guardsound = S0,7;6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5,-5
airguard.velocity = -5
air.velocity = -30,8;10;-5,-5
air.fall = 1
fall = 1
Fall.Recover      = 0				;リカバーできるか
p2stateno = 715


[State 620, 2]
type = VarSet
trigger1 = 1
var(1) = 0;連射防止

[state 200, 1];Var(0)初期化
type = varset
trigger1 = time = 0
var(0) = 0

[state 200, 1];Var(0)セット
type = varset
trigger1 = ProjContactTime(10051) = 1 ;movehit
trigger1 = var(3) = 1
var(0) = 1

[State Pow];発射にコストが必要
type = PowerAdd
trigger1 = time = 0
trigger1 = var(0) != 1;
value = ifelse(var(1) < 30,-40,ifelse(var(1) < 100,-100,-240))


[State Ctrl]
type = CtrlSet
trigger1 = var(0) = 1;エリアルふっとばし状態のとき
Value = 0;操作不能にします

;[state 451,3]
;type = velset
;trigger1 = var(0) = 1
;Y = -1

[state 451,6]
type = screenbound
triggerall = var(0) = 1
trigger1 = var(3) = 1
trigger1 = prevstateno != 50
value = 0

[state 451,6]
type = posfreeze
triggerall = var(0) = 1
triggerall = pos Y < -210
trigger1 = var(3) = 1
trigger1 = prevstateno != 50

[state 451,3]
type = veladd
trigger1 = var(3) = 1
y = -0.09

[state 451,6]
type = changestate
triggerall = var(3) = 1
triggerall = prevstateno != 50
trigger1 = backedgebodydist <= -20
value = 710
ctrl = 1

[state 451,6]
type = changestate
;trigger1 = time = 40
trigger1 = animtime = 0
trigger1 = p2StateNo = 328
value = 460
ctrl = 1

[State 620, 2];連射間隔制御
type = CtrlSet
trigger1 = Time = 18;10
value = 1

;---------------------------------------------------------------------------
;ナゲ技
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 80000;別途で投げアニメを製作する
sprpriority = 2

[State -1]
Type = AttackDist
Trigger1 = 1
Value = 0
Persistent = 1

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;ｓ：立ち　ｎ：通常　ｔ：投げ
guard.dist = 0        ;相手がガード行動をとる距離
hitflag = M-          ;コンボの途中から投げが入らないよう設定してある
priority = 1, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
;p1facing = ifelse (command = "holdfwd", -1, 1) ;前を押したらターンする設定
;p1facing = 1;
p1facing = ifelse (command = "holdfwd", -1, 1) ;前を押したらターンする設定
p2facing = 1          ;？
p1stateno = 810       ;投げが成功した場合の移動する１Ｐのステート
p2stateno = 820       ;投げが成功した場合の移動する２Ｐのステート
fall = 1              ;落ちる力を２Ｐにかけるか

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;ナゲ技　手動ゲット投げ
[Statedef 805]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 35083;80000;別途で投げアニメを製作する
sprpriority = 2

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
attr = S, NT          ;ｓ：立ち　ｎ：通常　ｔ：投げ
hitflag = M-          ;コンボの途中から投げが入らないよう設定してある
guard.dist = 0        ;相手がガード行動をとる距離
priority = 1, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
;p1facing = ifelse (command = "holdfwd", -1, 1) ;前を押したらターンする設定
p1facing = 1;
p2facing = 1          ;？
p1stateno = 810       ;投げが成功した場合の移動する１Ｐのステート
p2stateno = 820       ;投げが成功した場合の移動する２Ｐのステート
fall = 1              ;落ちる力を２Ｐにかけるか

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;カンフースロー・投げている自分
;     このステートでは相手を設定した場所に固定した後、相手を飛ばしています
;     ここで相手の動きを制御しているのはtype = TargetBindというステートです
;     これを一定時間事にやっていくと綺麗に投げ飛ばされているように見えます。
;     そしてここにはHitDefが無いのでダメージはtype = TargetLifeAddで
;     ダメージを減らしています
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 80001;掴んだままの状態
;poweradd = 60

[State 810, Bind 1]
type = TargetBind
trigger1 = 1
pos = 55,5

[State bunki-sasuga]
type = changestate
triggerall = Time > 0
Triggerall = var(5) = 0;ＭＡＸでも武器装備でもない
trigger1 = Random < 333;30%の確率で別の技に変化する
trigger2 = PrevStateNo = 805;ゲット投げで掴んだ場合
value = 3500

[State bunki]
type = changestate
triggerall = Time > 0
trigger1 = 1;条件分岐できるようにする。今後のために
value = 811

;通常投げ---------------------------
[Statedef 811]
type    = S
movetype= A
physics = N
anim = 80002;80001;投げモーション
poweradd = 60


[State MUTEKI]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, Grab Sound]
type = PlaySnd
;trigger1 = AnimElem = 2
trigger1 = Time = 0
value = 0,42;がきょおん！

[State ]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = AnimElem = 5
value = 1,ifelse(random < 555,5,6);りゃっ！えいっ！
channel = 0;VC

[State 810, Throw Sound]
type = PlaySnd
trigger1 = AnimElem = 7
value = 0, 17

[State JumpAnim];
Type = Explod
trigger1 = AnimElem = 7
Anim = 4032;持ってるアニメを使う
Id = 4032
Postype = p2
Pos = 0,0
Ownpal = 1
Sprpriority = -1
Persistent = 0
Removeongethit = 0

[State 810, Bind 1]
type = TargetBind
trigger1 = AnimElemTime(2) < 0
;trigger1 = AnimElem = 1
pos = 25,-20;28, 0

[State 810, Width 2-11]
type = Width
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(10) < 0
edge = 60,0

[State 810, Bind 2]
type = TargetBind
;trigger1 = AnimElemTime(2) < 0
trigger1 = AnimElem = 2
pos = 20,-25;0,0;28, 0

[State 810, Bind 3]
type = TargetBind
trigger1 = AnimElem = 3
pos = -35,-15;0,0;28, 0

[State 810, Bind 4]
type = TargetBind
trigger1 = AnimElem = 4
pos = 20,-70;0,0;28, 0

[State 810, Bind 5]
type = TargetBind
trigger1 = AnimElem = 5
pos = 50,-65;0,0;28, 0

[State 810, Bind 6]
type = TargetBind
trigger1 = AnimElem = 7
pos = 55,0;0,0;28, 0

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 6;11
value = -78

[State 810, Throw 11]
type = TargetState
trigger1 = AnimElem = 6;11
value = 821

[State 810, Turn 12]
type = Turn;反対を向く！
trigger1 = AnimElem = 3;12

[State 810, Pos 15]
type = PosAdd
trigger1 = AnimElem = 6;15
x = -10

[State 810, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;カンフースロー・投げられている相手
; 
;     ここは投げられた瞬間の相手のステートです
;     たいしたことは書いてありませんがtypeがAになっている事です。
;     相手が投げれて空中にいる事を設定して次の821ステートに移動します

[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820]	;自分にゲット投げされたときの特殊動作
type = varset
trigger1 = EnemyNear,name = "MegaMari"
trigger1 = EnemyNear,authorname = "RockMARISA"
trigger1 = enemynear,stateno = 3500
v = 5
value = 0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 82000

;---------------------------------------------------------------------------
;カンフースロー・相手の空中の状態
;     
;     これは投げられている相手の状態ととれる行動を設定しています
;     type = SelfStateは相手のリカバー状態を設定する物でこの状態ならこれ。
;     と言うように地上近く、空中、叩きつけられた時と３つ設定しています。

[Statedef 821]
type    = A
movetype= H
physics = N
velset = 2.8,-7
poweradd = 40

[State 821, 1] ;これは重力これは毎フレーム事に0.4の力が加わります
type = VelAdd
Trigger1 = 1
y = .4

[State 821, 2] 
type = ChangeState
triggerall = Vel Y > 0
triggerall = Pos Y >= -20
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5200

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = CanRecover
trigger1 = Command = "recovery"
value = 5210 

[State 821, 4] 
type = SelfState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 


;---------------------------------------------------------------------------
; 特定武器装備中用必殺技　北斗飛衛拳
;アフロンさんの獄屠拳互換。
[StateDef 1050]
;type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1050
sprpriority = 1
ctrl = 0

;Var15を判定に使う。

[state a1]
type = velset
trigger1 = time = 0
y = 0

[state a2]
type = null;posset
trigger1 = time = 0
y = 0

[state a3]
type = statetypeset
trigger1 = pos y < 0
value = A

[state a4]
type = varset
trigger1 = time = 0
;空中じゃない
v = 15
value = 0

[state a5]
type = varset
trigger1 = time = 0
trigger1 = statetype = A
v = 15
value = 1

[State 220, 3]
type = Explod
trigger1 = time = 0
trigger1 = var(15) = 0
anim = 4010;手前のケムリオブジェクト。
sprpriority = 5

[state a6]
type = changeanim
trigger1 = time = 1
trigger1 = var(15) = 1
value = 1051

[State -1]
type = NotHitBy
trigger1 = var(15) = 1
trigger1 = time <= 9
value = SCA


;---------------------[効果音]
[state a7];北斗飛衛拳!!
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = animelem = 2
value = 1050,0
channel = 0;VC

[state a8];蹴り
type = playsnd
trigger1 = animelem = 6
value = 1050,1

[state a]
type = posadd
;triggerall = var(5) = 2
trigger1 = animelemtime(3)=0;time = 0
x = 0;6
y = -24
;-------------[速度・１]
[state a9]
type = statetypeset
trigger1 = time = 0
value = A

[state a10]
type = velset
triggerall = var(15) = 0
trigger1 = time = 0
x = 2
y = 0

[state a11]
type = veladd
triggerall = var(15) = 0
trigger1 = animelem = 6,<=0
x = 0.7


[state a12]
type = veladd
triggerall = var(15) = 0
trigger1 = animelem = 7,>=0
trigger1 = vel x > 0
x = -0.3

[state a13]
type = velset
triggerall = var(15) = 0
trigger1 = vel x <= 0
x = 0

[state a14]
type = veladd
triggerall = var(15) = 0
trigger1 = animelem = 5,>=0
trigger1 = animelem = 10,<=0
y = -0.6

[state a15]
type = veladd
triggerall = var(15) = 0
trigger1 = animelem = 10,>=0
y = 0.5


;-------------[速度・２]
[state a16]
type = velset
triggerall = var(15) = 1
trigger1 = time = 0
x = 5
y = -3.5

[state a17]
type = veladd
triggerall = var(15) = 1
trigger1 = animelem = 10,>=0
trigger1 = vel x > 0
x = -0.2

[state a18]
type = velset
triggerall = var(15) = 1
trigger1 = vel x <= 2
x = 2

[state a19]
type = veladd
triggerall = var(15) = 1
trigger1 = animelem = 10,>=0
y = 0.45

;エフェクト関連
;アッパー
[State 5150, 6] 
type = Explod
trigger1 = animelem = 7
trigger1 = !numexplod(1055)
anim = 1055
id = 1055
Postype     = P1
Pos         = 48,-58
scale = .5,.5
vel = 0,0
ownpal = 1
removetime = -1
bindtime = -1
sprpriority = 4
ignorehitpause = 1
removeongethit = 1;食らったらきえます

[State 5150, 6] ;後ろ光
type = Explod
trigger1 = animelem = 7
trigger1 = !numexplod(1056)
anim = 1056
id = 1056
Postype     = P1
Pos         = -15,-40
scale = .5,.5
vel = -1,0
ownpal = 1
removetime = 32;終了時消滅
bindtime = 1
sprpriority = 4
ignorehitpause = 1
[State 5150, 6] ;後ろ光
type = Explod
trigger1 = animelem = 7
trigger1 = !numexplod(1057)
anim = 1057
id = 1057
Postype     = P1
Pos         = 0,-20
scale = .5,.5
vel = -.5,.5
ownpal = 1
removetime = 32;終了時消滅
bindtime = 1
sprpriority = 4
ignorehitpause = 1

[State DelExplod];アッパー消去
type = RemoveExplod
triggerall = numexplod(1055)
trigger1 = (var(15) = 0) && animelem = 13,>=0
trigger2 = (var(15) = 1) && animelem = 12,>=0
trigger3 = (var(15) = 2) && animelem = 11,>=0
ID = 1055

;---------------------[弱攻撃]
[State 640, 3]
type = HitDef
triggerall = var(15) = 0
trigger1 = animelem = 7
attr = A, SA
damage    = 115,15
priority = 8, Hit
guardflag = MA
getpower = 108,108
pausetime = 14,14
guard.pausetime = 12,12
sparkno = s4002
sparkxy = -10,-60
hitsound   = s0,5
guard.sparkno = s4023
guardsound = s0,7
animtype = up
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -16,-4
guard.velocity = -11
air.velocity = -2,-10
yaccel = 0.45 ;+ (var(3) - 1)*0.1
fall = 1
fall.recover = 0
ID = 600
nochainID = 9999
;---------------------[空中弱攻撃]
[State 640, 3]
type = HitDef
triggerall = var(15) = 1
trigger1 = animelem = 7
trigger2 = animelem = 8
trigger3 = animelem = 9
attr = A, SA
damage    = 37,6
priority = 6, Hit
guardflag = HA
getpower = 62,62
pausetime = 12,12
guard.pausetime = 6,6
sparkno = s4002
sparkxy = -10,-60
hitsound   = s0,4
guard.sparkno = s4023
guardsound = s0,7
animtype = up
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -4,-2
guard.velocity = -3
air.velocity = -4,-10
yaccel = 0.65 ;+ (var(3) - 1)*0.1
fall = 1
fall.recover = 0
ID = 600
nochainID = 9999

[State 640, 3]
type = HitDef
triggerall = var(15) = 1
trigger1 = animelem = 10
attr = A, SA
damage    = 37,6
priority = 6, Hit
guardflag = HA
getpower = 108,108
pausetime = 15,15
guard.pausetime = 15,15
sparkno = s4002
sparkxy = -10,-60
hitsound   = s0,5
guard.sparkno = s4023
guardsound = s0,7
animtype = up
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -5,-3
guard.velocity = -11
air.velocity = -4,-10
yaccel = 0.65 ;+ (var(3) - 1)*0.1
fall = 1
fall.recover = 0
ID = 600
nochainID = 9999

;七星
[State North]
type = VarAdd;当たったら星を奪う
trigger1 = movehit
trigger1 = var(0) = 1;エリアルふっとばし状態のとき
trigger1 = var(41) < 7
var(41) = 1
persistent=0
ignorehitpause=1
;---------------------[立ちステートに戻る]
[state 451,6]
type = screenbound
trigger1 = var(15) = 0
trigger1 = movehit
value = 0

[state 451,6]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = backedgebodydist <= -20
value = 710
ctrl = 1

[state a20]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = var(15) != 0
value = 1051

[state a21]
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 50
;---------------------
;着地
[Statedef 1051]
type    = S
physics = S
;FaceP2 = 1
ctrl = 0
anim = 47

[State Turn]
Type     = Turn
Trigger1 = P2Dist X < 0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 12
value = 1

[state 200, 1];Var(0)初期化
type = varset
trigger1 = time = 0
var(0) = 0

[State Snd_chakuti];着地音
Type = PlaySnd
Trigger1 = Time = 0
Value = 0,35;
;channel = 1;SE

[State Chakuti_Effect]
Type = Explod
Trigger1 = Time = 0
Anim = 4013;着地したエフェクト
ID = 4013
PosType = p1
Pos = 0,0
ownpal = 1
Bindtime = 1
Sprpriority = -2
Persistent = 0
Removeongethit = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;--------------------------------------
;飛衛拳Ｂ
[StateDef 1052]
;type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
velset = 0,0
anim = 1052
sprpriority = 1
ctrl = 0

;Var15を判定に使う。


[state a1]
type = velset
trigger1 = time = 0
y = 0

[state a2]
type = null;posset
trigger1 = time = 0
y = 0

[state a3]
type = statetypeset
trigger1 = pos y < 0
value = A

[state a4]
type = varset
trigger1 = time = 0
;空中じゃない
v = 15
value = 2


[State 220, 3]
type = Explod
trigger1 = time = 0
trigger1 = !(statetype = A)
anim = 4010;手前のケムリオブジェクト。
sprpriority = 5

[State -1]
type = NotHitBy
trigger1 = var(15) = 1
trigger1 = time <= 9
value = SCA


;---------------------[効果音]
[state a7];北斗飛衛拳!!
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = animelem = 2
value = 1050,0
channel = 0;VC

[state a8];蹴り
type = playsnd
trigger1 = animelem = 6
value = 1050,1

[state a]
type = posadd
;triggerall = var(15) = 2
trigger1 = animelemtime(3)=0;time = 0
x = 0;6
y = -24
;-------------[速度・１]
[state a9]
type = statetypeset
trigger1 = time = 0
value = A

;-------------[速度・２]
[state a]
type = velset
triggerall = var(15) = 2
trigger1 = time = 0
x = 6
y = -6.5

[state a]
type = veladd
triggerall = var(15) = 2
trigger1 = animelem = 9,>=0
trigger1 = vel x > 0
x = -0.2

[state a]
type = velset
triggerall = var(15) = 2
trigger1 = vel x <= 2
x = 2

[state a]
type = veladd
triggerall = var(15) = 2
trigger1 = 1
y = 0.4

;エフェクト関連
;アッパー
[State 5150, 6] 
type = Explod
trigger1 = animelem = 7
trigger1 = !numexplod(1055)
anim = 1055
id = 1055
Postype     = P1
Pos         = 48,-58
scale = .5,.5
vel = 0,0
ownpal = 1
removetime = -1
bindtime = -1
sprpriority = 4
ignorehitpause = 1
removeongethit = 1;食らったらきえます

[State 5150, 6] ;後ろ光
type = Explod
trigger1 = animelem = 7
trigger1 = !numexplod(1056)
anim = 1056
id = 1056
Postype     = P1
Pos         = -15,-40
scale = .5,.5
vel = -1,0
ownpal = 1
removetime = 32;終了時消滅
bindtime = 1
sprpriority = 4
ignorehitpause = 1
[State 5150, 6] ;後ろ光
type = Explod
trigger1 = animelem = 7
trigger1 = !numexplod(1057)
anim = 1057
id = 1057
Postype     = P1
Pos         = 0,-20
scale = .5,.5
vel = -.5,.5
ownpal = 1
removetime = 32;終了時消滅
bindtime = 1
sprpriority = 4
ignorehitpause = 1

[State DelExplod];アッパー消去
type = RemoveExplod
triggerall = numexplod(1055)
trigger1 = (var(15) = 0) && animelem = 13,>=0
trigger2 = (var(15) = 1) && animelem = 12,>=0
trigger3 = (var(15) = 2) && animelem = 11,>=0
ID = 1055

;---------------------[弱攻撃]
[State 640, 3]
type = HitDef
triggerall = var(15) = 0
trigger1 = animelem = 7
attr = A, SA
damage    = 115,15
priority = 8, Hit
guardflag = MA
getpower = 108,108
pausetime = 14,14
guard.pausetime = 12,12
sparkno = s4002
sparkxy = -10,-60
hitsound   = s0,5
guard.sparkno = s4023
guardsound = s0,7
animtype = up
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -10,-2
guard.velocity = -11
air.velocity = -2,-10
yaccel = 0.65 ;+ (var(3) - 1)*0.1
fall = 1
fall.recover = 0
ID = 600
nochainID = 9999
;---------------------[強攻撃]
[State 640, 3]
type = HitDef
triggerall = var(15) = 2
trigger1 = animelem = 7
attr = A, SA
damage    = 115,15
priority = 6, Hit
guardflag = HA
getpower = 108,108
pausetime = 17,17
guard.pausetime = 15,15
sparkno = s4002
sparkxy = -10,-60
hitsound   = s0,5
guard.sparkno = s4023
guardsound = s0,7
animtype = up
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -2,-10
guard.velocity = -11
air.velocity = -2,-10
yaccel = 0.55 ;+ (var(3) - 1)*0.1
fall = 1
fall.recovertime = 60
ID = 600
nochainID = 9999



;七星
[State North]
type = VarAdd;当たったら星を奪う
trigger1 = movehit
trigger1 = var(0) = 1;エリアルふっとばし状態のとき
trigger1 = var(41) < 7
var(41) = 1
persistent=0
ignorehitpause=1
;---------------------[立ちステートに戻る]
[state a20]
type = changestate
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
trigger1 = var(15) != 0
value = 1051

[state a21]
type = changestate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 50
;---------------------------------------------------------------------------
; 特定武器装備中用必殺技　ジェノサイドカッター
[StateDef 1055]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 35252

[State -1]
Type     = NotHitBy
Trigger1 = animelem = 1
Value    = , AA
Time     = 8;1

[State ]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = AnimElem = 2
value = 1,8;でりゃあ！
;Value    = s3525, 0;ジェノサイドカッター
channel = 0;VC

[State 220, 3]
type = Explod
trigger1 = AnimElem = 2
anim = 4010;手前のケムリオブジェクト。
sprpriority = 5

;アッパー
[State 5150, 6] 
type = null;Explod
trigger1 = animelem = 3
anim = 35255
id = 1101
Postype     = P1
Pos         = 0,0
vel = 0,0
ownpal = 1
removetime = -2
bindtime = -1
sprpriority = 4
ignorehitpause = 1
removeongethit = 1;食らったらきえます
;カットアニメ
[State 4500, Helper];ヘルパー扱い
type = Helper
trigger1 = animelem = 3
helpertype = Normal
name = "CUTTER Helper"
ID = 35255
stateno = 35255
pos =  0,0;
postype = p1
facing = 1
ownpal = 1
keyctrl = 0
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State -1, HitDef]
Type = HitDef
Trigger1          = animelem = 3
Attr              = A, SA
Damage            = 55, 5			;ダメージ
AnimType          = Heavy			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 113        ;相手がガード行動をとる距離
sparkno = Sifelse(Random < 555,4037,4035);斬エフェクトを実装する
hitsound   = S0,41;セイバーヒット
guardsound = S0,7;これもバスターのものを
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 9, 9			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -1.5,-6.5			;ヒット時の相手の移動 地上
Air.Velocity      = -1.5,-6.0			;ヒット時の相手の移動 空中
AirGuard.Velocity = -1.5,-2.5			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
getpower = 20, 10

[State -1, HitDef]
Type = HitDef
Trigger1          = animelem = 4
Attr              = A, SA
Damage            = 15, 5			;ダメージ
AnimType          = Heavy			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 113        ;相手がガード行動をとる距離
sparkno = Sifelse(Random < 555,4037,4035);斬エフェクトを実装する
hitsound   = S0,41;セイバーヒット
guardsound = S0,7;これもバスターのものを
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 9, 9			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -1.5,-6.5			;ヒット時の相手の移動 地上
Air.Velocity      = -1.5,-6.0			;ヒット時の相手の移動 空中
AirGuard.Velocity = -1.5,-2.5			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
getpower = 20, 10

[State -1, HitDef]
Type = HitDef
Trigger1          = animelem = 5
Attr              = A, SA
Damage            = 15, 5			;ダメージ
AnimType          = Heavy			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 113        ;相手がガード行動をとる距離
sparkno = Sifelse(Random < 555,4037,4035);斬エフェクトを実装する
hitsound   = S0,41;セイバーヒット
guardsound = S0,7;これもバスターのものを
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 9, 9			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -2.5,-6.5			;ヒット時の相手の移動 地上
Air.Velocity      = -3.5,-6.5			;ヒット時の相手の移動 空中
AirGuard.Velocity = -1.5,-2.5			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
getpower = 20, 10

[State -1]
Type     = VelSet
trigger1 = AnimElem = 4;飛ぶのがそんくらい
X        = 1.5
[State -1]
Type     = VelSet
trigger1 = AnimElem = 4;飛ぶのがそんくらい
Y        = -3

[State Grv]
trigger1 = AnimElemtime(6)>0;飛ぶのがそんくらい
type = Gravity

[State -1]
Type      = StateTypeSet
trigger1 = AnimElem = 4;飛ぶのがそんくらい
StateType = A
Physics   = N

[State -1]
Type     = PlaySnd
Trigger1 = Time = 3
Value    = s3525, 1;ジェノサイドカッター
Channel = 1;SE

[State -1]
Type     = ChangeState
trigger1 = AnimElemtime(6)>0;飛ぶのがそんくらい
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value    = 52

;---------------------------------------------------------------------------
; 特定武器装備中用必殺技　ジェノサイドカッター強
[StateDef 1056]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 35253

[State -1];こっちは無敵無し
Type     = null;NotHitBy
Trigger1 = animelem = 1
Value    = , AA
Time     = 8;1

[State ]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = AnimElem = 2
value = 1,8;でりゃあ！
;Value    = s3525, 0;ジェノサイドカッター
channel = 0;VC

[State 220, 3]
type = Explod
trigger1 = AnimElem = 2
anim = 4010;手前のケムリオブジェクト。
sprpriority = 5

;アッパー
[State 5150, 6] 
type = null;Explod
trigger1 = animelem = 3
anim = 35255
id = 1101
Postype     = P1
Pos         = 0,0
vel = 0,0
ownpal = 1
removetime = -2
bindtime = -1
sprpriority = 4
ignorehitpause = 1
removeongethit = 1;食らったらきえます
;カットアニメ
[State 4500, Helper];ヘルパー扱い
type = Helper
trigger1 = animelem = 3
helpertype = Normal
name = "CUTTER Helper"
ID = 35255
stateno = 35255
pos =  0,0;
postype = p1
facing = 1
ownpal = 1
keyctrl = 0
ignorehitpause = 1
supermovetime = 99999
pausemovetime = 99999

[State -1, HitDef]
Type = HitDef
Trigger1          = animelem = 3
Attr              = A, SA
Damage            = 75, 5			;ダメージ
AnimType          = Heavy			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 113        ;相手がガード行動をとる距離
sparkno = Sifelse(Random < 555,4037,4035);斬エフェクトを実装する
hitsound   = S0,41;セイバーヒット
guardsound = S0,7;これもバスターのものを
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 9, 9			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -1.5,-6.5			;ヒット時の相手の移動 地上
Air.Velocity      = -1.5,-6.0			;ヒット時の相手の移動 空中
AirGuard.Velocity = -1.5,-2.5			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
getpower = 20, 10

[State -1, HitDef]
Type = HitDef
Trigger1          = animelem = 4
Attr              = A, SA
Damage            = 35, 5			;ダメージ
AnimType          = Heavy			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 113        ;相手がガード行動をとる距離
sparkno = Sifelse(Random < 555,4037,4035);斬エフェクトを実装する
hitsound   = S0,41;セイバーヒット
guardsound = S0,7;これもバスターのものを
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 9, 9			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -1.5,-6.5			;ヒット時の相手の移動 地上
Air.Velocity      = -1.5,-6.0			;ヒット時の相手の移動 空中
AirGuard.Velocity = -1.5,-2.5			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
getpower = 20, 10

[State -1, HitDef]
Type = HitDef
Trigger1          = animelem = 5
Attr              = A, SA
Damage            = 35, 5			;ダメージ
AnimType          = Heavy			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 113        ;相手がガード行動をとる距離
sparkno = Sifelse(Random < 555,4037,4035);斬エフェクトを実装する
hitsound   = S0,41;セイバーヒット
guardsound = S0,7;これもバスターのものを
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 9, 9			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -1.5,-6.5			;ヒット時の相手の移動 地上
Air.Velocity      = -1.5,-6.0			;ヒット時の相手の移動 空中
AirGuard.Velocity = -1.5,-2.5			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
getpower = 20, 10

[State -1]
Type     = VelSet
trigger1 = AnimElem = 4;飛ぶのがそんくらい
X        = 1.5
[State -1]
Type     = VelSet
trigger1 = AnimElem = 4;飛ぶのがそんくらい
Y        = -6

[State Grv]
trigger1 = AnimElemtime(6)>0;飛ぶのがそんくらい
type = Gravity
[State -1]
Type     = Veladd
trigger1 = AnimElemtime(6)>0;飛ぶのがそんくらい
trigger1 = vel X >= 0
X        = -.05

[State -1]
Type      = StateTypeSet
trigger1 = AnimElem = 4;飛ぶのがそんくらい
StateType = A
Physics   = N

[State -1]
Type     = PlaySnd
Trigger1 = Time = 3
Value    = s3525, 1;ジェノサイドカッター
Channel = 1;SE

[State -1]
Type     = ChangeState
trigger1 = AnimElemtime(6)>0;飛ぶのがそんくらい
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value    = 52
;---------------------------------------------------------------------------
; ロックアッパーならぬホウキアッパー
[StateDef 1010]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 1110

[State -1]
Type     = NotHitBy
Trigger1 = animelem = 1
Value    = , AA
Time     = 6;1

[State ]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = AnimElem = 2
value = 1,5;
channel = 0;VC

[State 220, 3]
type = Explod
trigger1 = AnimElem = 2
anim = 4010;手前のケムリオブジェクト。
sprpriority = 5

;アッパー
[State 5150, 6] 
type = Explod
trigger1 = animelem = 2
anim = 1101
id = 1101
Postype     = P1
Pos         = 40,-135
vel = 0,0
ownpal = 1
removetime = -1
bindtime = -1
sprpriority = 4
ignorehitpause = 1
removeongethit = 1;食らったらきえます

[State DelExplod];アッパー消去
type = RemoveExplod
trigger1 = numexplod(1101) && AnimElem >= 4
ID = 1101

[State -1, HitDef]
Type = HitDef
Trigger1          = !MoveContACT
Trigger1          = animelem >= 2
Attr              = A, SA
Damage            = 65, 5			;ダメージ
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 113        ;相手がガード行動をとる距離
sparkno = S4002;必殺エフェクト２
hitsound   = S0,5;5,0
guardsound = S0,7;6,0
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 9, 9			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -1.5,-6.5			;ヒット時の相手の移動 地上
Air.Velocity      = -1.5,-6.5			;ヒット時の相手の移動 空中
AirGuard.Velocity = -1.5,-6.5			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
getpower = 20, 10

[State -1]
Type     = VelSet
Trigger1 = Time = 4;10;飛ぶのがそんくらい
X        = 1.5

[State -1]
Type     = VelSet
Trigger1 = Time = 5;11
X        = 3

[State -1]
Type     = VelMul
Trigger1 = Time >= 10;18
X        = 0.9

[State -1]
Type     = VelSet
Trigger1 = Time = 5;10
Y        = -4;-6

[State Grv]
trigger1 = Time >= 10
type = Gravity

[State -1]
Type      = StateTypeSet
Trigger1  = Time = 10
StateType = A
Physics   = N

[State -1]
Type     = PlaySnd
Trigger1 = Time = 4;9
Value    = s0, 12;ダッシュ
Channel = 1;SE

[State -1]
Type     = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value    = 52

;---------------------------------------------------------------------------
; ホウキアッパーB
[StateDef 1011]
Type      = S
MoveType  = A
Physics   = S
Ctrl      = 0
Anim      = 1111

[State -1]
Type     = NotHitBy
Trigger1 = animelem = 1
Value    = , AP;AA
Time     = 6;2

[State ]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = AnimElem = 2
value = 1,5;
channel = 0;VC

[State 220, 3]
type = Explod
trigger1 = AnimElem = 2
anim = 4010;手前のケムリオブジェクト。
sprpriority = 5

;アッパー
[State 5150, 6] 
type = Explod
trigger1 = Time = 5;animelem = 2
trigger1 = !numexplod(1101)
anim = 1101
id = 1101
Postype     = P1
Pos         = 40,-135
vel = 0,0
ownpal = 1
removetime = -1
bindtime = -1
sprpriority = 4
ignorehitpause = 1
removeongethit = 1;食らったらきえます

[State DelExplod];アッパー消去
type = RemoveExplod
trigger1 = numexplod(1101) && AnimElem >= 4
ID = 1101

[State -1, HitDef]
Type = HitDef
;Trigger1          = !MoveContACT
Trigger1	  = Time = 3;準備動作
Attr              = A, SA
Damage            = 25, 5			;ダメージ
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 113        ;相手がガード行動をとる距離
sparkno = S4002;必殺エフェクト２
hitsound   = S0,5;5,0
guardsound = S0,7;6,0
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 9, 9			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -2.2,-6.5			;ヒット時の相手の移動 地上
Air.Velocity      = -2.2,-6.5			;ヒット時の相手の移動 空中
AirGuard.Velocity = -2.2,-6.5			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
getpower = 10, 5


[State -1, HitDef]
Type = HitDef
;Trigger1          = !MoveContACT
Trigger1	  = Time = 4;一段目
Attr              = A, SA
Damage            = 25, 5			;ダメージ
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 113        ;相手がガード行動をとる距離
sparkno = S4002;必殺エフェクト２
hitsound   = S0,5;5,0
guardsound = S0,7;6,0
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 8, 6			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -2.2,-11			;ヒット時の相手の移動 地上
Air.Velocity      = -2.2,-11			;ヒット時の相手の移動 空中
AirGuard.Velocity = -2.2,-11			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
getpower = 10, 5

[State -1, HitDef]
Type = HitDef
;Trigger1          = !MoveContACT
Trigger1	  = Time >= 5;二段目
Attr              = A, SA
Damage            = 65, 5			;ダメージ
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 113        ;相手がガード行動をとる距離
sparkno = S4002;必殺エフェクト２
hitsound   = S0,5;5,0
guardsound = S0,7;6,0
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 8, 6			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -2.6,-11			;ヒット時の相手の移動 地上
Air.Velocity      = -2.6,-11			;ヒット時の相手の移動 空中
AirGuard.Velocity = -2.6,-11			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
yaccel = .5
getpower = 10, 5

[State -1]
Type     = VelSet
Trigger1 = Time = 4;10;飛ぶのがそんくらい
X        = 3

[State -1]
Type     = VelSet
Trigger1 = Time = 5;11
X        = 5

[State -1]
Type     = VelSet
Trigger1 = Time = 6;11
X        = 8

[State -1]
Type     = VelMul
Trigger1 = Time >= 10;18
X        = 0.9

[State -1]
Type     = VelSet
Trigger1 = Time = 5;10
Y        = -6

[State Grv]
trigger1 = Time >= 10
type = Gravity

[State -1]
Type      = StateTypeSet
Trigger1  = Time = 10
StateType = A
Physics   = N

[State -1]
Type     = PlaySnd
Trigger1 = Time = 4;9
Value    = s0, 12;ダッシュ
Channel = 1;SE

[State -1]
Type     = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value    = 52

;--------------------
;さいこミサイル
[Statedef 1000]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 605
sprpriority = 1

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Random < 400;無音にするか、声出すかをランダムで決める
trigger1 = Time = 0
value = 1,5;
channel = 0;VC

[State 4500, Helper];ヘルパー扱いでミサイルを出す
type = Helper
trigger1 = AnimElem = 6
trigger1 = !NumHelper(3011)
helpertype = Normal
name = "Zayaku Missile Helper"
ID = 3011
stateno = 1001;4501
pos =  50,10;
postype = p1
facing = 1
ownpal = 1

[state 410,3]
type = veladd
trigger1 = var(3) = 1
y = -0.09

[State 605, 1]
type = PlaySnd
trigger1 = Time = 4;11;600番なら11
value = 0, 8

[State 605, 3]
type = CtrlSet
trigger1 = Time = 17
value = 1

;みさいるヘルパー
[Statedef 1001]
type    = A
movetype= A
physics = N;A
juggle  = 2
;poweradd = -300
ctrl = 0
anim = 3015
sprpriority = 2

[State Hitby];無敵
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State Velset]
type = velset
trigger1 = Time = 0;1
X = 2;.5
Y = 2;.5

[State Veladd]
type = veladd
trigger1 = Time >= 10
X = 1;.5
Y = 1;.5

;ここらにアタリ判定記述を
;拡大projectileを出してヘルパーを切ったほうがよさそう。
[State NextState]
Type = ChangeState
Trigger1 = Pos Y >= -10;地上になったら
Value = 1002;爆発地上

;地上で爆発
[Statedef 1002]
type    = S
movetype= A
physics = N
juggle  = 2
ctrl = 0
velset = 0,0
anim = 6001
sprpriority = 2

[State AssSP]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

[State Pos]
type = Posset
trigger1 = 1
Y = 0

;[State Angle]
;type = AngleDraw
;trigger1 = 1
;Scale = 1.5,1.5
;AngleDrawによる拡大はDosでは出来ない。

[state 4002, 1];
type = explod
trigger1 = Time = 0
anim = 6001
id = 6001
;postype = p1
pos = 0, 0
ownpal = 0
bindtime = -1
ignorehitpause = 1
;ontop = 1
sprpriority = 2
facing = 1
scale = 1.5,1.5

[State 605, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 15

[State Hitdef]
Type = HitDef
Trigger1	  = 1
Attr              = A, SA
Damage            = 80, 5			;ダメージ
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 95        ;相手がガード行動をとる距離
sparkno = -1;S4002;必殺エフェクト２
hitsound   = -1;S0,5;5,0
guardsound = -1;S0,7;6,0
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 8, 6			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = ifelse(P2Dist X <= 0,3,-3),-13			;ヒット時の相手の移動 地上
Air.Velocity      = ifelse(P2Dist X <= 0,3,-3),-13			;ヒット時の相手の移動 空中
;AirGuard.Velocity = -1,-11			;ヒット時の相手の移動 空中ガード
yaccel 		= .5
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0

[State DelHelper]
type = DestroySelf
trigger1 = Animtime = 0

;-----------------------------
;オンミョウストライク　弱
[Statedef 1020]
type    = S
movetype= A
physics = S
poweradd= 30
ctrl = 0
velset = 0,0
anim = 3025

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = AnimElemtime(5) = 0
value = 1,5;りゃっ！
channel=0;vc

[State 210, 1]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 0,8;発射

[State 4500, Helper];ヘルパー扱いでミサイルを出す
type = Helper
trigger1 = AnimElem = 5
trigger1 = !NumHelper(1020)
helpertype = Normal
name = "ONMYOU Helper"
ID = 1020
stateno = 1025
pos =  40,-40;
postype = p1
facing = 1
ownpal = 1
size.ground.back = 20;前ぶつかり判定 (int)
size.ground.front = 20;後ぶつかり判定 (int)
size.height = 0;縦ぶつかり判定

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------
;オンミョウストライク　強
[Statedef 1021]
type    = S
movetype= A
physics = S
poweradd= 30
ctrl = 0
velset = 0,0
anim = 3025

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = AnimElemtime(5) = 0
value = 1,5;りゃっ！
channel=0;vc

[State 210, 1]
type = PlaySnd
trigger1 = AnimElemtime(5) = 0
value = 0,8;発射

[State 4500, Helper];ヘルパー扱いでミサイルを出す
type = Helper
trigger1 = AnimElem = 5
trigger1 = !NumHelper(1020)
helpertype = Normal
name = "ONMYOU Helper"
ID = 1020
stateno = 1026
pos =  40,-40;
postype = p1
facing = 1
ownpal = 1
size.ground.back = 20;前ぶつかり判定 (int)
size.ground.front = 20;後ぶつかり判定 (int)
size.height = 0;縦ぶつかり判定

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------------------
;オンミョウストライク　弾ヘルパーＡ
[Statedef 1025]
type    = A
movetype= A
physics = N;A
ctrl = 0
anim = 3020;
sprpriority = 3
;velset = 1.5,-8;軌道変更

[State Gravity]
type = veladd
trigger1 = 1;動作をバウンド型に変更
Y = .2

[State Ref]
type = velset
trigger1 = var(1) = 0;まだカウント始まっていない
X = 1.5
;Y = 8;-8;軌道変更
Y = -7

[State Ref]
type = velmul
trigger1 = screenpos Y < 10
trigger1 = vel Y < 0
trigger2 = pos Y > -10
trigger2 = vel Y > 0
Y = -1

[State Ref]
type = velmul
trigger1 = Screenpos X < 10
trigger1 = (vel X*facing) < 0
trigger2 = Screenpos X > 315
trigger2 = (vel X*facing) > 0
X = -1

;[State Hitby]
;type = Hitby
;trigger1 = 1
;value = SCA,AP

[State 220, 4] 
type = Hitdef
trigger1 = !movecontact
trigger2 = movecontact
trigger2 = (time%8)=0
; HitDef
attr = A, SP
animtype = Light
damage    = 4,2;50,15
hitflag = MAFD;MAFP
guardflag = MA;F
guard.dist	= 60        ;相手がガード行動をとる距離
priority = 7,Dodge;最大のかき消し属性
pausetime = 5,6;3,6
sparkno = S4006
guard.sparkno = S4023
sparkxy = 0,0;-35
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6
airguard.velocity = -5
air.velocity = -5,-1;5
air.juggle = 0;9
air.fall = 1
getpower  = 0

[State Timer]
type = varadd
trigger1 = 1
var(1) = 3;カウンターをセットし、一定時間経過後消滅
[State Timer]
type = varadd
trigger1 = movecontact = 1
var(1) = 350;カウンターをセットし、一定時間経過後消滅
[State Timer]
type = varadd
trigger1 = prevstateno = [5000,5020];1025
var(1) = 30;カウンターをセットし、一定時間経過後消滅

[State sousai]
type = HitOverRide
trigger1 = Time = 0
time = -1
attr = SCA, AP,AA,AT;NP, SP, HP
slot = 0
stateno = 1025

[State -1]
Type        = AfterImage
Trigger1    = Time = 0;2
Time        = -1
Trans       = Add
Length      = 20
TimeGap     = 1
FrameFap    = 1
PalBright   = 10,10,10;0  , 0  , 0
PalContrast = 220,0,0;0  , 0  , 150
;PalAdd      = 0  , 0  , 0
;PalMul      = .5 , .5 , .5
Peresistent = 1
[State -1]
Type        = AfterImagetime
trigger1 = var(1) >= 600;一定時間経過
Time        = 0

[State NextState]
Type = changeState;destroyself
;trigger1 = movecontact;当たったら
trigger1 = var(1) >= 600;一定時間経過
trigger2 = ScreenPos X != [-200,520];画面外
;trigger3 = ScreenPos Y != [0,300]
trigger3 = Pos Y != [-600,20]
trigger4 = parent,movetype = H;ダメージ
value = 1027

[State clip]
type = DisplayToClipboard
trigger1 = 1
text = "prev = %d time = %d"
params = prevstateno,var(1)
;-----------------------------
;オンミョウストライク　弾ヘルパーＢ
[Statedef 1026]
type    = A
movetype= A
physics = N;A
ctrl = 0
anim = 3020;
sprpriority = 3
;velset = 1.5,-8

[State Gravity]
type = veladd
trigger1 = 1;動作をバウンド型に変更
Y = .2

[State Ref]
type = velset
trigger1 = var(1) = 0;まだカウント始まっていない
X = p2dist X / 110;6.5
Y = -8;-3

[State Ref]
type = velmul
;trigger1 = screenpos Y < 10
;trigger1 = vel Y < 0
trigger1 = pos Y > -10
trigger1 = vel Y > 0
Y = -1

[State Ref]
type = velmul
trigger1 = Screenpos X < 10
trigger1 = (vel X*facing) < 0
trigger2 = Screenpos X > 315
trigger2 = (vel X*facing) > 0
X = -1;+(((Random%21)-10)/10)

;[State Hitby]
;type = Hitby
;trigger1 = 1
;value = SCA,AP

[State 220, 4] 
type = Hitdef
trigger1 = !movecontact
trigger2 = movecontact
trigger2 = (time%8)=0
; HitDef
attr = A, SP
animtype = Light
damage    = 4,2;50,15
hitflag = MAFD;MAFP
guardflag = MA;F
guard.dist	= 60        ;相手がガード行動をとる距離
priority = 7,Dodge;最大のかき消し属性
pausetime = 5,6;3,6
sparkno = S4006
sparkxy = 0,0;-35
hitsound   = S0,11;S5,1
guard.sparkno = S4023
guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -6
airguard.velocity = -5
air.velocity = -5,-1;5
air.juggle = 0;9
air.fall = 1
getpower  = 0

[State Timer]
type = varadd
trigger1 = 1
var(1) = 3;カウンターをセットし、一定時間経過後消滅
[State Timer]
type = varadd
trigger1 = movecontact = 1
var(1) = 310;カウンターをセットし、一定時間経過後消滅
[State Timer]
type = varadd
trigger1 = prevstateno = [5000,5020];1025
var(1) = 30;カウンターをセットし、一定時間経過後消滅

[State sousai]
type = HitOverRide
trigger1 = Time = 0
time = -1
attr = SCA, AP,AA,AT;NP, SP, HP
slot = 0
stateno = 1025

[State -1]
Type        = AfterImage
Trigger1    = Time = 0;2
Time        = -1
Trans       = Add
Length      = 20
TimeGap     = 1
FrameFap    = 1
PalBright   = 10,10,10;0  , 0  , 0
PalContrast = 220,0,0;0  , 0  , 150
;PalAdd      = 0  , 0  , 0
;PalMul      = .5 , .5 , .5
Peresistent = 1
[State -1]
Type        = AfterImagetime
trigger1 = var(1) >= 600;一定時間経過
Time        = 0

[State NextState]
Type = changeState;destroyself
;trigger1 = movecontact;当たったら
trigger1 = var(1) >= 600;一定時間経過
trigger2 = ScreenPos X != [-200,520];画面外
;trigger3 = ScreenPos Y != [-160,300];[0,300]
trigger3 = Pos Y != [-600,20]
trigger4 = parent,movetype = H;ダメージ
value = 1027

[State clip]
type = DisplayToClipboard
trigger1 = 1
text = "prev = %d time = %d"
params = prevstateno,var(1)

;-----------------------------
;オンミョウストライク　消滅
[Statedef 1027]
type    = A
movetype= A
physics = N;A
ctrl = 0
anim = 9999;
sprpriority = 3
velset = 0,0

[state 4002, 1];爆風
type = explod
trigger1 = Time = 0
anim = 6000
postype = p1
pos = 0, 0
ownpal = 0
bindtime = 1
ignorehitpause = 1
sprpriority = 2
facing = 1
scale = 2,2

[State NextState]
Type = destroyself
trigger1 = Time >= 60;１Ｓｅｃ


;---------------------------------------------------------------------------
; レーザーバスターヨコ
[Statedef 3100]
type = S
movetype = A
physics = N
velset = 0,0
sprpriority = 3;1;スパークらしきエフェクトは・・・
anim = 3100
juggle = 1
ctrl = 0
hitcountpersist = 1

[State 4501, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
;flag2 = Invisible
ignorehitpause = 1

[State PosVar];へるぱーのVarに情報をいれる
type = Varset
trigger1 = parent,Stateno = 225
var(0) = (var(1) := 50)+(var(2) := 44)

[State PosVar];へるぱーのVarに情報をいれる
type = Varset
trigger1 = parent,Stateno = 425
var(0) = (var(1) := 50)+(var(2) := 36)

[State PosVar];へるぱーのVarに情報をいれる
type = Varset
trigger1 = parent,Stateno = 625
var(0) = (var(1) := 50)+(var(2) := 56)

[State 4501, PosSet]
type = PosSet
trigger1 = parent, facing = 1
x = parent, Pos X + var(1)
y = parent, Pos Y - var(2)
ignorehitpause = 1

[State 4501, PosSet]
type = PosSet
trigger1 = parent, facing = -1
x = parent, Pos X - var(1)
y = parent, Pos Y - var(2)
ignorehitpause = 1

;攻撃判定を持つヘルパーは自前で補正用varを持つようにする！
[State Attackfv]
type = varset
trigger1 = Target,Gethitvar(hitcount) >= 1
;fvar(10) = 1.0-(Target,Gethitvar(hitcount)/60.0) ;*parent,fvar(10);-(parent,Hitcount/60.0)
fvar(10) = parent,fvar(10)-(Target,Gethitvar(hitcount)/80.0)
ignorehitpause=1
;補正無し
[State Attackfv]
type = varset
trigger1 = Target,Gethitvar(hitcount) = 0
fvar(10) = 1.0 
ignorehitpause=1
;下回りした場合
[State Attackfv]
type = varset
trigger1 = fvar(10) <= 0
fvar(10) = .0 
ignorehitpause=1

;アタリ判定
[State 4501, HitDef]
type = HitDef
triggerall = enemyNear, Anim != 5070
triggerall = enemyNear, Anim != 5071
trigger1 = !MoveContact
trigger2 = TimeMod = 2,0
attr = S, HP
animtype  = Hard
damage    = ceil(13*fvar(10)),5;かなり当たるので威力調整には注意が必要
getpower = 0,0
sprpriority = 1
hitflag = MADFP
guardflag = MA
guard.dist	= 354        ;相手がガード行動をとる距離
pausetime = 0,7
sparkno = S4003;真空波動ヒット
sparkxy = ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), ifelse((Random < 330),0,ifelse((Random = [330,660]),0,-30))
;sparkxy =  ceil(Random*(-20 - -50 + 1.0)/(1.0+999)),ceil(Random*(10 - -40 + 1.0)/(1.0+999))
hitsound   = S0,11;ばすたーひっと音
guardsound = S0,7;これもバスターのものを
guard.sparkno = S4023;こいつはあのガードアニメを
ground.type = High
ground.slidetime = 22
ground.hittime = 23
ground.velocity = -2,-6
guard.slidetime = 11
guard.hittime = 11
guard.velocity = -4.5
air.type = High
air.velocity = -2,-6
airguard.velocity = -4.5
ground.cornerpush.veloff = 0;1
air.cornerpush.veloff = 0;2
down.cornerpush.veloff = 0;3
guard.cornerpush.veloff = 0;4
airguard.cornerpush.veloff = 0;5
fall = 1
Fall.Recover      = 0				;リカバーできるか
;p2stateno = 4506

[State NorthStar]
type = parentVarAdd;当たったら星を奪う
trigger1 = movehit
trigger1 = parent,var(41) < 7
var(41) = 1
persistent=0
ignorehitpause=1

[State -2, 1st Blue]
type = PalFX
;triggerall = var(1) >= 30
;triggerall = var(1) <= 100
trigger1 = Time % 2;TimeMod = 2,0
trigger1 = (Time + 11) % 32 != 0;
time = 1;3
add = 256,256,256
mul = 128,64,256;256-((Time % 16)*8),256-(((Time + 11) % 32)*8),256-(((Time + 22) % 32)*8)
;sinadd = 0,0,256,20
;目が、目がぁぁぁぁぁ〜になりかねないのでちょっと自重

[State Beamend]
type = changeanim
triggerall = Anim = 3100
trigger1 = Time >= 25
;trigger1 = parent, StateNo != 225;本体の動作がおわたら消滅
;trigger2 = parent, StateNo != 425;本体の動作がおわたら消滅
;trigger3 = parent, StateNo != 625;本体の動作がおわたら消滅
value = 3101

[State 4501, DestroySelf]
type = DestroySelf
triggerall = Anim = 3101
triggerall = Animtime = 0
trigger1 = Time >= 25
;trigger1 = parent, StateNo != 225;本体の動作がおわたら消滅
;trigger2 = parent, StateNo != 425;本体の動作がおわたら消滅
;trigger3 = parent, StateNo != 625;本体の動作がおわたら消滅
;---------------------------------------------------------------------------
; ハイパーコンボ
;---------------------------------------------------------------------------
;Lv1マスタースパーク
[Statedef 3000];マスタースパーク 真空波動的にするっす
type = S
movetype = A
physics = S
velset = 0,0
anim = 2010;4500;ますたーすぱーく、発射まで
;sprpriority = 1
poweradd = 0;ここでは消費させない まずは実験だんかい
juggle  = 7
ctrl = 0
hitcountpersist = 1

[State 4500, NotHitBy]
type= NotHitBy
trigger1 = Time = [0,3]
time = 1
value = SCA, NA, SA, HA, NT, ST, HT

[State Chargestop]
Type = varset
trigger1 = var(1)
var(1) = 0

[State 4500, AfterImage]
type = AfterImage
trigger1 = time = 4
Time        = 50
Trans       = Add
Length      = 20
TimeGap     = 1
FrameFap    = 1
PalBright   = 10,10,10;0  , 0  , 0
PalContrast = 0,220,40;0  , 0  , 150
;PalAdd      = 0  , 0  , 0
;PalMul      = .5 , .5 , .5
Peresistent = 1


[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
;trigger1 = 1
trigger1 = animelemtime(3) >= 0
trigger1 = var(5) != -1;MAX状態じゃない
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, Explod]
type = Explod
trigger1 = animelemtime(3) = 0
trigger1 = var(5) != -1;MAX状態じゃない
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1

;
;カットイン！
[state 4002, 1]
type = explod
trigger1 = animelemtime(3) = 0
trigger1 = var(5) != -1;MAX状態じゃない
anim = 10050;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0

[State ***]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 2
trigger1 = var(5) != -1;MAX状態じゃない
value = 1,17;松本マスタースパーク
channel = 0;VC


[State ***]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = animelemtime(4) = 0
trigger1 = var(5) != -1;MAX状態じゃない
value = 1,8;でりゃあ！
channel = 0;VC


[State 3000, Super A]
type = SuperPause
trigger1 = animelemtime(3) = 0
trigger1 = var(5) != -1;MAX状態じゃない
pos = -18,-40
anim = S4050;S***で自分のだったけ
sound = S0,24;22;20, 0
poweradd = 0;-1000
time = 54;停止時間 (int)
movetime = 54;停止無視時間 (int)

;ココラニ特殊背景関連の記述を？
[State 4500, Explod];ばっくぐらうんど
type = Explod
trigger1 = animelemtime(3) >= 1
trigger1 = !numexplod(1005)
persistent = 0
anim = 15061
id = 15060;
postype = back;p1
pos = 0,0
sprpriority = -5
bindtime = -1
removetime = 300
supermovetime = 60
ownpal = 1
scale = 1,1.1
removeongethit = 1;食らったらきえます
;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
;[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
;type = AssertSpecial
;trigger1 = 1
;flag = noBG ;<-- removes the stage layer
;flag = noFG ;<-- removes the lifebars and any foreground stage layers
;ignorehitpause = 1

[State Hazure];暫定リターン用　ハズレスパークができたら消す
Type     = ChangeState
Trigger1 = AnimTime = 0;発射直前なたら
Trigger1 = power < 1000;パワーはだいじょうぶか
ctrl = 1;こんとろーるもどす
Value    = 0;パワーが足りないなら別のステートへ　暫定でそのまま戻る

[State -1]
Type     = ChangeState
Trigger1 = AnimTime = 0;発射直前なたら
Trigger1 = power >= 1000;パワーはだいじょうぶか
trigger1 = var(5) != -1;MAX状態じゃない
Value    = 3001;いっかい区切る

;-----------------------
;発射中
[StateDef 3001]
Type     = S
MoveType = A
Physics  = S
Ctrl     = 0
poweradd = -1000;まずは実験だんかい
Anim     = 2011
sprpriority = -1
hitcountpersist = 1

[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, NotHitBy]
type= NotHitBy
trigger1 = Time = 0;>= 0
time = 30;ちょっとだけ無敵
value = SCA, NA, SA, HA, NT, ST, HT

[State 4500, Explod]
type = Explod
trigger1 = time = 0
ID = 4010;995
postype = P1
pos = -15,0
anim = 4010;995;バスターのケムリにする
scale = 1,1;.5,.5
supermovetime = 99999
pausemovetime = 99999
ontop = 1
ownpal = 1
removetime = -1
ignorehitpause = 1
removeongethit = 1;食らったらきえます

;ぼうし
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = Time = 0
anim = 2025;4028
id = 2025
;pos = 0,0
Postype     = P1
Pos         = -5,2
vel = 0,0
ownpal = 1
removetime = -1
;sprpriority = -5
ignorehitpause = 1
removeongethit = 1;食らったらきえます

[State ***]
type = playsnd
trigger1 = Time = 0
value = 0,25;ぶぅぅぅぅ〜〜〜〜〜ん
channel = 1;SE

[State 4500, Helper]
type = Helper
;trigger1 = AnimElem = *, = 0
trigger1 = time = 0;
helpertype = Normal
name = "Shinkuu Hadouken Beam Helper"
ID = 3013
stateno = 3003;4501
pos =  35,-40;-130,-54
postype = p1
facing = 1
ownpal = 1
removeongethit = 1
supermovetime = 99999
pausemovetime = 99999

[State Chargestop]
Type = varset
trigger1 = var(1)
var(1) = 0

[State -1]
Type     = ChangeState
Trigger1 = Time > 160;260;300;AnimTime = 0
Value    = 3002;いっかい区切る
;-------------------------
;発射おわりっ
[StateDef 3002]
Type     = S
MoveType = A
Physics  = S
Ctrl     = 0
Anim     = 2012

[State remexp]
type = removeexplod
trigger1 = time = 0;
id = 15060

[State -1]
Type     = NotHitBy
Trigger1 = Time <= 35
Value    = SAC
Time     = 1

[State ***]
type = stopsnd
trigger1 = Time = 0
channel = 1;SE

[State RemKemuri]
type = RemoveExplod
trigger1 = NumExplod(2025) && Time = 0
id = 2025;帽子をけしとく

[State RemHat]
type = RemoveExplod
trigger1 = NumExplod(4010) && Time = 0
id = 4010;けむりをけしとく

[state 451,6]
type = screenbound
trigger1 = 1
value = 0

[state 451,6]
type = changestate
trigger1 = AnimTime = 0
trigger1 = backedgebodydist <= -20
value = 710
ctrl = 1

[State 4500, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; びーむ制御
[Statedef 3003]
type = S
movetype = A
physics = N
velset = 0,0
sprpriority = 3;1;スパークらしきエフェクトは・・・
anim = 30030
juggle = 1
ctrl = 0
hitcountpersist = 1

[State 4501, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
;flag2 = Invisible
ignorehitpause = 1

[State Posfv_X]
type = varset
trigger1 = time = 0
fvar(0) = parentdist X;Pos X;X
[State Posfv_Y]
type = varset
trigger1 = time = 0
fvar(1) = parentdist Y;Pos Y;Y

[State 4501, PosSet]
type = PosSet
trigger1 = 1;parent, facing = 1
x = parent, Pos X - (fvar(0) * parent, facing)
y = parent, Pos Y - fvar(1)
ignorehitpause = 1

;[State 4501, PosSet]
;type = PosSet
;trigger1 = parent, facing = -1
;x = parent, Pos X - 35
;y = parent, Pos Y - 40
;ignorehitpause = 1

;攻撃判定を持つヘルパーは自前で補正用varを持つようにする！
[State Attackfv]
type = varset
trigger1 = Target,Gethitvar(hitcount) >= 1
;fvar(10) = 1.0-(Target,Gethitvar(hitcount)/60.0) ;*parent,fvar(10);-(parent,Hitcount/60.0)
fvar(10) = parent,fvar(10)-(Target,Gethitvar(hitcount)/80.0)
ignorehitpause=1
;補正無し
[State Attackfv]
type = varset
trigger1 = Target,Gethitvar(hitcount) = 0
fvar(10) = 1.0 
ignorehitpause=1
;下回りした場合
[State Attackfv]
type = varset
trigger1 = fvar(10) <= 0
fvar(10) = .0 
ignorehitpause=1

;アタリ判定
[State 4501, HitDef]
type = HitDef
triggerall = enemyNear, Anim != 5070
triggerall = enemyNear, Anim != 5071
trigger1 = !MoveContact
trigger2 = TimeMod = 4,0
attr = A, HP
animtype  = Hard
damage    = ceil(6*fvar(10)),ceil(2*fvar(10));かなり当たるので威力調整には注意が必要
getpower = 0,0
sprpriority = 1
hitflag = MAFDP
guardflag = MA
guard.dist	= 385        ;相手がガード行動をとる距離
pausetime = 0,7
;sparkno = Sifelse((Random < 330),3004,ifelse((Random = [330,660]),3022,3023))
sparkno = Sifelse((Random < 800),4003,6002);真空波動ヒット
sparkxy = ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), ifelse((Random < 330),0,ifelse((Random = [330,660]),0,-30))
;sparkxy =  ceil(Random*(-20 - -50 + 1.0)/(1.0+999)),ceil(Random*(10 - -40 + 1.0)/(1.0+999))
hitsound   = S0,11;ばすたーひっと音
guardsound = S0,7;これもバスターのものを
guard.sparkno = S4023;こいつはあのガードアニメを
ground.type = High
ground.slidetime = 22
ground.hittime = 23
ground.velocity = -20,-5
guard.slidetime = 11
guard.hittime = 11
guard.velocity = -14
air.type = High
air.velocity = -20,-5
airguard.velocity = -4.5
ground.cornerpush.veloff = 0;1
air.cornerpush.veloff = 0;2
down.cornerpush.veloff = 0;3
guard.cornerpush.veloff = 0;4
airguard.cornerpush.veloff = 0;5
fall = 1
Fall.Recover      = 0				;リカバーできるか
;p2stateno = 4506

;[State 4501, TargetVelSet]
;type = TargetVelSet
;triggerall = parent, AnimElem = 61, = 0
;triggerall = Time = 250
;trigger1 = enemyNear, StateType = S
;trigger2 = enemyNear, StateType = C
;x = -15

;[State 4501, TargetVelSet]
;type = TargetVelSet
;triggerall = parent, AnimElem = 61, = 0
;triggerall = Time = 250
;trigger1 = enemyNear, StateType = L
;x = -4

[State PalFX]
type = PalFX
;triggerall = var(1) >= 30
;triggerall = var(1) <= 100
trigger1 = Time % 2;TimeMod = 2,0
trigger1 = (Time + 11) % 32 != 0;
time = 2;目にやさしくしたい時は値を２にした上で下の魔砲虹のownpalを０にしてください
;add = 128,128,128
;mul = 128,64,256;256-((Time % 16)*8),256-(((Time + 11) % 32)*8),256-(((Time + 22) % 32)*8)
;color = 0;グレースケール
color = 96;色彩うすめに。

[State R_Effect];魔砲虹
type = explod
trigger1 = Time = 8
anim = 30032
id = 30032
postype = p1
pos = 0,0
ownpal = 0;目にやさしくしたいときは0に
bindtime = -1
ignorehitpause = 1
ontop = 1
;sprpriority = 4
facing = 1;
pausemovetime = -1
supermobetime = -1
removeongethit = 1
removetime = -1
scale = 1,1

[State 4501, NotHitBy]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, AA, AT, AP
ignorehitpause = 1

[State Beamend]
type = changeanim
trigger1 = parent, StateNo != 3001
trigger1 = Anim = 30030
value = 30031

[State Beamend]
type = Removeexplod
trigger1 = parent, StateNo != 3001
ID = 30032

[State ***]
type = playsnd
trigger1 = parent, StateNo != 3001
trigger1 = Anim = 30031
trigger1 = Animelem = 1
value = 0,0

[State 4501, DestroySelf]
type = DestroySelf
trigger1 = parent, StateNo != 3001;4500;本体の動作がおわたら消滅
trigger1 = Anim = 30031
trigger1 = Animtime = 0
;trigger2 = !AnimTime

;Lv1ここまで------------------------------------
;3020 Lv1Dマスタースパーク
[Statedef 3020];マスタースパーク 真空波動的にするっす
type = S
movetype = A
physics = S
velset = 0,0
anim = 2010;4500;ますたーすぱーく、発射まで
;sprpriority = 1
poweradd = 0;ここでは消費させない まずは実験だんかい
juggle  = 7
ctrl = 0
hitcountpersist = 1

[State 4500, NotHitBy]
type= NotHitBy
trigger1 = Time = [0,3]
time = 1
value = SCA, NA, SA, HA, NT, ST, HT

[State Chargestop]
Type = varset
trigger1 = var(1)
var(1) = 0

[State 4500, AfterImage]
type = AfterImage
trigger1 = time = 4
Time        = 50
Trans       = Add
Length      = 20
TimeGap     = 1
FrameFap    = 1
PalBright   = 10,10,10;0  , 0  , 0
PalContrast = 0,220,40;0  , 0  , 150
;PalAdd      = 0  , 0  , 0
;PalMul      = .5 , .5 , .5
Peresistent = 1


[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
;trigger1 = 1
trigger1 = animelemtime(3) >= 0
trigger1 = var(5) != -1;MAX状態じゃない
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, Explod]
type = Explod
trigger1 = animelemtime(3) = 0
trigger1 = var(5) != -1;MAX状態じゃない
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1

;
;カットイン！
[state 4002, 1]
type = explod
trigger1 = animelemtime(3) = 0
trigger1 = var(5) != -1;MAX状態じゃない
anim = 10051;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0

;だーくぱわー
[state 4002, 1]
type = explod
trigger1 = animelemtime(3) = 0
trigger1 = var(5) != -1;MAX状態じゃない
anim = 35288;7000
id = 3523;7000
postype = back
pos = 220, 70
Ontop = 1
sprpriority = 3
Removetime = 40
Scale = .5,.5
Facing = Facing
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0

[State ***]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 2
trigger1 = var(5) != -1;MAX状態じゃない
value = 3528,0;ダークパワー！
;channel = 0;VC


[State ***]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = animelemtime(4) = 0
trigger1 = var(5) != -1;MAX状態じゃない
value = 3528,2;ダークパワーはｒｙ
channel = 0;VC


[State 3000, Super A]
type = SuperPause
trigger1 = animelemtime(3) = 0
trigger1 = var(5) != -1;MAX状態じゃない
pos = -18,-40
anim = S4050;S***で自分のだったけ
sound = S0,24;22;20, 0
poweradd = 0;-1000
time = 54;停止時間 (int)
movetime = 54;停止無視時間 (int)

;ココラニ特殊背景関連の記述を？
[State 4500, Explod];ばっくぐらうんど
type = Explod
trigger1 = animelemtime(3) >= 1
trigger1 = !numexplod(1005)
persistent = 0
anim = 15061
id = 15060;
postype = back;p1
pos = 0,0
sprpriority = -5
bindtime = -1
removetime = 300
supermovetime = 60
ownpal = 1
scale = 1,1.1
removeongethit = 1;食らったらきえます
;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
;[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
;type = AssertSpecial
;trigger1 = 1
;flag = noBG ;<-- removes the stage layer
;flag = noFG ;<-- removes the lifebars and any foreground stage layers
;ignorehitpause = 1

[State Hazure];暫定リターン用　ハズレスパークができたら消す
Type     = ChangeState
Trigger1 = AnimTime = 0;発射直前なたら
Trigger1 = power < 1000;パワーはだいじょうぶか
ctrl = 1;こんとろーるもどす
Value    = 0;パワーが足りないなら別のステートへ　暫定でそのまま戻る

[State -1]
Type     = ChangeState
Trigger1 = AnimTime = 0;発射直前なたら
Trigger1 = power >= 1000;パワーはだいじょうぶか
trigger1 = var(5) != -1;MAX状態じゃない
Value    = 3021;いっかい区切る

;-----------------------
;発射中
[StateDef 3021]
Type     = S
MoveType = A
Physics  = S
Ctrl     = 0
poweradd = -1000;まずは実験だんかい
Anim     = 2011
sprpriority = -1
hitcountpersist = 1

[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, NotHitBy]
type= NotHitBy
trigger1 = Time = 0;>= 0
time = 30;ちょっとだけ無敵
value = SCA, NA, SA, HA, NT, ST, HT

[State 4500, Explod]
type = Explod
trigger1 = time = 0
ID = 4010;995
postype = P1
pos = -15,0
anim = 4010;995;バスターのケムリにする
scale = 1,1;.5,.5
supermovetime = 99999
pausemovetime = 99999
ontop = 1
ownpal = 1
removetime = -1
ignorehitpause = 1
removeongethit = 1;食らったらきえます

;ぼうし
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = Time = 0
anim = 2025;4028
id = 2025
;pos = 0,0
Postype     = P1
Pos         = -5,2
vel = 0,0
ownpal = 1
removetime = -1
;sprpriority = -5
ignorehitpause = 1
removeongethit = 1;食らったらきえます

[State ***]
type = playsnd
trigger1 = Time = 0
value = 0,25;ぶぅぅぅぅ〜〜〜〜〜ん
channel = 1;SE

[State 4500, Helper]
type = Helper
;trigger1 = AnimElem = *, = 0
trigger1 = time = 0;
helpertype = Normal
name = "Shinkuu Hadouken Beam Helper DRAK"
ID = 3013
stateno = 30035;ダーク
pos =  50,-40;-130,-54
postype = p1
size.xscale = 2.0
size.yscale = 2.0
facing = 1
ownpal = 1
removeongethit = 1
supermovetime = 99999
pausemovetime = 99999

[State Chargestop]
Type = varset
trigger1 = var(1)
var(1) = 0

[State -1]
Type     = ChangeState
Trigger1 = Time > 280;AnimTime = 0
Value    = 3022;いっかい区切る
;-------------------------
;発射おわりっ
[StateDef 3022]
Type     = S
MoveType = A
Physics  = S
Ctrl     = 0
Anim     = 2012

[State remexp]
type = removeexplod
trigger1 = time = 0;
id = 15060

[State -1]
Type     = NotHitBy
Trigger1 = Time <= 35
Value    = SAC
Time     = 1

[State ***]
type = stopsnd
trigger1 = Time = 0
channel = 1;SE

[State RemKemuri]
type = RemoveExplod
trigger1 = NumExplod(2025) && Time = 0
id = 2025;帽子をけしとく

[State RemHat]
type = RemoveExplod
trigger1 = NumExplod(4010) && Time = 0
id = 4010;けむりをけしとく

[state 451,6]
type = screenbound
trigger1 = 1
value = 0

[state 451,6]
type = changestate
trigger1 = AnimTime = 0
trigger1 = backedgebodydist <= -20
value = 710
ctrl = 1

[State 4500, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; びーむ制御
[Statedef 30035];
type = S
movetype = A
physics = N
velset = 0,0
sprpriority = 3;1;スパークらしきエフェクトは・・・
anim = 30035
juggle = 1
ctrl = 0
hitcountpersist = 1

[State 4501, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
;flag2 = Invisible
ignorehitpause = 1

[State Parent]
type = varset
trigger1 = time = 0
var(0) = parent,stateno

[State Posfv_X]
type = varset
trigger1 = time = 0
fvar(0) = parentdist X;Pos X;X
[State Posfv_Y]
type = varset
trigger1 = time = 0
fvar(1) = parentdist Y;Pos Y;Y

[State 4501, PosSet]
type = null;PosSet
trigger1 = 1;parent, facing = 1
x = parent, Pos X - (fvar(0) * parent, facing)
y = parent, Pos Y - fvar(1)
ignorehitpause = 1

[state a]
type = bindtoroot
trigger1 = 1
pos = -fvar(0),-fvar(1)
ignorehitpause = 1

;[State 4501, PosSet]
;type = PosSet
;trigger1 = parent, facing = -1
;x = parent, Pos X - 35
;y = parent, Pos Y - 40
;ignorehitpause = 1

;攻撃判定を持つヘルパーは自前で補正用varを持つようにする！
[State Attackfv]
type = null;varset
trigger1 = Target,Gethitvar(hitcount) >= 1
;fvar(10) = 1.0-(Target,Gethitvar(hitcount)/60.0) ;*parent,fvar(10);-(parent,Hitcount/60.0)
fvar(10) = parent,fvar(10)-(Target,Gethitvar(hitcount)/80.0)
ignorehitpause=1
;補正無し
[State Attackfv]
type = varset
trigger1 = Target,Gethitvar(hitcount) = 0
fvar(10) = 1.0 
ignorehitpause=1
;下回りした場合
[State Attackfv]
type = varset
trigger1 = fvar(10) <= 0
fvar(10) = .0 
ignorehitpause=1

;アタリ判定
[State 4501, HitDef]
type = HitDef
triggerall = enemyNear, Anim != 5070
triggerall = enemyNear, Anim != 5071
trigger1 = !MoveContact
trigger2 = TimeMod = 4,0
attr = A, HP
animtype  = Hard
damage    = ceil(4*fvar(10)),ceil(4*fvar(10));かなり当たるので威力調整には注意が必要
getpower = 0,0
sprpriority = 1
hitflag = MAFDP
guardflag = MA
guard.dist	= 385        ;相手がガード行動をとる距離
pausetime = 0,7
;sparkno = Sifelse((Random < 330),3004,ifelse((Random = [330,660]),3022,3023))
sparkno = -1;Sifelse((Random < 800),4003,6002);真空波動ヒット
sparkxy = ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), ifelse((Random < 330),0,ifelse((Random = [330,660]),0,-30))
;sparkxy =  ceil(Random*(-20 - -50 + 1.0)/(1.0+999)),ceil(Random*(10 - -40 + 1.0)/(1.0+999))
hitsound   = S0,11;ばすたーひっと音
guardsound = S0,7;これもバスターのものを
guard.sparkno = -1;S4023;こいつはあのガードアニメを
ground.type = High
ground.slidetime = 22
ground.hittime = 23
ground.velocity = -20,-5
guard.slidetime = 11
guard.hittime = 11
guard.velocity = -14
air.type = High
air.velocity = -20,-5
airguard.velocity = -4.5
ground.cornerpush.veloff = 0;1
air.cornerpush.veloff = 0;2
down.cornerpush.veloff = 0;3
guard.cornerpush.veloff = 0;4
airguard.cornerpush.veloff = 0;5
fall = 1
Fall.Recover      = 0				;リカバーできるか
;p2stateno = 4506

;[State 4501, TargetVelSet]
;type = TargetVelSet
;triggerall = parent, AnimElem = 61, = 0
;triggerall = Time = 250
;trigger1 = enemyNear, StateType = S
;trigger2 = enemyNear, StateType = C
;x = -15

;[State 4501, TargetVelSet]
;type = TargetVelSet
;triggerall = parent, AnimElem = 61, = 0
;triggerall = Time = 250
;trigger1 = enemyNear, StateType = L
;x = -4

[State PalFX]
type = PalFX
;triggerall = var(1) >= 30
;triggerall = var(1) <= 100
trigger1 = Time % 2;TimeMod = 2,0
;trigger1 = (Time + 11) % 32 != 0;
time = 2;目にやさしくしたい時は値を２にした上で下の魔砲虹のownpalを０にしてください
;add = 128,128,128
mul = 220,220,220
color = 0;グレースケール
;color = 96;色彩うすめに。
ignorehitpause = 1

[State R_Effect];魔砲虹
type = explod
trigger1 = Time = 8
anim = 30032
id = 30032
postype = p1
pos = 0,0
ownpal = 0;目にやさしくしたいときは0に
bindtime = -1
ignorehitpause = 1
ontop = 1
;sprpriority = 4
facing = 1;
pausemovetime = -1
supermobetime = -1
removeongethit = 1
removetime = -1
scale = 2,2

[State 31020, Explod];hit
Type = Explod
Trigger1 = MoveHit = 1
Trigger1 = NumEnemy > 0
SprPriority = 999
OnTop = 1
PosType = P1
Pos = Floor(1.0*P2Dist X)+ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), Floor(0.5*(P2Dist Y+EnemyNear,Const(Size.Mid.Pos.Y)))+ifelse((Random < 330),0,ifelse((Random = [330,660]),0,-30))
ID = 31000
Anim = ifelse((Random < 800),4003,6002);真空波動ヒット
;persistent = 0
ignorehitpause = 1
ownpal = 0;
scale = 1.6,1.6

[State 6435, Helper];ガードエフェクト
Type = Explod
Trigger1 = MoveGuarded = 1
Trigger1 = NumEnemy > 0
SprPriority = 999
OnTop = 1
PosType = P1
Pos = Floor(1.0*P2Dist X)+ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), Floor(0.5*(P2Dist Y+EnemyNear,Const(Size.Mid.Pos.Y)))+ifelse((Random < 330),0,ifelse((Random = [330,660]),0,-30))
ID = 31000
Anim = 4023;4002+ifelse(Random%2=0,0,4);4002or4006
;persistent = 0
ignorehitpause = 1
ownpal = 0;

[State 4501, NotHitBy]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, AA, AT, AP
ignorehitpause = 1

[State Beamend]
type = changeanim
trigger1 = parent, StateNo != var(0)
trigger1 = Anim = 30035
value = 30031

[State Beamend]
type = Removeexplod
trigger1 = parent, StateNo != var(0)
ID = 30032

[State ***]
type = playsnd
trigger1 = parent, StateNo != var(0)
trigger1 = Anim = 30031
trigger1 = Animelem = 1
value = 0,0

[State 4501, DestroySelf]
type = DestroySelf
trigger1 = parent, StateNo != var(0);4500;本体の動作がおわたら消滅
trigger1 = Anim = 30031
trigger1 = Animtime = 0
;trigger2 = !AnimTime

;Lv1Dここまで------------------------------------
;Lv2マスタースパーク
[Statedef 3005];マスタースパークななめ
type = S
movetype = A
physics = S
velset = 0,0
anim = 2015
;sprpriority = 1
poweradd = 0;ここでは消費させない まずは実験だんかい
juggle  = 7
ctrl = 0
hitcountpersist = 1

[State 4500, NotHitBy]
type= NotHitBy
trigger1 = Time = [0,3]
time = 1
value = SCA, NA, SA, HA, NT, ST, HT

[State Chargestop]
Type = varset
trigger1 = var(1)
var(1) = 0

[State 4500, AfterImage]
type = AfterImage
trigger1 = time = 4
Time        = 50
Trans       = Add
Length      = 20
TimeGap     = 1
FrameFap    = 1
PalBright   = 10,10,10;0  , 0  , 0
PalContrast = 0,220,40;0  , 0  , 150
;PalAdd      = 0  , 0  , 0
;PalMul      = .5 , .5 , .5
Peresistent = 1


[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
;trigger1 = 1
trigger1 = animelemtime(3) >= 0
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, Explod]
type = Explod
trigger1 = animelemtime(3) = 0
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1

;
;カットイン！
[state 4002, 1]
type = explod
trigger1 = animelemtime(3) = 0
anim = 10050;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0

[State ***]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 2
value = 1,17;松本マスタースパーク
channel = 0;VC


[State ***]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = animelemtime(4) = 0
value = 1,8;でりゃあ！
channel = 0;VC


[State 3000, Super A]
type = SuperPause
trigger1 = animelemtime(3) = 0
pos = 0,-40
anim = S4050;S***で自分のだったけ
sound = S0,24;22;20, 0
poweradd = 0;-1000
time = 54;停止時間 (int)
movetime = 54;停止無視時間 (int)

;ココラニ特殊背景関連の記述を？
;ココラニ特殊背景関連の記述を？
[State 4500, Explod];ばっくぐらうんど
type = Explod
trigger1 = animelemtime(3) >= 1
trigger1 = !numexplod(1005)
persistent = 0
anim = 15061
id = 15060;
postype = back;p1
pos = 0,0
sprpriority = -5
bindtime = -1
removetime = 300
supermovetime = 60
ownpal = 1
scale = 1,1.1
removeongethit = 1;食らったらきえます
;[State remexp]
;type = removeexplod
trigger1 = time = 0;
;id = 15060
;[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
;type = AssertSpecial
;trigger1 = 1
;flag = noBG ;<-- removes the stage layer
;flag = noFG ;<-- removes the lifebars and any foreground stage layers
;ignorehitpause = 1

[State Hazure];暫定リターン用　ハズレスパークができたら消す
Type     = ChangeState
Trigger1 = AnimTime = 0;発射直前なたら
Trigger1 = power < 1000;パワーはだいじょうぶか
ctrl = 1;こんとろーるもどす
Value    = 0;パワーが足りないなら別のステートへ　暫定でそのまま戻る

[State -1]
Type     = ChangeState
Trigger1 = AnimTime = 0;発射直前なたら
Trigger1 = power >= 1000;パワーはだいじょうぶか
Value    = 3006;いっかい区切る

;-----------------------
;発射中
[StateDef 3006]
Type     = S
MoveType = A
Physics  = S
Ctrl     = 0
poweradd = -1000;まずは実験だんかい
Anim     = 2016
sprpriority = -1
hitcountpersist = 1

[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State -2,DELMAX]
type = Varset
trigger1 = Time = 0
trigger1 = var(5) = -1;MAX状態でかつ
trigger1 = var(6) > 0;var6がある
var(6) = 0

[State 4500, NotHitBy]
type= NotHitBy
trigger1 = Time = 0;>= 0
time = 30;ちょっとだけ無敵
value = SCA, NA, SA, HA, NT, ST, HT

[State 4500, Explod]
type = Explod
trigger1 = time = 0
ID = 4010;995
postype = P1
pos = -15,0
anim = 4010;995;バスターのケムリにする
scale = 1,1;.5,.5
supermovetime = 99999
pausemovetime = 99999
ontop = 1
ownpal = 1
removetime = -1
ignorehitpause = 1
removeongethit = 1;食らったらきえます

;ぼうし
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = Time = 0
anim = 2025;4028
id = 2025
;pos = 0,0
Postype     = P1
Pos         = -5,2
vel = 0,0
ownpal = 1
removetime = -1
;sprpriority = -5
ignorehitpause = 1
removeongethit = 1;食らったらきえます

[State ***]
type = playsnd
trigger1 = Time = 0
value = 0,25;ぶぅぅぅぅ〜〜〜〜〜ん
freqmul = 1.26
channel = 1;SE

[State 4500, Helper]
type = Helper
;trigger1 = AnimElem = *, = 0
trigger1 = time = 0;
helpertype = Normal
name = "Shinkuu Hadouken Beam Helper"
ID = 3013
stateno = 3008;4501
pos =  5,-55;
size.xscale = 1.6
size.yscale = 1.6
postype = p1
facing = 1
ownpal = 1
removeongethit = 1
supermovetime = 99999
pausemovetime = 99999

[State Chargestop]
Type = varset
trigger1 = var(1)
var(1) = 0

[State -1]
Type     = ChangeState
Trigger1 = Time > 160;260;300;AnimTime = 0
Value    = 3007;いっかい区切る
;-------------------------
;発射おわりっ
[StateDef 3007]
Type     = S
MoveType = A
Physics  = S
Ctrl     = 0
Anim     = 2017

[State remexp]
type = removeexplod
trigger1 = time = 0;
id = 15060

[State -1]
Type     = NotHitBy
Trigger1 = Time <= 35
Value    = SAC
Time     = 1

[State ***]
type = stopsnd
trigger1 = Time = 0
channel = 1;SE

[State RemKemuri]
type = RemoveExplod
trigger1 = NumExplod(2025) && Time = 0
id = 2025;帽子をけしとく

[State RemHat]
type = RemoveExplod
trigger1 = NumExplod(4010) && Time = 0
id = 4010;けむりをけしとく


[state 451,6]
type = screenbound
trigger1 = 1
value = 0

[state 451,6]
type = changestate
trigger1 = AnimTime = 0
trigger1 = backedgebodydist <= -20
value = 710
ctrl = 1


[State 4500, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; びーむ制御
[Statedef 3008]
type = S
movetype = A
physics = N
velset = 0,0
sprpriority = 3;1;スパークらしきエフェクトは・・・
anim = 30080
juggle = 1
ctrl = 0
hitcountpersist = 1

[State 4501, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = NoShadow
;flag2 = Invisible
ignorehitpause = 1

[State Posfv_X]
type = varset
trigger1 = time = 0
fvar(0) = parentdist X;Pos X;X
[State Posfv_Y]
type = varset
trigger1 = time = 0
fvar(1) = parentdist Y;Pos Y;Y

[State 4501, PosSet]
type = PosSet
trigger1 = 1;parent, facing = 1
x = parent, Pos X - (fvar(0) * parent, facing)
y = parent, Pos Y - fvar(1)
ignorehitpause = 1

;[State 4501, PosSet]
;type = PosSet
;trigger1 = parent, facing = -1
;x = parent, Pos X - 35
;y = parent, Pos Y - 40
;ignorehitpause = 1

;攻撃判定を持つヘルパーは自前で補正用varを持つようにする！
[State Attackfv]
type = varset
trigger1 = Target,Gethitvar(hitcount) >= 1
;fvar(10) = 1.0-(Target,Gethitvar(hitcount)/60.0) ;*parent,fvar(10);-(parent,Hitcount/60.0)
fvar(10) = parent,fvar(10)-(Target,Gethitvar(hitcount)/80.0)
ignorehitpause=1
;補正無し
[State Attackfv]
type = varset
trigger1 = Target,Gethitvar(hitcount) = 0
fvar(10) = 1.0 
ignorehitpause=1
;下回りした場合
[State Attackfv]
type = varset
trigger1 = fvar(10) <= 0
fvar(10) = .0 
ignorehitpause=1


[State Clip];何か参照したいときに手軽に使う
type = DisplayToClipboard
trigger1 = 1
text = "at = %f "
params = fvar(10);,  helper(3013),Hitcount

;アタリ判定
[State 4501, HitDef]
type = HitDef
triggerall = enemyNear, Anim != 5070
triggerall = enemyNear, Anim != 5071
trigger1 = !MoveContact
trigger2 = TimeMod = 4,0
attr = A, HP
animtype  = Hard
damage    = ceil(12*fvar(10)),ceil(4*fvar(10));かなり当たるので威力調整には注意が必要
getpower = 0,0
sprpriority = 1
hitflag = MAFDP
guardflag = MA
guard.dist	= 507        ;相手がガード行動をとる距離
pausetime = 0,7
;sparkno = Sifelse((Random < 330),3004,ifelse((Random = [330,660]),3022,3023))
sparkno = -1;Sifelse((Random < 800),4003,6002);真空波動ヒット
;sparkxy = ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), ifelse((Random < 330),0,ifelse((Random = [330,660]),0,-30))
;sparkxy =  ceil(Random*(-20 - -50 + 1.0)/(1.0+999)),ceil(Random*(10 - -40 + 1.0)/(1.0+999))
hitsound   = S0,11;ばすたーひっと音
guardsound = S0,7;これもバスターのものを
guard.sparkno = -1;S4023;こいつはあのガードアニメを
ground.type = High
ground.slidetime = 22
ground.hittime = 23
ground.velocity = -22,-20
guard.slidetime = 11
guard.hittime = 11
guard.velocity = -14
air.type = High
air.velocity = -22,-20
YAccel            = .8
airguard.velocity = -4.5
ground.cornerpush.veloff = 0;1
air.cornerpush.veloff = 0;2
down.cornerpush.veloff = 0;3
guard.cornerpush.veloff = 0;4
airguard.cornerpush.veloff = 0;5
fall = 1
Fall.Recover      = 0				;リカバーできるか
;p2stateno = 4506
[State Hitspark]
type = Explod
trigger1 = movehit = 1
anim = 4002
id = 4002
postype = p2
bindtime = 1
pos = 10,-floor(30+(Random%60))
scale = 1,1
ontop = 1
pausemovetime = 99999999
supermovetime = 99999999
[State Gurspark]
type = Explod
trigger1 = moveguarded = 1
anim = 4023
id = 4023
postype = p2
bindtime = 1
pos = 10,-floor(30+(Random%60))
scale = 1,1
ontop = 1
pausemovetime = 99999999
supermovetime = 99999999

;[State 4501, TargetVelSet]
;type = TargetVelSet
;triggerall = parent, AnimElem = 61, = 0
;triggerall = Time = 250
;trigger1 = enemyNear, StateType = S
;trigger2 = enemyNear, StateType = C
;x = -15

;[State 4501, TargetVelSet]
;type = TargetVelSet
;triggerall = parent, AnimElem = 61, = 0
;triggerall = Time = 250
;trigger1 = enemyNear, StateType = L
;x = -4

[State PalFX]
type = PalFX
;triggerall = var(1) >= 30
;triggerall = var(1) <= 100
trigger1 = Time % 2;TimeMod = 2,0
trigger1 = (Time + 11) % 32 != 0;
time = 2;目にやさしくしたい時は値を２にした上で下の魔砲虹のownpalを０にしてください
;add = 128,128,128
;mul = 128,64,256;256-((Time % 16)*8),256-(((Time + 11) % 32)*8),256-(((Time + 22) % 32)*8)
;color = 0;グレースケール
color = 96;色彩うすめに。

[State R_Effect];魔砲虹
type = explod
trigger1 = Time = 8
anim = 30085
id = 30032
postype = p1
pos = 0,-6
ownpal = 0;目にやさしくしたいときは0に
bindtime = -1
ignorehitpause = 1
ontop = 1
;sprpriority = 4
facing = 1;
pausemovetime = -1
supermobetime = -1
removeongethit = 1
removetime = -1
scale = 1,1

[State 4501, NotHitBy]
type = NotHitBy
trigger1 = 1
time = 1
value = SCA, AA, AT, AP
ignorehitpause = 1

[State Beamend]
type = changeanim
trigger1 = parent, StateNo != 3006
trigger1 = Anim = 30080
value = 30081

[State Beamend]
type = Removeexplod
trigger1 = parent, StateNo != 3006
ID = 30032

[State ***]
type = playsnd
trigger1 = parent, StateNo != 3006
trigger1 = Anim = 30081
trigger1 = Animelem = 1
value = 0,0

[State 4501, DestroySelf]
type = DestroySelf
trigger1 = parent, StateNo != 3006;4500;本体の動作がおわたら消滅
trigger1 = Anim = 30081
trigger1 = Animtime = 0
;trigger2 = !AnimTime
;Lv2ここまで------------------------------------
;ＭＡＸ２-----------------------------------------------------------------
[Statedef 3010];マスタースパーク 真空波動的にするっす
type = S
movetype = A
physics = S
velset = 0,0
anim = 900;2010;4500;ますたーすぱーく、発射まで
;sprpriority = 1
poweradd = 0;ここでは消費させない まずは実験だんかい
juggle  = 7
ctrl = 0
hitcountpersist = 1

[State 4500, NotHitBy]
type= NotHitBy
trigger1 = Time = [0,3]
time = 1
value = SCA, NA, SA, HA, NT, ST, HT

[State Chargestop]
Type = varset
trigger1 = var(1)
var(1) = 0

[State 4500, AfterImage]
type = AfterImage
;trigger1 = time = 4
trigger1 = Time = 25;AnimElem = 2, 1
Time        = 50
Trans       = Add
Length      = 20
TimeGap     = 1
FrameFap    = 1
PalBright   = 10,10,10;0  , 0  , 0
PalContrast = 0,220,40;0  , 0  , 150
;PalAdd      = 0  , 0  , 0
;PalMul      = .5 , .5 , .5
Peresistent = 1


[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
;trigger1 = 1
trigger1 = Time >= 25;AnimElem = 2, 1
trigger1 = var(5) != -1;MAX状態じゃない
trigger2 = Time >= 40;AnimElem = 2, 1
trigger2 = var(5) = -1;MAX状態でかつ
trigger2 = var(6) > 0;var6がある
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, Explod]
type = Explod
;trigger1 = time = 0
trigger1 = Time = 25;AnimElem = 2, 1
trigger1 = var(5) != -1;MAX状態じゃない
trigger2 = Time = 40;AnimElem = 2, 1
trigger2 = var(5) = -1;MAX状態でかつ
trigger2 = var(6) > 0;var6がある
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1

;ＭＡＸカットイン！
[state 4002, 1]
type = explod
;trigger1 = time = 0
trigger1 = Time = 40;AnimElem = 2, 1
trigger1 = var(5) = -1;MAX状態でかつ
trigger1 = var(6) > 0;var6がある
anim = 10051;バクラ
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0


[State ***]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 2
trigger1 = var(5) = -1;MAX状態でかつ
trigger1 = var(6) > 0;var6がある
value = 1,31;HAHAHAHAHAHAHA!!!
channel = 0;VC

[State HAHAHAHAHA]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = var(5) = -1;MAX状態でかつ
trigger1 = var(6) > 0;var6がある
Value = 941;HAHAHAHAHA

[State ***]
type = playsnd
triggerall = var(40);ボイスＯＫ
Trigger1 = Time = 60
trigger1 = var(5) != -1;MAX状態じゃない
trigger2 = Time = 90
trigger2 = var(5) = -1;MAX状態でかつ
trigger2 = var(6) > 0;var6がある
value = 1,8;でりゃあ！
channel = 0;VC

[State Fire]
type = changeanim
Trigger1 = Anim = 900;最初のアニメが
;trigger1 = AnimTime = 0;ひとくぎりったら
Trigger1 = Time > 50
Trigger2 = Anim = 941
Trigger2 = Time > 90
Value = 2015;発射ポーズに移行
elem = 4


[State 3000, Super A]
type = SuperPause
Trigger1 = Anim = 941;900
trigger1 = Time = 40;AnimElem = 2, 1
trigger1 = var(5) = -1;MAX状態でかつ
trigger1 = var(6) > 0;var6がある
pos = 0,-40;25, -57
anim = S4050;
sound = S0,23;MAX蝶必殺音
poweradd = 0;-1000
time = 50;停止時間 (int)
movetime = 50;停止無視時間 (int)

;ココラニ特殊背景関連の記述を？


[State Hazure];暫定リターン用　ハズレスパークができたら消す
Type     = ChangeState
Trigger1 = Anim = 2015
Trigger1 = AnimTime = 0;発射直前なたら
Trigger1 = power < 2000;パワーはだいじょうぶか
ctrl = 1;こんとろーるもどす
Value    = 0;パワーが足りないなら別のステートへ　暫定でそのまま戻る

[State -1]
Type     = ChangeState
Trigger1 = Anim = 2015
Trigger1 = AnimTime = 0;発射直前なたら
trigger1 = var(5) = -1;MAX状態でかつ
trigger1 = var(6) > 0;var6がある
Value    = 3011;いっかい区切る

;-----------------------
;MAX
[StateDef 3011]
Type     = S
MoveType = A
Physics  = S
Ctrl     = 0
poweradd = -2000;まずは実験だんかい
Anim     = 2016
sprpriority = -1
hitcountpersist = 1

[State -2,DELMAX]
type = Varset
trigger1 = Time = 0
trigger1 = var(5) = -1;MAX状態でかつ
trigger1 = var(6) > 0;var6がある
var(6) = 0

[State 4500, NotHitBy]
type= NotHitBy
trigger1 = Time = 0;>= 0
time = 100;無敵時間ながいよ
value = SCA, NA, SA, HA, NT, ST, HT


;[State ***]
;type = playsnd
;trigger1 = Time = 0
;value = 0,25;ぶぅぅぅぅ〜〜〜〜〜ん
;channel = 1;SE

[State 4500, Helper]
type = Helper
;trigger1 = AnimElem = *, = 0
trigger1 = time = 0;
trigger1 = !NumHelper(3023)
helpertype = Normal
name = "HYPER KAMEHAMEHA"
ID = 3023
stateno = 3023;4501
pos = 0,-220;-130,-54
postype = left
facing = 1
ownpal = 1
pausemovetime = 500;Pause無視時間 (int)
removeongethit = 1



[State STOP]
type = pause
trigger1 = time = 0
;trigger1 = ***;タッグ以外で
;time = ifelse (enemy,life<= 780,220,320);350;指定した時間だけ止まる
time = 220;指定した時間だけ止まる

[State Chargestop]
Type = varset
trigger1 = var(1)
var(1) = 0

[State -1]
Type     = ChangeState
Trigger1 = Time > 100;300;AnimTime = 0
Value    = 3007;いっかい区切る

;---------------------------------
[Statedef 3023];究極技ヘルパー
ctrl = 0
anim = 15123;10010
Movetype = A
ownpal = 1

[State BGMSTOP]
type = AssertSpecial
Trigger1 = 1;このヘルパーが出ている間ＢＧＭが止まる
flag = nomusic
flag2 = noBG
flag3 = noFG

[State BGMSTOP]
type = AssertSpecial
Trigger1 = 1;このヘルパーが出ている間ＢＧＭが止まる
flag = nobardisplay

;[State STOP]
;type = pause
;trigger1 = time = 0
;time = 300;指定した時間だけ止まる

[State FLASH]
type = AllPalFX
trigger1 = Time = 0;この間画面まっしろ
time = 20
add = 256,256,256

[State SND KAMEHAME]
type = PlaySnd
Trigger1 = Time = 20
Value = 0,19;超かめはめ波
channel = 1;SE

[State TAIKIKEN]
type = Explod
trigger1 = Time = 1
trigger1 = !Numexplod(15120)
anim = 15120;大気圏
id = 15120
postype = left
pos = 0,0
;ownpal = 0
bindtime = -1
removetime = -1
ignorehitpause = 1
sprpriority = 9;5
;ontop = 1
facing = 1;
pausemovetime = 500
supermovetime = 500
scale = 1,1

[State KAMEHAMEHA]
type = Explod
trigger1 = Time = 1
trigger1 = !Numexplod(15121)
anim = 15121;かめはめは
id = 15121
postype = left
pos = 0,0
;ownpal = 0
bindtime = -1
removetime = -1
ignorehitpause = 1
sprpriority = 10
;ontop = 1
facing = 1;
pausemovetime = 500
supermovetime = 500
scale = 1,1

[State KAMEHAME END]
type = Explod
trigger1 = Time = 1
trigger1 = !Numexplod(15122)
anim = 15122;かめはめは
id = 15122
postype = left
pos = 0,0
;ownpal = 0
bindtime = -1
removetime = -1
ignorehitpause = 1
sprpriority = 10
ontop = 1
facing = 1;
pausemovetime = 500
supermovetime = 500
scale = 1,1

[State HITDEF]
type = hitdef
Trigger1	  = Time = 100;準備動作
Attr              = SCA, HA
Damage            = 700,50;350			;ダメージ
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 9999        ;相手がガード行動をとる距離
Priority          = 3, Hit			;攻撃の優先度
;PauseTime         = 9, 9			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = ifelse(parent,facing=1,-3,3),-20	;ヒット時の相手の移動 地上
Air.Velocity      = ifelse(parent,facing=1,-3,3),-20	;ヒット時の相手の移動 空中
AirGuard.Velocity = ifelse(parent,facing=1,-3,3),-20;6.5	;ヒット時の相手の移動 空中ガード
;yaccel = 5
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
;p2stateno = 3024

[State FUTTOBI]
type = TargetState
Trigger1 = MoveContact
value = 3024


[State DelBG]
type = Removeexplod
trigger1 = Time >= 350
trigger1 = Numexplod(15120)
ID = 15120

[State DelBG]
type = Removeexplod
trigger1 = Time >= 250;350
trigger1 = Numexplod(15121)
ID = 15121

[State DelBG]
type = Removeexplod
trigger1 = Time >= 350
trigger1 = Numexplod(15122)
ID = 15122

[State FLASH]
type = AllPalFX
trigger1 = Time >= 300;50*5 = 250
time = 1
;add = 256,256,256
add = (Time - 300)*5,(Time - 300)*5,(Time - 300)*5

[State ENDPHASE]
type = DestroySelf
trigger1 = Time >= 350

;----
[Statedef 3024];敵に参照させるステート
Type = A
Movetype = H
physics = A;空中
anim = 5050
ctrl = 0;しばらくうごけません

[State Pos]
type = Posset
Trigger1 = Time = 0
Y = -1000

[State Vel]
type = Velset
Trigger1 = Time = 0
X = -1

;-------------------------------------
[State Test_Tamiflu];タミフルごめん！
type = varset
trigger1 = name = "Tamiflu Miko"
trigger1 = var(26) = 1000
trigger1 = var(27) = 1
var(26) = 999
;タミフル巫女が食らった場合、たみふるモードの仕様とガチってバグる。
;やむをえずvar操作を行っていることをご了承ください
;-------------------------------------

[State Ret]
type = SelfState
Trigger1 = Time = 0;100
value = 5050;空中やられ
ctrl = 0

;------------------------------------------------
[Statedef 3030];バタフライストーム　ノーマル
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3031
velset = 0,0


[State Pow]
type = PowerAdd
trigger1 = AnimelemTime(3) = 0
value = -1000

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = AnimelemTime(3) >= 0
trigger1 = AnimelemTime(4) < 0
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State Muteki]
type = NotHitBy
trigger1 = Time = 1
value = SCA
time = 16;出だし無敵

[State 4500, Explod]
type = Explod
trigger1 = AnimelemTime(3) = 0
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1

;カットイン！
[state 4002, 1]
type = explod
trigger1 = AnimelemTime(3) = 0
anim = 10050;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0

[State 3000, Super A]
type = SuperPause
trigger1 = AnimelemTime(3) = 0
pos = 3,-52;
anim = S4050;S***で自分のだったけ
sound = S0,22;20, 0
poweradd = 0;-1000
time = 35;停止時間 (int)
;movetime = 35;停止無視時間 (int)

[State 4500, Explod];ばっくぐらうんど
type = Explod
trigger1 = animelemtime(3) >= 1
trigger1 = !numexplod(1005)
persistent = 0
anim = 15061
id = 15060;
postype = back;p1
pos = 0,0
sprpriority = -5
bindtime = -1
removetime = 300
supermovetime = 60
ownpal = 1
scale = 1,1.1
removeongethit = 1;食らったらきえます
;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
;[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
;type = AssertSpecial
;trigger1 = 1
;flag = noBG ;<-- removes the stage layer
;flag = noFG ;<-- removes the lifebars and any foreground stage layers
;ignorehitpause = 1

[State 620, 4] ;蝶サイコー
type = Projectile
triggerall = Time%2
trigger1 = AnimelemTime(6) >= 0
trigger1 = Animtime != 0
projid = 3030
projanim = 3030;1002
projhitanim = 4000;1003
projscale = ifelse(Time%3,.5,.3),ifelse(Time%3,.5,.3)
offset = 40,-48
velocity = 3+(Random%7), -2-(Random%6);扇状に散らす
; HitDef
attr = S, SP
animtype = Light
damage    = 15
getpower  = 20
givepower = 20
hitflag = MAFD
guardflag = MAF
pausetime = 4,8
sparkno = S4000
guard.sparkno = S4023
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 10
ground.velocity = -5,-5
airguard.velocity = -5
air.velocity = -5,-5
;air.juggle = 9
air.fall = 1
[State FIRE];
type = PlaySnd
trigger1 = AnimelemTime(6) >= 0
trigger1 = Time%2
value = 0,8;ばすたー
channel = 1;SEチャンネル

[State remexp]
type = removeexplod
trigger1 = animtime = 0;
id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----
[Statedef 3035];バタフライストーム　ＭＡＸ
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3035
velset = 0,0

[State Muteki]
type = NotHitBy
trigger1 = Time = 1
value = SCA
time = 10;出だし無敵

[State Pow]
type = PowerAdd
trigger1 = AnimelemTime(3) = 0
value = -1000

[State -2,DELMAX]
type = Varset
trigger1 = Time = 0
;trigger1 = var(5) = -1;MAX状態でかつ
trigger1 = var(6) > 0;var6がある
var(6) = 0
[State -2,DELMAX]
type = Varset
trigger1 = Time = 0
;trigger1 = var(5) = -1;MAX状態でかつ
;trigger1 = var(6) = 0
var(5) = 0

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1;Time <= 50
flag = noBG ;<-- removes the stage layer
flag2 = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, Explod]
type = Explod
Trigger1 = Time = 0
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1

;カットイン！
[state 4002, 1]
type = explod
Trigger1 = Time = 0
anim = 10050;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0

[State 3000, Super A]
type = SuperPause
Trigger1 = Time = 0
pos = 13,-32;
anim = S4050;S***で自分のだったけ
sound = S0,22;20, 0
poweradd = 0;-1000
time = 50;停止時間 (int)
;movetime = 50;停止無視時間 (int)

[State 4500, Explod];ばっくぐらうんど
type = Explod
trigger1 = time >= 0
;trigger1 = !numexplod(1005)
persistent = 0
anim = 15062
id = 15060;
postype = back;p1
pos = 0,0
sprpriority = -5
bindtime = -1
removetime = 300
supermovetime = 60
ownpal = 1
scale = 1,1.1
;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
;[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
;type = AssertSpecial
;trigger1 = 1
;flag = noBG ;<-- removes the stage layer
;flag = noFG ;<-- removes the lifebars and any foreground stage layers
;ignorehitpause = 1

[State 800, 1]
type = HitDef
Trigger1 = Time = 0
id = 3035
attr = S, NT          ;ｓ：立ち　ｎ：通常　ｔ：投げ
hitflag = MAF          ;コンボの途中から投げが入らないよう設定してある
guard.dist	= 0        ;相手がガード行動をとる距離
priority = 1, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
p1facing = 1;
p2facing = 1          ;？
p1stateno = 3036       ;投げが成功した場合の移動する１Ｐのステート
p2stateno = 3038      ;投げが成功した場合の移動する２Ｐのステート
fall = 1              ;落ちる力を２Ｐにかけるか

[State remexp]
type = removeexplod
trigger1 = animtime = 0;
id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 35081
;----
[Statedef 3036];バタフライストーム　ＭＡＸ
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3036
velset = 0,0

[State Muteki]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1;終わるまで無敵

[State OUT]
type = Playerpush
trigger1 = 1
value = 0

[State HIT];
type = PlaySnd
trigger1 = Time = 0
volume = 128
value = 0,5;HIT

[State JOJO];
type = PlaySnd
trigger1 = Time = 20
value = 0,26;どーん

[State VC];
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 35
value = 1,32;HAHAHAHAHA
channel = 0;VC
[state 4002, 1];
type = explod
trigger1 = Time = 1
anim = 3032
postype = back
pos = 0,0
ownpal = 1
bindtime = 1
ignorehitpause = 1
sprpriority = -2
facing = 1;facing
scale = .5,.5

[State VC];
type = PlaySnd;ばくはつ
trigger1 = Time = 195
trigger2 = Time = 197
trigger3 = Time = 200
value = 0,17
[state 4002, 1];
type = explod
trigger1 = Time = 195
trigger1 = !Numexplod(3030)
anim = 6001
id = 3030
postype = left
pos = 130, ScreenPos Y-Pos Y;まんなか
ownpal = 1
bindtime = 1
ignorehitpause = 1
;ontop = 1
sprpriority = 2
facing = 1
scale = 3,3
[state 4002, 1];
type = explod
trigger1 = Time = 195
trigger1 = !Numexplod(3031)
anim = 6001
id = 3031
postype = left
pos = 20, ScreenPos Y-Pos Y;ひだり
ownpal = 1
bindtime = 1
ignorehitpause = 1
;ontop = 1
sprpriority = 2
facing = 1
scale = 3,3
[state 4002, 1];
type = explod
trigger1 = Time = 195
trigger1 = !Numexplod(3032)
anim = 6001
id = 3032
postype = left
pos = 230,ScreenPos Y-Pos Y;みぎ
ownpal = 1
bindtime = 1
ignorehitpause = 1
;ontop = 1
sprpriority = 2
facing = 1
scale = 3,3

[State FLASH]
type = AllPalFX
trigger1 = Time = 0;この間画面まっしろ
time = 20
add = 256,256,256

[State bind]
type = targetbind
trigger1 = 1
id = 3035
pos = p2dist X,p2Dist Y

[State Guard]
type = AssertSpecial
trigger1 = 1
flag = unguardable

;アタリ判定
[State 4501, HitDef]
type = HitDef
trigger1 = animelemtime(2) = 0
attr = S, HP
animtype  = Hard
damage    = 600,0;かなり当たるので威力調整には注意が必要
getpower = 0,0
sprpriority = 1
hitflag = MADFP
guard.dist	= 0        ;相手がガード行動をとる距離
;guardflag = 
affectteam = B
pausetime = 0,0
;sparkno = Sifelse((Random < 330),3004,ifelse((Random = [330,660]),3022,3023))
sparkno = -1;Sifelse((Random < 800),4003,6002);真空波動ヒット
sparkxy = -1;ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), ifelse((Random < 330),10,ifelse((Random = [330,660]),-25,-60))
;sparkxy =  ceil(Random*(-20 - -50 + 1.0)/(1.0+999)),ceil(Random*(10 - -40 + 1.0)/(1.0+999))
hitsound   = -1;S0,11;ばすたーひっと音
guardsound = -1;S0,7;これもバスターのものを
guard.sparkno = -1;S4023;こいつはあのガードアニメを
ground.type = High
ground.slidetime = 22
ground.hittime = 23
ground.velocity = -10,-10
guard.slidetime = 11
guard.hittime = 11
guard.velocity = -4.5
air.type = High
air.velocity = -6.5,-10
airguard.velocity = -4.5
ground.cornerpush.veloff = 0;1
air.cornerpush.veloff = 0;2
down.cornerpush.veloff = 0;3
guard.cornerpush.veloff = 0;4
airguard.cornerpush.veloff = 0;5
fall = 1
Fall.Recover      = 0				;リカバーできるか
kill = 0

[State remexp]
type = removeexplod
trigger1 = animtime = 0;
id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State -1]
Type      = StateTypeSet
trigger1 = Animtime = 0
StateType = A
Movetype = H
Physics   = N

[State FUTTOBI]
type = velset
trigger1 = Animtime = 0
X = -5
Y = -8

[State FUTTOBI]
type = Posadd
trigger1 = Animtime = 0
Y = -20

[State FUTTOBI]
type = changeState
trigger1 = Animtime = 0
ctrl = 0
value = 3037
;----
[Statedef 3037];バタフライストーム　自分ふっとび
Type = A
Movetype = H;
physics = N;
ctrl = 0;しばらくうごけません
anim = 5035

[State Life]
type = Lifeadd
trigger1 = time = 0
value = -600
kill = 0

[State Grav]
type = Gravity
trigger1 = 1

[State FUTTOBI]
type = null;Hitfallset
trigger1 = Animtime = 0
;Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 1

[State North]
type = VarAdd;当たったら星を奪う
trigger1 = time = 0
trigger1 = var(41) < 7
var(41) = 3
persistent=0
ignorehitpause=1

[State FUTTOBI]
type = changeanim
trigger1 = Animtime = 0
value = 5160

[State FUTTOBI]
type = changeState
;trigger1 = Animtime = 0
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
ctrl = 0
value = 5100
;----
[Statedef 3038]
type    = A
movetype= H
physics = N
anim = 5030
velset = 0,0

[State Pos]
type = Posadd
trigger1 = Time = 200
Y = -20

[State 820, 1]
type = SelfState
Trigger1 = Time = 200
value = 5000
;----
[Statedef 3040];スターダストレヴァリエ
Type = A
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 30040;ホウキクラッシャー
velset = 1.5,-1.5

[State Pow]
type = PowerAdd
trigger1 = Time = 0
value = -1000

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = Time <= 50
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State Muteki]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 42;出だし無敵

[State 4500, Explod]
type = Explod
trigger1 = time = 0
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1

;カットイン！
[state 4002, 1]
type = explod
trigger1 = time = 0
anim = 10050;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0

[State 3000, Super A]
type = SuperPause
;Trigger1 = Anim = 900
;trigger1 = AnimElem = 2, 1
trigger1 = Time = 0
pos = 3,-52;
anim = S4050;S***で自分のだったけ
sound = S0,22;20, 0
poweradd = 0;-1000
time = 35;停止時間 (int)
movetime = 35;停止無視時間 (int)

[State 4500, Explod];ばっくぐらうんど
type = Explod
trigger1 = time >= 0
trigger1 = !numexplod(1005)
persistent = 0
anim = 15061
id = 15060;
postype = back;p1
pos = 0,0
sprpriority = -5
bindtime = -1
removetime = 300
supermovetime = 60
ownpal = 1
scale = 1,1.1
removeongethit = 1;食らったらきえます
;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
;[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
;type = AssertSpecial
;trigger1 = 1
;flag = noBG ;<-- removes the stage layer
;flag = noFG ;<-- removes the lifebars and any foreground stage layers
;ignorehitpause = 1

[State VOICE];
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,0;いくぜっ
channel = 0;VCチャンネル
persistent = 0

[State 750, 2]
type = AfterImage
trigger1 = Time = 0
time = 100
Trans       = Add
Length      = 20
TimeGap     = 1
FrameFap    = 1
PalBright   = 10,10,10;0  , 0  , 0
PalContrast = 0,220,40;0  , 0  , 150
;PalAdd      = 0  , 0  , 0
;PalMul      = .5 , .5 , .5
Peresistent = 1

[State Vel]
type = velset
trigger1 = AnimElemTime(12) = 0
Y = 0
X = 6

[State VOICE];
type = PlaySnd
trigger1 = AnimElemTime(12) = 0
value = 0,12;DASH
channel = 1;SEチャンネル
persistent = 0

[State R_Effect];フォースフィールドｗ
type = explod
trigger1 = AnimElemTime(12) = 0
anim = 30042
id = 30042
postype = p1
pos = 42,-35
ownpal = 1
bindtime = -1
ignorehitpause = 1
ontop = 1
;sprpriority = 4
facing = 1;
pausemovetime = 9999
supermobetime = 9999
removeongethit = 1
removetime = -1
scale = 2,2

[State Hitdef]
type = Hitdef
trigger1 = Time >= 30
trigger1 = Time%4=0
Attr = A,HA
Damage = 18,5
Animtype = Hard
Hitflag = MAF
GuardFlag = MA
guard.dist	= 101        ;相手がガード行動をとる距離
Priority = 3,Hit
PauseTime = 0,3
hitsound   = S0,5
Sparkno = S4002
Guard.Sparkno = S4023
guardsound = S0,7
Sparkxy = -42,-35
Ground.Type = High
Ground.Hittime = 20
Air.Hittime = 20
Ground.Velocity = -6,-3
Air.Velocity = -8,-3
Airguard.Velocity = -6,-3
Kill = 1
Fall = 1
Air.Fall = 1
Fall.Recover = 0
GetPower = 0

[State RemExp]
type = Removeexplod
trigger1 = Time >= 80
ID = 30042

[State remexp]
type = removeexplod
trigger1 = time >= 80;
id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State Next]
type = Changestate
trigger1 = Time >= 80
value = 3041

;----
[Statedef 3041];スターダストレヴァリエ 終了１
Type = A
Movetype = A
physics = N;neutlal
ctrl = 0;
anim = 30041

[State Velset]
type = velset
trigger1 = Time = 1
Y = -6

[State Velset]
type = velmul
trigger1 = Time = 1
X = -.6

[State Gravity]
type = Gravity
trigger1 = 1

[State Ret]
Type     = ChangeState
trigger1 = (Vel Y > 0) && (Pos Y >= 0)
Value    = 3042

;----
[Statedef 3042];スターダストレヴァリエ 終了２
type    = S
physics = S
;FaceP2 = 1
ctrl = 0
anim = 30043

[State Turn]
Type     = Turn
Trigger1 = P2Dist X < 0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = Time = 20
value = 1

[state 200, 1];Var(0)初期化
type = varset
trigger1 = time = 0
var(0) = 0

[State Snd_chakuti];着地音
Type = PlaySnd
Trigger1 = Time = 0
Value = 0,35;
;channel = 1;SE

[State Chakuti_Effect]
Type = Explod
Trigger1 = Time = 0
Anim = 4013;着地したエフェクト
ID = 4013
PosType = p1
Pos = 0,0
ownpal = 1
Bindtime = 1
Sprpriority = -2
Persistent = 0
Removeongethit = 0

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;----
[Statedef 3045];ブレイジング　前動作
Type = A
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 43;後ろに飛ぶ
velset = -15,-2

[State Flag,set]
type = varset
trigger1 = time = 0
var(3) = 0

[State OUT];画面外にすっとびます
type = Screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State OUT]
type = Playerpush
trigger1 = 1
value = 0

[State Pow]
type = PowerAdd
trigger1 = Time = 0
value = -1000

[State -2,DELMAX]
type = Varset
trigger1 = Time = 0
trigger1 = var(5) = -1;MAX状態でかつ
trigger1 = var(6) > 0;var6がある
var(6) = 0

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = Time <= 50
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, Explod]
type = Explod
trigger1 = time = 0
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1

;カットイン！
[state 4002, 1]
type = explod
trigger1 = time = 0
anim = 10050;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0

[State 3000, Super A]
type = SuperPause
;Trigger1 = Anim = 900
;trigger1 = AnimElem = 2, 1
trigger1 = Time = 0
pos = 3,-52;
anim = S4050;S***で自分のだったけ
sound = S0,22;20, 0
poweradd = 0;-1000
time = 60;停止時間 (int)
movetime = 39;停止無視時間 (int)

[State 4500, Explod];ばっくぐらうんど
type = Explod
trigger1 = time >= 0
trigger1 = !numexplod(1005)
persistent = 0
anim = 15061
id = 15060;
postype = back;p1
pos = 0,0
sprpriority = -5
bindtime = -1
removetime = 300
supermovetime = 60
ownpal = 1
scale = 1,1.1
removeongethit = 1;食らったらきえます
;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
;[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
;type = AssertSpecial
;trigger1 = 1
;flag = noBG ;<-- removes the stage layer
;flag = noFG ;<-- removes the lifebars and any foreground stage layers
;ignorehitpause = 1

[State VOICE];
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,53;必殺・Ｇソードダイバー
channel = 0;VCチャンネル
persistent = 0

[State 750, 2]
type = AfterImage
trigger1 = Time = 0
time = 40
Trans       = Add
Length      = 20
TimeGap     = 1
FrameFap    = 1
PalBright   = 10,10,10;0  , 0  , 0
PalContrast = 0,220,40;0  , 0  , 150
;PalAdd      = 0  , 0  , 0
;PalMul      = .5 , .5 , .5
Peresistent = 1

[State Next]
type = Changestate
trigger1 = Time >= 40
value = 3046

;---------------------------------------------------------------------------
[Statedef 3046];ブレイジング
Type = A
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 30060;ブレイジングスター
velset = 30,0

[State Muteki]
type = NotHitBy
trigger1 = 1
value = SCA

[State Posset]
type = Posset
trigger1 = Time = 0
X = -200*facing
;Y = -80

[State PosAdd]
type = Posadd
trigger1 = Time = 0
Y = 2

[State OUT];画面外にすっとびます
type = Screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State OUT]
type = Playerpush
trigger1 = 1
value = 0

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag2 = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State HIT]
type = Hitdef
triggerall = Time%2 = 0
trigger1 = 1
id = 35030;敵判定用
attr = S, HP
animtype  = Hard
damage    = 50,6;
getpower = 0,0
sprpriority = 1
hitflag = MADFP
guardflag = MA
guard.dist	= 62        ;相手がガード行動をとる距離
pausetime = 3,7
sparkno = S4002
sparkxy = ifelse((Random < 330),-20,ifelse((Random = [330,660]),-10,-5)), ifelse((Random < 330),-20,ifelse((Random = [330,660]),-0,-30))
hitsound   = S0,5
guardsound = S0,7
guard.sparkno = S4023
ground.type = High
ground.slidetime = 22
ground.hittime = 23
ground.velocity = -10,-10
guard.slidetime = 11
guard.hittime = 11
guard.velocity = -4.5
air.type = High
air.velocity = -6.5,-10
airguard.velocity = -4.5
ground.cornerpush.veloff = 0;1
air.cornerpush.veloff = 0;2
down.cornerpush.veloff = 0;3
guard.cornerpush.veloff = 0;4
airguard.cornerpush.veloff = 0;5
fall = 1
Fall.Recover      = 0				;リカバーできるか

;スーパーポーズ
[State 4500, AssertSpecial];本体透明にして・・・
type = AssertSpecial
trigger1 =  FrontEdgeDist <-120
flag = invisible

[State R_Effect];フォースフィールドｗ
type = explod
trigger1 =  FrontEdgeDist <-120
trigger1 = !numexplod(30060)
anim = 30060
id = 30060
postype = p1
pos =0,0
vel = 60,0
ownpal = 1
bindtime = 1
ignorehitpause = 1
ontop = 1
;sprpriority = 4
facing = 1;
pausemovetime = 9999
supermobetime = 9999
removeongethit = 1
removetime = 120
scale = 1,1

[State Remexp]
type = Removeexplod
trigger1 = Time = 80
ID = 30060

[State Turn]
type = turn
trigger1 = Time = 80

[State Vel]
type = Velset
trigger1 = Time = 80
;X = 0
Y = 0

[State Velmul]
type = Velmul
trigger1 = Time = 80
X = -.22

[State Pos]
type = Posset
trigger1 = Time = 80
;X = 300
Y = -200


[State remexp]
type = removeexplod
trigger1 = time >= 80;
id = 15060

[State Next]
type = Changestate
trigger1 = !winKO;まだ勝負がついてない
trigger1 = Time >= 80
value = 50

[State Next]
type = Changestate
trigger1 = winKO;決着
trigger1 = Time >= 80
value = 3047

;------------------------------------------
[Statedef 3047]
type    = A
physics = N

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag2 = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State grv]
type = gravity
trigger1 = 1

[State 50, 1]
type = VarSet
trigger1 = Time = 0
sysvar(1) = 0

[State 50, 2]
type = ChangeAnim
trigger1 = Time = 0
value = ifelse((vel x)=0, 41, ifelse((vel x)>0, 42, 43))

[State 50, 3]
type = ChangeAnim
trigger1 = Vel y > -2
trigger1 = SelfAnimExist(anim + 3)
persistent = 0
value = Anim + 3

;[State 50, 1]
;type = VarSet
;trigger1 = Time = 0
;Trigger1 = Vel x = 0
;var(1) = 0

;[State 50, 1]
;type = VarSet
;triggerall = Time = 0
;Trigger1 = Vel x > 0
;Trigger2 = Vel x < 0
;var(1) = 1

[State Turn]
Type     = Turn
Trigger1 = P2Dist X < 0
Trigger1 = var(3) = 1

[State VelAdd]
Type = VelAdd
triggerall = !var(59)
Trigger1 = var(3) = 1
Trigger1 = Command = "holdback"
Trigger1 = Vel x > -1.5
X = -.05

[State VelAdd]
Type = VelAdd
triggerall = !var(59)
Trigger1 = var(3) = 1
Trigger1 = Command = "holdfwd"
Trigger1 = Vel x < 3
X = .15

[State VelAdd]
Type = VelAdd
Trigger1 = var(3) = 1
Y = -.08;-.14

[State -1]
Type        = AfterImage
Trigger1    = Time = 0;2
Trigger1 = var(3) >= 1 ;= 1
Time        = 18
Trans       = Add
Length      = 20
TimeGap     = 1
FrameFap    = 1
PalBright   = 10,10,10;0  , 0  , 0
PalContrast = 0,220,40;0  , 0  , 150
;PalAdd      = 0  , 0  , 0
;PalMul      = .5 , .5 , .5
Peresistent = 1

[State Change]
Type = ChangeState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y > 0
Value = 3048
;------------------------------------------
[Statedef 3048]
type    = S
physics = S
;FaceP2 = 1
ctrl = 0
anim = 3045

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag2 = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[state 200, 1];Var(0)初期化
type = varset
trigger1 = time = 0
var(0) = 0

[State Snd_chakuti];着地音
Type = PlaySnd
Trigger1 = Time = 0
Value = 0,35;
;channel = 1;SE

[State Chakuti_Effect]
Type = Explod
Trigger1 = Time = 0
Anim = 4013;着地したエフェクト
ID = 4013
PosType = p1
Pos = 0,0
ownpal = 1
Bindtime = 1
Sprpriority = -2
Persistent = 0
Removeongethit = 0

[State houki]
Type = Explod
Trigger1 = Time = 0
trigger1 = !numexplod(3045)
Anim = 1035;
ID = 3045
PosType = p1
Pos = ceil(-1000+(Time*20)),-50
ownpal = 1
Bindtime = 100
removetime = -1
Sprpriority = -2
Persistent = 0
Removeongethit = 0
[State houki]
Type = ModifyExplod
Trigger1 = Time > 0
trigger1 = numexplod(3045)
ID = 3045
PosType = p1
Pos = ceil(-1000+(Time*20)),-50
ownpal = 1
Bindtime = 100
removetime = -1
Sprpriority = -2
Removeongethit = 0

[State 52, 4]
type = ChangeState
trigger1 = Time >= 50
value = 3049
ctrl = 0
;------------------------------------------
[Statedef 3049]
type    = S
physics = S
;FaceP2 = 1
ctrl = 0
anim = 3046
sprpriority = 2
velset = 1,0

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag2 = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State Snd_chakuti];着地音
Type = PlaySnd
Trigger1 = Time = 0
Value = 0,42;
channel = 1;SE

[State eff]
Type = Explod
Trigger1 = Time = 0
Anim = 3047;ホウキ振りを背後に
PosType = p1
Pos = 0,0
ownpal = 1
Bindtime = 1
removetime = 4;終了後消失
Sprpriority = 1
Removeongethit = 0

[State houki]
Type = removeExplod
trigger1 = numexplod(3045)
ID = 3045

[State VC];
type = PlaySnd;ばくはつ
trigger1 = Time = 0
value = 0,17
[state 4002, 1];
type = explod
trigger1 = Time = 0
anim = 6001
id = 3030
postype = back
pos = 30, ceil(screenpos Y);背後
ownpal = 1
bindtime = 1
ignorehitpause = 1
sprpriority = 2
facing = 1
scale = 3,3

[State 52, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;アクセルフォーム
[Statedef 30400]
type    = S
MoveType = A
physics = S
anim = 3040
sprpriority = 1
Ctrl = 0
velset = 0,0

[State Pow]
type = PowerAdd
Triggerall = var(5) != -2;アクセルでない場合
trigger1 = AnimelemTime(3) = 0
value = -1000
[State DelAxel]
type = varset
Trigger1 = var(5) = -2;アクセルだった場合
trigger1 = AnimelemTime(3) = 0
var(6) = 0

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = AnimelemTime(3) >= 0
;trigger1 = AnimelemTime(4) < 0
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State Muteki]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 12;出だし無敵

[State 4500, Explod]
type = Explod
trigger1 = AnimelemTime(3) = 0
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1

;カットイン！
[state 4002, 1]
type = explod
trigger1 = AnimelemTime(3) = 0
anim = 10050;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0

[State 3000, Super A]
type = SuperPause
trigger1 = AnimelemTime(3) = 0
pos = 3,-52;
anim = S4050;S***で自分のだったけ
sound = S0,ifelse( var(5) != -2 ,28,24);StartUp
poweradd = 0;-1000
time = 35;停止時間 (int)
;movetime = 35;停止無視時間 (int)
[State -1]
Type     = PlaySnd
Triggerall = var(5) != -2;アクセルでない場合
trigger1 = AnimelemTime(1) = 0
Value    = 0,27;StartUp
Channel  = 5;特殊

[State 4500, Explod]
type = Explod
trigger1 = animelemtime(4) = 0
ID = 4010;995
postype = P1
pos = -15,0
anim = 4010;995;バスターのケムリにする
scale = 2,1.6;.5,.5
supermovetime = 99999
pausemovetime = 99999
ontop = 1
ownpal = 1
ignorehitpause = 1
removeongethit = 1;食らったらきえます
[State 100, 1]
type = VelSet
trigger1 = animelemtime(4) >= 0
x = 20

[State 100, 2] ;Prevent run from canceling into walk
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3] ;Prevent from turning
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State -1]
Type        = AfterImage
Trigger1    = Time = 2
Time        = 46
Trans       = Add
Length      = 20
TimeGap     = 1
FrameFap    = 1
PalBright   = 10,10,10;0  , 0  , 0
PalContrast = 0,220,40;0  , 0  , 150
;PalAdd      = 0  , 0  , 0
;PalMul      = .5 , .5 , .5
Peresistent = 1

[State -1]
Type     = PlaySnd
trigger1 = AnimelemTime(4) = 0
Value    = 0,12;s2, 1
Channel  = 1;SE
[State -1]
Type     = null;PlaySnd
Triggerall = var(5) != -2;アクセルでない場合
trigger1 = AnimelemTime(4) = 0
Value    = 0,29;axel
Loop = 1
Channel  = 5;特殊

[State -1, HitDef]
Type = HitDef
triggerall = var(5) != -2;アクセルでない場合
Trigger1   = !MoveContACT
Trigger1   = 1
id = 30400
Attr              = S, SA
Damage            = 0,0			;ダメージ
sparkno = S4006;
hitsound   = S0,5
guardsound = S0,7
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
guardflag = MAF
guard.dist	= 88        ;相手がガード行動をとる距離
Priority          = 8, Hit			;攻撃の優先度
PauseTime         = 9, 10			;ヒット時の硬直時間
SparkNo           = S4004				;ヒットエフェクト
Guard.SparkNo     = S4023				;ガードエフェクト
Sparkxy           = -30, -40			;エフェクト表示位置
Ground.Type       = Trip			;どこに当たるか 地上
Air.Type          = Trip			;どこに当たるか 空中
Ground.SlideTime  = 10				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = 0,-50			;ヒット時の相手の移動 地上
Air.Velocity      = 0,-50			;ヒット時の相手の移動 空中
AirGuard.Velocity = -1,0			;ヒット時の相手の移動 空中ガード
YAccel            = 3
Kill              = 0				;この攻撃で殺せるか
guard.kill 	= 0
fall.kill 	= 0
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
p1stateno = 30401
p2stateno = 30450

[State -1, HitDef]
Type = HitDef
triggerall = var(5) = -2;アクセルモード時は、ダウン追撃ができる
Trigger1   = !MoveContACT
Trigger1   = 1
id = 30400
Attr              = S, SA
Damage            = 0,0			;ダメージ
sparkno = S4006;
hitsound   = S0,5
guardsound = S0,7
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAFD				;ヒットする状態
guardflag = MAF
guard.dist	= 88        ;相手がガード行動をとる距離
Priority          = 8, Hit			;攻撃の優先度
PauseTime         = 9, 10			;ヒット時の硬直時間
SparkNo           = S4004				;ヒットエフェクト
Guard.SparkNo     = S4023				;ガードエフェクト
Sparkxy           = -30, -40			;エフェクト表示位置
Ground.Type       = Trip			;どこに当たるか 地上
Air.Type          = Trip			;どこに当たるか 空中
Ground.SlideTime  = 10				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = 0,-50			;ヒット時の相手の移動 地上
Air.Velocity      = 0,-50			;ヒット時の相手の移動 空中
AirGuard.Velocity = -1,0			;ヒット時の相手の移動 空中ガード
YAccel            = 3
Kill              = 0				;この攻撃で殺せるか
guard.kill 	= 0
fall.kill 	= 0
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0
p1stateno = 30401
p2stateno = 30450

[State Miss]
Type     = null;PlaySnd
trigger1 = time >= 25;40
trigger2 = moveguarded
Value    = 0,30;timeout
Channel  = 5;特殊
[State Miss]
type = ChangeState
triggerall = var(5) = -2;アクセルモード時だった場合危機
trigger1 = moveguarded
value = 30415
[State Miss]
type = ChangeState
trigger1 = time >= 25;40
trigger2 = moveguarded
value = 101

;---------------------------------------------------------------------------
;アクセルフォーム
[Statedef 30401]
type    = S
MoveType = A
physics = N
sprpriority = 1
Ctrl = 0
;velset = 0,0

[State 4500, Explod];ばっくぐらうんど
type = Explod
trigger1 = time >= 0
trigger1 = !numexplod(1005)
persistent = 0
anim = 15062
id = 15060;
postype = back;p1
pos = 0,0
sprpriority = -5
bindtime = -1
removetime = 300
supermovetime = 60
ownpal = 1
scale = 1,1.1
removeongethit = 1;食らったらきえます
;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
;[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
;type = AssertSpecial
;trigger1 = 1
;flag = noBG ;<-- removes the stage layer
;flag = noFG ;<-- removes the lifebars and any foreground stage layers
;ignorehitpause = 1

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State push]
type = PlayerPush
trigger1 = 1
value = 0

[State -1]
Type     = PlaySnd
Triggerall = var(5) != -2;アクセルでない場合
trigger1 = time = 0
Value    = 0,29;axel
Loop = 1
Channel  = 5;特殊

[State DelAxel]
type = varset
Trigger1 = var(5) = -2;アクセルだった場合
var(6) = 0
[State DelAxel]
type = varset
Trigger1 = var(5) = -2;アクセルだった場合
var(5) = 0

[State OUT];画面外にすっとびます
type = Screenbound
trigger1 = 1
value = 0
movecamera = 0,0

[State -1]
Type     = PlaySnd
trigger1 = Time = [40,75]
trigger1 = time%2 = 0
Value    = 0,8;axel
channel = 6

;target(30400)
[state 4002, 1];爆風
type = explod
trigger1 = Time = 80
anim = 30400
id = 30400
postype = left
pos = floor(target(30400),screenpos X ), (target(30400),screenpos Y-60)
ownpal = 0
removetime = -1
bindtime = 1
ignorehitpause = 1
sprpriority = 5
facing = 1
scale = 1,1
[state 4002, 1];爆風
type = modifyexplod
trigger1 = numexplod(30400)
trigger1 = Time = [80,90]
id = 30400
postype = left
pos = floor(target(30400),screenpos X ), (target(30400),screenpos Y-60)
scale = 3-((Time-80.0)/10.0)*2.0,3-((Time-80.0)/10.0)*2.0
[state 4002, 1];爆風
type = modifyexplod
trigger1 = numexplod(30400)
trigger1 = Time > 90
id = 30400
postype = left
pos = floor(target(30400),screenpos X ), (target(30400),screenpos Y-60)
;scale = 1,1
scale = 1-((Time-90.0)/30.0)*.1,1-((Time-90.0)/30.0)*.1
[state 4002, 1];爆風
type = explod
trigger1 = Time = 80
anim = 30402
id = 30402
postype = left
pos = floor(target(30400),screenpos X ), (target(30400),screenpos Y-60)
ownpal = 0
removetime = -1
bindtime = 1
ignorehitpause = 1
sprpriority = -2
facing = 1
scale = 1,1
[state 4002, 1];爆風
type = modifyexplod
trigger1 = numexplod(30402)
trigger1 = Time = [80,90]
id = 30402
postype = left
pos = floor(target(30400),screenpos X ), (target(30400),screenpos Y-60)
scale = 3-((Time-80.0)/10.0)*2.0,3-((Time-80.0)/10.0)*2.0
[state 4002, 1];爆風
type = modifyexplod
trigger1 = numexplod(30402)
trigger1 = Time > 90
id = 30402
postype = left
pos = floor(target(30400),screenpos X ), (target(30400),screenpos Y-60)
;scale = 1,1
scale = 1-((Time-90.0)/30.0)*.1,1-((Time-90.0)/30.0)*.1

;160カラ
[state 4002, 1];爆風
type = removeexplod
trigger1 = numexplod(30400)
trigger1 = Time > 160
id = 30400
[state 4002, 1];爆風
type = removeexplod
trigger1 = numexplod(30402)
trigger1 = Time > 160
id = 30402



[State -1]
Type     = PlaySnd
trigger1 = Time = 160
Value    = 0,9;axel
channel = 6

[state 4002, 1];爆風
type = explod
trigger1 = Time = 160
anim = 30401
id = 30401
postype = left
pos = floor(target(30400),screenpos X ), (target(30400),screenpos Y-60)
ownpal = 0
removetime = -2
bindtime = 1
ignorehitpause = 1
sprpriority = 5
facing = 1
scale = 1,1
[state 4002, 1];爆風
type = explod
trigger1 = Time = 160
anim = 30403
id = 30403
postype = left
pos = floor(target(30400),screenpos X ), (target(30400),screenpos Y-60)
ownpal = 0
removetime = -2
bindtime = 1
ignorehitpause = 1
sprpriority = -2
facing = 1
scale = 1,1

;[State next]
;type = HitAdd
;trigger1 = time = 170
;value = 63;64hit
[State next]
type = HitAdd
trigger1 = time = [161,170]
value = 6;64hit
[State next]
type = HitAdd
trigger1 = time = 162
trigger2 = time = 166
trigger3 = time = 170
value = 1;64hit


;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

;170でちょっとかえる
[State next]
type = changeState
trigger1 = time = 170
value = 30402

;---------------------------------------------------------------------------
;アクセルフォーム
[Statedef 30402]
type    = S
MoveType = A
physics = S
sprpriority = 2
Ctrl = 0
anim = 1302
velset = -14,0

[State PalFX]
type = PalFX
trigger1 = time = 0
time = 30
add = 0,100,40
;mul = 255,178,128
color = 0;

[State Pos]
type = posset
trigger1 = time = 0
;trigger1 = facing = 1
Y = 0
X = -50*facing

[State -1]
Type        = AfterImage
Trigger1    = Time = 0
Time        = 20
Trans       = Add
Length      = 20
TimeGap     = 1
FrameFap    = 1
PalBright   = 10,10,10;0  , 0  , 0
PalContrast = 0,220,40;0  , 0  , 150
;PalAdd      = 0  , 0  , 0
;PalMul      = .5 , .5 , .5
Peresistent = 1

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State push]
type = PlayerPush
trigger1 = 1
value = 0

[State -1]
Type     = PlaySnd
trigger1 = time = 0
Value    = 0,30;axel
Channel  = 5;特殊

[state 4002, 1];きのこ
type = explod
trigger1 = Time = 10
anim = 30405
id = 30405
postype = left
pos = floor(target(30400),screenpos X ), (target(30400),screenpos Y-60)
ownpal = 1
removetime = -1
bindtime = 1
ignorehitpause = 1
sprpriority = 5
facing = 1
scale = 1,1
[state 4002, 1];きのこ
type = modifyexplod
trigger1 = numexplod(30405)
trigger1 = Time > 10
id = 30405
postype = left
pos = floor(target(30400),screenpos X ), (target(30400),screenpos Y-60)
scale = 1,1
[State -1];ジャキーン
Type     = PlaySnd
trigger1 = time = 10
Value    = 0,31;きめ

;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State next]
type = changeState
trigger1 = animtime = 0
value = 30403

;---------------------------------------------------------------------------
;アクセルフォーム
[Statedef 30403]
type    = S
MoveType = A
physics = S
sprpriority = 2
Ctrl = 0
anim = 140
velset = 0,0


[State remexp]
type = removeexplod
trigger1 = time = 0;
id = 15060

[state 4002, 1];爆風
type = removeexplod
trigger1 = numexplod(30405)
id = 30405

[State VC];
type = PlaySnd;ばくはつ
trigger1 = Time = 0
value = 0,17
[state 4002, 1];
type = explod
trigger1 = Time = 0
trigger1 = !Numexplod(3030)
anim = 6001
id = 3030
postype = left
pos = floor(target(30400),screenpos X ), (target(30400),screenpos Y-target(30400),pos Y)
ownpal = 1
bindtime = 1
ignorehitpause = 1
;ontop = 1
sprpriority = 5
facing = 1
scale = 3,3

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State North]
type = VarAdd;当たったら星を奪う
;trigger1 = movehit
trigger1 = Time = 0
trigger1 = var(41) < 7
var(41) = 1
persistent=0
ignorehitpause=1

[State next]
type = changeState
trigger1 = time >= 60
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;ＭＡＸアクセルフォーム
[Statedef 30410]
type    = S
MoveType = I
physics = S
anim = 30410
sprpriority = 2
Ctrl = 0
velset = 0,0

[State Pow]
type = PowerAdd
trigger1 = AnimelemTime(5) = 0
value = -1000


[State -2,DELMAXtoAxel]
type = Varset
trigger1 = AnimelemTime(5) = 0
trigger1 = var(5) = -1;MAX状態でかつ
trigger1 = var(6) > 0;var6がある
var(6) = 3000
[State -2,DELMAXtoAxel]
type = Varset
trigger1 = AnimelemTime(5) = 0
trigger1 = var(5) = -1;MAX状態
var(5) = -2;Axelモード

[State Muteki]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 12;出だし無敵


[State -1]
Type     = PlaySnd
trigger1 = AnimelemTime(5) = 0
Value    = 0,28;StartUp
[State -1]
Type     = PlaySnd
trigger1 = AnimelemTime(1) = 0
Value    = 0,27;StartUp
[State -1]
Type     = PlaySnd
trigger1 = AnimelemTime(5) = 0
Value    = 0,29;axel
Loop = 1
Channel  = 5;特殊

[State next]
type = changeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ＭＡＸアクセルフォーム終了
[Statedef 30415]
type = S
physics = S
sprpriority = 0
anim = 920
ctrl = 0

[State MUTEKI];ちょっとだけ無敵
type= NotHitBy
trigger1 = Time = 0;
time = 3;ちょっとだけ無敵
value = SCA, NA, SA, HA, NT, ST, HT

[State Varset]
type = varset
Trigger1 = var(5) = -2;アクセルだったなら
var(5) = 0;この状態へ

[State BGMOFF]
type = varset
Trigger1 = Time = 0
var(20) = 0

[State BGMOFF]
Type     = PlaySnd
trigger1 = time = 0
Value    = 0,30;axel
Channel  = 5;特殊

[State After]
type = afterimagetime
trigger1 = time = 0
time = 0

[State End]
type = ChangeState
trigger1 = Time = 50
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;アクセルフォーム 敵食らいステート
[StateDef 30450]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
sprpriority = 3
Anim = 5030;上空ふっとび
velset = 0,-20

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State grv]
type = veladd
trigger1 = vel Y <= 0
Y = .6
[State grv]
type = veladd
trigger1 = vel Y > 0
Y = .2
[State grv]
type = velset
trigger1 = vel Y > 0
trigger1 = pos Y = [-60 ,0]
Y = .15

[State fallanm]
type = changeanim
trigger1 = vel Y > 0
value = 5050
[State grv]
type = posset
trigger1 = vel Y > 0
X = 0
persistent = 0

[State grv]
type = posset
trigger1 = vel Y > 0
trigger1 = pos Y = [-40 ,0]
Y = -40
[State grv]
type = velset
trigger1 = vel Y > 0
trigger1 = pos Y = [-40 ,0]
Y = 0

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State 750, 2]
type = AfterImagetime
trigger1 = time = 0
time = 0
[State 750, 2]
type = AfterImage
trigger1 = Time = 0
time = 22
trans = add1
timegap = 1
framegap = 3
length = 20
PalBright   =   0,  0,  0
PalContrast = 128,128,128
PalAdd      =   0,  0,  0
PalMul      =  1,1,1

[state 192, 2]
type = screenbound
;trigger1 = vel Y <= 0
;trigger1 = pos Y != [-40 ,0]
;trigger2 = time <= 20
trigger1 = 1
value = 0

[State clip]
type = DisplayToClipboard
trigger1 = 1
text = "time = %d"
params = time
;235でふっとばす
[State next]
type = changeState
trigger1 = time >= 235
value = 30451
;---------------------------------------------------------------------------
;アクセルフォーム 敵食らいステート
[StateDef 30451]
Type     = A
MoveType = H
Physics  = N
Ctrl     = 0
sprpriority = 3
Anim = 5030;上空ふっとび
velset = 0,-20

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Damage]
type = Lifeadd
trigger1 = time = 0
value = -218

[State grv]
type = gravity
trigger1 = 1

[State fallanm]
type = changeanim
trigger1 = vel Y > 0
value = 5050

[State PalFX]
type = PalFX
trigger1 = 1
time = 30
add = 128,128,128
color = 0;

[State ret]
type = selfstate
trigger1 = vel Y > 0
trigger1 = pos Y > 0
value = 5110
;------------------------------------------
;援護攻撃　アリス
;ヴァリアブルアシスト
[Statedef 1200];アーティフルサクリファイス　魔理沙側
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,43;トラップ発動！
channel=0;vc

[State 195, 1]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 4500, Helper]
type = Helper
triggerall = !NumHelper(1202)
trigger1 = time = 0;
helpertype = Normal
name = "Alice"
ID = 1202
stateno = 1202
pos =  -30,-60
postype = back
facing = 1
ownpal = 1
removeongethit = 1

[State Timer]
type = varset
trigger1 = time = 0
var(30) = 400;アリス用タイマーを起動

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------------------
[Statedef 1202];アーティフルサクリファイス　アリス側
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3052
sprpriority = -1
;velset = 4.4,0

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Grv]
type = velset
trigger1 = time = 0
X = 6
Y = -3

[State Grv]
type = veladd
trigger1 = 1
Y = .1
[State Grv]
type = null;posadd
trigger1 = 1
X = .1
Y = .1

[State 4500, Helper];ヘルパー扱いでミサイルを出す
type = Helper
trigger1 = AnimElem = 5
trigger1 = !NumHelper(1205)
helpertype = Normal
name = "BOMB Helper"
ID = 1205
stateno = 1205
pos =  40,-20;
postype = p1
facing = 1
ownpal = 1
size.ground.back = 20;前ぶつかり判定 (int)
size.ground.front = 20;後ぶつかり判定 (int)
size.height = 0;縦ぶつかり判定

[State Delete]
type = changestate;DestroySelf
triggerall = Time > 10
trigger1 = ScreenPos X <= -20
trigger2 = ScreenPos X > 340
trigger3 = ScreenPos Y <= -20
trigger4 = ScreenPos Y > 260
value = 1209

;-----------------------------
[Statedef 1209];アーティフルサクリファイス　アリス側待機
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 9999
sprpriority = -1
velset = 0,0


[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Delete]
type = DestroySelf
trigger1 = Time > 100;一定時間出ないようにする

;ばくだんヘルパー---------------------------
[Statedef 1205]
type    = A
movetype= A
physics = N;A
juggle  = 2
ctrl = 0
anim = 3054
sprpriority = 2

[State Push]
type = null;PlayerPush
trigger1 = 1
value = 1

[State Hitby];無敵
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State Velset]
type = velset
trigger1 = Time = 0;1
X = (p2dist X) / 36;3;.5
Y = -9;.5

[State Veladd]
type = veladd
trigger1 = 1
Y = .8;.5

[State Angle]
type = AngleDraw
trigger1 = 1


;ここらにアタリ判定記述を
;拡大projectileを出してヘルパーを切ったほうがよさそう。
[State NextState]
Type = ChangeState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y > 0
Value = 1206;爆発


[State DelHelper]
type = DestroySelf
trigger1 = ScreenPos X != [-25,345]

;爆発
[Statedef 1206]
type    = S
movetype= A
physics = N
juggle  = 2
ctrl = 0
velset = 0,0
anim = 35113
sprpriority = 2

[State AssSP]
type = AssertSpecial
trigger1 = 1
flag = noshadow
flag2 = invisible

;[State Angle]
;type = AngleDraw
;trigger1 = 1
;Scale = 1.5,1.5
;AngleDrawによる拡大はDosでは出来ない。

[state 4002, 1];爆風
type = explod
trigger1 = Time = 0
anim = 6000
pos = 0, 0
ownpal = 0
bindtime = 1
ignorehitpause = 1
sprpriority = 2
facing = 1
scale = 2,2
[state 4002, 1];
type = explod
trigger1 = Time = 2
anim = 6000
pos = -60, 0
ownpal = 0
bindtime = 1
ignorehitpause = 1
sprpriority = 2
facing = 1
scale = 1.5,1.5
[state 4002, 1];
type = explod
trigger1 = Time = 4
anim = 6000
pos = -40, -40
ownpal = 0
bindtime = 1
ignorehitpause = 1
sprpriority = 2
facing = 1
scale = 1.5,1.5
[state 4002, 1];
type = explod
trigger1 = Time = 6
anim = 6000
pos = 0, -60
ownpal = 0
bindtime = 1
ignorehitpause = 1
sprpriority = 2
facing = 1
scale = 1.5,1.5
[state 4002, 1];
type = explod
trigger1 = Time = 8
anim = 6000
pos = 40, -40
ownpal = 0
bindtime = 1
ignorehitpause = 1
sprpriority = 2
facing = 1
scale = 1.5,1.5
[state 4002, 1];
type = explod
trigger1 = Time = 2
anim = 6000
pos = 60, 0
ownpal = 0
bindtime = 1
ignorehitpause = 1
sprpriority = 2
facing = 1
scale = 1.5,1.5
[state 4002, 1];
type = explod
trigger1 = Time = 4
anim = 6000
pos = 40, 40
ownpal = 0
bindtime = 1
ignorehitpause = 1
sprpriority = 2
facing = 1
scale = 1.5,1.5
[state 4002, 1];
type = explod
trigger1 = Time = 6
anim = 6000
pos = 0, 60
ownpal = 0
bindtime = 1
ignorehitpause = 1
sprpriority = 2
facing = 1
scale = 1.5,1.5
[state 4002, 1];
type = explod
trigger1 = Time = 8
anim = 6000
pos = -40, 40
ownpal = 0
bindtime = 1
ignorehitpause = 1
sprpriority = 2
facing = 1
scale = 1.5,1.5

[State 605, 1]
type = PlaySnd
trigger1 = Time = 0
value = 0, 14

[State Hitdef]
Type = HitDef
Trigger1	  = 1
Attr              = A, SA
Damage            = 55, 5			;ダメージ
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = MA				;ガードできる状態
guard.dist	= 130        ;相手がガード行動をとる距離
sparkno = -1;S4002;必殺エフェクト２
hitsound   = -1;S0,5;5,0
guardsound = -1;S0,7;6,0
Priority          = 3, Hit			;攻撃の優先度
PauseTime         = 8, 6			;ヒット時の硬直時間
SparkNo           = -1				;ヒットエフェクト
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -10, -60			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 15				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = ifelse(P2Dist X <= 0,3,-3),-13			;ヒット時の相手の移動 地上
Air.Velocity      = ifelse(P2Dist X <= 0,3,-3),-13			;ヒット時の相手の移動 空中
;AirGuard.Velocity = -1,-11			;ヒット時の相手の移動 空中ガード
yaccel 		= .5
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0

[State DelHelper]
type = DestroySelf
trigger1 = time >= 8

;-----------------------------
;ヴェリアブルコンビネーション
[Statedef 3050];マリス砲　魔理沙側
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 800
velset = 0,0
;fayさんの連射制御追加

[State 4500, Helper]
type = Helper
triggerall = var(30) >= 0;Ｖａｒ３０が正の値
triggerall = !NumHelper(3050)
trigger1 = time = 0;
helpertype = Normal
name = "Alice"
ID = 3050
stateno = 3053
pos =  -30,-60
postype = back
facing = 1
ownpal = 1
removeongethit = 1
supermovetime = 99999999
pausemovetime = 99999999

[State 4500, Explod]
type = Explod
trigger1 = animelemTime(3) = 0
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999

;カットイン！
[state 4002, 1]
type = explod
trigger1 = animelemTime(3) = 0
anim = 10050;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0
supermovetime = 99999999
pausemovetime = 99999999


[state 4002, 1]
type = explod
trigger1 = animelemTime(3) = 0
anim = 4050;7000
id = 4050;7000
postype = p1
pos = 3,-52;
ontop = 1
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0
supermovetime = 99999999
pausemovetime = 99999999

[State VOICE];
type = PlaySnd
trigger1 = animelemTime(3) = 0
value = 0,22;20, 0
persistent = 0

[State 3000, Super A]
type = Pause;SuperPause
trigger1 = animelemTime(3) = 0
;pos = 3,-52;
;anim = S4050;S***で自分のだったけ
;sound = S0,22;20, 0
;poweradd = -2000
time = 60;停止時間 (int)
;movetime = 40;停止無視時間 (int)

[State 4500, Explod];ばっくぐらうんど
type = Explod
trigger1 = animelemTime(3) >= 0
trigger1 = !numexplod(1005)
persistent = 0
anim = 15061
id = 15060;
postype = back;p1
pos = 0,0
sprpriority = -5
bindtime = -1
removetime = 300
supermovetime = 60
ownpal = 1
scale = 1,1.1
removeongethit = 1;食らったらきえます
;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
;[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
;type = AssertSpecial
;trigger1 = 1
;flag = noBG ;<-- removes the stage layer
;flag = noFG ;<-- removes the lifebars and any foreground stage layers
;ignorehitpause = 1

[State Pow]
type = poweradd
trigger1 = animelemTime(3) = 0
value = -2000

[State VOICE];
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,0;いくぜっ
channel = 0;VCチャンネル
persistent = 0

[State 620, 4] ;みどるバスター
type = Projectile
trigger1 = !var(59)
trigger1 = command = "x";撃ち放題
trigger2 = var(59) && PalNo != 12
trigger2 = (GameTime % (IfElse( ((16 - Var(59)) > 0), (16 - Var(59)) , 1))) = 0
Trigger3 = Var(59) && PalNo = 12
triggerall = animelemTime(6)>= 0
projid = 10050
projanim = 3000+Random%3;10050;
projhitanim = 3010;1003
projhits = 2;var(0)
projscale = .8,.8
projsprpriority = 2
offset = 40,-48-((Random%60)-30)
velocity = 8,0
;accel = .50,0
; HitDef
attr = S, SP
animtype = Medium
damage    = (1+Random%6)*ifelse(time%4=0,2,1),1
hitflag = MAFD
guardflag = MAF
pausetime = 3,6
sparkno = S4001
guard.sparkno = S4023
hitsound   = S0,11;S5,1
guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -5
air.velocity = -5
air.juggle = 9
air.fall = 1
[State 620, 4] ;みどるバスター
type = Projectile
trigger1 = !var(59)
trigger1 = command = "x";撃ち放題
trigger2 = var(59) && PalNo != 12
trigger2 = (GameTime % (IfElse( ((16 - Var(59)) > 0), (16 - Var(59)) , 1))) = 0
Trigger3 = Var(59) && PalNo = 12
triggerall = var(1) >= 100
triggerall = animelemTime(6)>= 0
projid = 10050
projanim = 3000+Random%3;10050;
projhitanim = 3010;1003
projhits = 2;var(0)
projscale = .8,.8
projsprpriority = -3
offset = 40,-48-((Random%60)-30)
velocity = 7.6,0
;accel = .50,0
; HitDef
attr = S, SP
animtype = Medium
damage    = 2,1
hitflag = MAFD
guardflag = MAF
pausetime = 3,6
sparkno = S4001
guard.sparkno = S4023
;hitsound   = S0,11;S5,1
;guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -5
air.velocity = -5
air.juggle = 9
air.fall = 1
[State 620, 4] ;みどるバスター
type = Projectile
trigger1 = !var(59)
trigger1 = command = "x";撃ち放題
trigger2 = var(59) && PalNo != 12
trigger2 = (GameTime % (IfElse( ((16 - Var(59)) > 0), (16 - Var(59)) , 1))) = 0
Trigger3 = Var(59) && PalNo = 12
triggerall = var(1) >= 250
triggerall = animelemTime(6)>= 0
projid = 10050
projanim = 3000+Random%3;10050;
projhitanim = 3010;1003
projhits = 2;var(0)
projscale = .8,.8
projsprpriority = -3
offset = 40,-48-((Random%60)-30)
velocity = 7.3,0
;accel = .50,0
; HitDef
attr = S, SP
animtype = Medium
damage    = 1+Random%6,1
hitflag = MAFD
guardflag = MAF
pausetime = 3,6
sparkno = S4001
guard.sparkno = S4023
;hitsound   = S0,11;S5,1
;guardsound = S0,7;S6,0
ground.type = High
ground.slidetime = 3
ground.hittime  = 20
ground.velocity = -5
airguard.velocity = -5
air.velocity = -5
air.juggle = 9
air.fall = 1

[State 210, 1]
type = PlaySnd
trigger1 = !var(59)
trigger1 = command = "x";撃ち放題
trigger2 = var(59) && PalNo != 12
trigger2 = (GameTime % (IfElse( ((16 - Var(59)) > 0), (16 - Var(59)) , 1))) = 0
Trigger3 = Var(59) && PalNo = 12
triggerall = animelemTime(6)>= 0;これ忘れてたので、発射前から音が。
value = 0,8;小

[State PalFX]
type = PalFX
trigger1 = !var(59)
trigger1 = command = "x";撃ち放題
trigger2 = var(59) && PalNo != 12
trigger2 = (GameTime % (IfElse( ((16 - Var(59)) > 0), (16 - Var(59)) , 1))) = 0
Trigger3 = Var(59) && PalNo = 12
triggerall = animelemtime(6) >= 0
time = 8
add = 0,100,40
;mul = 255,178,128
color = 0;

[State anim]
type = changeanim
trigger1 = animelemtime(7) >= 2
value = anim
elem = 6

;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, end]
type = ChangeState
triggerall = var(30) >= 0;この値が０以上ならＰＴはアリスじゃない
trigger1 = Time >= 180
trigger2 = animelemtime(6) >= 0
trigger2 = !NumHelper(3050)
trigger3 = Helper(3050),movetype = H
value = 3051
ctrl = 0

[State 4500, end]
type = ChangeState
triggerall = var(30) < 0;この値が０未満ならＰＴはアリス
trigger1 = Time >= 180
trigger2 = animelemtime(6) >= 0
trigger2 = partner,stateno != 3020
value = 3051
ctrl = 0

;-----------------
[Statedef 3051];マリス砲　魔理沙側終了
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 801
velset = 0,0

[State remexp]
type = removeexplod
trigger1 = time = 0;
id = 15060

[State 620, 2]
type = VarSet
trigger1 = Time = 0
var(1) = 0;連射防止


[State Timer]
type = varset
trigger1 = var(30) >= 0
trigger1 = time = 0
var(30) = 800;アリス用タイマーを起動

[State Timer]
type = varset
trigger1 = var(30) < 0
trigger1 = time = 0
var(30) = -600;アリス用タイマーを起動

[State 4500, end]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
[Statedef 3053];マリス砲　アリス側
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3052
sprpriority = -1
;velset = 4.4,0

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Grv]
type = velset
trigger1 = time = 0
X = (parentdist X+48) / 16
Y = 0

[State Grv]
type = Gravity
trigger1 = 1
[State Grv]
type = posadd
trigger1 = 1
X = .1
Y = .1

[State Change]
Type = ChangeState
Trigger1 = parent,movetype = H
Value = 3056;失敗

[State Change]
Type = ChangeState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y > 0
Value = 3054;発射ステートへ
;-----------------
[Statedef 3054];マリス砲　アリス側２
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3050
velset = 0,0

[State muteki]
type = nothitby
trigger1 = parent,animelemTime(4) < 0
value = sca

[State Turn]
Type     = Turn
Trigger1 = P2Dist X < 0
trigger1 = animelemtime(6) < 0;動作始めるまで

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = animelemTime(6) < 0
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, Explod]
type = Explod
trigger1 = animelemtime(7) = 0
ID = 4010;995
postype = P1
pos = -15,0
anim = 4010;995;バスターのケムリにする
scale = 1,1;.5,.5
supermovetime = 99999
pausemovetime = 99999
ontop = 1
ownpal = 1
removetime = -1
ignorehitpause = 1
removeongethit = 1;食らったらきえます

;上海
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = animelemtime(6) = 0
anim = 3054;4028
id = 3054
;pos = 0,0
Postype     = P1
Pos         = 18,-53
vel = 0,0
ownpal = 1
removetime = -1
sprpriority = -2
ignorehitpause = 1
removeongethit = 1;食らったらきえます
;LAZER
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = animelemtime(7) = 0
anim = 3055;4028
id = 3055
;pos = 0,0
Postype     = P1
Pos         = 50,-53
vel = 0,0
scale = 1,.6
ownpal = 0;1
removetime = -1
sprpriority = 7
ignorehitpause = 1
removeongethit = 1;食らったらきえます

;アタリ判定
[State 4501, HitDef]
type = HitDef
trigger1 = animelemtime(7) >= 0
trigger1 = Time%8 = 0
attr = S, HP
animtype  = Hard
damage    = 3,1;かなり当たるので威力調整には注意が必要
getpower = 0,0
sprpriority = -1
hitflag = MADFP
guardflag = MA
guard.dist	= 650        ;相手がガード行動をとる距離
pausetime = 0,2
;sparkno = Sifelse((Random < 330),3004,ifelse((Random = [330,660]),3022,3023))
sparkno = Sifelse((Random < 800),4003,6002);真空波動ヒット
sparkxy = ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), ifelse((Random < 330),10,ifelse((Random = [330,660]),-25,-60))
;sparkxy =  ceil(Random*(-20 - -50 + 1.0)/(1.0+999)),ceil(Random*(10 - -40 + 1.0)/(1.0+999))
hitsound   = S0,11;ばすたーひっと音
guardsound = S0,7;これもバスターのものを
guard.sparkno = S4023;こいつはあのガードアニメを
ground.type = High
ground.slidetime = 4
ground.hittime = 4
ground.velocity = -2,0
guard.slidetime = 4
guard.hittime = 4
guard.velocity = -4.5
air.type = High
air.velocity = -2,-2
airguard.velocity = -4.5
ground.cornerpush.veloff = 0;1
air.cornerpush.veloff = 0;2
down.cornerpush.veloff = 0;3
guard.cornerpush.veloff = 0;4
airguard.cornerpush.veloff = 0;5
fall = 0;1
Fall.Recover      = 0				;リカバーできるか

[State PalFX]
type = PalFX
trigger1 = animelemtime(7) >= 0
time = 1
add = 255,0,0
mul = 255,220,128
color = 0;

[State sousai]
type = HitOverRide
trigger1 = Time = 0
time = -1
attr = SCA, AP,AA,AT;NP, SP, HP
slot = 0
stateno = 3056

[State Change]
Type = ChangeState
Trigger1 = Time > 200
Value = 3055;発射終了

[State clip]
type = DisplayToClipboard
trigger1 = 1
text = "scrposX = %f"
params = ScreenPos X
;-----------------
[Statedef 3055];マリス砲　終了
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3051
velset = 0,0

[State RemKemuri]
type = RemoveExplod
trigger1 = NumExplod(4010) && Time = 0
id = 4010;けむりをけしとく

[State RemSH]
type = RemoveExplod
trigger1 = NumExplod(3054) && Time = 0
id = 3054;上海を消す

[State RemLZ]
type = RemoveExplod
trigger1 = NumExplod(3055) && Time = 0
id = 3055;レーザーをけしとく
;LAZER
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = Time = 0
anim = 30031;4028
id = 3056
;pos = 0,0
Postype     = P1
Pos         = 50,-53
vel = 0,0
scale = 1,.6
ownpal = 0;1
;removetime = -1
sprpriority = 7
ignorehitpause = 1
removeongethit = 0

[State changeanim]
type = changeanim
trigger1 = anim = 3051
trigger1 = animtime = 0
value = 3052

[State Grv]
type = velset
trigger1 = anim = 3052
;trigger1 = animelemtime(1) = 0
trigger1 = animelemtime(5) = 0
X = backedgebodydist / -12
Y = -5.4
[State Grv]
type = posadd
trigger1 = anim = 3052
trigger1 = animelemtime(5) >= 0
X = -2.2

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Delete]
type = DestroySelf
trigger1 = ScreenPos X <= -20
trigger2 = ScreenPos X > 340
trigger3 = ScreenPos Y <= -20
trigger4 = ScreenPos Y > 260

[State clip]
type = DisplayToClipboard
trigger1 = 1
text = "scrposX = %f"
params = ScreenPos X
;-----------------
[Statedef 3056];マリス砲　アリス側食らい
Type = S
Movetype = H;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3053
;velset = -8,-5

[State Grv]
type = velset
trigger1 = time = 0
X = backedgebodydist / -12
Y = -5.4
[State Grv]
type = posadd
trigger1 = 1
X = -2.2

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Grv]
type = Gravity
trigger1 = 1

[State Delete]
type = DestroySelf
trigger1 = ScreenPos X <= -20
trigger2 = ScreenPos X > 340
trigger3 = ScreenPos Y <= -20
trigger4 = ScreenPos Y > 260

;------------------------------
;スピリティア
;ヴァリアブルアシスト
[Statedef 1210];ゼーレゲヴェーア　魔理沙側
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,43;トラップ発動！
channel=0;vc

[State 195, 1]
type = CtrlSet
trigger1 = Time = 20
value = 1

[State 4500, Helper]
type = Helper
triggerall = !NumHelper(1210)
trigger1 = time = 0;
helpertype = Normal
name = "Spilitia"
ID = 1210
stateno = 1213
pos =  -30,-60
postype = back
facing = 1
ownpal = 1
removeongethit = 1
;supermovetime = 99999999
;pausemovetime = 99999999

[State Timer]
type = varset
trigger1 = time = 0
var(31) = 400;ティア用タイマーを起動

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
[Statedef 1213];ゼーレゲヴェーア　ティア側
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 12100
sprpriority = -1
;velset = 4.4,0

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Grv]
type = velset
trigger1 = time = 0
X = (parentdist X+48) / 16
Y = 0

[State Grv]
type = Gravity
trigger1 = 1
[State Grv]
type = posadd
trigger1 = 1
X = .1
Y = .1

;[State Change]
;Type = ChangeState
;Trigger1 = parent,movetype = H
;Value = 1215;失敗

[State Change]
Type = ChangeState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y > 0
Value = 1214;発射ステートへ
;-----------------
[Statedef 1214];ゼーレゲヴェーア　ティア側２
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 12110
velset = 0,0

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Turn]
Type     = Turn
Trigger1 = P2Dist X < 0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 210, 1]
type = PlaySnd
trigger1 = animelemtime(2) = 0
value = 1210,0+Random%2;発射ボイス
[State 210, 1]
type = PlaySnd
trigger1 = animelemtime(2) = 0
value = 1210,10;発射サウンド

[State 4500, Explod]
type = Explod
trigger1 = animelemtime(2) = 0
ID = 4010;995
postype = P1
pos = -15,0
anim = 4010;995;バスターのケムリにする
scale = 1,1;.5,.5
supermovetime = 99999
pausemovetime = 99999
ontop = 1
ownpal = 1
;removetime = -1
ignorehitpause = 1
removeongethit = 1;食らったらきえます

;発射
[State 620, 4] 
type = Projectile
trigger1 = animelemtime(2) = 0
projid = 10051
projanim = 3001
projhitanim = 3010;10052
projhits = 20;var(0)
projscale = 1.2,1.2
projheightbound = -480, 0
projedgebound = 4000
projscreenbound = 4000
projstagebound = 200
projmisstime = 1
offset = 56,-55
velocity = 16,0
;accel = .50,0
; HitDef
attr = S, SP
animtype = Hard
damage    = 10,3
hitflag = MAFD
guardflag = MAF
pausetime = 3,8
sparkno = S4002
guard.sparkno = S4023
hitsound   = S0,11;5,1
guardsound = S0,7;6,0
;ground.type = Low
;ground.slidetime = 24
;ground.hittime  = 24
;ground.velocity = -12
ground.type = Low;High
ground.slidetime = 24;3
guard.sparkno = -1 ;S4023
ground.hittime  = 24;20
ground.velocity = -12
airguard.velocity = -5
air.velocity = -2,-2
air.juggle = 9
;air.fall = 1
;fall = 1
;Fall.Recover      = 0				;リカバーできるか


[State sousai]
type = HitOverRide
trigger1 = Time = 0
time = -1
attr = SCA, AP,AA,AT;NP, SP, HP
slot = 0
stateno = 3056

[State Change]
Type = ChangeState
Trigger1 = Time > 30
Value = 1215;発射終了

[State clip]
type = DisplayToClipboard
trigger1 = 1
text = "scrposX = %f"
params = ScreenPos X
;-----------------
[Statedef 1215];ゼーレゲヴェーア　終了
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 12120
velset = 0,0

[State RemKemuri]
type = RemoveExplod
trigger1 = NumExplod(4010) && Time = 0
id = 4010;けむりをけしとく

[State Grv]
type = velset
trigger1 = animelemtime(2) = 0
X = frontedgebodydist / 10
Y = -5.4
[State Grv]
type = posadd
trigger1 = animelemtime(2) = 0
X = -2.2

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Delete]
type = DestroySelf
trigger1 = ScreenPos X <= -20
trigger2 = ScreenPos X > 340
trigger3 = ScreenPos Y <= -20
trigger4 = ScreenPos Y > 260

[State clip]
type = DisplayToClipboard
trigger1 = 1
text = "scrposX = %f"
params = ScreenPos X

;--------------------------------
;援護攻撃　パチュリー
;ヴァリアブルコンビネーション
;ノンディレクショナルレーザー
[Statedef 3060];ノンディレクショナル　魔理沙側
type = S
ctrl = 0
anim = 3063;195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[State 4500, Helper]
type = Helper
triggerall = !NumHelper(3060)
trigger1 = animelemTime(3) = 0
helpertype = Normal
name = "Patche"
ID = 3060
stateno = 3065
pos =  -30,-60
postype = back
facing = 1
ownpal = 1
removeongethit = 1
supermovetime = 99999999
pausemovetime = 99999999

[State Pow]
type = poweradd
trigger1 = animelemTime(3) = 0
value = -2000

[State 4500, Explod]
type = Explod
trigger1 = animelemTime(3) = 0
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999

;カットイン！
[state 4002, 1]
type = explod
trigger1 = animelemTime(3) = 0
anim = 10050;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0
supermovetime = 99999999
pausemovetime = 99999999


[state 4002, 1]
type = explod
trigger1 = animelemTime(3) = 0
anim = 4050;7000
id = 4050;7000
postype = p1
pos = 3,-52;
ontop = 1
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0
supermovetime = 99999999
pausemovetime = 99999999

[State VOICE];
type = PlaySnd
trigger1 = animelemTime(3) = 0
value = 0,22;20, 0
persistent = 0

[State 3000, Super A]
type = Pause;SuperPause
trigger1 = animelemTime(3) = 0
;pos = 3,-52;
;anim = S4050;S***で自分のだったけ
;sound = S0,22;20, 0
;poweradd = -2000
time = 29;停止時間 (int)
;movetime = 40;停止無視時間 (int)

[State 4500, Explod];ばっくぐらうんど
type = Explod
trigger1 = animelemTime(3) >= 0
trigger1 = !numexplod(1005)
persistent = 0
anim = 15061
id = 15060;
postype = back;p1
pos = 0,0
sprpriority = -5
bindtime = -1
removetime = 300
supermovetime = 60
ownpal = 1
scale = 1,1.1
removeongethit = 1;食らったらきえます
;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
;[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
;type = AssertSpecial
;trigger1 = 1
;flag = noBG ;<-- removes the stage layer
;flag = noFG ;<-- removes the lifebars and any foreground stage layers
;ignorehitpause = 1

[State VOICE];
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,0;いくぜっ
channel = 0;VCチャンネル
persistent = 0

;LAZER
[State 5150, 6] ;Dead Explod
type = Explod
;trigger1 = time = 0;animelemtime(5) = 0
trigger1 = animelemtime(6) = 0
anim = 3065;4028
id = 3061
;pos = 0,0
Postype     = P1
Pos         = 0,-24
facing = -1
vfacing = -1
vel = 0,0
scale = 1,1
ownpal = 0;1
removetime = -1
sprpriority = 7
ignorehitpause = 1
removeongethit = 1;食らったらきえます


;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 3061
ctrl = 0

;-----------------
[Statedef 3061];ノンディレクショナル　魔理沙側２
type = S
ctrl = 0
anim = 5800;195
velset = 0,0
movetype = I
physics = S
sprpriority = 2


;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[state pos]
type = posadd
trigger1 = Time > 175
Y = -10

[State 195, 2]
type = ChangeState
trigger1 = Time > 175
value = 3062
ctrl = 1

;-----------------
[Statedef 3062];ノンディレクショナル　魔理沙側終了
type = A
ctrl = 0
anim = 5801;195
velset = -3,-8
movetype = H
physics = N
sprpriority = 2


[State remexp]
type = removeexplod
trigger1 = time = 0;
id = 15060

[State RemLZ]
type = RemoveExplod
trigger1 = NumExplod(3061) && Time = 0
id = 3061;レーザーをけしとく
;LAZER
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = Time = 0
anim = 3066;4028
id = 3062
;pos = 0,0
Postype     = P1
Pos         = 34,-54
facing = -1
vfacing = -1
vel = 0,0
scale = 1,1
ownpal = 0;1
removetime = 60
sprpriority = 7
ignorehitpause = 1
removeongethit = 0

[State Fall]
type = gravity
trigger1 = 1

[state anm]
type = changeanim
trigger1 = time = 10
value = 5035
[state anm]
type = changeanim
trigger1 = anim = 5035
trigger1 = animtime = 0
value = 5050

[State Timer]
type = varset
trigger1 = time = 0
var(32) = 800;パチュリー用タイマーを起動

[State 195, 2]
type = ChangeState
Trigger1 = (Vel Y > 0) && (Pos Y >= 0)
value = 5100
ctrl = 0
;-----------------
[Statedef 3065];ヘリ　パチュリー側
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3060
sprpriority = -1
;velset = 4.4,0

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Grv]
type = velset
trigger1 = time = 0
X = (parentdist X+48) / 16
Y = 0

[State Grv]
type = Gravity
trigger1 = 1
[State Grv]
type = posadd
trigger1 = 1
X = .1
Y = .1

[State Change]
Type = ChangeState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y > 0
Value = 3066;発射ステートへ
;-----------------
[Statedef 3066];パチュリー側２
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3061
velset = 0,0

[State muteki]
type = nothitby
trigger1 = parent,animelemTime(4) < 0
value = sca

[State Turn]
Type     = Turn
Trigger1 = P2Dist X < 0

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State ***]
type = playsnd
trigger1 = animelemtime(5) = 0
value = 0,25;ぶぅぅぅぅ〜〜〜〜〜ん

;LAZER
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = animelemtime(5) = 0
anim = 3065;4028
id = 3065
;pos = 0,0
Postype     = P1
Pos         = 34,-54
vel = 0,0
scale = 1,1
ownpal = 0;1
removetime = -1
sprpriority = 7
ignorehitpause = 1
removeongethit = 1;食らったらきえます


[State Clip];何か参照したいときに手軽に使う
type = DisplayToClipboard
trigger1 = 1
text = "at = %f "
params = fvar(10);,  helper(3013),Hitcount

;攻撃判定を持つヘルパーは自前で補正用varを持つようにする！
[State Attackfv]
type = varset
trigger1 = Target,Gethitvar(hitcount) >= 1
;fvar(10) = 1.0-(Target,Gethitvar(hitcount)/60.0) ;*parent,fvar(10);-(parent,Hitcount/60.0)
fvar(10) = parent,fvar(10)-(Target,Gethitvar(hitcount)/80.0)
ignorehitpause=1
;補正無し
[State Attackfv]
type = varset
trigger1 = Target,Gethitvar(hitcount) = 0
fvar(10) = 1.0 
ignorehitpause=1
;下回りした場合
[State Attackfv]
type = varset
trigger1 = fvar(10) <= 0
fvar(10) = .0 
ignorehitpause=1

;アタリ判定
[State 4501, HitDef]
type = HitDef
triggerall = time%8 = 0
trigger1 = animelemtime(5) >= 0
attr = S, HP
animtype  = Hard
damage    = ceil(16*fvar(10)),ceil(10*fvar(10));かなり当たるので威力調整には注意が必要
getpower = 0,0
sprpriority = 1
hitflag = MADFP
guardflag = MA
guard.dist	= 650        ;相手がガード行動をとる距離
pausetime = 0,7
sparkno = -1;S4002
;sparkxy = ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), ifelse((Random < 330),0,ifelse((Random = [330,660]),0,-30))
hitsound   = S0,11;ばすたーひっと音
guardsound = S0,7;これもバスターのものを
guard.sparkno = -1;S4023;こいつはあのガードアニメを
ground.type = High
ground.slidetime = 22
ground.hittime = 23
ground.velocity = -6,-4
guard.slidetime = 11
guard.hittime = 11
guard.velocity = -4.5
air.type = High
air.velocity = -6.5,-5
airguard.velocity = -4.5
ground.cornerpush.veloff = 0;1
air.cornerpush.veloff = 0;2
down.cornerpush.veloff = 0;3
guard.cornerpush.veloff = 0;4
airguard.cornerpush.veloff = 0;5
fall = 1
Fall.Recover      = 0				;リカバーできるか
;p2stateno = 4506

[State Hitspark]
type = Explod
trigger1 = movehit = 1
anim = 4002
id = 4002
postype = p1
bindtime = 1
pos = floor(p2dist X),floor(p2dist Y-(Random%60))
scale = 1,1
ontop = 1
pausemovetime = 99999999
supermovetime = 99999999
[State Gurspark]
type = Explod
trigger1 = moveguarded = 1
anim = 4023
id = 4023
postype = p1
bindtime = 1
pos = floor(p2dist X),floor(p2dist Y-(Random%60))
scale = 1,1
ontop = 1
pausemovetime = 99999999
supermovetime = 99999999

[State Change]
type = ChangeState
trigger1 = Time > 200
trigger2 = parent,stateno != [3060,3064];違うステートになってたら終了する
Value = 3067;発射終了

[State clip]
type = DisplayToClipboard
trigger1 = 1
text = "scrposX = %f"
params = ScreenPos X
;-----------------
[Statedef 3067];パチュリー側　終了
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3062
velset = 0,0

[State Grv]
type = velset
trigger1 = animelemtime(7) = 0
X = backedgebodydist / -24
Y = -5.4
[State Grv]
type = posadd
trigger1 = animelemtime(7) >= 0
;X = -2.2
Y = .4

[State RemLZ]
type = RemoveExplod
trigger1 = NumExplod(3065) && Time = 0
id = 3065;レーザーをけしとく
;LAZER
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = Time = 0
anim = 3066;4028
id = 3066
;pos = 0,0
Postype     = P1
Pos         = 34,-54
vel = 0,0
scale = 1,1
ownpal = 0;1
removetime = 60
sprpriority = 7
ignorehitpause = 1
removeongethit = 0

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Delete]
type = DestroySelf
trigger1 = ScreenPos X <= -20
trigger2 = ScreenPos X > 340
;trigger3 = ScreenPos Y <= -20
;trigger4 = ScreenPos Y > 260

[State clip]
type = DisplayToClipboard
trigger1 = 1
text = "scrposX = %f"
params = ScreenPos X
;-----------------
[Statedef 3090];マスターブレード　魔理沙側
type = S
ctrl = 0
anim = 3096;アッパー
velset = 0,0
movetype = A
physics = S
sprpriority = 2

[State sousai]
type = HitOverRide
trigger1 = animelemTime(7) >= 0
time = 1
attr = SCA, AP,AA,AT;NP, SP, HP
slot = 0
stateno = 3094

[State Counter]
type = varset
trigger1 = time = 0
var(10) = 0
[State Counter]
type = varadd
trigger1 = 1
var(10) = 1

[State 195, 1]
type = Offset
trigger1 = 1
Y = 6

[State 4500, Helper]
type = Helper
triggerall = !NumHelper(3090)
trigger1 = animelemTime(7) = 0
helpertype = Normal
name = "Alice and Patche"
ID = 3090
stateno = 3095
pos =  -30,-60
postype = back
facing = 1
ownpal = 1
removeongethit = 1
supermovetime = 99999999
pausemovetime = 99999999

[State Pow]
type = poweradd
trigger1 = animelemTime(7) = 0
value = -3000

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = animelemTime(7) >= 0
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, Explod]
type = Explod
trigger1 = animelemTime(7) = 0
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1
supermovetime = 99999999
pausemovetime = 99999999

;カットイン！
[state 4002, 1]
type = explod
trigger1 = animelemTime(7) = 0
anim = 10050;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0
supermovetime = 99999999
pausemovetime = 99999999


[state 4002, 1]
type = explod
trigger1 = animelemTime(7) = 0
anim = 4050;7000
id = 4050;7000
postype = p1
pos = 3,-52;
ontop = 1
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0
supermovetime = 99999999
pausemovetime = 99999999

[State VOICE];
type = PlaySnd
trigger1 = animelemTime(7) = 0
value = 0,22;20, 0
persistent = 0

[State 3000, Super A]
type = Pause;SuperPause
trigger1 = animelemTime(7) = 0
;pos = 3,-52;
;anim = S4050;S***で自分のだったけ
;sound = S0,22;20, 0
;poweradd = -2000
time = 70;停止時間 (int)
movetime = 70;停止無視時間 (int)

[State 4500, Explod];ばっくぐらうんど
type = Explod
trigger1 = animelemTime(7) >= 0
trigger1 = !numexplod(1005)
persistent = 0
anim = 15061
id = 15060;
postype = back;p1
pos = 0,0
sprpriority = -5
bindtime = -1
removetime = 300
supermovetime = 60
ownpal = 1
scale = 1,1.1
removeongethit = 1;食らったらきえます
;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
;[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
;type = AssertSpecial
;trigger1 = 1
;flag = noBG ;<-- removes the stage layer
;flag = noFG ;<-- removes the lifebars and any foreground stage layers
;ignorehitpause = 1

;アタリ判定
[State 4501, HitDef]
type = HitDef
triggerall = time%8 = 0
trigger1 = animelemTime(18) >= 0
attr = S, HP
animtype  = Hard
damage    = 3,1;かなり当たるので威力調整には注意が必要
getpower = 0,0
sprpriority = 1
hitflag = MADFP
guardflag = MA
guard.dist	= 96        ;相手がガード行動をとる距離
pausetime = 0,7
sparkno = -1;S4002
;sparkxy = ifelse((Random < 330),0,ifelse((Random = [330,660]),-15,-45)), ifelse((Random < 330),0,ifelse((Random = [330,660]),0,-30))
hitsound   = S0,11;ばすたーひっと音
guardsound = S0,7;これもバスターのものを
guard.sparkno = -1;S4023;こいつはあのガードアニメを
ground.type = High
ground.slidetime = 22
ground.hittime = 23
ground.velocity = -1,-4
guard.slidetime = 11
guard.hittime = 11
guard.velocity = -1.5
air.type = High
air.velocity = -.5,-5
airguard.velocity = -4.5
ground.cornerpush.veloff = 0;1
air.cornerpush.veloff = 0;2
down.cornerpush.veloff = 0;3
guard.cornerpush.veloff = 0;4
airguard.cornerpush.veloff = 0;5
fall = 1
Fall.Recover      = 0				;リカバーできるか
;p2stateno = 4506
[State Hitspark]
type = Explod
trigger1 = movehit = 1
anim = 4002
id = 4002
postype = p1
bindtime = 1
pos = floor(p2dist X),floor(p2dist Y-(Random%60))
scale = 1,1
ontop = 1
pausemovetime = 99999999
supermovetime = 99999999
[State Gurspark]
type = Explod
trigger1 = moveguarded = 1
anim = 4023
id = 4023
postype = p1
bindtime = 1
pos = floor(p2dist X),floor(p2dist Y-(Random%60))
scale = 1,1
ontop = 1
pausemovetime = 99999999
supermovetime = 99999999

[State North]
type = VarAdd;当たったら星を奪う
trigger1 = movehit
trigger1 = var(41) < 7
var(41) = 1
persistent=0
ignorehitpause=1

[State VOICE];
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,28;地獄に落ちる時間ＺＥ
channel = 0;VCチャンネル
persistent = 0

[State ***]
type = playsnd
trigger1 = Time = 50;animelemtime(10) = 0
value = 0,25;ぶぅぅぅぅ〜〜〜〜〜ん
freqmul = 1.26

[State 5150, 6] ;WING
type = Explod
trigger1 = Time = 10;animelemtime(10) = 0
anim = 3095;4028
;id = 3090
;pos = 0,0
Postype     = P1
Pos         = 6,-20
vel = 0,0
scale = 2,2
ownpal = 0;1
sprpriority = 7
ignorehitpause = 1
removeongethit = 1;食らったらきえます
supermovetime = 99999999
pausemovetime = 99999999

;LAZER
[State 5150, 6] ;Dead Explod
type = Explod
;trigger1 = time = 0;animelemtime(5) = 0
trigger1 = Time = 50;animelemtime(10) = 0
anim = 3090;4028
id = 3090
;pos = 0,0
Postype     = P1
Pos         = 10,-120
bindtime = 9999
vel = 0,0
scale = 1,1
ownpal = 0;1
removetime = -1
sprpriority = 7
ignorehitpause = 1
supermovetime = 99999999
pausemovetime = 99999999


;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 195, 2]
type = ChangeState
triggerall = !var(59)
trigger1 = var(10) >= 250;AnimTime = 0
trigger2 = var(10) >= 110
trigger2 = command != "holdzc"
;発動まで時間がかかる
value = 3091
ctrl = 0
[State 195, 2];AI用
type = ChangeState
triggerall = var(59)
trigger1 = var(10) >= 250;奇特な方は条件設定おねがいします
trigger2 = var(10) >= 110
Trigger2 = P2MoveType = A || InGuardDist
;発動まで時間がかかる
value = 3091
ctrl = 0
;-----------------
[Statedef 3091];マスターブレード　魔理沙側２
type = S
ctrl = 0
anim = 3097;ほうき
velset = 0,0
movetype = A
physics = S
sprpriority = 2

;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State RemLZ]
type = RemoveExplod
trigger1 = NumExplod(3090) && Time = 0
id = 3090;レーザーをけしとく
;LAZER
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = time = 0
anim = 3091;4028
id = 3091
;pos = 0,0
Postype     = P1
Pos         = 0,0
vel = 0,0
scale = 1,1
ownpal = 0;1
removetime = -1
sprpriority = 7
ignorehitpause = 1
removeongethit = 1;食らったらきえます
[State RemLZ]
type = RemoveExplod
trigger1 = NumExplod(3091) && animelemTime(4) = 0
id = 3091;レーザーをけしとく
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = animelemTime(4) = 0
anim = 3092;4028
id = 3092
;pos = 0,0
Postype     = P1
Pos         = 0,0
vel = 0,0
scale = 1,1
ownpal = 0;1
removetime = -1
sprpriority = 7
ignorehitpause = 1
removeongethit = 1;食らったらきえます

[State LZ]
type = ModifyExplod
trigger1 = NumExplod(3092) && animelemTime(9) = 0
id = 3092;レーザーを誘導
Postype     = P1
Pos         = -5,36
[State LZ]
type = ModifyExplod
trigger1 = NumExplod(3092) && animelemTime(10) = 0
id = 3092;レーザーを誘導
Postype     = P1
Pos         = -35,36
[State LZ]
type = ModifyExplod
trigger1 = NumExplod(3092) && animelemTime(11) = 0
id = 3092;レーザーを誘導
Postype     = P1
Pos         = -65,36
[State LZ]
type = ModifyExplod
trigger1 = NumExplod(3092) && animelemTime(12) = 0
id = 3092;レーザーを誘導
Postype     = P1
Pos         = -95,36

[State 3000, Super A]
type = SuperPause
trigger1 = animelemTime(3) = 0
pos = 3,-52;
anim = S4004;S***で自分のだったけ
sound = S0,24;20, 0
poweradd = 0
time = 60;停止時間 (int)

[State Voice];ぼいす再生しま
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = animelemTime(5) = 0
value = 1,7;ふんっ！
channel = 0;VC

[State -1, HitDef]
Type = HitDef
Trigger1          = !MoveContACT
Trigger1          = 1
Attr              = S, SA
Damage            = 50+var(10), ceil(var(10)*0.6);Var(10)最大値・250
hitsound   = S0,41
guardsound = S0,7
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAF				;ヒットする状態
GuardFlag         = M				;ガードできる状態
guard.dist	= 450        ;相手がガード行動をとる距離
Priority          = 6, Hit			;攻撃の優先度
PauseTime         = 10, 11			;ヒット時の硬直時間
sparkno = S4038;
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -40, -90			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 10				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -4,-10			;ヒット時の相手の移動 地上
Air.Velocity      = -4,-10			;ヒット時の相手の移動 空中
AirGuard.Velocity = -4,-10			;ヒット時の相手の移動 空中ガード
kill              = 1				;この攻撃で殺せるか
guard.kill 	= 0
fall.kill 	= 0
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0

[State North]
type = VarAdd;当たったら星を奪う
trigger1 = movehit
trigger1 = var(41) < 7
var(41) = ifelse(var(10) >= 250,2,1)
persistent=0
ignorehitpause=1

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 195, 2]
type = ChangeState
trigger1 = AnimelemTime(12) = 0
value = 3092
ctrl = 0
;-----------------
[Statedef 3092];マスターブレード　魔理沙側３
type = S
ctrl = 0
anim = 3098;ほうき
velset = 0,0
movetype = A
physics = S
sprpriority = 2


;[State remexp]
;type = removeexplod
;trigger1 = time = 0;
;id = 15060
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State muteki]
type = nothitby
trigger1 = 1
value = sca

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State RemLZ]
type = RemoveExplod
trigger1 = NumExplod(3092) && Time = 0
id = 3092;レーザーをけしとく
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = time = 0
anim = 3093;4028
id = 3093
;pos = 0,0
Postype     = P1
Pos         = 0,0
vel = 0,0
scale = .7,.7;1,1
ownpal = 0;1
removetime = -1
sprpriority = 7
ignorehitpause = 1
removeongethit = 1;食らったらきえます
[State RemLZ]
type = RemoveExplod
trigger1 = NumExplod(3093) && animelemTime(5) = 0
id = 3093;レーザーをけしとく
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = animelemTime(5) = 0
anim = 3094;4028
id = 3094
;pos = 0,0
Postype     = P1
Pos         = 0,0
vel = 0,0
scale = 1,1
ownpal = 0;1
removetime = -1
sprpriority = 7
ignorehitpause = 1
removeongethit = 1;食らったらきえます
[State RemLZ]
type = RemoveExplod
trigger1 = NumExplod(3094) && animelemTime(8) = 0
id = 3094;レーザーをけしとく
;LAZER
[State 5150, 6] ;Dead Explod
type = Explod
trigger1 = animelemTime(8) = 0
anim = 30031;4028
id = 3056
;pos = 0,0
Postype     = P1
Pos         = 80,-33
vel = 0,0
scale = 2,2
ownpal = 0;1
;removetime = -1
sprpriority = 7
ignorehitpause = 1
removeongethit = 0

[State 3000, Super A]
type = SuperPause
trigger1 = animelemTime(4) = 0
pos = 3,-52;
anim = S4004;S***で自分のだったけ
sound = S0,24;20, 0
poweradd = 0
time = 60;停止時間 (int)

[State ***]
type = playsnd
triggerall = var(40);ボイスＯＫ
trigger1 = animelemTime(6) = 0
value = 1,8;でりゃあ！
channel = 0;VC


[State SMAAAAASH!]
type = AssertSpecial
trigger1 = 1
flag = unguardable

[State -1, HitDef]
Type = HitDef
Trigger1          = !MoveContACT
Trigger1          = 1
Attr              = S, SA
Damage            = 100+var(10), ceil(var(10)*0.6);Var(10)最大値・250
hitsound   = S0,41
guardsound = S0,7
AnimType          = Hard			;ヒット時の相手のポーズ
HitFlag           = MAFD			;ダウン追撃
GuardFlag         = H				;ガードできる状態
guard.dist	= 537        ;相手がガード行動をとる距離
Priority          = 6, Hit			;攻撃の優先度
PauseTime         = 10, 11			;ヒット時の硬直時間
sparkno = S4037;
Guard.SparkNo     = -1				;ガードエフェクト
Sparkxy           = -40, -90			;エフェクト表示位置
Ground.Type       = High			;どこに当たるか 地上
Air.Type          = High			;どこに当たるか 空中
Ground.SlideTime  = 10				;相手がすべる時間
Ground.HitTime    = 20				;コンボが繋がる時間 地上
Air.HitTime       = 20				;コンボが繋がる時間 空中
Ground.Velocity   = -4,-10			;ヒット時の相手の移動 地上
Air.Velocity      = -4,-10			;ヒット時の相手の移動 空中
AirGuard.Velocity = -4,-10			;ヒット時の相手の移動 空中ガード
Kill              = 1				;この攻撃で殺せるか
Fall              = 1				;地面に叩き付けられるか
Air.Fall          = 1				;地面に叩き付けられるか
Fall.Recover      = 0				;リカバーできるか
GetPower          = 80				;ヒット時のパワー増減
Persistent = 0

[State North]
type = VarAdd;当たったら星を奪う
trigger1 = movehit
trigger1 = var(41) < 7
var(41) = ifelse(var(10) >= 250,2,1)
persistent=0
ignorehitpause=1

[State Timer]
type = varset
trigger1 = var(30) >= 0;正の値の場合
trigger1 = AnimTime = 0
var(30) = 99999999;アリス用タイマーを起動
[State Timer]
type = varset
trigger1 = var(30) < 0;負の値の場合
trigger1 = AnimTime = 0
var(30) = -100000000;アリス用タイマーを起動
[State Timer]
type = varset
trigger1 = AnimTime = 0
var(32) = 99999999;パチュリー用タイマーを起動


[State remexp]
type = removeexplod
trigger1 = animtime = 0;
id = 15060

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------
[Statedef 3094];マスターブレード　魔理沙側・アーマー
type = S
ctrl = 0
anim = 3096;アッパー
velset = 0,0
movetype = H
physics = S
sprpriority = 2

[State 195, 1]
type = Offset
trigger1 = 1
Y = 6

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1
flag = noBG ;<-- removes the stage layer
flag = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State sousai]
type = HitOverRide
trigger1 = 1
time = 1
attr = SCA, AP,AA,AT;NP, SP, HP
slot = 0
stateno = 3094

[State Anim]
type = changeanim
trigger1 = time = 0
trigger1 = alive
value = 3096
elem = 13

[State Counter]
type = varadd
trigger1 = 1
var(10) = 1

[State Anim]
type = changeanim
trigger1 = !alive
value = 5030
[State 195, 2]
type = ChangeState
trigger1 = !alive
;死んだ時
value = 5030
ctrl = 0

[State 195, 2]
type = ChangeState
triggerall = !var(59)
trigger1 = var(10) >= 250;AnimTime = 0
trigger2 = var(10) >= 110
trigger2 = command != "holdzc"
;発動まで時間がかかる
value = 3091
ctrl = 0
[State 195, 2];AI用
type = ChangeState
triggerall = var(59)
trigger1 = var(10) >= 250;奇特な方は条件設定おねがいします
trigger2 = var(10) >= 110
Trigger2 = P2MoveType = A || InGuardDist
;発動まで時間がかかる
value = 3091
ctrl = 0
;-----------------
[Statedef 3095];アリス+パチュリー
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3052
sprpriority = 4
;velset = 4.4,0

[State var];アリスがタッグにいるかどうかの判定
type = varset
trigger1 = numpartner > 0;パートナーが存在
trigger1 = partner,name = "Alice-R";ありすだったなら
var(30) = -1;このヘルパーの30番目をフラグにする

[State Inv(Alice)]
type = assertspecial
trigger1 = var(30) = -1;アリスフラグ
flag = invisible;アリスを透明化

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State 5150, 6] ;パチュリー
type = Explod
trigger1 = time = 0
anim = 3060;4028
id = 3095
;pos = 0,0
Postype     = P1
Pos         = 70,0
bindtime = 9999
vel = 0,0
scale = 1,1
ownpal = 0;1
removetime = -1
sprpriority = -1
ignorehitpause = 1
removeongethit = 1;食らったらきえます
supermovetime = 99999999
pausemovetime = 99999999

[State Grv]
type = velset
trigger1 = time = 0
X = (parentdist X-32) / 16
Y = 0

[State Grv]
type = Gravity
trigger1 = 1
[State Grv]
type = posadd
trigger1 = 1
X = .1
Y = .1

[State Change]
Type = ChangeState
Trigger1 = Vel Y > 0
Trigger1 = Pos Y > 0
Value = 3096;発射ステートへ
;-----------------
[Statedef 3096];アリス+パチュリー２
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 3050
sprpriority = 4

[State Inv(Alice)]
type = assertspecial
trigger1 = var(30) = -1;アリスフラグ
flag = invisible;アリスを透明化

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0
x = 0

[State Rem]
type = RemoveExplod
trigger1 = NumExplod(3095) && time = 0
id = 3095;レーザーをけしとく
[State 5150, 6] ;パチュリー
type = Explod
trigger1 = time = 0
anim = 3061;4028
id = 3096
;pos = 0,0
Postype     = P1
Pos         = 70,0
bindtime = 9999
vel = 0,0
scale = 1,1
ownpal = 0;1
removetime = -1
sprpriority = -1
ignorehitpause = 1
removeongethit = 1;食らったらきえます
supermovetime = 99999999
pausemovetime = 99999999

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State Change]
Type = ChangeState
Trigger1 = Animelemtime(4) = 25;アニメが進んだら
Value = 3097;離脱ステートへ
;-----------------------------
[Statedef 3097];アリス+パチュリー３
Type = S
Movetype = A;atakku
physics = N;neutlal
ctrl = 0;しばらくうごけません
anim = 182
sprpriority = 4

[State Inv(Alice)]
type = assertspecial
trigger1 = var(30) = -1;アリスフラグ
flag = invisible;アリスを透明化

[State muteki]
type = nothitby
trigger1 = 1
value = sca


[State PalFX]
type = PalFX
trigger1 = 1
time = 2
add = 255,255,128
;mul = 255,178,128
color = 0;


[State Rem]
type = RemoveExplod
trigger1 = NumExplod(3096) && time = 0
id = 3096
[State 5150, 6] ;パチュリー
type = Explod
trigger1 = time = 0
anim = 182;4028
;pos = 0,0
Postype     = P1
Pos         = 70,0
vel = 0,0
scale = 1,1
sprpriority = -1
ignorehitpause = 1
removeongethit = 1;食らったらきえます
supermovetime = 99999999
pausemovetime = 99999999


[State End]
Type = destroyself
Trigger1 = Animtime = 0
;-----------------------------
[Statedef 3400];3400 ラストアルマゲドンドロップVer.RM
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 35102;別途で投げアニメを製作する
sprpriority = 2

[State Pow]
type = poweradd
trigger1 = time = 0
value = -2000;パワー2000消費
[State WPNSUB]
type = Varset
Trigger1 = Time = 0
Trigger1 = var(6) ;>= (3000/var(7))
var(6) = 0

;スーパーポーズ
[State 4500, AssertSpecial];背景消去　エフェクト実装後に使う
type = AssertSpecial
trigger1 = 1;Time <= 50
flag = noBG ;<-- removes the stage layer
flag2 = noFG ;<-- removes the lifebars and any foreground stage layers
ignorehitpause = 1

[State 4500, Explod]
type = Explod
Trigger1 = Time = 0
anim = 15010;9012;ハイパー発動フラッシュエフェクト。実装後につかう
postype = left;p1
pos = 0,0
sprpriority = -5
supermovetime = 60
ownpal = 1
bindtime = -1

;カットイン！
[state 4002, 1]
type = explod
Trigger1 = Time = 0
anim = 10051;7000
id = 1005;7000
postype = back
pos = 0, 0
sprpriority = -3
ownpal = 1
bindtime = -1
supermove = 1
persistent = 0

[State 3000, Super A]
type = SuperPause
Trigger1 = Time = 0
pos = 13,-32;
anim = S4050;S***で自分のだったけ
sound = S0,40;22;20, 0
poweradd = 0;-1000
time = 50;停止時間 (int)
;movetime = 50;停止無視時間 (int)


[State 210, 1]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,44;ぶちころすぞ・・・
channel=0;vc

[State 800, 1]
type = HitDef
Trigger1 = 1;Time = 0
id = 35100
attr = S, NT          ;ｓ：立ち　ｎ：通常　ｔ：投げ
hitflag = MAF          ;コンボの途中から投げが入らないよう設定してある
guard.dist        = 0             ;相手がガード行動をとる距離
priority = 1, Miss    ;１は優先順位が低いので技がでないかミスするという設定
sparkno = -1          ;-をつければスパークエフェクトは無い
sprpriority = 1       ;２Ｐより上にカンフーマンが表示される
p1facing = 1;
p2facing = 1          ;？
p1stateno = 3401       ;投げが成功した場合の移動する１Ｐのステート
;p2stateno = 3450      ;投げが成功した場合の移動する２Ｐのステート
fall = 1              ;落ちる力を２Ｐにかけるか


[State 800, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 35081
;-----------------------------
;---------------------------------------------------------------------------
[Statedef 3401];はいぱーぼっ！
type    = A
movetype= A
physics = N
anim = 3400
velset = 0,0;2.0,-16
sprpriority = 2;3

[State Gravity]
type = Veladd
trigger1 = 1
Y = .6

[State MUTEKI]
type = NotHitBy
trigger1 = 1
value = SCA


[State GEKITOTZ2]
type = Explod
trigger1 = Time = 0
Anim = 4032;6012
pos = screenpos X,screenpos Y
postype = left;p1
sprpriority = 5
Velocity = 0,0
BindTime = 1
ownpal = 1

[State 810, Grab Sound]
type = PlaySnd
trigger1 = Time = 0
value = 0,42;がきょおん！

[State 810, Grab Sound]
type = PlaySnd
trigger1 = Time = 0
value = 0, 12;だっしゅ！

[State 810, Grab Sound]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 5
value = 1,7;ふんっ！

[State turn]
type = null;turn
trigger1 = time = 0

[State Target]
type = targetstate
trigger1 = time = 0
id = 35100
value = 3450

[State vel]
type = velset
trigger1 = time = 0
X=2.0
Y=-11;-16

[State 810, Bind]
type = TargetBind
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(9) = 0
time = 8
id = 35100
pos = -54,-65
[State 810, Bind]
type = TargetBind
trigger1 = AnimElemTime(2) = 0
trigger2 = AnimElemTime(10) = 0
time = 28
id = 35100
pos = -54,-65
[State 810, Bind]
type = TargetBind
trigger1 = AnimElemTime(3) = 0
trigger2 = AnimElemTime(11) = 0
time = 4
id = 35100
pos = -54,-65
[State 810, Bind]
type = TargetBind
trigger1 = AnimElemTime(4) = 0
trigger2 = AnimElemTime(12) = 0
time = 4
id = 35100
pos = 0,-88
[State 810, Bind]
type = TargetBind
trigger1 = AnimElemTime(5) = 0
trigger2 = AnimElemTime(13) = 0
time = 4
id = 35100
pos = 44,-40

[State PosY]
type = Posset
trigger1 = Pos Y >= 10
Y = 10

[state Target]
type = null;TargetVelset
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
id = 35100
X = -6
Y = -15
persistent = 0

[State -1]
Type     = EnvShake
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
Time     = 20
Freq     = 90
Ampl     = 6

[State SprPri]
type = SprPriority
trigger1 = animelemtime(1) = 0
trigger2 = AnimElemTime(9) = 0
value = 3

[State SprPri]
type = SprPriority
trigger1 = animelemtime(4) = 0
trigger2 = AnimElemTime(12) = 0
value = 1

[state 4002, 1];
type = explod
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
;trigger1 = !Numexplod(35102)
anim = 6001
id = 35102
;postype = p1
pos = 0, 0
ownpal = 1
bindtime = 1
ignorehitpause = 1
;ontop = 1
sprpriority = 4;2
facing = 1
scale = 2.5,2.5
[State 810, Grab Sound]
type = PlaySnd
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
value = 0, 15;爆発音
persistent = 0

[State Damage]
type = TargetLifeAdd
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
value = -140
ID = 35100
kill = 0
persistent = 0

[State 800, 2]
type = ChangeState
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
value = 3402
;---------------------------------------------------------------------------
[Statedef 3402];らすまげ地面直撃１
type    = S
movetype= A
physics = N
velset = 0,0
sprpriority = 3

[State Pos]
type = Posset
trigger1 = time = 0
Y = 0

[State Nex]
type = changestate
trigger1 = animelemtime(9) >= 0
value = 3403

;---------------------------------------------------------------------------
[Statedef 3403];はいぱーぼっ！
type    = A
movetype= A
physics = N
velset = 0,0;2.0,-16
sprpriority = 2;3

[State Gravity]
type = Veladd
trigger1 = 1
Y = .6

[State MUTEKI]
type = NotHitBy
trigger1 = 1
value = SCA


[State GEKITOTZ2]
type = null;Explod
trigger1 = Time = 0
Anim = 4032;6012
pos = screenpos X,screenpos Y
postype = left;p1
sprpriority = 5
Velocity = 0,0
BindTime = 1
ownpal = 1

[State 810, Grab Sound]
type = PlaySnd
trigger1 = Time = 0
value = 0, 12;だっしゅ！

[State 810, Grab Sound]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 5
value = 1,5;りゃっ！

[State turn]
type = turn
trigger1 = time = 0

[State Target]
type = targetstate
trigger1 = time = 0
id = 35100
value = 3450

[State vel]
type = velset
trigger1 = time = 0
X=2.0
Y=-16

[State 810, Bind]
type = TargetBind
trigger1 = AnimElemTime(1) = 0
trigger2 = AnimElemTime(9) = 0
time = 8
id = 35100
pos = -54,-65
[State 810, Bind]
type = TargetBind
trigger1 = AnimElemTime(2) = 0
trigger2 = AnimElemTime(10) = 0
time = 28
id = 35100
pos = -54,-65
[State 810, Bind]
type = TargetBind
trigger1 = AnimElemTime(3) = 0
trigger2 = AnimElemTime(11) = 0
time = 4
id = 35100
pos = -54,-65
[State 810, Bind]
type = TargetBind
trigger1 = AnimElemTime(4) = 0
trigger2 = AnimElemTime(12) = 0
time = 4
id = 35100
pos = 0,-88
[State 810, Bind]
type = TargetBind
trigger1 = AnimElemTime(5) = 0
trigger2 = AnimElemTime(13) = 0
time = 4
id = 35100
pos = 44,-40

[State PosY]
type = Posset
trigger1 = Pos Y >= 10
Y = 10

[state Target]
type = null;TargetVelset
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
id = 35100
X = -6
Y = -15
persistent = 0

[State -1]
Type     = EnvShake
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
Time     = 20
Freq     = 90
Ampl     = 6

[State SprPri]
type = SprPriority
trigger1 = animelemtime(1) = 0
trigger2 = AnimElemTime(9) = 0
value = 3

[State SprPri]
type = SprPriority
trigger1 = animelemtime(4) = 0
trigger2 = AnimElemTime(12) = 0
value = 1

[state 4002, 1];
type = explod
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
;trigger1 = !Numexplod(35102)
anim = 6001
id = 35102
;postype = p1
pos = 0, 0
ownpal = 1
bindtime = 1
ignorehitpause = 1
;ontop = 1
sprpriority = 4;1
facing = 1
scale = 2.5,2.5
[State 810, Grab Sound]
type = PlaySnd
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
value = 0, 15;爆発音
persistent = 0

[State Damage]
type = TargetLifeAdd
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
value = -140
ID = 35100
kill = 0
persistent = 0

[State 800, 2]
type = ChangeState
trigger1 = Time >= 10
trigger1 = Pos Y >= 10
value = 3404
;---------------------------------------------------------------------------
[Statedef 3404];らすまげ地面直撃２
type    = S
movetype= A
physics = N
velset = 0,0
sprpriority = 3

[State Pos]
type = Posset
trigger1 = time = 0
Y = 0

[State 810, Bind]
type = TargetBind
trigger1 = 1
time = 1
id = 35100
pos = 44,-40

[State Nex]
type = changestate
trigger1 = animelemtime(17) >= 0
value = 3405
;---------------------------------------------------------------------------
[Statedef 3405];らすまげ投げ飛ばし ここで相手を飛ばす
type    = S
movetype= A
physics = N
velset = 0,0
sprpriority = 3

[State turn]
type = turn
trigger1 = time = 0

[State CAMERA];カメラを外し、相手にフォーカスを向けさせる
type = ScreenBound
trigger1 = 1
value = 0;カメラが追わなくなる

[State JOJO];
type = PlaySnd
trigger1 = animelemtime(21) = 0
value = 0,34;
[State Target]
type = targetstate
trigger1 = animelemtime(21) = 0
id = 35100
value = 3451

[State 810, Grab Sound]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = animelemtime(21) = 0
value = 1,8;でりゃあ！

[State Nex]
type = changestate
trigger1 = animelemtime(34) >= 0
value = 3406
;---------------------------------------------------------------------------
[Statedef 3406];らすまげ上昇
type    = A
movetype= A
physics = N
velset = 0,-18
sprpriority = 2

[State CAMERA];カメラを外し、相手にフォーカスを向けさせる
type = ScreenBound
trigger1 = 1
value = 0;カメラが追わなくなる

[State Nex]
type = changestate
trigger1 = time = 22
value = 3407
;---------------------------------------------------------------------------
[Statedef 3407];らすまげ叩き落し
type    = A
movetype= A
physics = N
anim = 3401
velset = 0,0
sprpriority = 2

[State CAMERA];カメラを外し、相手にフォーカスを向けさせる
type = ScreenBound
trigger1 = 1
value = 0;カメラが追わなくなる

[State Damage]
type = TargetLifeAdd
trigger1 = animelemtime(6) = 0
value = -140
ID = 35100
kill = 0
persistent = 0

[State Target]
type = targetstate
trigger1 = animelemtime(6) = 0
id = 35100
value = 3452

[State Hitspark]
type = Explod
trigger1 = animelemtime(6) = 0
anim = 4002
id = 4002
postype = p1
bindtime = 1
pos = floor(p2dist X),floor(Random%5)
scale = 1,1
ontop = 1
pausemovetime = 99999999
supermovetime = 99999999
[State Hitspark];
type = PlaySnd
trigger1 = animelemtime(6) = 0
value = 0,5;
channel = 1;SE

[State Nex]
type = changestate
trigger1 = animtime = 0
value = 3408
;---------------------------------------------------------------------------
[Statedef 3408];らすまげ叩き落し
type    = A
movetype= A
physics = N
anim = 50
velset = 0,0
sprpriority = 2

[State CAMERA];カメラを外し、相手にフォーカスを向けさせる
type = ScreenBound
trigger1 = 1
value = 0;カメラが追わなくなる

[State 810, Grab Sound]
type = PlaySnd
trigger1 = Time = 0
value = 3521,2;きのこ
channel = 1;SE

[State 810, Grab Sound]
type = PlaySnd
triggerall = var(40);ボイスＯＫ
trigger1 = Time = 0
value = 1,0;いくぜっ
channel = 0;VC

[State Nex]
type = changestate
trigger1 = animtime = 0
value = 3409
;------------------------------
[Statedef 3409];みそぎ　落下
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 9999;35224;
sprpriority = 2


[State target]
type = HitAdd
trigger1 = numtarget > 0;ターゲットがいる場合はふっとばす
Trigger1 = time = 0
value = 3

[state 451,6]
type = screenbound
trigger1 = 1
value = 0

[State Pos]
type = posset
trigger1 = time = 10
;X = 0
Y = -360

[State Pos]
type = velset
trigger1 = time = 10
X = 3;0
Y = 20

[State anim]
type = changeanim
trigger1 = time = 10
value = 35224

[State GRV]
type = gravity
Trigger1 = time >= 10
trigger1 = 1

[State 810, Grab Sound]
type = PlaySnd
Trigger1 = time >= 10
Trigger1 = pos Y > 0
Trigger1 = vel Y > 0
value = 0,17;ドゴオンッ

[State target]
type = targetbind
trigger1 = numtarget > 0
Trigger1 = time >= 10
Trigger1 = pos Y > 0
Trigger1 = vel Y > 0
pos = 0,0
[State bind]
type = targetstate
trigger1 = numtarget > 0
Trigger1 = time >= 10
Trigger1 = pos Y > 0
Trigger1 = vel Y > 0
value = 66220

[State CRUSH!]
type = EnvShake
Trigger1 = time >= 10
Trigger1 = pos Y > 0
Trigger1 = vel Y > 0
persistent = 0
time = 60
freq = 160
ampl = -10
phase = 0

[State EN]
Type = Explod
Trigger1 = Time = 10
Anim = 35226;シャイン
ID = 35226
PosType = p1
Pos = 0,0
scale = 2,2
ownpal = 1
Bindtime = -1
removetime = -2
Sprpriority = 3
Persistent = 0
Removeongethit = 1
[State Nex]
type = ChangeState
Trigger1 = time >= 10
Trigger1 = pos Y > 0
Trigger1 = vel Y > 0
value = 3410

;------------------------------
[Statedef 3410];みそぎ　着地
type    = S
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 35225;
sprpriority = 2

[State target]
type = targetlifeadd
triggerall = numtarget > 0;ターゲットがいる場合
Trigger1 = time = 0
value = -140
Kill = 1
[State target]
type = HitAdd
trigger1 = numtarget > 0;ターゲットがいる場合はふっとばす
Trigger1 = time = 0
value = 1

[State pos]
type = posset
trigger1 = time = 0
Y = 0

[State VC];
type = PlaySnd;ばくはつ
trigger1 = Time = 0
trigger2 = Time = 2
trigger3 = Time = 3
value = 0,17
[state 4002, 1];
type = explod
trigger1 = Time = 0
trigger1 = !Numexplod(3030)
anim = 6001
id = 3030
postype = p1
pos = 0,0
ownpal = 1
bindtime = 1
ignorehitpause = 1
;ontop = 1
sprpriority = 2
facing = 1
scale = 3,3
[state 4002, 1];
type = explod
trigger1 = Time = 0
trigger1 = !Numexplod(3031)
anim = 6001
id = 3031
postype = p1
pos = 80,0;ひだり
ownpal = 1
bindtime = 1
ignorehitpause = 1
;ontop = 1
sprpriority = 2
facing = 1
scale = 3,3
[state 4002, 1];
type = explod
trigger1 = Time = 0
trigger1 = !Numexplod(3032)
anim = 6001
id = 3032
postype = p1
pos = -80,0;みぎ
ownpal = 1
bindtime = 1
ignorehitpause = 1
;ontop = 1
sprpriority = 2
facing = 1
scale = 3,3

[State anim]
type = changeanim
trigger1 = time = 60
value = 35222
[State 810, Grab Sound]
type = PlaySnd
trigger1 = Time = 60
value = 3521,3;きのこ
channel = 1;SE

[State Return]
type = Changestate
trigger1 = time >= 120
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 3450];らすまげ地面直撃 相手１
type    = A
movetype= H
physics = N
;velset = 0,0;-6,-15

[State turn]
type = null;turn;（ターンさせる）
trigger1 = time = 0

[State CAMERA];のけぞってる間、カメラを外します
type = ScreenBound
trigger1 = 1
value = 0;カメラが追わなくなる

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3450

;---------------------------------------------------------------------------
[Statedef 3451];らすまげ地面直撃 相手２　飛ばされ
type    = A
movetype= H
physics = N
velset = -.3,-15

[State Vel]
type = veladd
trigger1 = vel Y < 0
Y = .3

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3451
;---------------------------------------------------------------------------
[Statedef 3452];らすまげ直撃 相手落下
type    = A
movetype= H
physics = N
velset = 0,15

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3452

[State Nex]
type = changestate
trigger1 = Pos Y > 0
trigger1 = vel Y >= 0
value = 3453
;---------------------------------------------------------------------------
[Statedef 3453];らすまげ直撃 相手地面激突
Type     = S
MoveType = H
Physics  = N
Ctrl     = 0
sprpriority = 2
anim = 5170
velset = 0,-3

[State muteki]
type = nothitby
trigger1 = 1
value = sca

[State Grv]
type = gravity
trigger1 = Time > 2

[State vel]
type = Posset
trigger1 = Time = 0
Y = -10

[State vel]
type = Posset
trigger1 = Pos Y >= 0
Y = 0
[State vel]
type = Velset
trigger1 = Pos Y >= 0
Y = 0
;---------------------------------------------------------------------------
; ここは-2のステートを書いてください、ヘルパー関係です
;---------------------------------------------------------------------------


;---------------------------------------------------------------------------
; ここから下は-3のステートを書いてください、ここに書いたものはゲーム中
; に条件が成立すればいつでも開始するステートです。
;---------------------------------------------------------------------------

