;--------------------------------------------------------------------------
;Cobra Strike
[StateDef 1000]
type = S
physics = N
moveType = A
anim = Ifelse(var(20),1001,1000)
ctrl = 0
velSet = 0,0
sprPriority = 1
powerAdd = 72 * !var(20)
faceP2 = 1

[State 1000, ReSet]
type=VarSet
trigger1=!time
var(11)=0
ignorehitpause=1

[State 1000, Voice]
type=PlaySnd
trigger1=animelem=4
value=0,3
volumescale=100
channel=0
[State 1000, Snd]
type=PlaySnd
trigger1= animelem=5
value=1005,0
channel=2
[State 1000, Snd]
type=PlaySnd
trigger1=animelem=4
value=1,2
channel=1

[State 1000, PosAdd]
type=PosAdd
trigger1=animelem=5||animelem=6
x=Ifelse((animelem=5),12,8)

[State 1000, Skid Dust]
type=Explod
trigger1=animelem=4
anim=8104
sprPriority=3
posType=P1
pos=72,3
scale=0.5,0.5
ownpal=1

[State 1000, Dust Helper]
type=Helper
trigger1=AnimElem=4
helperType=Normal
stateNo=8103
ID=8100
name="Dash Dust"
posType=P1
pauseMoveTime=255
superMoveTime=255
ownPal=1

[State 1000, width]
type=width
trigger1= animelemtime(5)<0
player=55,0
ignorehitpause=1

[State 1000, Add]
type=VarAdd
trigger1=Numexplod(1005)
var(11)=1

[State 1000, FX]
type=Explod
trigger1=animelem=5
anim=1005
id=1005
sprPriority=4
posType=p1
pos=ceil(60*const(size.xscale)), ceil(-68*const(size.yscale))
scale=0.5, 0.5
ignorehitpause=0
bindTime=-1
ownPal=1
[State 1000, FX]
type=Explod
trigger1=animelem=5
anim=1005
id=1005
sprPriority=-4
posType=p1
pos=ceil(60*const(size.xscale)), ceil(-68*const(size.yscale))
scale=0.5, 0.5
ignorehitpause=0
bindTime=-1
ownPal=1

[State 1000, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(1005) 
ID = 1005
trans = addalpha
alpha = 256-16*var(11),256
scale = 0.5-0.01*var(11),0.5-0.01*var(11)

[State 1000, Hit]
type=HitDef
triggerall = (!var(16) && var(15)<1 || var(20))
trigger1= !time
id=1000
attr=S, SA
damage=Ifelse(var(13),49,91),21
priority=4, hit
animtype=Hard
getpower=72* !var(20), 36 * !var(20)
givepower=36,36
guardflag=M
hitflag=MAFP
hitsound = s2+10*var(44),2
guardsound=S130,1
pauseTime=ifelse(var(20), 6, 12), ifelse(var(20), 6, 12)
guard.pauseTime=ifelse(var(20), 6, 12), ifelse(var(20), 6, 12)
sparkNo=-1 + 0 * (var(33) :=8013)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=120), var(36) :=-70
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
ground.slidetime=24
ground.hittime=24
guard.hittime=18
ground.velocity=Ifelse(var(20),-5.26,-10.52),-2
air.velocity=Ifelse(var(20),-5.26,-10.52),-3.49
guard.velocity=Ifelse(var(20),-5.26,-10.52)
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.58
fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=14
envshake.ampl=3
envShake.freq=120
persistent=0

[State 1000, StateTypeSet: Idle]
type = StateTypeSet
trigger1 = animelemTime(7) = 0
moveType = I

[State 1000, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;Ghost Butterfly
[StateDef 1010]
type = S
physics = N
moveType = A
anim = Ifelse(var(20),1011,1010)
ctrl = 0
velSet = 0,0
sprPriority = 1
powerAdd = 72 * !var(20)
faceP2 = 1

[State 1010, ReSet]
type=VarSet
trigger1=!time
var(11)=0
ignorehitpause=1

[State 1010, Voice]
type=PlaySnd
trigger1=animelem=6
value=0,5
volumescale=100
channel=0
[State 1010, Snd]
type=PlaySnd
trigger1= animelem=7
value=1005,0
channel=2
[State 1010, Snd]
type=PlaySnd
trigger1=animelem=6
value=1,2
channel=1

[State 1010, PosAdd]
type=PosAdd
trigger1=animelem=6||animelem=7
x=Ifelse((animelem=6),16,12)

[State 1010, Skid Dust]
type=Explod
trigger1=animelem=6
anim=8104
sprPriority=3
posType=P1
pos=80,5
scale=0.5,0.5
ownpal=1

[State 1010, Dust Helper]
type=Helper
trigger1=AnimElem=6
helperType=Normal
stateNo=8103
ID=8100
name="Dash Dust"
posType=P1
pos=-10,0
pauseMoveTime=255
superMoveTime=255
ownPal=1

[State 1010, width]
type=width
trigger1= animelemtime(5)<0
player=80,0
ignorehitpause=1

[State 1010, Add]
type=VarAdd
trigger1=Numexplod(1015)
var(11)=1

[State 1010, FX]
type=Explod
trigger1=animelem=6
anim=1015
id=1015
sprPriority=4
posType=p1
pos=ceil(60*const(size.xscale)), ceil(-68*const(size.yscale))
scale=0.5, 0.5
ignorehitpause=0
bindTime=-1
ownPal=1
[State 1010, FX]
type=Explod
trigger1=animelem=6
anim=1015
id=1015
sprPriority=-4
posType=p1
pos=ceil(60*const(size.xscale)), ceil(-68*const(size.yscale))
scale=0.5, 0.5
ignorehitpause=0
bindTime=-1
ownPal=1

[State 150, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(1015) 
ID = 1015
trans = addalpha
alpha = 256-16*var(11),256
scale = 0.5-0.01*var(11),0.5-0.01*var(11)

[State 1010, Hit]
type=HitDef
triggerall = (!var(16) && var(15)<1 || var(20))
trigger1= !Numtarget(1010) && !time
id=1010
attr=S, SA
damage=70,14
priority=4, hit
animtype=Hard
getpower=72* !var(20), 36 * !var(20)
givepower=36,36
guardflag=M
hitflag=MAFP
hitsound = s2+10*var(44),2
guardsound=S130,1
pauseTime=ifelse(var(20), 6, 12), ifelse(var(20), 6, 12)
guard.pauseTime=ifelse(var(20), 6, 12), ifelse(var(20), 6, 12)
sparkNo=-1 + 0 * (var(33) :=8013)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=120), var(36) :=-70
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
ground.slidetime=12
ground.hittime=32
guard.hittime=18
ground.velocity=-14,-6
air.velocity=-14,-4
guard.velocity=Ifelse(var(20),-5.26,-10.52)
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.4
fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=14
envshake.ampl=3
envShake.freq=120
persistent=0

[State 1010, p2state]
type=targetstate
trigger1= movehit && numtarget(1010)
trigger1= target(1010),Movetype=H
ID=1010
value=1125
ignorehitpause=1
persistent=0

[State 1010, StateTypeSet: Idle]
type = StateTypeSet
trigger1 = animelemTime(9) >= 0
moveType = I

[State 1010, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;Jaguar Dash
[StateDef 1020]
type = S
physics = N
moveType = A
anim = Ifelse(var(20),1050,1020)
ctrl = 0
velSet = 0,0
sprPriority = 1
powerAdd = 72 * !var(20)
faceP2 = 1

[State 1020, VarSet]
type = VarSet
trigger1 =!time
var(10) = 1
ignorehitpause = 1
[State 1020, ReSet]
type=VarSet
trigger1=animelemtime(3)<0
var(11)=0
ignorehitpause=1

[State 1020, PlayerPush]
type = PlayerPush
trigger1 = var(11)>4
value = 0
ignorehitpause = 1
[State 1020, VelSet]
type = VelSet
trigger1=animelem=3
x = 28

[State 1020, Voice]
type=PlaySnd
trigger1=animelem=2
value=1020,0
volumescale=100
channel=0
[State 1020, Snd]
type=PlaySnd
trigger1=animelem=4
value=1,2
channel=1

[State 1020, width]
type=width
trigger1=animelemtime(3)<0
player=45,0
[State 1020, width]
type = width
trigger1 = animelemtime(3)>=0 && var(11)>4
edge = -90, -60

[State 1020, Add]
type=VarAdd
trigger1=movecontact
var(11)=1

[State 1020, Jaguar FX]
type=Helper
trigger1=animelemtime(2)=10
helpertype=normal
stateno=1025
ID=1025
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="JaguarFX"
ownpal=1
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause=1

[State 1020, Hit]
type=HitDef
triggerall = (!var(16) && var(15)<8 || var(20))
trigger1= var(11)<5
id=1020
attr=S, SA
damage=14,3
priority=4, hit
animtype=Hard
getpower=36* !var(20), 18 * !var(20)
givepower=18,18
guardflag=M
hitflag=MAF
hitsound = s2+10*var(44),2
guardsound=S130,1
pauseTime=2,12
guard.pauseTime=4,4
sparkNo=-1 + 0 * (var(33) :=8013)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=120), var(36) :=-55
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
ground.slidetime=12
ground.hittime=24
guard.hittime=12
ground.velocity=Ifelse(var(11)<4,0,2)
air.velocity=Ifelse(var(11)<4,0,2),-3.49
guard.velocity=Ifelse(var(11)<4,0,2)
ground.cornerPush.velOff=Ifelse(var(11)<4,0,2)
guard.cornerPush.velOff=Ifelse(var(11)<4,0,2)
air.cornerPush.velOff=Ifelse(var(11)<4,0,2)
yaccel=.825
fall=0
fall.recover=120
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=14
envshake.ampl=3
envShake.freq=120

[State 1020, Jaguar Kick]
type = ChangeState
triggerall = animelemtime(3)>0 && p2bodydist x>-40
trigger1 = !AILevel && (command = "a"||command = "b"||command = "c")
trigger2 = AILevel && (Movehit=[3,5]) && random < (100 * (AIlevel ** 2 / 64.0))
value = 1030
ignorehitpause = 1

[State 1020, VelMul]
type = VelMul
trigger1 = time>=30
x = 0.9

[State 1020, ChangeState]
type = ChangeState
trigger1 = time>=40
value = 1021
;------------------------------------------------------------------
;Run Stop
[Statedef 1021]
type=S
movetype=I
physics=S
ctrl=0
anim=1021

[State 1021, Skid Dust]
type=Explod
trigger1=time=2
anim=8104
sprPriority=3
posType=P1
facing=facing
pos=10,0
scale=0.5,0.5
ownpal=1
[State 1021, Skid Snd]
type=PlaySnd
trigger1=!Time
value=101,0
channel=5

[State 1021, End]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1
;------------------------------------------------------------------
;Jaguar Kick
[Statedef 1030]
type=S
movetype=A
physics=N
anim=1030
ctrl=0
velset=0,0
sprpriority=1
facep2=1

[State 1030, ChangeAnim]
type = ChangeAnim
trigger1 = animelemtime(2)>1 && pos y>=0
value = 1030
elem = 5
ignorehitpause = 1
persistent=0

[State 1030, PosSet]
type = PosSet
trigger1 =!time
trigger2 =animelemtime(5)>=1
trigger3 =pos y > -vel y
y = 0
ignorehitpause =1

[State 1030, StateTypeSet]
type = StateTypeSet
trigger1 =animelem=2
statetype = A
[State 1005, StateTypeSet]
type = StateTypeSet
trigger1 =animelemtime(5)>=0
statetype = S
ignorehitpause=1

[State 1030, VelSet]
type = VelSet
trigger1 = animelem=2
x = 5
y = -5
[State 1030, VelSet]
type = VelSet
trigger1 = animelemtime(5)>=0
y = 0
[State 1030, VelAdd]
type = VelAdd
trigger1 =animelemtime(2)>=1 && animelemtime(5)<0
y = .625
[State 1030, VelMul]
type = VelMul
trigger1 =animelemtime(4)>0
x = .9
[State 1030, VelSet]
type = VelSet
trigger1 = animelemtime(5)>=0
y = 0
ignorehitpause =1
[State 1030, VelSet]
type = VelSet
trigger1 = animelem=6
x = 0
ignorehitpause =1

[State 1030, Move Snd]
type=PlaySnd
trigger1=animelem=2
value=1,5
channel=2

[State 1030, Snd]
type=playsnd
trigger1=animelem=2
value=41, 0
[State 1030, Dust]
type=helper
trigger1=animelem=2
helpertype=normal
stateno=8100
ID=8100
name="Jump Dust"
postype=p1
ownpal=1

[State 1030, Landing Sound]
type=PlaySnd
trigger1=animelemtime(5)=1
value=52,0
persistent=0
channel=4
[State 1030, Landing Dust Explod]
type=Explod
trigger1=animelemtime(5)=1
anim=8102
sprPriority=-3
pos=-10,3
posType=P1
scale=0.5,0.5
pauseMoveTime=-1
superMoveTime=-1
ownPal=1
persistent=0

[State 1030, Hit]
type=HitDef
trigger1=!time
attr=A, SA
id=1030
damage=Ifelse(var(13)>3,21,Ifelse(var(13),35,70)), 14
priority=4, hit
animtype=Hard
getpower=Ifelse(var(10)=3,0,36)* (!var(20)), Ifelse(var(10)=3,0,18)* (!var(20))
givepower=36,18
guardflag=M
hitflag=MAF
hitsound=S2+10*var(44),5
guardsound=S130,0
pauseTime=Ifelse(var(20),6,12),13
guard.pauseTime=Ifelse(var(20),6,12),11
sparkNo=-1 + 0 * (var(33) :=8013)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) := 95), var(36) := -65
ground.type=Low
ground.slidetime=12
ground.hittime=18
air.hittime=32
guard.hittime=18
ground.velocity=-3,-9
air.velocity=-3,-7
guard.velocity=Ifelse(var(20),-5.565,-11.17)
airguard.velocity =Ifelse(var(20),-3.565,-6.17), -4
airguard.ctrlTime=15
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=0.52
fall.recover=60
forcestand=1
palFX.time = 12 * var(9)
palFX.add = 255, 255, 255
palFX.sinAdd= -255, -255, -255, 48
envShake.time = 14
envShake.ampl = 4
envShake.freq = 120

[State 1030, StateTypeSet: Idle]
type=StateTypeSet
trigger1=Animelemtime(4)>=0
moveType=I

[State 1030, Cobra Strike Cancel]
type = ChangeState
triggerall = animelemtime(3)>0 && movecontact
trigger1 = !AILevel && command = "CobraStrike"
value = 1040
[State 1030, End]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1
;--------------------------------------------------------------------------
;Cobra Strike Cancel
[StateDef 1040]
type = S
physics = N
moveType = A
anim = 1001
ctrl = 0
velSet = 0,0
sprPriority = 1
faceP2 = 1

[State 1040, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 1040, ReSet]
type=VarSet
trigger1=!time
var(11)=0
ignorehitpause=1

[State 1040, Voice]
type=PlaySnd
trigger1=animelem=4
value=0,3
channel=0
[State 1040, Snd]
type=PlaySnd
trigger1= animelem=5
value=1005,0
channel=2
[State 1040, Snd]
type=PlaySnd
trigger1=animelem=4
value=1,2
channel=1

[State 1040, PosAdd]
type=PosAdd
trigger1=animelem=5||animelem=6
x=Ifelse((animelem=5),12,8)

[State 1040, Skid Dust]
type=Explod
trigger1=animelem=4
anim=8104
sprPriority=3
posType=P1
pos=72,3
scale=0.5,0.5
ownpal=1

[State 1040, Dust Helper]
type=Helper
trigger1=AnimElem=4
helperType=Normal
stateNo=8103
ID=8100
name="Dash Dust"
posType=P1
pauseMoveTime=255
superMoveTime=255
ownPal=1

[State 1040, width]
type=width
trigger1=animelemtime(5)<0
player=45,0
ignorehitpause=1

[State 1040, Add]
type=VarAdd
trigger1=Numexplod(1005)
var(11)=1
ignorehitpause=1

[State 1040, FX]
type=Explod
trigger1=animelem=5
anim=1005
id=1005
sprPriority=4
posType=p1
pos=ceil(60*const(size.xscale)), ceil(-68*const(size.yscale))
scale=0.5, 0.5
ignorehitpause=0
bindTime=-1
ownPal=1
[State 1040, FX]
type=Explod
trigger1=animelem=5
anim=1005
id=1005
sprPriority=-4
posType=p1
pos=ceil(60*const(size.xscale)), ceil(-68*const(size.yscale))
scale=0.5, 0.5
ignorehitpause=0
bindTime=-1
ownPal=1

[State 1040, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(1005) 
ID = 1005
trans = addalpha
alpha = 256-16*var(11),256
scale = 0.5-0.01*var(11),0.5-0.01*var(11)

[State 1040, Hit]
type=HitDef
triggerall = (!var(16) && var(15)<2 || var(20))
trigger1= !time
id=1040
attr=S, SA
damage=35,7
priority=4, hit
animtype=Hard
getpower=Ifelse(var(10)=3,0,36)* !var(20), Ifelse(var(10)=3,0,18) * !var(20)
givepower=18,18
guardflag=M
hitflag=MAF
hitsound = s2+10*var(44),2
guardsound=S130,1
pauseTime=ifelse(var(20), 6, 12), ifelse(var(20), 6, 12)
guard.pauseTime=ifelse(var(20), 6, 12), ifelse(var(20), 6, 12)
sparkNo=-1 + 0 * (var(33) :=8013)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=120), var(36) :=-70
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
ground.slidetime=24
ground.hittime=24
guard.hittime=18
ground.velocity=Ifelse(var(20),-5.26,-10.52),-2
air.velocity=Ifelse(var(20),-5.26,-10.52),-3.49
guard.velocity=Ifelse(var(20),-5.26,-10.52)
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.58
fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=14
envshake.ampl=3
envShake.freq=120
persistent=0

[State 1040, StateTypeSet: Idle]
type = StateTypeSet
trigger1 = animelemTime(7) = 0
moveType = I

[State 1040, ChangeState]
type = ChangeState
trigger1 = !AnimTime
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;EX Jaguar Dash
[StateDef 1050]
type = S
physics = N
moveType = A
anim = 1050
ctrl = 0
velSet = 0,0
sprPriority = 1
powerAdd = -500
faceP2 = 1

[State 1050, VarSet]
type = VarSet
trigger1 =!time
var(10) = 3
ignorehitpause = 1
[State 1050, MAX Timer Drain]
type=VarAdd
trigger1=!Time
trigger1=var(20) > 0
var(20)=-250
[State 1050, EX Flash]
type=VarSet
trigger1=!Time
var(25)=45
[State 1050, EX FX]
type=Explod
trigger1=!Time
anim=8210
sprPriority=3
posType=p1
pos=ceil(10*const(size.xscale)), ceil(-65*const(size.yscale))
scale=0.5, 0.5
pauseMoveTime=-1
superMoveTime=-1
ownPal=1
[State 1050, EX-SND]
type=PlaySnd
trigger1 =!time
value=0,1000
channel=3

[State 1050, ReSet]
type=VarSet
trigger1=animelemtime(3)<0
var(11)=0
ignorehitpause=1

[State 1050, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(3)<0 
value = SCA

[State 1050, PlayerPush]
type = PlayerPush
trigger1 = var(11)>7
value = 0
ignorehitpause = 1
[State 1050, VelSet]
type = VelSet
trigger1=animelem=3
x = 20

[State 1050, Voice]
type=PlaySnd
trigger1=animelem=2
value=1020,1
volumescale=100
channel=0
[State 1050, Snd]
type=PlaySnd
trigger1=animelem=4
value=1,2
channel=1

[State 1050, width]
type=width
trigger1=animelemtime(3)<0
player=45,0
[State 1050, width]
type = width
trigger1 = animelemtime(3)>=0 && var(11)>7
edge = -90, -60

[State 1050, Add]
type=VarAdd
trigger1=movecontact
var(11)=1

[State 1050, Hit]
type=HitDef
trigger1= var(11)<8
id=1050
attr=S, SA
damage=Ifelse(var(13)>9,7,14),3
priority=4, hit
animtype=Hard
getpower=0,0
givepower=18,18
guardflag=M
hitflag=MAF
hitsound = s2+10*var(44),2
guardsound=S130,1
pauseTime=2,12
guard.pauseTime=2,6
sparkNo=-1 + 0 * (var(33) :=8013)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=120), var(36) :=-55
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
ground.slidetime=4
ground.hittime=24
guard.hittime=12
ground.velocity=Ifelse(var(11)<6,0,4)
air.velocity=Ifelse(var(11)<6,0,4),-3.49
guard.velocity=Ifelse(var(11)<6,0,4)
ground.cornerPush.velOff=Ifelse(var(11)<6,0,4)
guard.cornerPush.velOff=Ifelse(var(11)<6,0,4)
air.cornerPush.velOff=Ifelse(var(11)<6,0,4)
yaccel=.825
fall=0
fall.recover=120
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=14
envshake.ampl=3
envShake.freq=120

[State 1050, Jaguar Kick]
type = ChangeState
triggerall = animelemtime(3)>0 && p2bodydist x>-40
trigger1 = !AILevel && (command = "a"||command = "b"||command = "c")
trigger2 = AILevel && (Movehit=[4,8]) && random < (50 * (AIlevel ** 2 / 64.0))
value = 1030
ignorehitpause =1

[State 1020, VelMul]
type = VelMul
trigger1 = time>=30
x = 0.9

[State 1050, ChangeState]
type = ChangeState
trigger1 = time>=45
trigger2 = p2bodydist x<-50
value = 1021
;--------------------------------------------------------------------------
;Phantom Move
[StateDef 1100]
type = S
physics = N
moveType = I
anim = 1100
ctrl = 0
velSet = 0,0
sprPriority = 1
faceP2 = 1

[State 1100, VarSet]
type = VarSet
trigger1 =!AILevel && !time
var(10) = Ifelse(command="c"||command="z"||command="PhantomMove3",2,ifelse(prevstateno=200 && var(13) && Numhelper(215)||prevstateno=230 && var(13) && Numhelper(215)||prevstateno=400 && var(13) && Numhelper(215)||prevstateno=430 && var(13) && Numhelper(215)||command="a"||command="x"||command="PhantomMove1",0,ifelse(prevstateno=210 && var(13) && Numhelper(215)||prevstateno=240 && var(13) && Numhelper(215)||prevstateno=410 && var(13) && Numhelper(215)||prevstateno=440 && var(13) && Numhelper(215)||command="b"||command="y"||command="PhantomMove2",1,2)))
[State 1100, VarSet]
type = VarSet
trigger1 =AILevel && !time && numenemy
var(10) = Ifelse(enemynear,movetype=A,2,Ifelse((enemynear,stateno=[120,155]),0,1))

[State 1100, VarSet]
type = VarSet
trigger1 =time=1
var(11) = 0
ignorehitpause=1
[State 1100, VarSet]
type = VarSet
trigger1 =time=1
var(12) = 0
ignorehitpause=1
[State 1100, VarAdd]
type = VarAdd
trigger1 = animelemtime(8)>=0
var(11) = 1
ignorehitpause=1
[State 1100, VarAdd]
type = VarAdd
trigger1 = animelemtime(3)>=0
var(12) = 1
ignorehitpause=1
[State 1100, VarAdd]
type = VarAdd
trigger1 = !time
var(14) = 1
ignorehitpause=1

[State 1100, Anim]
type=ChangeAnim
trigger1=time=1
value=1100+var(10)

[State 1100, Trans]
type = Trans
trigger1 = animelemtime(3)>0 && animelemtime(8)<0
trans = addalpha
alpha = 256-16*var(12),0+16*var(12)
[State 1100, Trans]
type = Trans
trigger1 = animelemtime(8)>=0
trans = addalpha
alpha = 0+16*var(11),256-16*var(11)

[State 1100, Snd]
type=PlaySnd
trigger1=animelem=4
value=1100,3
channel=4
[State 1100, Voice]
type=PlaySnd
trigger1=animelem=3
value=1100,var(10)
volumescale=100
channel=0

[State 1100, Phantom FX]
type=Helper
trigger1=animelemtime(4)=0
helpertype=normal
stateno=1105
ID=1105
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="PhantomFX"
ownpal=1
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause=1
[State 1100, Phantom FX]
type=Helper
trigger1=animelemtime(9)=0
helpertype=normal
stateno=1107
ID=1107
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="PhantomFX2"
ownpal=1
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause=1

[State 1100, StateTypeSet]
type = StateTypeSet
trigger1 = var(10)=2 && animelem=6
statetype = A 

[State 1100, ScreenBound]
type = ScreenBound
trigger1 = (animelemtime(5)>=0 && animelemtime(10)<0)
value = 1
movecamera = 0,1

[State 1100, PlayerPush]
type = PlayerPush
trigger1 = (animelemtime(5)>=0 && animelemtime(10)<0)
value = 0
[State 1100, width]
type = width
trigger1 = (animelemtime(5)>=0 && animelemtime(10)<0)
edge = -75, -75
[State 1100, NotHitBy]
type = NotHitBy
trigger1 = (animelemtime(5)>=0 && animelemtime(10)<0)
value = SCA
[state 1100, PosSet]
type = posset
trigger1 = var(10)=2 && animelemtime(8)=1 && numenemy
x = enemy,pos x + 80 * enemy,facing
y = enemy,pos y - 100

[State 1100, PosSet: Teleportation]
type = Posadd
trigger1 = animelemtime(7)=2
x = Ifelse(var(10)=0,200,Ifelse(var(10)=1,-250,250))

[State 1100, Turn]
type = Turn
trigger1 = animelem=9 && p2bodydist x<-40

[State 1100, Ctrl]
type = CtrlSet
trigger1 = var(10)=2 && animelemtime(13) >= 0
value = 1

[State 1100, Gravity]
type=Gravity
trigger1=var(10)=2 && animelemtime(14) >= 0

[State 1100, End]
type=ChangeState
trigger1=var(10)=2 && animelemtime(12)>=0
trigger1=pos y > -vel y
value=652
[State 1100, End]
type=ChangeState
trigger1=var(10)!=2 && !animtime
value=0
ctrl=1
;--------------------------------------------------------------------------
;Air hantom Move
[StateDef 1110]
type = A
physics = N
moveType = I
anim = 1110
ctrl = 0
velSet = 0,0
sprPriority = 1
faceP2 = 1

[State 1110, VarSet]
type = VarSet
trigger1 =!AILevel && !time
var(10) = Ifelse(command="c"||command="z"||command="PhantomMove3",2,ifelse(prevstateno=600 && var(13) && Numhelper(215)||prevstateno=630 && var(13) && Numhelper(215)||command="a"||command="x"||command="PhantomMove1",0,ifelse(prevstateno=610 && var(13) && Numhelper(215)||prevstateno=640 && var(13) && Numhelper(215)||command="b"||command="y"||command="PhantomMove2",1,2)))
[State 1110, VarSet]
type = VarSet
trigger1 =AILevel && !time && numenemy
var(10) = Ifelse(enemynear,movetype=A && enemynear,statetype!=A,2,Ifelse((enemynear,stateno=[120,155]),0,1))

[State 1110, VarSet]
type = VarSet
trigger1 =time=1
var(11) = 0
ignorehitpause=1
[State 1110, VarSet]
type = VarSet
trigger1 =time=1
var(12) = 0
ignorehitpause=1
[State 1110, VarAdd]
type = VarAdd
trigger1 = animelemtime(8)>=0
var(11) = 1
ignorehitpause=1
[State 1110, VarAdd]
type = VarAdd
trigger1 = animelemtime(3)>=0
var(12) = 1
ignorehitpause=1
[State 1110, VarAdd]
type = VarAdd
trigger1 = !time
var(14) = 1
ignorehitpause=1

[State 1110, Anim]
type=ChangeAnim
trigger1=time=1
value=1110+var(10)

[State 1110, Trans]
type = Trans
trigger1 = animelemtime(3)>0 && animelemtime(8)<0
trans = addalpha
alpha = 256-16*var(12),0+16*var(12)
[State 1110, Trans]
type = Trans
trigger1 = animelemtime(8)>=0
trans = addalpha
alpha = 0+16*var(11),256-16*var(11)

[State 1110, Snd]
type=PlaySnd
trigger1=animelem=4
value=1100,3
channel=4
[State 1110, Voice]
type=PlaySnd
trigger1=animelem=3
value=1100,var(10)
volumescale=100
channel=0

[State 1110, Phantom FX]
type=Helper
trigger1=animelemtime(4)=0
helpertype=normal
stateno=1105
ID=1105
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="PhantomFX"
ownpal=1
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause=1
[State 1110, Phantom FX]
type=Helper
trigger1=animelemtime(9)=0
helpertype=normal
stateno=1107
ID=1107
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="PhantomFX2"
ownpal=1
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause=1

[State 1110, StateTypeSet]
type = StateTypeSet
trigger1 = var(10)=2 && animelem=8
statetype = S 

[State 1110, ScreenBound]
type = ScreenBound
trigger1 = (animelemtime(5)>=0 && animelemtime(10)<0)
value = 1
movecamera = 0,1

[State 1110, PlayerPush]
type = PlayerPush
trigger1 = (animelemtime(5)>=0 && animelemtime(10)<0)
value = 0
[State 1110, width]
type = width
trigger1 = (animelemtime(5)>=0 && animelemtime(10)<0)
edge = -75, -75
[State 1110, NotHitBy]
type = NotHitBy
trigger1 = (animelemtime(5)>=0 && animelemtime(10)<0)
value = SCA
[state 1110, PosSet]
type = posset
trigger1 = var(10)=2 && animelemtime(8)=1 && numenemy
y = 0

[State 1110, PosSet: Teleportation]
type = Posadd
trigger1 = animelemtime(7)=2
x = Ifelse(var(10)=0,200,Ifelse(var(10)=1,-250,0))

[State 1110, Turn]
type = Turn
trigger1 = animelem=9 && p2bodydist x<-40

[State 1110, Ctrl]
type = CtrlSet
trigger1 = var(10)!=2 && animelemtime(13) >= 0
value = 1

[State 1110, Gravity]
type=Gravity
trigger1=var(10)!=2 && animelemtime(14) >= 0

[State 1110, End]
type=ChangeState
trigger1=var(10)!=2 && animelemtime(12)>=0
trigger1=pos y > -vel y
value=652
[State 1110, End]
type=ChangeState
trigger1=var(10)=2 && !animtime
value=0
ctrl=1
;--------------------------------------------------------------------
;Tiger Uppercut
[Statedef 1200]
type = S
physics = S
movetype = I
anim = 1200
ctrl = 0
velset = 0, 0
sprpriority = 1
poweradd = 72 * !var(20)
facep2 = 1

[State 1200, VarSet]
type=VarSet
trigger1 =!AILevel && !time 
var(10)=ifelse(command="x",0,ifelse(command="y",1,2))
ignorehitpause=1
[State 1200, VarSet]
type=VarSet
trigger1 =AILevel && !time && numenemy
var(10)=ifelse(enemynear, statetype=C,1,ifelse(enemynear, hitdefattr = SCA, AP||enemynear, statetype=A,2,0))
ignorehitpause=1
[State 1200, anim]
type=ChangeAnim
Trigger1=!time
value=Ifelse(var(20),1203,1200+var(10))

[State 1200, Voice]
type = playsnd
trigger1 =!time
value = 1100,2
volumescale=100
channel=05
[State 1200, Snd]
type = playsnd
trigger1 = animelem = 2
value = 1,2
channel=1

[State 1200, Hand FX]
type=Helper
trigger1=animelemtime(3)=0
helpertype=normal
stateno=1205
ID=1205
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="HandFX"
ownpal=1
size.xscale = (0.5 * const(size.xscale))
size.yscale = (0.5 * const(size.yscale))
ignorehitpause=1
[State 1200, Hand FX]
type=Helper
trigger1=animelemtime(3)=0
helpertype=normal
stateno=1206
ID=1206
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="HandFX"
ownpal=1
size.xscale = (0.5 * const(size.xscale))
size.yscale = (0.5 * const(size.yscale))
ignorehitpause=1

[State 1200, Safety]
type = superpause
trigger1 = animelem=3
time = 0
p2defmul = 1
anim = -1
sound = -1
darken = 0

[State 1200, Reversal]
type = reversaldef
trigger1 = numenemy 
trigger1 = var(10)=1 && !movehit
trigger1 = animelemtime(3)>=0 && animelemtime(4)<0
reversal.attr=C,NA,SA
pausetime = 0,0
sparkNo=-1 + 0 * (var(33) := 0)
sparkxy = 0, 0
hitsound = s130,0
p1stateno = 1210
p2stateno = 1230
numhits = 0

[State 1200, Reversal]
type = reversaldef
trigger1 = numenemy 
trigger1 = !var(10) && !movehit 
trigger1 = animelemtime(3)>=0 && animelemtime(4)<0
reversal.attr=SA,NA,SA
pausetime = 0,0
sparkNo=-1 + 0 * (var(33) := 0)
sparkxy = 0, 0
hitsound = s130,0
p1stateno = 1210
p2stateno = 1230
numhits = 0

[State 1200, Reversal]
type = reversaldef
trigger1 = numenemy && var(10)=2 && !movehit 
trigger1 = animelemtime(3)>=0 && animelemtime(4)<0
reversal.attr=A,NA,SA
pausetime = 0,0
sparkNo=-1 + 0 * (var(33) := 0)
sparkxy = 0, 0
hitsound = s130,0
p1stateno = 1220
p2stateno = 1230
numhits = 0

[State 1200, HitOverride]
type=hitoverride
trigger1=var(10)=2 && animelemtime(3)>=0 && animelemtime(4)<0
attr=SCA, NP, SP
slot=0
stateno=1220
ignorehitpause=1
time=1

[State 1200, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
;--------------------------------------------------------------------------
;Tiger Uppercut High/Low Counter
[StateDef 1210]
type = S
physics = N
moveType = A
anim = 1210+var(10)
ctrl = 0
velSet = 0,0
sprPriority = 1

[State 1210, Spark]
type = helper
trigger1 = !time && !Numhelper(8020) 
helpertype = normal
stateno = 8020
ID = 8020
name = "Spark"
postype = p1
pos = 15, -75
facing = -1
ownpal = 1
size.xscale =1.0
size.yscale =1.0
pausemovetime = 65535
supermovetime = 65535
ignorehitpause = 1
persistent=0

[State 1210, StateTypeSet]
type = StateTypeSet
trigger1 = anim=1211 && animelem=1
statetype = A      
[State 1210, StateTypeSet]
type = StateTypeSet
trigger1 = anim=1211 && animelem=5
statetype = S  

[State 1210, VelSet]
type = VelSet
trigger1 = anim=1211 && animelem=5
x = 0
y = 0
[State 1210, VelSet]
type = VelSet
trigger1 = anim=1211 && animelem=2
x = 1
y = -9.5

[State 1210, VarSet]
type = VarSet
trigger1 =time=1
var(11) = 0
ignorehitpause=1
[State 1210, VarSet]
type = VarSet
trigger1 =time=1
var(12) = 0
ignorehitpause=1
[State 1210, VarAdd]
type = VarAdd
trigger1 = animelemtime(7)>=0
var(11) = 1
ignorehitpause=1
[State 1210, VarAdd]
type = VarAdd
trigger1 = animelemtime(2)>=0
var(12) = 1
ignorehitpause=1

[State 1210, Trans]
type = Trans
trigger1 = animelemtime(2)>0 && animelemtime(6)<0
trans = addalpha
alpha = 256-16*var(12),0+16*var(12)
[State 1210, Trans]
type = Trans
trigger1 = animelemtime(7)>=0
trans = addalpha
alpha = 0+16*var(11),256-16*var(11)

[State 1210, Phantom FX]
type=Helper
trigger1= animelemtime(4)=0
helpertype=normal
stateno=1207
ID=1207
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="PhantomFX"
ownpal=1
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause=1
[State 1210, Phantom FX]
type=Helper
trigger1= animelemtime(7)=0
helpertype=normal
stateno=1208
ID=1208
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="PhantomFX"
ownpal=1
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause=1

[State 1210, Tiger FX]
type=Helper
trigger1=anim=1210 && animelemtime(8)=0
helpertype=normal
name="SHPFX"
stateno=1215
ID=1215
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=back
ownpal=1
size.xscale = (0.5 * const(size.xscale))
size.yscale = (0.5 * const(size.yscale))
ignorehitpause=1

[State 1210, FX]
type=Explod
trigger1=anim=1211 && animelem=10
anim=1005
id=1005
sprPriority=4
posType=p1
pos=ceil(80*const(size.xscale)), ceil(-68*const(size.yscale))
scale=0.5, 0.5
ignorehitpause=0
bindTime=-1
ownPal=1
[State 1210, FX]
type=Explod
trigger1=anim=1211 && animelem=10
anim=1005
id=1005
sprPriority=-4
posType=p1
pos=ceil(80*const(size.xscale)), ceil(-68*const(size.yscale))
scale=0.5, 0.5
ignorehitpause=0
bindTime=-1
ownPal=1

[State 1210, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(1005) 
ID = 1005
trans = addalpha
alpha = 256-16*var(11),256
scale = 0.5-0.01*var(11),0.5-0.01*var(11)

[State 1210, Snd]
type=PlaySnd
trigger1=animelem=4
value=1100,3
channel=4
[State 1210, Voice]
type=PlaySnd
trigger1=animelem=9
value=0,Ifelse(var(10)=1,3,5)
volumescale=100
channel=0

[State 1210, ScreenBound]
type = ScreenBound
trigger1 = animelemtime(7)<0
value = 0
movecamera = 0,0

[State 1210, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(7)<0
value = 0
[State 1210, width]
type = width
trigger1 = animelemtime(10)<0
edge = -75, -75
player = 75,75
[State 1210, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(11)<0
value = SCA
[state 1210, PosSet]
type = posset
trigger1 = animelemtime(5)=1 && numenemy
x = enemy,pos x + 20 * enemy,facing
y = 0
[State 1210, PosSet: Teleportation]
type = Posadd
trigger1 = animelemtime(6)=2
x = -120
[State 1210, Turn]
type = Turn
trigger1 = animelem=6 

[State 1210, Width]
type = Width
trigger1 = animelemtime(8)>0 && animelemtime(10)<0
player = 50,-35

[State 1210, HitDef]
type=HitDef
trigger1 = anim=1210 && !time
attr=S,SA        
hitflag=MAFP     
guardflag=M         
animtype=Hard         
priority=4, Hit   
damage=112,21
ID=1210
getpower=72 * !var(20), 36 * !var(20)
givepower=36, 36
pausetime=Ifelse(var(20), 8, 15), 15
guard.pausetime=Ifelse(var(20), 6, 12), 12
sparkNo=-1 + 0 * (var(33) := 8013)
guard.sparkNo=-1 + 0 * (var(34) := 8001)
sparkXY=-10 + 0 * (var(35) := 120), var(36) := -85
hitsound=S2+10*var(44),2
guardsound=s130, 0
air.animType=Up
fall.animType=Diagup
ground.type=High
ground.slidetime=20 + 4*var(9)
ground.hittime=20 + 4*var(9)
guard.hittime=20
air.hittime=20
ground.velocity=-1,-13
guard.velocity=Ifelse(var(20),-4,-8)
air.velocity=-1,-11
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel= .42
fall=0
fall.recover=1
fall.recovertime=40
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd= -255,-255,-255,48
envshake.time=12
envshake.ampl=Ifelse(random<=500,-4,4)
Persistent=0 

[State 1210, Hit]
type=HitDef
trigger1= anim=1211 && !time
id=1211
attr=S, SA
damage=112,21
priority=4, hit
animtype=Hard
getpower=72* !var(20), 36 * !var(20)
givepower=36,36
guardflag=M
hitflag=MAFP
hitsound = s2+10*var(44),2
guardsound=S130,1
pauseTime=ifelse(var(20), 6, 12), ifelse(var(20), 6, 12)
guard.pauseTime=ifelse(var(20), 6, 12), ifelse(var(20), 6, 12)
sparkNo=-1 + 0 * (var(33) :=8013)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=120), var(36) :=-70
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
ground.slidetime=12
ground.hittime=32
guard.hittime=18
ground.velocity=-14,-6
air.velocity=-14,-4
guard.velocity=-10.52
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.4
fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=14
envshake.ampl=3
envShake.freq=120
persistent=0

[State 1210, p2state]
type=targetstate
trigger1= movehit && numtarget(1211)
trigger1= target(1211),Movetype=H
ID=1211
value=1125
ignorehitpause=1
persistent=0

[State 1210, ChangeState]
type=ChangeState
triggerall= movehit=1 
triggerall=Numtarget (1210)
trigger1=!AILevel && command="holdup"
trigger2=AILevel && random < (200 * (AIlevel ** 2 / 64.0))
value=123
ctrl=0
ignorehitpause=1

[State 1210, StateTypeSet: Idle]
type=StateTypeSet
trigger1=AnimElemTime(12)=0
moveType=I

[State 1210, End]
type=ChangeState
trigger1=!animtime
value=0
ctrl=1
;--------------------------------------------------------------------------
;Tiger Uppercut Projectile
[StateDef 1220]
type = S
physics = N
moveType = A
anim = 1220
ctrl = 0
velSet = 0,0
sprPriority = 1

[State 1220, Spark]
type = helper
trigger1 = !time && !Numhelper(8020) 
helpertype = normal
stateno = 8020
ID = 8020
name = "Spark"
postype = p1
pos = 15, -75
facing = -1
ownpal = 1
size.xscale =1.0
size.yscale =1.0
pausemovetime = 65535
supermovetime = 65535
ignorehitpause = 1
persistent=0

[State 1220, VarSet]
type = VarSet
trigger1 =time=1
var(11) = 0
ignorehitpause=1
[State 1220, VarSet]
type = VarSet
trigger1 =time=1
var(12) = 0
ignorehitpause=1
[State 1220, VarAdd]
type = VarAdd
trigger1 = animelemtime(7)>=0
var(11) = 1
ignorehitpause=1
[State 1220, VarAdd]
type = VarAdd
trigger1 = animelemtime(2)>=0
var(12) = 1
ignorehitpause=1

[State 1220, Trans]
type = Trans
trigger1 = animelemtime(2)>0 && animelemtime(6)<0
trans = addalpha
alpha = 256-16*var(12),0+16*var(12)
[State 1220, Trans]
type = Trans
trigger1 = animelemtime(7)>=0
trans = addalpha
alpha = 0+16*var(11),256-16*var(11)

[State 1220, Phantom FX]
type=Helper
trigger1=animelemtime(4)=0
helpertype=normal
stateno=1207
ID=1207
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="PhantomFX"
ownpal=1
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause=1
[State 1220, Phantom FX]
type=Helper
trigger1= animelemtime(7)=0
helpertype=normal
stateno=1208
ID=1208
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="PhantomFX"
ownpal=1
size.xscale = 0.5
size.yscale = 0.5
ignorehitpause=1

[State 1220, Snd]
type=PlaySnd
trigger1=animelem=4
value=1100,3
channel=4
[State 1220, Voice]
type=PlaySnd
trigger1=animelem=9
value=0,5
volumescale=100
channel=0

[State 1220, ScreenBound]
type = ScreenBound
trigger1 = animelemtime(7)<0
value = 0
movecamera = 0,0

[State 1220, PlayerPush]
type = PlayerPush
trigger1 = animelemtime(7)<0
value = 0
[State 1220, width]
type = width
trigger1 = animelemtime(7)<0
edge = -75, -75
[State 1220, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(11)<0
value = SCA
[state 1220, PosSet]
type = posset
trigger1 = animelemtime(5)=1 && numenemy
x = enemy,pos x + -80 * enemy,facing

[State 1220, Turn]
type = Turn
trigger1 = animelem=6 

[State 1220, Width]
type = Width
trigger1 = animelemtime(8)>0 && animelemtime(10)<0
player = 50,-35

[State 1220, Hit]
type=HitDef
trigger1= !time
id=1220
attr=S, SA
damage=112,21
priority=4, hit
animtype=Hard
getpower=Ifelse(var(10)=3,0,72)* !var(20),Ifelse(var(10)=3,0,36) * !var(20)
givepower=36,36
guardflag=M
hitflag=MAFP
hitsound = s2+10*var(44),2
guardsound=S130,1
pauseTime=ifelse(var(20), 6, 12), ifelse(var(20), 6, 12)
guard.pauseTime=ifelse(var(20), 6, 12), ifelse(var(20), 6, 12)
sparkNo=-1 + 0 * (var(33) :=8013)
guard.sparkNo=-1 + 0 * (var(34) :=8001)
sparkXY=-10 + 0 * (var(35) :=120), var(36) :=-70
air.animtype=Back
fall.animtype=Back
ground.type=High
air.type=Low
ground.slidetime=12
ground.hittime=32
guard.hittime=18
ground.velocity=-14,-6
air.velocity=-14,-4
guard.velocity=-10.52
ground.cornerPush.velOff=0
guard.cornerPush.velOff=0
air.cornerPush.velOff=0
yaccel=.4
fall=1
fall.recover=0
forcestand=1
palFX.time=12 * var(9)
palFX.add=255,255,255
palFX.sinAdd=-255,-255,-255,48
envshake.time=14
envshake.ampl=3
envShake.freq=120
persistent=0

[State 1220, p2state]
type=targetstate
trigger1= movehit && numtarget(1220)
trigger1= target(1220),Movetype=H
ID=1220
value=1125
ignorehitpause=1
persistent=0

[State 1220, StateTypeSet: Idle]
type=StateTypeSet
trigger1=AnimElemTime(12)=0
moveType=I

[State 1220, End]
type=ChangeState
trigger1=!animtime
value=0
ctrl=1
;--------------------------------------------------------------------
;EX Tiger Uppercut
[Statedef 1240]
type = S
physics = S
movetype = I
anim = 1240
ctrl = 0
velset = 0, 0
sprpriority = 1
poweradd = -500
facep2 = 1

[State 1240, VarSet]
type = VarSet
trigger1 =!time
var(10) = 3
ignorehitpause = 1
[State 1240, MAX Timer Drain]
type=VarAdd
trigger1=!Time
trigger1=var(20) > 0
var(20)=-250
[State 1240, EX Flash]
type=VarSet
trigger1=!Time
var(25)=45
[State 1240, EX FX]
type=Explod
trigger1=!Time
anim=8210
sprPriority=3
posType=p1
pos=ceil(27*const(size.xscale)), ceil(-90*const(size.yscale))
scale=0.5, 0.5
pauseMoveTime=-1
superMoveTime=-1
ownPal=1
[State 1240, EX-SND]
type=PlaySnd
trigger1 =!time
value=0,1000
channel=3

[State 1240, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(3)<0 
value = SCA

[State 1240, Voice]
type = playsnd
trigger1 =!time
value = 1100,2
volumescale=100
channel=0
[State 1240, Snd]
type = playsnd
trigger1 = animelem = 2
value = 1,2

[State 1240, Hand FX]
type=Helper
trigger1=animelemtime(3)=0
helpertype=normal
stateno=1205
ID=1205
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="HandFX"
ownpal=1
size.xscale = (0.5 * const(size.xscale))
size.yscale = (0.5 * const(size.yscale))
ignorehitpause=1
[State 1240, Hand FX]
type=Helper
trigger1=animelemtime(3)=0
helpertype=normal
stateno=1206
ID=1206
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=p1
name="HandFX"
ownpal=1
size.xscale = (0.5 * const(size.xscale))
size.yscale = (0.5 * const(size.yscale))
ignorehitpause=1

[State 1240, Safety]
type = superpause
trigger1 = animelem=3
time = 0
p2defmul = 1
anim = -1
sound = -1
darken = 0

[State 1240, Reversal]
type = reversaldef
trigger1 = numenemy && !movehit 
trigger1 = animelemtime(3)>=0 && animelemtime(4)<0
reversal.attr=SCA,NA,SA
pausetime = 0,0
sparkNo=-1 + 0 * (var(33) := 0)
sparkxy = 0, 0
hitsound = s130,0
p1stateno = 1220
p2stateno = 1230
numhits = 0

[State 1240, HitOverride]
type=hitoverride
trigger1=animelemtime(3)>=0 && animelemtime(4)<0
attr=SCA, NP, SP
slot=0
stateno=1220
ignorehitpause=1
time=1

[State 1240, End]
type = changestate
trigger1 = !animtime
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;Mustang Kick - Attempt
[Statedef 1300]
type   =S
movetype= A
physics=S
anim=1300
velset=0,0
ctrl=0

[State 1300, VarSet]
type=VarSet
trigger1 =!AILevel && !time 
var(10)=ifelse(command="a",0,ifelse(command="b",1,2))
ignorehitpause=1
[State 1300, VarSet]
type=VarSet
trigger1 =AILevel && !time && numenemy
var(10)=ifelse(enemynear, Movetype=H,0,2)
ignorehitpause=1

[State 1200, VarSet]
type=VarSet
trigger1 =!time
var(11)=0
ignorehitpause=1

[State 1300, anim]
type=ChangeAnim
Trigger1=!time
value=Ifelse(var(20),1303,1300+var(10))

[State 1300, Throw]
type=Hitdef
triggerall=!time && Numenemy
Trigger1=enemynear, stateno != [150,155]
attr=S, ST
priority=7,Miss
getpower=36 * !var(20)
givepower=0
hitflag=M
numhits=0
sparkNo=-1 + 0 * (var(33) := 0)
p1stateno=1310
hitsound=s800, 0
fall=1
fall.recover=1

[State 1300, Miss Voice]
type =PlaySnd
trigger1=AnimElem=4
value=5000,0
channel=0
[State 1300, Swing Snd]
type=PlaySnd
trigger1=AnimElem=2
value=1,0
channel=1

[State 1300, StateTypeSet: Idle]
type=StateTypeSet
trigger1=AnimElemTime(4) = 0
moveType=I

[State 1300, End]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1
;---------------------------------------------------------------------------
;Mustang Kick 
[Statedef 1310]
type=S
movetype=A
physics=N
anim=1310
poweradd=0
velset=0, 0
sprpriority=-2
facep2=1

[State 1310, Safety]
type=ChangeState
trigger1=!Time && !NumTarget
value=0
ctrl=1

[State 1310, More Safety]
type=NotHitBy
trigger1=1
value=SCA
[State 1310, TargetState]
type=TargetState
trigger1=!Time && NumTarget
value=1320

[State 1310, SprPriority]
type=SprPriority
trigger1=animelem=7
value=2

[State 1310, Target Facing]
type=TargetFacing
trigger1=Time <= 1
value=-1

[State 1310, AssertSpecial]
type=AssertSpecial
trigger1=1
flag=NoAutoTurn

[State 1310, Voice]
type=PlaySnd
trigger1=!time
value=1300,0
volumescale=100
channel=0

[State 1310, Hitsound]
type=PlaySnd
trigger1=animelem=9
value=2+10*var(44),5
channel=3
[State 1310, Hitsound]
type=PlaySnd
trigger1=animelem=6
value=2,6
channel=8
[State 1310, sound]
type=PlaySnd
trigger1=animelem=7
value=1305,0
channel=11

[State 1310, Flash FX]
type=Helper
trigger1=animelemtime(2)=0
helpertype=normal
name="Flash"
stateno=1311
ID=1311
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=back
ownpal=1
size.xscale = (0.5 * const(size.xscale))
size.yscale = (0.5 * const(size.yscale))
ignorehitpause=1
[State 225, SHP FX]
type=Helper
trigger1=animelemtime(2)=0
helpertype=normal
name="Spark"
stateno=1312
ID=1312
pos=ceil(0*const(size.xscale)),ceil(0*const(size.yscale))
postype=back
ownpal=1
size.xscale = (0.25 * const(size.xscale))
size.yscale = (0.25 * const(size.yscale))
ignorehitpause=1

[State 225, Helper]
type = Helper
trigger1 =animelemtime(6) = 0 
helpertype = normal ;player
name ="Shell1"
ID =920
stateno =920
pos=ceil(12*const(size.xscale)),ceil(-65*const(size.yscale))
postype = p1
ownpal = 1
size.xscale =1
size.yscale =1

[State 1310, EnvShake]
type=EnvShake
trigger1=animelem=9
time=16
ampl=Ifelse(random<500,5,-5)
freq=180
[State 1310, EnvShake]
type=EnvShake
trigger1=animelem=6
time=12
ampl=Ifelse(random<500,3,-3)

[State 1310, TargetState]
type=TargetState
trigger1=animelem=9
value=Ifelse(var(10)=3,1323,1321+var(10))
[State 1310, Width]
type=Width
trigger1=AnimElemTime(10) < 0
edge=90,0

[State 1310, VarSet]
type=VarAdd
trigger1 =animelemtime(7)>0
var(11)=1
ignorehitpause=1

[State 1310, HitSpark]
type=Helper
trigger1=animelem=6
helperType=Normal
stateNo=8013
ID=8000
name="Spark"
posType=P1
pos=30,-60
ownPal=1
size.xScale=1.0
size.yScale=1.0
persistent=0  
[State 1310, HitSpark]
type=Helper
trigger1=animelem=9
helperType=Normal
stateNo=8013
ID=8000
name="Spark"
posType=P1
pos=105,-70
ownPal=1
size.xScale=1.0
size.yScale=1.0
persistent=0  

[State 1310, Bind]
type=TargetBind
trigger1=AnimElemTime(7) < 0
pos=ceil(45 * const(size.xScale)), ceil(0 * const(size.yScale))
[State 1310, Bind]
type=TargetBind
trigger1=AnimElemTime(7) >= 0 && AnimElemTime(9) < 0
pos=ceil(45+2*var(11) * const(size.xScale)), ceil(0 * const(size.yScale))

[State 1310, Damage]
type=TargetLifeAdd
trigger1=NumTarget && AnimElem=6
value=ceil(-42*fvar(10))
kill=0
[State 1310, Damage]
type=TargetLifeAdd
trigger1=NumTarget && AnimElem=9
value=ceil(Ifelse(var(10)>=2,-28,-70)*fvar(10))

[State 1310, TargetPowerAdd]
type=TargetPowerAdd
trigger1=NumTarget && AnimElem=9
value=36
[State 1310, PowerAdd]
type=PowerAdd
trigger1=NumTarget && AnimElem=9 && !var(20) && var(10)!=3
value=72
[State 1310, HitAdd]
type=HitAdd
trigger1=AnimElem=6||AnimElem=9
value=1
[State 1310, VarAdd]
type=VarAdd
trigger1=AnimElem=6||AnimElem=9
var(13)=1

[State 1310, State End]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1
;---------------------------------------------------------------------------
;EX Mustang Kick - Attempt
[Statedef 1330]
type=S
movetype=A
physics=S
anim=1303
velset=0,0
ctrl=0
poweradd=-500

[State 1330, MAX Timer Drain]
type=VarAdd
trigger1=!Time
trigger1=var(20) > 0
var(20)=-250
[State 1330, EX Flash]
type=VarSet
trigger1=!Time
var(25)=45
[State 1330, EX FX]
type=Explod
trigger1=!Time
anim=8210
sprPriority=3
posType=p1
pos=ceil(8*const(size.xscale)), ceil(-75*const(size.yscale))
scale=0.5, 0.5
pauseMoveTime=-1
superMoveTime=-1
ownPal=1
[State 1330, EX-SND]
type=PlaySnd
trigger1 =!time
value=0,1000
channel=3

[State 1330, VarSet]
type=VarSet
trigger1 =!time
var(10)=3
ignorehitpause=1
[State 1330, VarSet]
type=VarSet
trigger1 =!time
var(11)=0
ignorehitpause=1

[State 1330, PosAdd]
type = PosAdd
trigger1 = !time && var(13)
x = 50

[State 1330, Throw]
type=Hitdef
triggerall=!time && Numenemy
Trigger1=enemynear, stateno != [150,155]
attr=S, ST
priority=7,Miss
getpower=0,0
givepower=0
hitflag=M
numhits=0
sparkNo=-1 + 0 * (var(33) := 0)
p1stateno=1310
hitsound=s800, 0
fall=1
fall.recover=1

[State 1330, Swing Snd]
type=PlaySnd
trigger1=AnimElem=2
value=1,0
channel=1

[State 1330, StateTypeSet: Idle]
type=StateTypeSet
trigger1=AnimElemTime(4) = 0
moveType=I

[State 1330, End]
type=ChangeState
trigger1=!AnimTime
value=0
ctrl=1