;---------------------------------------------------------------------------
; 戦国BASARA X	伊達 政宗
;
;	　　　nice engrish
;---------------------------------------------------------------------------
;基本データ部分
[Data]
life              = 1000
power             = 5000
attack            = 120
defence           = 100
fall.defence_up   = 50
liedown.time      = 26
airjuggle         = 99
sparkno           = -1
guard.sparkno     = -1
KO.echo           = 0
volume            = 0
IntPersistIndex   = 17,59      ;Varを次のラウンドへ持ち越しが可能 (最小=0, 最大=59)
FloatPersistIndex = 10,30      ;FVarを次のラウンドへ持ち越しが可能 (最小=0, 最大=39)

;---------------------------------------------------------------------------
;サイズ設定
[Size]
xscale           = 0.49
yscale           = 0.49
ground.back      = 15
ground.front     = 16
air.back         = 12
air.front        = 12
height           = 60
attack.dist      = 160
proj.attack.dist = 90 
proj.doscale     = 1
head.pos         = 0, -96
mid.pos          = 0, -60
shadowoffset     = 0
draw.offset      = 0,0

;---------------------------------------------------------------------------
;移動速度設定
[Velocity]
walk.fwd     = 3.1 
walk.back    = -2.2
run.fwd      = 6, 0
run.back     = -5.3,-2
jump.neu     = 0,-10
jump.back    = -2.4
jump.fwd     = 2.4
runjump.back = -2.55,-8.1
runjump.fwd  = 4,-10
airjump.neu  = 0,-10
airjump.back = -2.4
airjump.fwd  = 2.4

;---------------------------------------------------------------------------
;動作設定
[Movement]
airjump.num     = 0
airjump.height  = 45
yaccel          = .51
stand.friction  = .85
crouch.friction = .82



[ja.Quotes]
victory1 = "Good-bye! 楽しい一時だったぜ！"
victory2 = "Revengeしたけりゃいつでも来な、\nSee you!"
victory3 = "…今の内に決めておきな\n新しい世に何を望む？"
victory4 = "Shit！ 今回も楽な戦だったぜ…\nおい小十郎！勝鬨をあげろォ！"
victory5 = "独眼竜は伊達じゃねえ、you see?"
victory6 = "Go it…次！"
victory7 = "オレの首を取るにはまだ軽いんじゃねえか？"
victory8 = "これが戦ってやつだ\nUnderstand?"
victory9 = "You died\n言ったろ？独眼竜は伊達じゃねえってな"
victory10 = "天下を獲るのは奥州の独眼竜だ！\nHave a party！"
victory11 = "Brace the soul again！"
;---------------------------------------------------------------------------
; 基本行動のステート
;---------------------------------------------------------------------------
; タイムオーバー時
; CNS レベル: 基本
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 170, 無敵]
type = NotHitBy
trigger1 = 1 ;1にするといかなる条件でも有効で、0にするといかなる条件でも無効
value = SCA
time = 1

;---------------------------------------------------------------------------
; 勝利ポーズ分岐
; CNS レベル: 基本
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = var(13)
value = 3501

[State 190, 4] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0&& random % 3 = 1
value = 182

[State 180, ステート変更]
type = ChangeState
trigger1 = Time = 0
value = 181

;---------------------------------------------------------------------------
; 勝利ポーズ
; CNS レベル: 基本
[Statedef 181]
type = S
ctrl = 0
anim = 181
velset = 0,0

[State 193, 5]
type = PlaySnd
trigger1 = animelem = 20
value = 1000, 2

[State 193, 5]
type = PlaySnd
trigger1 = AnimElemTime(8) >= 0
trigger1 = AnimElemTime(19) < 0
value = 300,1
persistent=5

[State 181]
type = VarRandom
trigger1 = animelem = 3
v = 1
range = 1,5

[State 181]
type = Varset
trigger1 = animelem = 3
trigger1 = life < 202
trigger1 = random < 600
var(1) = 2

[State 193, 5]
type = PlaySnd
trigger1 = var(1)=[2,5]
trigger1 = animelem = 3
value = 181, random%11
channel = 2

[State 193, 5]
type = PlaySnd
trigger1 = var(1) = 1
trigger1 = animelem = 3
value = 181, 11+random%2
channel = 2

[State 193, 5]
type = PlaySnd
trigger1 = var(1) = 2
trigger1 = animelem = 3
trigger1 = life < 202
value = 181, 12+random%2
channel = 2


;対鬼
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
trigger1=enemynear,Name="cvsgouki"||enemynear,Name="cvsgouki_normal"||enemynear,Name="cvsgouki_ex"
trigger2 = enemynear,Name = "gouki"
trigger3 = enemynear,Name = "Shin Gouki"
trigger4 = enemynear,Name = "Tin's S_Gouki"
trigger5 = enemynear,Name = "Gouki by M.M.R."
trigger6 = enemynear,Name = "SF3Gouki"
trigger7 = enemynear,Name = "svcgouki"
trigger8 = enemynear,Name = "zankuro"
trigger9 = enemynear,Name = "Jubei Yamada"
trigger10 = enemynear,Name = "ONI"
trigger11 = enemynear,Name = "Oboro Bishamon"
trigger12 = enemynear,Name = "Bishamon"
trigger13 = enemynear,Name = "ogre"
trigger14 = enemynear,Name = "oni chizuru"
trigger15 = enemynear,Name = "Kyo_ONI"
trigger16 = enemynear,Name = "sonozaki mion"
trigger17 = enemynear,Name = "Sonozaki_Mion"
trigger18 = enemynear,Name = "Sonozaki_Shion"
trigger19 = enemynear,Name = "Oniwald"
trigger20 = enemynear,Name = "Red Arcueid"||enemynear,Name = "Red_Arcueid"
trigger21 = enemynear,Name = "elque"
trigger22 = enemynear,Name = "Sion TATARI"
trigger23 = enemynear,Name = "Kishima_kouma"
trigger24 = enemynear,Name = "Akiha_Vermilion"
trigger25 = enemynear,Name = "Kongou"
trigger26 = enemynear,Name = "ONI-MIKO-REIMU"
trigger27 = enemynear,Name = "MN"
trigger28 = enemynear,name = "Suika Ibuki"||enemynear,name="Ibuki_Suika"
trigger29 = enemynear,Name = "Jubei"
trigger30 = enemynear,Name = "Chosokabe Motochika"
trigger31 = enemynear,Name = "TEPPEI"&&enemynear,Authorname = "kasu"
value = 182, 1
channel = 2

;可能性など無かった
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
trigger1=enemynear,Name="cvsgouki"||enemynear,Name="cvsgouki_normal"||enemynear,Name="cvsgouki_ex"
trigger2 = enemynear,Name = "gouki"
trigger3 = enemynear,Name = "Shin Gouki"
trigger4 = enemynear,Name = "Tin's S_Gouki"
trigger5 = enemynear,Name = "Gouki by M.M.R."
trigger6 = enemynear,Name = "SF3Gouki"
trigger7 = enemynear,Name = "svcgouki"
trigger8 = enemynear,Name = "Makoto Shishio"
trigger9 = enemynear,Name = "cvsg_rugal"
trigger10 = enemynear,Name = "Evil Dan"
trigger11 = enemynear,Name = "Evil Ken"
trigger12 = enemynear,Name = "Evil Ryu"
trigger13 = enemynear,Name = "cvsgeese"
trigger14 = enemynear,Name = "geese"
trigger15 = enemynear,Name = "Gill"
trigger16 = enemynear,Name = "Genjuro"
trigger17 = enemynear,Name = "Androide GRugal"
trigger18 = enemynear,Name = "Rugal"
trigger19 = enemynear,Name = "I-NO"
trigger20 = enemynear,Name = "Kaigen Ishima"
trigger21 = enemynear,Name = "JOHANN"
trigger22 = enemynear,Name = "White"
trigger23 = enemynear,Name = "Shinnosuke Kagami"
trigger24 = enemynear,Name = "Magneto(MC2)"
trigger25 = enemynear,Name = "Magneto"
trigger26 = enemynear,Name = "mizuki"
trigger27 = enemynear,Name = "Rugal2k2"
trigger28 = enemynear,Name = "cvsrugal"
trigger29 = enemynear,Name = "Rugal.B"
trigger30 = enemynear,Name = "Shiki_Nanaya"
trigger31 = enemynear,Name = "Shishio Makoto"
trigger32 = enemynear,Name = "SVC for Goenitz"
trigger33 = enemynear,Name = "Vega"
trigger34 = enemynear,Name = "CvsVega"
trigger35 = enemynear,Name = "Evil Ryu Hoshi"
trigger36 = enemynear,Name = "Violent Yamazaki"
trigger37 = enemynear,Name = "cvsyamazaki"
trigger38 = enemynear,Name = "yamazaki"
trigger39 = enemynear,Name = "RAOH"
trigger40 = enemynear,Name = "Goenitz96"
trigger41 = enemynear,Name = "Goenitz"
trigger42 = enemynear,Name = "Sakuya OS"||enemynear,Name="Sakuya_Izayoi"||enemynear,Name="Sakuya_Izayoi"
trigger43 = enemynear,Name = "IGNIZ"
trigger44 = enemynear,Name = "THOUTHER"
trigger45 = enemynear,Name = "Nanaya_Shiki"
trigger46 = enemynear,Name = "Haruhi Suzumiya"
trigger47 = enemynear,Name = "Lieselotte"
trigger48 = enemynear,Name = "Aoko Aozaki"
trigger49 = enemynear,Name = "ryougishiki"
value = 182, 5
channel = 2


;大口（対慶次）
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
trigger1 = enemynear,Name = "Keiji"
trigger2 = enemynear,Name = "another blood"
trigger3 = enemynear,Name = "Buront"
trigger4 = enemynear,Name = "Cell"
trigger5 = enemynear,Name = "Dan Hibiki"
trigger6 = enemynear,Name = "cvsdan"
trigger7 = enemynear,Name = "Kim Dong Hwan"
trigger8 = enemynear,Name = "Dr Gero"
trigger9 = enemynear,Name = "Anji Mito"
trigger10 = enemynear,Name = "Neco Chaos Black G666"
trigger11 = enemynear,Name = "Nitro Ignis"
trigger12 = enemynear,Name = "kira"
trigger13 = enemynear,Name = "kotonoha katsura"
trigger14 = enemynear,Name = "KUROKO"
trigger15 = enemynear,Name = "cvsKUROKO"
trigger16 = enemynear,Name = "Magaki"
trigger17 = enemynear,Name = "pyron"
trigger18 = enemynear,Name = "jedah"
trigger19 = enemynear,Name = "ROBO-KY1"
trigger20 = enemynear,Name = "ROBO-Ky"
trigger20 = enemynear,Name = "ROBO-KY MK-Ⅱ"
trigger20 = enemynear,Name = "Ryoko Asakura"
trigger20 = enemynear,Name = "Super Heita"
value = 183, 0
channel = 2


[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
trigger1 = random<50
trigger1 = var(1):=10
value = 183, 13
channel = 2

;成仏しなよ
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
trigger1 = enemynear,Name = "Bishamon"
trigger2 = enemynear,Name = "Zappa"
trigger3 = enemynear,Name = "Musashi Akatsuki By Third"
trigger4 = enemynear,Name = "Warachia"
trigger5 = enemynear,Name = "alice"&&enemynear,AuthorName="NHK"
trigger6 = enemynear,Name = "Geese Howard "&&enemynear,AuthorName="Nyan☆Kiryu"
trigger7 = enemynear,Name = "Ella"
trigger8 = enemynear,Name = "Noroko"
trigger9 = enemynear,Name = "yuyu"||P2name="Yuyuko_Saigyouji"||P2name="Yuyuko Saigyouji & Youmu Konpaku"||P2name="Yuyuko Saigyouji"
trigger10 = enemynear,Name = "Kouryu"
trigger11 = enemynear,Name = "Prinny"
value = 183, 2
channel = 2

;対我旺
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
trigger1 = enemynear,Name = "gaoh"
value = 183, 4
channel = 2

;対秀吉
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
trigger1 = enemynear,Name ="Toyotomi Hideyoshi"
trigger1 = var(1):=10
value = 183, 16
channel = 2

;対小十郎
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
trigger1 = enemynear,Name = "Katakura Kojuro"
value = 190, ifelse(random%2=0,12,15)
channel = 2

;対魔王
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
trigger1 = enemynear,Name = "raigu's dracula"
trigger2 = enemynear,Name = "Maou"
trigger3 = enemynear,Name = "Oda Nobunaga"
trigger4 = enemynear,Name = "Dabura"
trigger5 = enemynear,Name = "Morrigan Aensland"
trigger6 = enemynear,Name = "Morrigan"
trigger7 = enemynear,Name = "jedah"
trigger8 = enemynear,Name = "Nobunaga"
value = 183, 7
channel = 2
lowpriority = 0

;対死にたがり
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
trigger1 = enemynear,Name = "oichi"
value = 183, 8
channel = 2

;対毛利
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
trigger1 = enemynear,Name = "Mouri Motonari"
trigger2 = enemynear,Name = "Mouri Alice"
value = 183, 9
channel = 2

;対幸村
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
trigger1 = enemy,Name = "Sanada Yukimura"
value = 183, 12
channel = 2

;対謙信
[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
triggerall = matchover
triggerall = life<400
trigger1 = enemynear,Name = "uesugi kensin"
value = 183, 1
channel = 2

[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
trigger1 = TeamMode = turns
trigger1 = RoundsExisted = 2
trigger1 = !matchover
value = 182, 3
channel = 2

[State 193, 5]
type = PlaySnd
triggerall = animelem = 3
trigger1 = TeamMode = turns
trigger1 = RoundsExisted > 2
trigger1 = matchover
value = 182, 4
channel = 2

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, 特殊効果]
type = AssertSpecial
trigger1 = Time = [0,320]
trigger2 = var(1)=10
trigger2 = Time = [0,390]
flag = RoundNotOver


[State 182, 特殊効果]
type = AssertSpecial
trigger1 = Time = [0,420]
triggerall = matchover
trigger1 = enemynear,Name = "Keiji"
trigger2 = enemynear,Name = "another blood"
trigger3 = enemynear,Name = "Buront"
trigger4 = enemynear,Name = "Cell"
trigger5 = enemynear,Name = "Dan Hibiki"
trigger6 = enemynear,Name = "cvsdan"
trigger7 = enemynear,Name = "Kim Dong Hwan"
trigger8 = enemynear,Name = "Dr Gero"
trigger9 = enemynear,Name = "Anji Mito"
trigger10 = enemynear,Name = "Neco Chaos Black G666"
trigger11 = enemynear,Name = "Nitro Ignis"
trigger12 = enemynear,Name = "kira"
trigger13 = enemynear,Name = "kotonoha katsura"
trigger14 = enemynear,Name = "KUROKO"
trigger15 = enemynear,Name = "cvsKUROKO"
trigger16 = enemynear,Name = "Magaki"
trigger17 = enemynear,Name = "pyron"
trigger18 = enemynear,Name = "jedah"
trigger19 = enemynear,Name = "ROBO-KY1"
trigger20 = enemynear,Name = "ROBO-Ky"
trigger21 = enemynear,Name = "ROBO-KY MK-Ⅱ"
trigger22 = enemynear,Name = "Ryoko Asakura"
trigger23 = enemynear,Name = "Super Heita"
trigger24 = enemy,Name = "Sanada Yukimura"
flag = RoundNotOver
;---------------------------------------------------------------------------
; 勝利ポーズ
; CNS レベル: 基本
[Statedef 182]
type = S
ctrl = 0
anim = 182
velset = 0,0

[State 193, 5]
type = PlaySnd
trigger1 = animelem = 7
value = 1000, 2

[State 193, 5]
type = PlaySnd
trigger1 = animelem = 5
value = 300,random%5

[State 193, 5]
type = PlaySnd
trigger1 = animelem = 5
value = 300,random%5

[State 193, 5]
type = PlaySnd
trigger1 = animelem = 5
value = 300,random%5

[State 193, 5]
type = PlaySnd
trigger1 = animelem = 7
value = 121, 0


[State 181]
type = VarRandom
trigger1 = animelem = 8
v = 1
range = 1,5

[State 181]
type = Varset
trigger1 = animelem = 8
trigger1 = life < 202
trigger1 = random < 600
var(1) = 2

[State 193, 5]
type = PlaySnd
trigger1 = var(1)=[2,5]
trigger1 = animelem = 8
value = 181, random%11
channel = 2

[State 193, 5]
type = PlaySnd
trigger1 = var(1) = 1
trigger1 = animelem = 8
value = 181, 11+random%2
channel = 2

[State 193, 5]
type = PlaySnd
trigger1 = var(1) = 2
trigger1 = animelem = 8
trigger1 = life < 202
value = 181, 13+random%2
channel = 2


;対鬼
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
trigger1=enemynear,Name="cvsgouki"||enemynear,Name="cvsgouki_normal"||enemynear,Name="cvsgouki_ex"
trigger2 = enemynear,Name = "gouki"
trigger3 = enemynear,Name = "Shin Gouki"
trigger4 = enemynear,Name = "Tin's S_Gouki"
trigger5 = enemynear,Name = "Gouki by M.M.R."
trigger6 = enemynear,Name = "SF3Gouki"
trigger7 = enemynear,Name = "svcgouki"
trigger8 = enemynear,Name = "zankuro"
trigger9 = enemynear,Name = "Jubei Yamada"
trigger10 = enemynear,Name = "ONI"
trigger11 = enemynear,Name = "Oboro Bishamon"
trigger12 = enemynear,Name = "Bishamon"
trigger13 = enemynear,Name = "ogre"
trigger14 = enemynear,Name = "oni chizuru"
trigger15 = enemynear,Name = "Kyo_ONI"
trigger16 = enemynear,Name = "sonozaki mion"
trigger17 = enemynear,Name = "Sonozaki_Mion"
trigger18 = enemynear,Name = "Sonozaki_Shion"
trigger19 = enemynear,Name = "Oniwald"
trigger20 = enemynear,Name = "Red Arcueid"||enemynear,Name = "Red_Arcueid"
trigger21 = enemynear,Name = "elque"
trigger22 = enemynear,Name = "Sion TATARI"
trigger23 = enemynear,Name = "Kishima_kouma"
trigger24 = enemynear,Name = "Akiha_Vermilion"
trigger25 = enemynear,Name = "Kongou"
trigger26 = enemynear,Name = "ONI-MIKO-REIMU"
trigger27 = enemynear,Name = "MN"
trigger28 = enemynear,name = "Suika Ibuki"||enemynear,name="Ibuki_Suika"
trigger29 = enemynear,Name = "Jubei"
trigger30 = enemynear,Name = "Chosokabe Motochika"
value = 182, 1
channel = 2

;可能性など無かった
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
trigger1=enemynear,Name="cvsgouki"||enemynear,Name="cvsgouki_normal"||enemynear,Name="cvsgouki_ex"
trigger2 = enemynear,Name = "gouki"
trigger3 = enemynear,Name = "Shin Gouki"
trigger4 = enemynear,Name = "Tin's S_Gouki"
trigger5 = enemynear,Name = "Gouki by M.M.R."
trigger6 = enemynear,Name = "SF3Gouki"
trigger7 = enemynear,Name = "svcgouki"
trigger8 = enemynear,Name = "Makoto Shishio"
trigger9 = enemynear,Name = "cvsg_rugal"
trigger10 = enemynear,Name = "Evil Dan"
trigger11 = enemynear,Name = "Evil Ken"
trigger12 = enemynear,Name = "Evil Ryu"
trigger13 = enemynear,Name = "cvsgeese"
trigger14 = enemynear,Name = "geese"
trigger15 = enemynear,Name = "Gill"
trigger16 = enemynear,Name = "Genjuro"
trigger17 = enemynear,Name = "Androide GRugal"
trigger18 = enemynear,Name = "Rugal"
trigger19 = enemynear,Name = "I-NO"
trigger20 = enemynear,Name = "Kaigen Ishima"
trigger21 = enemynear,Name = "JOHANN"
trigger22 = enemynear,Name = "White"
trigger23 = enemynear,Name = "Shinnosuke Kagami"
trigger24 = enemynear,Name = "Magneto(MC2)"
trigger25 = enemynear,Name = "Magneto"
trigger26 = enemynear,Name = "mizuki"
trigger27 = enemynear,Name = "Rugal2k2"
trigger28 = enemynear,Name = "cvsrugal"
trigger29 = enemynear,Name = "Rugal.B"
trigger30 = enemynear,Name = "Shiki_Nanaya"
trigger31 = enemynear,Name = "Shishio Makoto"
trigger32 = enemynear,Name = "SVC for Goenitz"
trigger33 = enemynear,Name = "Vega"
trigger34 = enemynear,Name = "CvsVega"
trigger35 = enemynear,Name = "Evil Ryu Hoshi"
trigger36 = enemynear,Name = "Violent Yamazaki"
trigger37 = enemynear,Name = "cvsyamazaki"
trigger38 = enemynear,Name = "yamazaki"
trigger39 = enemynear,Name = "RAOH"
trigger40 = enemynear,Name = "Goenitz96"
trigger41 = enemynear,Name = "Goenitz"
trigger42 = enemynear,Name = "Sakuya OS"||enemynear,Name="Sakuya_Izayoi"||enemynear,Name="Sakuya_Izayoi"
trigger43 = enemynear,Name = "IGNIZ"
trigger44 = enemynear,Name = "THOUTHER"
trigger45 = enemynear,Name = "Nanaya_Shiki"
trigger46 = enemynear,Name = "Haruhi Suzumiya"
trigger47 = enemynear,Name = "Lieselotte"
trigger48 = enemynear,Name = "Aoko Aozaki"
trigger49 = enemynear,Name = "ryougishiki"
value = 182, 5
channel = 2

;大口（対慶次）
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
trigger1 = enemynear,Name = "Keiji"
trigger2 = enemynear,Name = "another blood"
trigger3 = enemynear,Name = "Buront"
trigger4 = enemynear,Name = "Cell"
trigger5 = enemynear,Name = "Dan Hibiki"
trigger6 = enemynear,Name = "cvsdan"
trigger7 = enemynear,Name = "Kim Dong Hwan"
trigger8 = enemynear,Name = "Dr Gero"
trigger9 = enemynear,Name = "Anji Mito"
trigger10 = enemynear,Name = "Neco Chaos Black G666"
trigger11 = enemynear,Name = "Nitro Ignis"
trigger12 = enemynear,Name = "kira"
trigger13 = enemynear,Name = "kotonoha katsura"
trigger14 = enemynear,Name = "KUROKO"
trigger15 = enemynear,Name = "cvsKUROKO"
trigger16 = enemynear,Name = "Magaki"
trigger17 = enemynear,Name = "pyron"
trigger18 = enemynear,Name = "jedah"
trigger19 = enemynear,Name = "ROBO-KY1"
trigger20 = enemynear,Name = "ROBO-Ky"
trigger20 = enemynear,Name = "ROBO-KY MK-Ⅱ"
trigger20 = enemynear,Name = "Ryoko Asakura"
trigger20 = enemynear,Name = "Super Heita"
value = 183, 0
channel = 2


[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
trigger1 = random<50
trigger1 = var(1):=10
value = 183, 13
channel = 2

;成仏しなよ
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
trigger1 = enemynear,Name = "Bishamon"
trigger2 = enemynear,Name = "Zappa"
trigger3 = enemynear,Name = "Musashi Akatsuki By Third"
trigger4 = enemynear,Name = "Warachia"
trigger5 = enemynear,Name = "alice"&&enemynear,AuthorName="NHK"
trigger6 = enemynear,Name = "Geese Howard "&&enemynear,AuthorName="Nyan☆Kiryu"
trigger7 = enemynear,Name = "Ella"
trigger8 = enemynear,Name = "Noroko"
trigger9 = enemynear,Name = "yuyu"||P2name="Yuyuko_Saigyouji"||P2name="Yuyuko Saigyouji & Youmu Konpaku"||P2name="Yuyuko Saigyouji"
trigger10 = enemynear,Name = "Kouryu"
trigger11 = enemynear,Name = "Prinny"
value = 183, 2
channel = 2

;対我旺
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
trigger1 = enemynear,Name = "gaoh"
value = 183, 4
channel = 2

;対秀吉
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
trigger1 = enemynear,Name ="Toyotomi Hideyoshi"
trigger1 = var(1):=10
value = 183, 16
channel = 2

;対毛利
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
trigger1 = enemynear,Name = "Mouri Motonari"
trigger2 = enemynear,Name = "Mouri Alice"
value = 183, 9
channel = 2

;対小十郎
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
trigger1 = enemynear,Name = "Katakura Kojuro"
value = 190, ifelse(random%2=0,12,15)
channel = 2

;対幸村
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
trigger1 = enemy,Name = "Sanada Yukimura"
value = 183, 12
channel = 2

;対魔王
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
trigger1 = enemynear,Name = "raigu's dracula"
trigger2 = enemynear,Name = "Maou"
trigger3 = enemynear,Name = "Oda Nobunaga"
trigger4 = enemynear,Name = "Dabura"
trigger5 = enemynear,Name = "Morrigan Aensland"
trigger6 = enemynear,Name = "Morrigan"
trigger7 = enemynear,Name = "jedah"
trigger8 = enemynear,Name = "Nobunaga"
value = 183, 7
channel = 2

;対死にたがり
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
trigger1 = enemynear,Name = "oichi"
value = 183, 8
channel = 2

;対謙信
[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
triggerall = matchover
triggerall = life<200
trigger1 = enemynear,Name = "uesugi kensin"
value = 183, 1
channel = 2


[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
trigger1 = TeamMode = turns
trigger1 = RoundsExisted = 2
trigger1 = !matchover
value = 182, 3
channel = 2

[State 193, 5]
type = PlaySnd
triggerall = animelem = 8
trigger1 = TeamMode = turns
trigger1 = RoundsExisted > 2
trigger1 = matchover
value = 182, 4
channel = 2

[State 181, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 182, 特殊効果]
type = AssertSpecial
trigger1 = Time = [0,320]
trigger2 = var(1)=10
trigger2 = Time = [0,390]
flag = RoundNotOver

[State 182, 特殊効果]
type = AssertSpecial
trigger1 = Time = [0,420]
triggerall = matchover
trigger1 = enemynear,Name = "Keiji"
trigger2 = enemynear,Name = "another blood"
trigger3 = enemynear,Name = "Buront"
trigger4 = enemynear,Name = "Cell"
trigger5 = enemynear,Name = "Dan Hibiki"
trigger6 = enemynear,Name = "cvsdan"
trigger7 = enemynear,Name = "Kim Dong Hwan"
trigger8 = enemynear,Name = "Dr Gero"
trigger9 = enemynear,Name = "Anji Mito"
trigger10 = enemynear,Name = "Neco Chaos Black G666"
trigger11 = enemynear,Name = "Nitro Ignis"
trigger12 = enemynear,Name = "kira"
trigger13 = enemynear,Name = "kotonoha katsura"
trigger14 = enemynear,Name = "KUROKO"
trigger15 = enemynear,Name = "cvsKUROKO"
trigger16 = enemynear,Name = "Magaki"
trigger17 = enemynear,Name = "pyron"
trigger18 = enemynear,Name = "jedah"
trigger19 = enemynear,Name = "ROBO-KY1"
trigger20 = enemynear,Name = "ROBO-Ky"
trigger21 = enemynear,Name = "ROBO-KY MK-Ⅱ"
trigger22 = enemynear,Name = "Ryoko Asakura"
trigger23 = enemynear,Name = "Super Heita"
trigger24 = enemy,Name = "Sanada Yukimura"
flag = RoundNotOver
;---------------------------------------------------------------------------
; イントロ（試合開始直前のアクション）
; CNS レベル: 基本
[Statedef 191]
type = S
ctrl = 0
;anim = 190
velset = 0,0

;対真田幸村（戦国BASARAX)
[State 193, 5]
type = ChangeState
trigger1 = Time = 0
trigger1 = enemy,Name = "Sanada Yukimura"
trigger1 = enemy,authorName = "syouga"
value = 10095


;対真田幸村（SAMURAI DEEPER KYO）
[State 193, 5]
type = ChangeState
trigger1 = Time = 0
trigger1 = enemy,Name = "Yukimura Sanada"
trigger1 = enemy,authorName = "AOAO"
value = 1416

;対小銃
[State 193, 5]
type = ChangeState
trigger1 = Time = 0
trigger1 = enemynear,Name = "Katakura Kojuro"
trigger1 = TeamMode = Single
value = 1417

;対秀吉
[State 193, 5]
type = ChangeState
trigger1 = Time = 0
trigger1 = enemynear,Name = "Toyotomi Hideyoshi"
value = 1419

[State 190, 4] ;Go straight to intro.
type = ChangeState
trigger1 = Time = 0&& random % 3 = 1
value = 198

[State 190, 2]
type = ChangeState
trigger1 = Time = 0
value = 193

;---------------------------------------------------------------------------
; Introduction
[Statedef 1419]
type = S
ctrl = 0
anim = 1419
velset = 0,0

[State 193, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 193, 5]
type = PlaySnd
trigger1 = animelem=8
value = 300, 3

[State 193, 5]
type = PlaySnd
trigger1 = animelem=8
value = 300, 4

[State 193, 5]
type = PlaySnd
trigger1 = animelem=13
value = 300, 3

[State 193, 5]
type = PlaySnd
trigger1 = animelem=13
value = 300, 4

[State 193, 5]
type = PlaySnd
trigger1 = animelem=18
value = 1000,2

[State 193, 5]
type = PlaySnd
trigger1 = time = 370
value = 183, 15
channel = 2
lowpriority = 0

[State 193, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; 対幸村イントロ
[Statedef 10096]
type = S
ctrl = 0
anim = 194
velset = 10,0
movetype = A

[State 193, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 100, 1]
type = Velmul
trigger1 = Anim > 200
trigger1 = abs(Vel X) < 0
x = 0.9

[State 100, 2]
type = Velset
trigger1 = Anim > 200
trigger1 = abs(Vel X) >= -0.01
x = 0

;初期位置を記憶
[State 193, 5]
type = varset
trigger1 = !time
var(0) = pos x

[state -1]
type = ScreenBound
trigger1 = 1
value = 0

[state 10096]
type = posadd
trigger1 = !time
x = -200

[State 193, 5]
type = PlaySnd
trigger1 = time = 0
value = 1000, 5
;channel = 2
;lowpriority = 0

[State 193, 5]
type = PlaySnd
trigger1 = Anim = 10096
TRIGGER1 = Animelem = 7
trigger2 = Anim = 10096
trigger2 = Animelem = 15
trigger3 = Anim = 10096
trigger3 = Animelem = 22
value = 200, 8

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Anim = 10096
TRIGGER1 = Animelem = 7
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2), -67-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999


[State 193, 7]
type = velset
trigger1 = time>10
trigger1 = Anim = 194
trigger1 = p2bodydist x < 120
trigger2 = Animelem = 14
trigger3 = Animelem = 22
x = 0

[State 193, 7]
type = veladd
trigger1 = Animelem=8
trigger2 = Animelem = 16
x = -2

[State 193, 7]
type = veladd
trigger1 = Animtime = 0
trigger1 = Anim = 10096
x = -9

[State 193, 7]
type = Changeanim
trigger1 = time>10
trigger1 = Anim = 194
trigger1 = p2bodydist x < 120
value = 10096

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Anim = 10096
trigger1 = Animelem = 15
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2+10), -36-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Anim = 10096
trigger1 = Animelem = 22
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2), -60-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 193, 7]
type = Changestate
trigger1 = Animtime = 0
trigger1 = Anim = 10096
value = 3000

;---------------------------------------------------------------------------
; 待機ステート
; 相手が古いバージョンなら相殺合戦に移行しない
[Statedef 10095]
type = S
ctrl = 0
anim = 9999
velset = 0,0

[State 193, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 193, 7]
type = ChangeState
trigger1 = enemy,stateno = [10095,10099]
value = 10096

[State 193, 7]
type = ChangeState
trigger1 = time
trigger1 = enemy,stateno != [10095,10099]
value = 193
;---------------------------------------------------------------------------
; Introduction
[Statedef 10099]
type = S
ctrl = 0
anim = 10099
velset = 0,0

[state -1]
type = ScreenBound
trigger1 = 1
value = 0

[state -1]
type = posset
trigger1 = var(0)
trigger1 = time=5
x = var(0)

[State -1]
Type = AllPalFX
Trigger1 = Time <= 49
Time = 1
Add = 250,250,250
IgnoreHitPause = 1
Peresistent = 1

[State -1]
Type = AllPalFX
Trigger1 = Time = [50,75]
Time = 1
Add = 250-(time-50)*10,250-(time-50)*10,250-(time-50)*10
IgnoreHitPause = 1
Peresistent = 1

[State 193, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 193, 5]
type = PlaySnd
trigger1 = time = 110
value = 183, 10
channel = 2
lowpriority = 0


[State 193, 5]
type = PlaySnd
trigger1 = time >= 310
trigger1 = time%30=10
value = 1200, 3

[state 3400,];稲光
type = explod
trigger1 = time >= 300
trigger1 = time%7 = 0
postype = p1
pos = -40+random%80,0
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = 1
sprpriority = 3
removetime = -2
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[State 1000, 3]
type = helper
trigger1 = time >= 300
persistent = 3
postype = p1
pos = -40+random%80,-random%100
stateno = 1012
helpertype = normal
persistent = 3
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state b]
type = Helper
trigger1 = time = 315
pos = 0,-10
postype = p1
stateno = 3110
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 1.1
size.yscale = 1.1


[State 193, 5]
type = PlaySnd
trigger1 = time = 313
value = 183, 11
channel = 2
lowpriority = 0

[State 193, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; Introduction
[Statedef 1417]
type = S
ctrl = 0
anim = 1415
velset = 0,0

[State 193, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 193, 5]
type = PlaySnd
trigger1 = time = 0
value = 121, 0

[State 193, 5]
type = PlaySnd
trigger1 = time = 40
value = 190, 11
channel = 2
lowpriority = 0

[State 193, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; Introduction
[Statedef 1416]
type = S
ctrl = 0
anim = 1415
velset = 0,0

[State 193, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

;対真田幸村（SAMURAI DEEPER KYO）
[State 193, 5]
type = PlaySnd
trigger1 = time = 0
value = 121, 0

;対真田幸村（SAMURAI DEEPER KYO）
[State 193, 5]
type = PlaySnd
trigger1 = time = 40
value = 183, 3
channel = 2
lowpriority = 0

[State explod]
type = Explod
trigger1 = time = 310
anim = 10000
postype = p1
facing = facing
pos = 10,-110
bindtime = -1
removetime = -2
pausemovetime = 99999
supermove = 99999
ownpal = 1
ontop = 1
scale = 0.5,0.5

[State 193, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; Introduction
[Statedef 193]
type = S
ctrl = 0
;anim = 9998
velset = 0,0

[State 193, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 193, 4]
type = Helper
trigger1 = time = 0
ID = 194
pos = -260, 0
postype = back
stateno = 194
helpertype = normal
name = "Walk"
keyctrl = 0
ownpal = 0
ignorehitpause = 1

[State 193, 1]
type = ChangeAnim
trigger1 = numhelper(194)
value = 9998

[State 193, 5]
type = PlaySnd
triggerall = anim = 193
trigger1 = animelem = 10
trigger2 = animelem = 6
value = 1000, 2

[State 100 , 0]
type = Explod
trigger1 = numhelper(194) = 0
trigger1 = anim != 193
trigger2 = numhelper(194)
trigger2 = helper(194),rootdist x<2
anim = 6010
postype = p1
pos = 10,6
facing = -1
sprpriority = 8
bindtime = 1
ownpal = 1
scale = 0.5,0.5
ID = 6010

[State 193, 6]
type = ChangeAnim
trigger1 = numhelper(194) = 0
trigger1 = anim != 193
trigger2 = numhelper(194)
trigger2 = helper(194),rootdist x<2
value = 193

[State 193, 5]
type = PlaySnd
trigger1 = anim = 193
trigger1 = animelem = 13
value = 190,random%11-1
channel = 2
lowpriority = 0

;対鬼
[State 193, 5]
type = PlaySnd
triggerall = anim = 193
triggerall = animelem = 13
trigger1=enemynear,Name="cvsgouki"||enemynear,Name="cvsgouki_normal"||enemynear,Name="cvsgouki_ex"
trigger2 = enemynear,Name = "gouki"
trigger3 = enemynear,Name = "Shin Gouki"
trigger3 = enemynear,stateno != 188
trigger4 = enemynear,Name = "Tin's S_Gouki"
trigger5 = enemynear,Name = "Gouki by M.M.R."
trigger6 = enemynear,Name = "SF3Gouki"
trigger7 = enemynear,Name = "svcgouki"
trigger8 = enemynear,Name = "zankuro"
trigger9 = enemynear,Name = "Jubei Yamada"
trigger10 = enemynear,Name = "ONI"
trigger11 = enemynear,Name = "Oboro Bishamon"
trigger12 = enemynear,Name = "Bishamon"
trigger13 = enemynear,Name = "ogre"
trigger14 = enemynear,Name = "oni chizuru"
trigger15 = enemynear,Name = "Kyo_ONI"
trigger16 = enemynear,Name = "sonozaki mion"
trigger17 = enemynear,Name = "Sonozaki_Mion"
trigger18 = enemynear,Name = "Sonozaki_Shion"
trigger19 = enemynear,Name = "Oniwald"
trigger20 = enemynear,Name = "Red Arcueid"||enemynear,Name = "Red_Arcueid"
trigger21 = enemynear,Name = "elque"
trigger22 = enemynear,Name = "Sion TATARI"
trigger23 = enemynear,Name = "Kishima_kouma"
trigger24 = enemynear,Name = "Akiha_Vermilion"
trigger25 = enemynear,Name = "Kongou"
trigger26 = enemynear,Name = "ONI-MIKO-REIMU"
trigger27 = enemynear,Name = "MN"
trigger28 = enemynear,name = "Suika Ibuki"||enemynear,name="Ibuki_Suika"
trigger29 = enemynear,Name = "Jubei"
trigger30 = enemynear,Name = "Chosokabe Motochika"
value = 182, 0
channel = 2
lowpriority = 0

;対謙信
[State 193, 5]
type = PlaySnd
triggerall = anim = 193
triggerall = animelem = 13
trigger1 = enemynear,Name = "uesugi kensin"
value = 182, 6
channel = 2
lowpriority = 0

;対独眼P
[State 193, 5]
type = PlaySnd
triggerall = anim = 193
triggerall = animelem = 13
trigger1 = enemynear,Name = "DokuganP"
value = 183, 5
channel = 2
lowpriority = 0

[State 193, 5]
type = PlaySnd
triggerall = anim = 193
triggerall = animelem = 13
trigger1 = numpartner
trigger1 = partner,Name = "Katakura Kojuro"
value = 190, 14
channel = 2
lowpriority = 0

;対魔王
[State 193, 5]
type = PlaySnd
triggerall = anim = 193
triggerall = animelem = 13
trigger1 = enemynear,Name = "raigu's dracula"
trigger2 = enemynear,Name = "Maou"
trigger3 = enemynear,Name = "Oda Nobunaga"
trigger4 = enemynear,Name = "Dabura"
trigger5 = enemynear,Name = "Morrigan Aensland"
trigger6 = enemynear,Name = "Morrigan"
trigger7 = enemynear,Name = "jedah"
trigger8 = enemynear,Name = "Nobunaga"
value = 183, 6
channel = 2
lowpriority = 0

[State 193, 5]
type = PlaySnd
triggerall = anim = 193
triggerall = animelem = 13
trigger1=enemynear,Name="tank-reimu"
trigger2 = enemynear,Name = "yukkuri"
trigger3 = enemynear,Name = "siteittene"
trigger4 = enemynear,Name = "D4 Reimu"
value = 182, 2
channel = 2
lowpriority = 0


[State 193, 5]
type = PlaySnd
triggerall = anim = 193
triggerall = animelem = 13
trigger1=enemynear,Name="Mouri Motonari"
trigger2 = enemynear,Name = "Mouri Alice"
value = 183, 14
channel = 2
lowpriority = 0

[State 193, 5]
type = PlaySnd
triggerall = anim = 193
triggerall = animelem = 13
trigger1 = enemynear,Name = "Toyotomi Hideyoshi"
value = 183, 15
channel = 2
lowpriority = 0

[State 193, 7]
type = ChangeState
trigger1 = anim = 193
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; Walk
[Statedef 194]
type    = S
physics = S
anim = 194
sprpriority = 1

[State 194, 1]
type = VelSet
trigger1 = 1
x = 11

[State 193, 5]
type = PlaySnd
trigger1 = rootdist X < 2
value = 41, 1

[State 194, 6]
type = DestroySelf
trigger1 = rootdist X < 2

;---------------------------------------------------------------------------
; Introduction
[Statedef 198]
type = S
ctrl = 0
anim = 9998
velset = 0,0

[State 193, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 193, 4]
type = Helper
trigger1 = time = 0
ID = 196
pos = -160, -300
postype = p1
stateno = 196
helpertype = normal
name = "uma"
keyctrl = 0
ownpal = 0
ignorehitpause = 1

[State 193, 6]
type = ChangeAnim
triggerall = numhelper(196)=0
triggerall = anim != 19997
trigger1 = numhelper(199)=0
trigger2 = numhelper(199)
trigger2 = helper(199),Pos Y >= 24
value = 19997

[State 193, 5]
type = PlaySnd
trigger1 = anim = 19997
trigger1 = animelem = 1
value = 190, random%11-1
channel = 2
lowpriority = 0

;対鬼
[State 193, 5]
type = PlaySnd
triggerall = anim = 19997
triggerall = animelem = 1
trigger1 =enemynear,Name="cvsgouki"||enemynear,Name="cvsgouki_normal"||enemynear,Name="cvsgouki_ex"
trigger2 = enemynear,Name = "gouki"
trigger3 = enemynear,Name = "Shin Gouki"
trigger3 = enemynear,stateno != 188
trigger4 = enemynear,Name = "Tin's S_Gouki"
trigger5 = enemynear,Name = "Gouki by M.M.R."
trigger6 = enemynear,Name = "SF3Gouki"
trigger7 = enemynear,Name = "svcgouki"
trigger8 = enemynear,Name = "zankuro"
trigger9 = enemynear,Name = "Jubei Yamada"
trigger10 = enemynear,Name = "ONI"
trigger11 = enemynear,Name = "Oboro Bishamon"
trigger12 = enemynear,Name = "Bishamon"
trigger13 = enemynear,Name = "ogre"
trigger14 = enemynear,Name = "oni chizuru"
trigger15 = enemynear,Name = "Kyo_ONI"
trigger16 = enemynear,Name = "sonozaki mion"
trigger17 = enemynear,Name = "Sonozaki_Mion"
trigger18 = enemynear,Name = "Sonozaki_Shion"
trigger19 = enemynear,Name = "Oniwald"
trigger20 = enemynear,Name = "Red Arcueid"||enemynear,Name = "Red_Arcueid"
trigger21 = enemynear,Name = "elque"
trigger22 = enemynear,Name = "Sion TATARI"
trigger23 = enemynear,Name = "Kishima_kouma"
trigger24 = enemynear,Name = "Akiha_Vermilion"
trigger25 = enemynear,Name = "Kongou"
trigger26 = enemynear,Name = "ONI-MIKO-REIMU"
trigger27 = enemynear,Name = "MN"
trigger28 = enemynear,name = "Suika Ibuki"||enemynear,name="Ibuki_Suika"
trigger29 = enemynear,Name = "Jubei"
trigger30 = enemynear,Name = "Chosokabe Motochika"
value = 182, 0
channel = 2
lowpriority = 0

;対謙信
[State 193, 5]
type = PlaySnd
triggerall = anim = 19997
triggerall = animelem = 1
trigger1 = enemynear,Name = "uesugi kensin"
value = 182, 6
channel = 2
lowpriority = 0

;対独眼P
[State 193, 5]
type = PlaySnd
triggerall = anim = 19997
triggerall = animelem = 1
trigger1 = enemynear,Name = "DokuganP"
value = 183, 5
channel = 2
lowpriority = 0

;対魔王
[State 193, 5]
type = PlaySnd
triggerall = anim = 19997
triggerall = animelem = 1
trigger1 = enemynear,Name = "raigu's dracula"
trigger2 = enemynear,Name = "Maou"
trigger3 = enemynear,Name = "Oda Nobunaga"
trigger4 = enemynear,Name = "Dabura"
trigger5 = enemynear,Name = "Morrigan Aensland"
trigger6 = enemynear,Name = "Morrigan"
trigger7 = enemynear,Name = "jedah"
trigger8 = enemynear,Name = "Nobunaga"
value = 183, 6
channel = 2
lowpriority = 0

[State 193, 5]
type = PlaySnd
triggerall = anim = 19997
triggerall = animelem = 1
trigger1 = numpartner
trigger1 = partner,Name = "Katakura Kojuro"
trigger1 = random< 800
value = 190, 14
channel = 2
lowpriority = 0

[State 193, 5]
type = PlaySnd
triggerall = anim = 19997
triggerall = animelem = 1
trigger1=enemynear,Name="tank-reimu"
trigger2 = enemynear,Name = "yukkuri"
trigger3 = enemynear,Name = "siteittene"
value = 182, 2
channel = 2
lowpriority = 0


[State 193, 5]
type = PlaySnd
triggerall = anim = 19997
triggerall = animelem = 1
trigger1=enemynear,Name="Mouri Motonari"
trigger2 = enemynear,Name = "Mouri Alice"
value = 183, 14
channel = 2
lowpriority = 0

[State 193, 5]
type = PlaySnd
triggerall = anim = 19997
triggerall = animelem = 1
trigger1 = enemynear,Name = "Toyotomi Hideyoshi"
value = 183, 15
channel = 2
lowpriority = 0

[State 193, 7]
type = ChangeState
trigger1 = anim = 19997
trigger1 = AnimTime = 0
value = 0
;---------------------------------------------------------------------------
; uma
[Statedef 196]
type    = S
physics = S
anim = 192
sprpriority = 1

[state 193, 4]
type = Helper
trigger1 = time = 0
ID = 199
pos = 0, 0
postype = p1
stateno = 199
helpertype = normal
name = "joba"
keyctrl = 0
ownpal = 0
ignorehitpause = 0

[State 194, 1]
type = VelSet
trigger1 = 1
x = 9

[State 193, VelAdd]
Type = VelAdd
Trigger1 = 1
Y = 0.6

[State 193, DestroySelf]
type = ChangeState
Trigger1 = Pos Y >= -80
value = 197
;---------------------------------------------------------------------------
; uma
[Statedef 197]
type    = S
physics = N
anim = 196
sprpriority = 1
VelSet = 0,0

[State 193, 5]
type = PlaySnd
trigger1 = time = 0
value = 5100, 1

[State 193, 5]
type = PlaySnd
trigger1 = time = 5
value = 5100, 0

[State 193, 5]
type = EnvShake
trigger1 = time = 0
time = 10
freq = 60
ampl = -5

[State 100 , 0]
type = Explod
trigger1 = time = 0
anim = 6010
postype = p1
pos = 40,80
facing = -1
sprpriority = 8
bindtime = 1
ownpal = 1
scale = 0.5,0.5
ID = 6010

[State 194, 1]
type = VelSet
trigger1 = time = 16
x = 9
y = -8

[State 193, VelAdd]
Type = VelAdd
trigger1 = time >= 16
x = 0.2

[State 193, DestroySelf]
type = DestroySelf
trigger1 = ScreenPos Y <= -50
;---------------------------------------------------------------------------
;乗馬
[Statedef 199]
type    = S
physics = N
anim = 191
sprpriority = 2

[State 199,]
type = BindToParent
trigger1 = parent,stateno=196
time = 1
pos = 0, 0

[State 193, VelAdd]
Type = Velset
trigger1 = parent,stateno=197
trigger1 = parent,time = 10
X = -1.5
Y = -6.5
persistent = 0

[State 193, VelAdd]
Type = VelAdd
trigger1 = parent,stateno=197
trigger1 = parent,time > 10
y = 0.4

[State 193, 6]
type = ChangeAnim
trigger1 = parent,stateno=197
trigger1 = parent,time = 6
value = 197
persistent = 0

[State 193, 5]
type = PlaySnd
Trigger1 = Pos Y >= 24
;trigger1 = parent,stateno=197
value =47, 0

[State 193, DestroySelf]
type = DestroySelf
Trigger1 = Pos Y >= 24
;trigger1 = parent,stateno=197
;---------------------------------------------------------------------------
; 挑発
; CNS レベル: 基本
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S
sprpriority = 2

[state 7000,]
type = varadd
trigger1 = animelem = 5
trigger1 = life<200
fvar(30) = 0.02
persistent = 0

[State 193, 5]
type = PlaySnd
trigger1 = animelem = 5
value = 199, random%10
channel = 2
lowpriority = 0

[State 195, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 200]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 200
sprpriority = 1

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975

[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=4
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 4
trigger1 = random<= 400
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 5
value = 300,1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-5), -84-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999



[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 6
trigger1 = var(33) = 0
attr = S, NA
animtype  = Light
damage    = ceil(25*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
hitflag = MAF
guardflag = MA
pausetime = 11,11
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 0
guardsound = s120, 0
ground.type = High
guard.hittime = 13
guard.ctrltime = 13
ground.slidetime = 10+var(41)
ground.hittime  = 10+var(41)
ground.velocity = -4.1* fvar(14)
air.velocity = -3.1* fvar(14),-5.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(21*fvar(25))
air.fall = 1

fall.envshake.time = 9
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)), 20
ID = 200

[State 240, 6] ;カウンター
type = HitDef
trigger1 = animelem = 6
trigger1 = var(33) >= 1
attr = S, NA
animtype  = Light
damage    = 28, 0
hitflag = MAF
guardflag = MA
pausetime = 11,22
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 0
guardsound = s120, 0
ground.type = High
guard.hittime = 11
ground.slidetime = 15+var(41)
ground.hittime  = 15+var(41)
ground.velocity = -4.1*fvar(14)
air.velocity = -3*fvar(14),-5.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(45*fvar(25))
air.fall = 1
air.hittime  = 20

fall.envshake.time = 9
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)), 20
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-15), -84-Ceil(P2BodyDist Y)
postype = p2
stateno = 7000
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7020
name = "hit"
pos = Ceil(P2Dist X/2-15), -84-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
Trigger1 = MoveHit=1
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------
[Statedef 210]
type    = S
movetype= A
physics = N
juggle  = 4
ctrl = 0
anim = 210
sprpriority = 1

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0
[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975

[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 3
trigger1 = random <= 400
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 4
value = 300,2
ignorehitpause = 1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999


[State 100, 1]
type = Veladd
trigger1 = time = 10
x = 1.2
[State 100, 1]
type = Veladd
trigger1 = time = 15
x = -0.4

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 4
trigger1 = var(33) = 0
attr = S, NA
animtype  = medium
damage    = ceil(58*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
priority = 3
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 10
guardsound = s120, 3
ground.type = low
guard.hittime = 11
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -6* fvar(14)
air.velocity = -3.7* fvar(14),-5.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(29*fvar(25))
air.fall = 1
fall.envshake.time = 9
yaccel = .51*fvar(15)
getpower = ceil(50*fvar(31)*fvar(6)), ceil(20*fvar(31)*fvar(6))
ID = 200

[State 240, 6] ;カウンター
type = HitDef
trigger1 = animelem = 4
trigger1 = var(33) >= 1
attr = S, NA
animtype  = medium
damage    = 64, 0
priority = 7
hitflag = MAF
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 10
guardsound = s120, 3
ground.type = low
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -6*fvar(14)
air.velocity = -3.7*fvar(14),-5.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(43*fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51*fvar(15)
getpower = ceil(80*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-45), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 5
trigger1 = random <= 400
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1


[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-45), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 立ち強
[Statedef 230]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 230
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=14
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 4
trigger1 = random <= 400
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 4
value = 300,3

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 11
value = 230,0

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-20), -67-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelem = 5
attr = S, NA
animtype  = Hard
damage    = ceil(90*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
priority = 4
hitflag = MAFD
guardflag = MA
pausetime = 14,14
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 3
ground.type = low
guard.hittime = 13
ground.slidetime = 17+var(41)
ground.hittime  = 17+var(41)
ground.velocity = -7.2* fvar(14)
air.velocity = ifelse(p2statetype = L,-9,-4.1*fvar(14)),ifelse(p2statetype = L,-.5,-5.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-7.2*fvar(14))
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(34*fvar(25))
air.fall = 1
fall.envshake.time = 9
yaccel = .51*fvar(15)
getpower = ceil(60*fvar(31)*fvar(6)), ceil(20*fvar(31)*fvar(6))
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelem = 5
attr = S, NA
animtype  = Hard
damage    = 100, 0
priority = 4
hitflag = MAFD
guardflag = MA
pausetime = 14,28
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 3
ground.type = low
ground.slidetime = 24+var(41)
ground.hittime  = 24+var(41)
ground.velocity = -7.2*fvar(14)
air.velocity = ifelse(p2statetype = L,-9,-4.1*fvar(14)),ifelse(p2statetype = L,-.5,-5.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-7.2*fvar(14))
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(51*fvar(25))
air.fall = 1

fall.envshake.time = 9
yaccel = .51*fvar(15)
getpower = ceil(100*fvar(31)*fvar(6)),ceil(50*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-35), -66-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 8
trigger1 = random <= 400
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-35), -66-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 立ち→中
[Statedef 250]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 250
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=16
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 4
trigger1 = random <= 300
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 7
value = 300,3

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 12
value = 230,0

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -66-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelem = 8
attr = S, NA
animtype  = Hard
damage    = ceil(60*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
priority = 3
hitflag = MAFD
guardflag = HA
pausetime = 15,15
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = low
guard.hittime = 13
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -2.2,-4.8*fvar(15)
guard.velocity = -10
air.velocity = ifelse(p2statetype = L,-9,-2.2*fvar(14)),ifelse(p2statetype = L,-.5,-4.8)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2.2*fvar(14))
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(39*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(60*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelem = 8
attr = S, NA
animtype  = Hard
damage    = 67, 0
priority = 3
hitflag = MAFD
guardflag = HA
pausetime = 15,30
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = low
ground.slidetime = 27+var(41)
ground.hittime  = 27+var(41)
ground.velocity = -2.2,-4.8*fvar(15)
guard.velocity = -10
air.velocity = ifelse(p2statetype = L,-9,-2.2*fvar(14)),ifelse(p2statetype = L,-.5,-4.8)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2.2*fvar(14))
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime =ceil(57*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower =ceil(100*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-35), -66-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 8
trigger1 = random <= 200
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-35), -66-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1
[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0
[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 立ち→強
[Statedef 260]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 260
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=14
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 5
trigger1 = random <= 300
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 6
value = 300,3

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -76-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelem = 7
attr = S, NA
animtype  = Hard
damage    = ceil(80*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 14,14
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 3
ground.type = high
guard.hittime = 14
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -4,-6.6
guard.velocity = -8
air.velocity = ifelse(p2statetype = L,-9,-4*fvar(14)),ifelse(p2statetype = L,-.5,-6.6)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-4*fvar(14))
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(37*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(60*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelem = 7
attr = S, NA
animtype  = Hard
damage    = 89, 0
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 14,28
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 3
ground.type = low
ground.slidetime = 27+var(41)
ground.hittime  = 27+var(41)
ground.velocity = -2.2,-6.6
air.velocity = ifelse(p2statetype = L,-9,-2.2*fvar(14)),ifelse(p2statetype = L,-.5,-6.6)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2.2*fvar(14))
p2stateno = 550
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(48*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(70*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-35), -76-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 10
trigger1 = random <= 300
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-35), -76-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・ヒットストップ
[Statedef 261]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[state a]
type = turn
trigger1 = p2dist x < 0
trigger1 = time = 0

[state a]
type = playerpush
trigger1 = 1
value = 0


[State 820, 1]
type = ChangeAnim2
Trigger1 = 1
value = 550

[state a]
type = changeanim
triggerall = 1
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = (name = "Date Masamune" || name = "Date Masamune")&& authorname = "Neat Unsou"
trigger9 = (name = "Mouri Motonari" || name = "Mouri Motonari")&& authorname = "Neat Unsou"
value = 560

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = changestate
trigger1 = HitShakeOver
value = 262

[State 1000, 0]
type = null;HitOverride
trigger1 = enemy,stateno != 291
attr = SCA,NA,SA,HA
slot = 0
stateno = 550
time = 1


;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・吹き飛び
[Statedef 262]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

;---------------------[速度]
[state a]
type = velset
trigger1 = time = 0
x = -14
y = -7.3

[state a]
type = velset
trigger1 = time = 1
trigger1 = GetHitVar(chainid) = 1000
x = -14
y = -6.3

[state a]
type = veladd
trigger1 = 1
y = 0.4

;---------------------[アニメーション]
[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 550

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = (name = "Date Masamune" || name = "Date Masamune")&& authorname = "Neat Unsou"
trigger9 = (name = "Mouri Motonari" || name = "Mouri Motonari")&& authorname = "Neat Unsou"
value = 560


;---------------------[演出]
[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = playerpush
trigger1 = 1
value = 0

;---------------------[ステート移行]
[state a]
type = changestate
trigger1 = BackEdgeDist <= 10
trigger2 = time = 200
trigger3 = frontEdgeDist <= 10
value = 263

[state a]
type = selfstate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

[State 1000, 0]
type = null;HitOverride
trigger1 = 1;enemy,stateno != 291
attr = SCA,NA,SA,HA
stateno = 550
time = 1


;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・壁ヒット
[Statedef 263]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1


;---------------------[アニメーション]
[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 551

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = (name = "Date Masamune" || name = "Date Masamune")&& authorname = "Neat Unsou"
trigger9 = (name = "Mouri Motonari" || name = "Mouri Motonari")&& authorname = "Neat Unsou"
value = 562

;---------------------[速度]
[state a]
type = posadd
trigger1 = time = 0
y = -15

[state a]
type = velset
trigger1 = animelem = 2
x = 2.3
y = -6.5

[state a]
type = velset
trigger1 = animelem = 2
trigger1 = GetHitVar(chainid) = 1000
x = 1.2
y = -3.5

[state a]
type = veladd
trigger1 = animelem = 2,>=0
y = 0.5

;---------------------[演出]
[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -4
freq = 95
phase = 95

;---------------------[ステート移行]
[state a]
type = changestate
trigger1 = animtime = 0
value = 264


;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・落下
[Statedef 264]
type    = A
movetype= H
physics = N
;velset = 0,0
sprpriority = 1

;---------------------[アニメーション]
[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = (name = "Date Masamune" || name = "Date Masamune")&& authorname = "Neat Unsou"
trigger9 = (name = "Mouri Motonari" || name = "Mouri Motonari")&& authorname = "Neat Unsou"
value = 563

;---------------------[速度]
[state a]
type = veladd
trigger1 = 1
y = 0.5

;---------------------[演出]
[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

;---------------------[ステート移行]
[state a] 
type = changeanim
triggerall = Vel Y > 0
triggerall = Pos Y >= 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = (name = "Date Masamune" || name = "Date Masamune")&& authorname = "Neat Unsou"
trigger9 = (name = "Mouri Motonari" || name = "Mouri Motonari")&& authorname = "Neat Unsou"
value = 5051

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
; 立ち3弱
[Statedef 270]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 270
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = pos Y >= 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = pos Y >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = pos Y >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = pos Y >= 0
trigger1 = abs(Vel X) <= 1
x = 0

[State 100, 2]
type = Veladd
trigger1 = AnimElem = 6
x = 8.5
y = -3.7


[State 100, 2]
type = Veladd
trigger1 = AnimElemTime(6) >= 0
y = 0.51

[State 100, 2]
type = StateTypeSet
trigger1 = AnimElemTime(6) = 0
statetype = A

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 4
trigger1 = random <= 300
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 4
value = 230,0

[State 900]
type = NotHitBy
trigger1 = time <= 9
value = SCA
time = 1

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimElemTime(6) > 0
trigger1 = pos Y >= 0
trigger2 = p2bodydist x <115
trigger2 = AnimElemTime(6) = 0
value = 271

;---------------------------------------------------------------------------
; 立ち3弱
[Statedef 271]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 271
sprpriority = 2

[State 193, 5]
type = PlaySnd
trigger1 = time = 0
value = 5100, 1

[State 193, 5]
type = EnvShake
trigger1 = time = 0
time = 5
freq = 60
ampl = -5

[State 100 , 0]
type = Explod
trigger1 = time = 0
anim = 6010
postype = p1
pos = 40,10
facing = -1
sprpriority = 8
bindtime = 1
ownpal = 1
scale = 0.5,0.5
ID = 6010

[State 100, 1]
type = Velset
trigger1 = time = 0
y = 0

[State 100, 1]
type = posset
trigger1 = time = 0
y = 0

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 10
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=20
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 2
value = 300,3

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElemTime(6) = 0
trigger2 = AnimElemTime(7) = 0
value = 1000,2

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -66-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelem = 2
attr = S, NA
animtype  = Diagup
damage    = ceil(96*fvar(6)*ifelse((var(29)&4),0.9,1)*ifelse((var(29)&8),0.95,1)), 0
priority = 4
hitflag = MAFD
guardflag = HA
pausetime = 15,15
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = low
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -4.2,-8.7
guard.velocity = -17
air.velocity = -4.2* fvar(14),-8.7
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 55
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(6*fvar(31)*fvar(6)),ceil(17*fvar(31)*fvar(6))
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelem = 2
attr = S, NA
animtype  = Diagup
damage    = 110, 0
priority = 7
hitflag = MAFD
guardflag = HA
pausetime = 15,30
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = low
ground.slidetime = 27+var(41)
ground.hittime  = 27+var(41)
ground.velocity = -4.2,-8.7
guard.velocity = -17
air.velocity = -4.2* fvar(14),-8.7
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(58*fvar(25))
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(115*fvar(31)*fvar(6)),ceil(37*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-35), -66-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-35), -66-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 8
trigger1 = random <= 200
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-35), -66-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1
[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0
[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
;吹き飛ばし攻撃・発動
[Statedef 290]
type    = S
movetype= I
physics = N
juggle  = 0
ctrl = 0
anim = 290
poweradd = 0
sprpriority = 1

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

;---------------------[変数]
[state a]
type = varset
trigger1 = time = 0
trigger1 = var(5) != 2
v = 5
value = 1

[state a]
type = varset
trigger1 = (enemynear,stateno = [555,558])||(enemynear,prevstateno = [555,558])
trigger1 = time = 0
v = 5
value = 2

[state a]
type = varset
trigger1 = prevstateno = 3900
trigger1 = time = 0
trigger1 = var(5) = 2
v = 5
value = 1

[state a]
type = varset
trigger1 = time = 74
v = 5
value = 2

[state a]
type = varset
trigger1 = time = 0
v = 49
value = ifelse(command = "c",1,2)
;---------------------[移動]
[State 100, 1]
type = Velset
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)||prevstateno=[100,103]
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975



[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0
;---------------------[演出]
[State a];
type = palfx
trigger1 = time = 74
time = 10
;add = 255,255,255
mul = 255,255,255
sinadd = 255,255,255,20
color = 255

;----------------------[ヘルパー]
[state a];溜めエフェクト
type = Helper
trigger1 = time >= 15
trigger1 = time%4 = 0
id = 6025
name = "tame"
pos = 0 , 0
postype = p1
stateno = 6025
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1


;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
triggerall = time >= 14
trigger1 = command != "holdS"&&var(49)=2
trigger1 = command != "holdZ"&&var(49)=2
trigger2 = command != "holdC"&&var(49)=1
trigger3 = var(58)
trigger3 = p2bodydist X < 100
trigger4 = var(58)
trigger4= inguarddist
value = 291

[State 200, 7]
type = ChangeState
triggerall = time >= 17
trigger1 = var(49)=0
trigger2 = time > 124
value = 291

;---------------------------------------------------------------------------
;吹き飛ばし攻撃・攻撃
[Statedef 291]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 291
poweradd = 0
sprpriority = 1


[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2), -60-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

;---------------------[効果音]
[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 3
value = 290,random%3
ignorehitpause = 1

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 3
value = 300,3
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=14
persistent = 0
ignorehitpause = 1

;---------------------[速度]
[State 100, 1]
type = Velset
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0

[state a]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = animelem = 3
trigger1 = var(5) = 1
attr = S, NA
damage = ceil(68*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
getpower = ceil(72*fvar(31)*fvar(6)),ceil(27*fvar(31)*fvar(6))
animtype = hard
guardflag = M
hitflag = MAF
priority = 5, Hit
pausetime = ifelse(var(5) = 1,14,15), ifelse(var(5) = 1,14,15)
sparkno = s-1
sparkxy = 0, 0
hitsound = s400, 2
guard.sparkno = S-1
down.bounce = 1
guardsound = s120, 1
ground.type = low
guard.hittime = 16
ground.slidetime = ifelse(var(5) = 1,17,20)
ground.hittime  = ifelse(var(5) = 1,17,20)
ground.velocity = -8,-6
fall.yvelocity = -1.8
air.type = high
air.velocity = -8,-6
air.hittime = ifelse(var(5) = 0,20,24)
fall = 1
fall.recover = 1
fall.recovertime = ceil(35*fvar(25))
yaccel = 0.5
ID = 291

[State 200, 1]
type = HitDef
trigger1 = animelem = 3
trigger1 = var(5) = 2
attr = S, NA
damage = ceil(60*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
getpower = ceil(72*fvar(31)*fvar(6)),ceil(27*fvar(31)*fvar(6))
animtype = hard
guardflag = N
hitflag = MAF
priority = 5, Hit
pausetime = ifelse(var(5) = 1,14,15), ifelse(var(5) = 1,14,15)
sparkno = s-1
sparkxy = 0, 0
hitsound = s400, 2
guard.sparkno = S-1
down.bounce = 1
guardsound = s120, 1
ground.type = low
ground.slidetime = ifelse(var(5) = 1,17,20)
ground.hittime  = ifelse(var(5) = 1,17,20)
ground.velocity = -8,-6
air.type = high
air.velocity = -8,-6
air.hittime = ifelse(var(5) = 0,20,24)
fall = 1
fall.recover = 1
fall.recovertime = ceil(39*fvar(25))
fall.yvelocity = -1.8
fall.envshake.time = 9
yaccel = 0.5
ID = 291

;---------------------[相手制御]
[state a]
type = targetstate
trigger1 = movehit
trigger1 = p2movetype = H
trigger1 = numtarget
trigger1 = (target,stateno = [555,558])||(target,prevstateno = [555,558])||var(5) = 2
trigger1 = !Target,Ishelper
value = 555
ignorehitpause = 1
persistent = 0

[state a]
type = targetstate
trigger1 = movehit
trigger1 = p2movetype = H
trigger1 = numtarget
trigger1 = (target,stateno = [550,553])||var(5) = 1
trigger1 = !Target,Ishelper
value = 550
ignorehitpause = 1
persistent = 0

;---------------------[ヘルパー]
[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = p2movetype = H
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-45), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[state 7000,]
type = varadd
trigger1 = movehit
fvar(30) = 0.02
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-45), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\\
;---------------------------------------------------------------------------
;ブーストダッシュ
[Statedef 3900]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 300
velset = ifelse(var(5)=1,9.5,12),0

[state 7000,]
type = varset
trigger1 = time=0
fvar(32) = 100
ignorehitpause = 1
[State 100, 1]
type = Velmul
trigger1 = var(5)=2
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.995

;---------------------[変数]
;---------------------[音]
[State 00]
type = PlaySnd
trigger1 = time = 0
value = 301, 0

[State 00]
type = PlaySnd
trigger1 = time%30 = 1
value = 50, 0

;---------------------[演出]
[State a];
type = palfx
trigger1 = time = 0
time = 10
;add = 255,255,255
mul = 255,255,255
sinadd = 255,255,255,20
color = 255

[State a]
type = AfterImage
trigger1 = 1
time = 24
trans = add1
timegap = 1
framegap = 3
length = 12
palbright = 0,0,0
palcontrast = 200,200,200
palpostbright = 0,0,0
paladd = 0,0,0
palmul = 0.7,0.7,0.7
persistent = 24
;---------------------[ヘルパー]
[state a];ブーストエフェクト
type = Helper
trigger1 = time = 0
id = 6030
name = "hit"
pos = 0 , -80
postype = p1
stateno = 6030
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

;---------------------[]
[State 00]
type = ChangeState
trigger1 = command = "holdup"
trigger1 = time <= 2
trigger1 = var(5)=1
value = 40
ctrl = 1

[State 00]
type = ChangeState
trigger1 = command = "holddown"
trigger1 = time = 30
value = 10
ctrl = 1

[State 00]
type = ChangeState
trigger1 = time = 30
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・ヒットストップ
[Statedef 550]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[state a]
type = turn
triggerall = time = 0
trigger1 = facing=1
trigger1 = GetHitVar(xvel) >0
trigger2 = facing=-1
trigger2 = GetHitVar(xvel) <0

[state a]
type = playerpush
trigger1 = 1
value = 0


[State 820, 1]
type = ChangeAnim2
Trigger1 = 1
value = 550

[state a]
type = changeanim
triggerall = 1
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = authorname="Neat Unsou"&&SelfAnimExist(563)
trigger9 = authorname="syouga"&&SelfAnimExist(563)
value = 560

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = changestate
trigger1 = HitShakeOver
value = 551

[State 1000, 0]
type = null;HitOverride
trigger1 = enemy,stateno != 291
attr = SCA,NA,SA,HA
slot = 0
stateno = 550
time = 1


;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・吹き飛び
[Statedef 551]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

;---------------------[速度]
[state a]
type = velset
trigger1 = time = 0
x = -10.5
y = -7.2

[state a]
type = velset
trigger1 = time = 1
trigger1 = GetHitVar(chainid) = 1000
x = -12
y = -6.0

[state a]
type = veladd
trigger1 = 1
y = 0.4

;---------------------[アニメーション]
[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 550

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = (name = "Date Masamune" || name = "Date Masamune")&& authorname = "Neat Unsou"
trigger8 = authorname="Neat Unsou"&&SelfAnimExist(563)
trigger9 = authorname="syouga"&&SelfAnimExist(563)
value = 560


;---------------------[演出]
[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = playerpush
trigger1 = 1
value = 0

;---------------------[ステート移行]
[state a]
type = changestate
trigger1 = BackEdgeDist <= 10
trigger2 = time = 200
trigger3 = frontEdgeDist <= 10
value = 552

[state a]
type = selfstate
triggerall = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

[State 1000, 0]
type = null;HitOverride
trigger1 = 1;enemy,stateno != 291
attr = SCA,NA,SA,HA
stateno = 550
time = 1


;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・壁ヒット
[Statedef 552]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 557]
type=Lifeadd
trigger1 = !time
value=-3
persistent = 0

;---------------------[アニメーション]
[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 551

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = authorname="Neat Unsou"&&SelfAnimExist(563)
trigger9 = authorname="syouga"&&SelfAnimExist(563)
value = 562

;---------------------[速度]
[state a]
type = posadd
trigger1 = time = 0
y = -15

[state a]
type = velset
trigger1 = time = 0
x = 1.2
y = -6.5

[state a]
type = velset
trigger1 = time = 0
trigger1 = GetHitVar(chainid) = 1000
x = 1.2
y = -3.5

[state a]
type = veladd
trigger1 = 1
y = 0.5

;---------------------[演出]
[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -4
freq = 95
phase = 95

;---------------------[ステート移行]
[state a]
type = changestate
trigger1 = animtime = 0
value = 553


;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・落下
[Statedef 553]
type    = A
movetype= H
physics = N
;velset = 0,0
sprpriority = 1

;---------------------[アニメーション]
[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 5050, 4] ;Recover near ground
type = SelfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = time > 1
triggerall = CanRecover
trigger1 = Command = "recover"
value = 5210 ;HITFALL_RECOVER

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
ttrigger8 = authorname="Neat Unsou"&&SelfAnimExist(563)
trigger9 = authorname="syouga"&&SelfAnimExist(563)
value = 563

;---------------------[速度]
[state a]
type = veladd
trigger1 = 1
y = 0.5

;---------------------[演出]
[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

;---------------------[ステート移行]
[state a] 
type = changeanim
triggerall = Vel Y > 0
triggerall = Pos Y >= 20
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = authorname="Neat Unsou"&&SelfAnimExist(563)
trigger9 = authorname="syouga"&&SelfAnimExist(563)
value = 5051

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 20
value = 5100


;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・壁張り付き・ヒットストップ
[Statedef 555]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[state a]
type = turn
triggerall = time = 0
trigger1 = facing=1
trigger1 = GetHitVar(xvel) >0
trigger2 = facing=-1
trigger2 = GetHitVar(xvel) <0

[state a]
type = playerpush
trigger1 = 1
value = 0

[state a]
type = velset
trigger1 = pos y <= -10
y = 0.0

[State 820, 1]
type = ChangeAnim2
Trigger1 = 1
value = 550

[state a]
type = changeanim
triggerall = 1
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = authorname="Neat Unsou"&&SelfAnimExist(563)
trigger9 = authorname="syouga"&&SelfAnimExist(563)
value = 560

[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = changestate
trigger1 = HitShakeOver
value = 556

;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・壁張り付き・吹き飛び
[Statedef 556]
type    = A
movetype= H
physics = N
sprpriority = 1

;---------------------[速度]
[state a]
type = velset
trigger1 = time = 0
x = -12.5

[state a]
type = velset
trigger1 = time = 0
trigger1 = GetHitVar(chainid) = 2000
y = 5.0

[state a]
type = velset
trigger1 = pos y <= -10
y = 0.0

;---------------------[アニメーション]
[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5012

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = authorname="Neat Unsou"&&SelfAnimExist(563)
trigger9 = authorname="syouga"&&SelfAnimExist(563)
value = 560


;---------------------[演出]
[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[state a]
type = playerpush
trigger1 = 1
value = 0

;---------------------[ステート移行]
[state a]
type = changestate
trigger1 = BackEdgeDist < 5
trigger2 = time >= 200
value = 557

;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・壁張り付き・壁ヒット
[Statedef 557]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 1

[State 557]
type=Lifeadd
trigger1 = !time
value=-4
persistent = 0
absolute = 1

;---------------------[アニメーション]
[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 551

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = authorname="Neat Unsou"&&SelfAnimExist(563)
trigger9 = authorname="syouga"&&SelfAnimExist(563)
value = 562

;---------------------[速度]
[state a]
type = velset
trigger1 = time = 0
y = 0

[state a]
type = posadd
trigger1 = time=0
trigger1 = p2dist x<=0
persistent = 0
x = 1
;---------------------[演出]
[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

[State 1020, 4]
type = EnvShake
trigger1 = time = 0
time = 10
ampl = -4
freq = 95
phase = 95

;---------------------[ステート移行]
[state a]
type = changestate
trigger1 = animtime = 0
trigger2 = CanRecover
trigger2 = time>gethitvar(fall.recovertime)-10
value = 558

[state a]
type = changestate
trigger1 = animtime = 0
value = 558

;---------------------------------------------------------------------------
;(ENEMY)吹き飛ばし攻撃・壁張り付き・落下
[Statedef 558]
type    = A
movetype= H
physics = N
;velset = 0,0
sprpriority = 1

;---------------------[アニメーション]
[State 820, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 5050

[State 5050, 4] ;Recover near ground
type = selfState
triggerall = Vel Y > 0
triggerall = alive
triggerall = time > 10
triggerall = CanRecover
trigger1 = Command = "recover"
value = 5210 ;HITFALL_RECOVER

[state a]
type = changeanim
triggerall = time = 0
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = authorname="Neat Unsou"&&SelfAnimExist(563)
trigger9 = authorname="syouga"&&SelfAnimExist(563)
value = 563

;---------------------[速度]
[state a]
type = veladd
trigger1 = time >= 3
y = 0.5

;---------------------[演出]
[State 1];カメラ固定
type = screenbound
trigger1 = 1
value = 1
movecamera = 1

;---------------------[ステート移行]
[state a] 
type = changeanim
triggerall = Vel Y > 0
triggerall = Pos Y >= 20
trigger1 = (name = "REI" || name = "REI")&& authorname = "ahuron"
trigger2 = (name = "JAGI" || name = "JAGI")&& authorname = "ahuron"
trigger3 = (name = "JUDA" || name = "JUDA")&& authorname = "ahuron"
trigger4 = (name = "SHIN" || name = "SHIN")&& authorname = "ahuron"
trigger5 = (name = "THOUTHER" || name = "THOUTHER")&& authorname = "ahuron"
trigger6 = (name = "Mr.HEART" || name = "Mr.HEART")&& authorname = "ahuron"
trigger7 = (name = "Keiji" || name = "Keiji")&& authorname = "ahuron"
trigger8 = authorname="Neat Unsou"&&SelfAnimExist(563)
trigger9 = authorname="syouga"&&SelfAnimExist(563)
value = 5051

[State 821, 3] 
type = SelfState
triggerall = Vel Y > 0
trigger1 = Pos Y >= 20
value = 5100

;---------------------------------------------------------------------------

[Statedef 400]
type    = C
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 400
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=4
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = random<= 400
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 3
value = 300,0
ignorehitpause = 1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -25-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 3
trigger1 = var(33) = 0
attr = S, NA
animtype  = Light
damage    = ceil(28*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
hitflag = MAFD
guardflag = L
pausetime = 11,11
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 10
guardsound = s120, 4
ground.type = low
guard.hittime = 12
ground.slidetime = 10+var(41)
ground.hittime  = 10+var(41)
ground.velocity = -4.5* fvar(14)
air.velocity = ifelse(p2statetype = L,-9,-3.1*fvar(14)),ifelse(p2statetype = L,-.5,-5.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-4.5*fvar(14))
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(21*fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
ID = 200

[State 240, 6] ;カウンター
type = HitDef
trigger1 = animelem = 3
trigger1 = var(33) >= 1
attr = S, NA
animtype  = Light
damage    = 32, 0
hitflag = MAFD
guardflag = L
pausetime = 11,22
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 10
guardsound = s120, 4
ground.type = low
ground.slidetime = 15+var(41)
ground.hittime  = 15+var(41)
ground.velocity = -4.5*fvar(14)
air.velocity = -3*fvar(14),-5.2
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(34*fvar(25))

fall.envshake.time = 9
air.fall = 1
air.hittime  = 31
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200


[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-35), -25-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7020
name = "hit"
pos = Ceil(P2Dist X/2-35), -25-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; しゃがみ中

[Statedef 410]
type    = C
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 410
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 3
trigger1 = random <= 600
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 4
value = 300,2
ignorehitpause = 1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-20), -70-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 4
trigger1 = var(33) = 0
attr = S, NA
animtype  = medium
damage    = ceil(60*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
priority = 3
hitflag = MAFD
guardflag = M
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 4
ground.type = low
guard.hittime = 15
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -7.5* fvar(14)
air.velocity = ifelse(p2statetype = L,-9,-2.7*fvar(14)),ifelse(p2statetype = L,-.5,-5.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-7.5*fvar(14))
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(29*fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51*fvar(15)
getpower = ceil(50*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
ID = 200

[State 240, 6] ;カウンター
type = HitDef
trigger1 = animelem = 4
trigger1 = var(33) >= 1
attr = S, NA
animtype  = up
damage    = 67, 0
priority = 7
hitflag = MAFD
guardflag = M
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 4
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = 0,-8;-7.5*fvar(14)
air.velocity = 0,-8;-3.7*fvar(14),-5.2*fvar(15)
down.velocity = -13.2,0
fall.recover = 0
fall.yvelocity = -3.2

fall.envshake.time = 9
fall.recovertime = ceil(37*fvar(25))
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(80*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1


[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 5
trigger1 = random <= 400
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1


[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 410]
type = Width
trigger1 = 1
edge = 25,0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;---------------------------------------------------------------------------
; しゃがみ強
[Statedef 430]
type    = C
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 430
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0

[State 100, 1]
type = Veladd
trigger1 = time = 10
x = 1.2
[State 100, 1]
type = Veladd
trigger1 = time = 15
x = -0.4


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=14
persistent = 0
ignorehitpause = 1


[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 4
trigger1 = random <= 500
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 8
value = 300,3

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -10-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelem = 7
attr = S, NA
animtype  = Hard
damage    = ceil(60*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
priority = 3
hitflag = MAFD
guardflag = L
pausetime = 15,15
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = low
guard.hittime = 12
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -2.2,-4.8
guard.velocity = -10
air.velocity = ifelse(p2statetype = L,-9,-2.2*fvar(14)),ifelse(p2statetype = L,-.5,-4.8)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2.2*fvar(14))
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(39*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(70*fvar(31)*fvar(6)),ceil(25*fvar(31)*fvar(6))
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelem = 7
attr = S, NA
animtype  = Hard
damage    = 67, 0
priority = 3
hitflag = MAFD
guardflag = L
pausetime = 15,30
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = low
ground.slidetime = 27+var(41)
ground.hittime  = 27+var(41)
ground.velocity = -2.2,-4.8
guard.velocity = -10
air.velocity = -2.2* fvar(14),-4.8
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(58*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(100*fvar(31)*fvar(6)),ceil(40*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-35), -10-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 13
trigger1 = random <= 200
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-35), -10-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
; ジャンプ弱パンチ
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd = 0
ctrl = 0
anim = 600
sprpriority = 2

[State 54, 0]
type = VarSet
trigger1 = var(2) = 0
var(2) = 1

[State 100, 1]
type = Veladd
trigger1 = prevstateno = 101
trigger1 = time = 0
X = -4
Persistent = 0
ignorehitpause = 1

[State 100, 1]
type = Velset
trigger1 = prevstateno = 102
trigger1 = time = 0
x=-3
Persistent = 0
ignorehitpause = 1

[State 50, 5];エリアル攻撃時重力増加
type = veladd
trigger1 = var(8)
y = 0.06
ignorehitpause = 0

[State 100, 1]
type = Velset
trigger1 = var(8)
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = enemynear,stateno!=[555,557]
trigger1 = enemynear,prevstateno!=[555,557]
Y = -5
Persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=4
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 3
trigger1 = random <= 400
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 2
value = 300,0
ignorehitpause = 1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -76-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 4
trigger1 = var(33) = 0
attr = A, NA
animtype  = Light
damage    = ceil(24*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
hitflag = MAFD
guardflag = HA
pausetime = ifelse(var(8),11,12),ifelse(var(8),10,12)
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 10
guardsound = s120, 4
ground.type = High
ground.slidetime = 12+var(41)
ground.hittime  = 12+var(41)
ground.velocity = -4.5* fvar(14)
air.velocity = -3.1* fvar(14),ifelse(var(8),-5*(1-(helper(10000),var(10)/13)*0.3),-6.5)
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(22*fvar(25))
fall.envshake.time = 9
air.fall = 1
yaccel = .51*ifelse(var(8),.9055,fvar(15))
getpower = ceil(40*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
ground.cornerpush.veloff = ifelse(var(8),0,-3.1* fvar(14))
ID = 200

[State 240, 6] ;カウンター
type = HitDef
trigger1 = animelem = 4
trigger1 = var(33) >= 1
attr = A, NA
animtype  = Light
damage    = 27, 0
hitflag = MAFD
guardflag = HA
pausetime = ifelse(var(8),11,12),24
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 10
guardsound = s120, 4
ground.type = High
ground.slidetime = 18+var(41)
ground.hittime  = 18+var(41)
ground.velocity = -4.5*fvar(14)
air.velocity = -3.1* fvar(14),ifelse(var(8),-5.2,-6.5)
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(35*fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51*ifelse(var(8),.9055,fvar(15))
getpower = ceil(40*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ground.cornerpush.veloff = ifelse(var(8),0,-3.1* fvar(14))
ID = 200

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-45), -75-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1


[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 5
trigger1 = random <= 400
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7020
name = "hit"
pos = Ceil(P2Dist X/2-45), -75-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
; ジャンプ中

[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 610
sprpriority = 2

[State 54, 0]
type = VarSet
trigger1 = var(2) = 0
var(2) = 1

[State 100, 1]
type = Veladd
trigger1 = prevstateno = 101
trigger1 = time = 0
X = -4
Persistent = 0
ignorehitpause = 1

[State 100, 1]
type = Velset
trigger1 = prevstateno = 102
trigger1 = time = 0
x=-3
Persistent = 0
ignorehitpause = 1

[State 50, 5];エリアル攻撃時重力増加
type = veladd
trigger1 = var(8)
y = 0.06
ignorehitpause = 0

[State 100, 1]
type = Velset
trigger1 = var(8)
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = enemynear,stateno!=[555,557]
trigger1 = enemynear,prevstateno!=[555,557]
Y = -5
Persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1


[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = random <= 400
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 2
value = 300,3
ignorehitpause = 1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-35), -26-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelemtime(2) >= 0
trigger1 = animelemtime(4) < 0
attr = A, NA
animtype  = medium
damage    = ceil(56*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
hitflag = MAF
guardflag = HA
pausetime = ifelse(var(8),11,13),ifelse(var(8),10,13)
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 4
ground.type = High
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -5.5* fvar(14)
air.velocity = -3.4* fvar(14),ifelse(var(8),-5*(1-(helper(10000),var(11)/13)*0.3),-6.5)
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(27*fvar(25))
fall.envshake.time = 9
air.fall = 1
yaccel = .51*ifelse(var(8),.9055,fvar(15))
getpower = ceil(50*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
ground.cornerpush.veloff = ifelse(var(8),0,-3.4* fvar(14))
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelemtime(2) >= 0
trigger1 = animelemtime(4) < 0
attr = A, NA
animtype  = medium
damage    = 62, 0
hitflag = MAF
guardflag = HA
pausetime = ifelse(var(8),11,13),26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 4
ground.type = High
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -5.5*fvar(14)
air.velocity = -3.4* fvar(14),ifelse(var(8),-5,-6.5)
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(41*fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51*ifelse(var(8),.9055,fvar(15))
getpower = ceil(60*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ground.cornerpush.veloff = ifelse(var(8),0,-3.4* fvar(14))
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -20-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 5
trigger1 = random <= 400
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-25), -20-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; ジャンプ強

[Statedef 630]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 630
sprpriority = 2

[State 54, 0]
type = VarSet
trigger1 = var(2) = 0
var(2) = 1

[State 100, 1]
type = Veladd
trigger1 = prevstateno = 101
trigger1 = time = 0
X = -4
Persistent = 0
ignorehitpause = 1


[State 100, 1]
type = Velset
trigger1 = prevstateno = 102
trigger1 = time = 0
x=-3
Persistent = 0
ignorehitpause = 1

[State 50, 5];エリアル攻撃時重力増加
type = veladd
trigger1 = var(8)
y = 0.06
ignorehitpause = 0

[State 100, 1]
type = Velset
trigger1 = var(8)
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = enemynear,stateno!=[555,557]
trigger1 = enemynear,prevstateno!=[555,557]
Y = -5
Persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=14
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 4
trigger1 = random <= 400
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 5
value = 300,2
ignorehitpause = 1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2), -26-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelem = 6
attr = A, NA
animtype  = hard
damage    = ceil(70*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
hitflag = MAF
guardflag = HA
pausetime = ifelse(var(8),11,14),ifelse(var(8),10,14)
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 3
ground.type = low
ground.slidetime = 17+var(41)
ground.hittime  = 17+var(41)
ground.velocity = -6.5* fvar(14)
air.velocity = -4.1* fvar(14),ifelse(var(8),-5*(1-(helper(10000),var(12)/15)*0.3),-6.5)
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 25
fall.envshake.time = 9
air.fall = 1
yaccel = .51*ifelse(var(8),.9055,fvar(15))
getpower = ceil(60*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
ground.cornerpush.veloff = ifelse(var(8),0,-4.1* fvar(14))
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelem = 6
attr = A, NA
animtype  = hard
damage    = 78, 0
hitflag = MAF
guardflag = HA
pausetime = ifelse(var(8),11,14),24
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 3
ground.type = low
ground.slidetime = 24+var(41)
ground.hittime  = 24+var(41)
ground.velocity = -6.5*fvar(14)
air.velocity = -4.1* fvar(14),ifelse(var(8),-5.2,-6.5)
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(41*fvar(25))
fall.envshake.time = 9
air.fall = 1
yaccel = .51*ifelse(var(8),.9055,fvar(15))
getpower = ceil(100*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ground.cornerpush.veloff = ifelse(var(8),0,-4.1* fvar(14))
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -30-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 8
trigger1 = random <= 400
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-25), -30-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1


;---------------------------------------------------------------------------
; ジャンプ2中
[Statedef 660]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 660
sprpriority = 2

[State 54, 0]
type = VarSet
trigger1 = var(2) = 0
var(2) = 1

[State 100, 1]
type = Veladd
trigger1 = prevstateno = 101
trigger1 = time = 0
X = -4
Persistent = 0
ignorehitpause = 1

[State 100, 1]
type = Velset
trigger1 = prevstateno = 102
trigger1 = time = 0
x=-3
Persistent = 0
ignorehitpause = 1

[State 50, 5];エリアル攻撃時重力増加
type = veladd
trigger1 = var(8)
y = 0.06
ignorehitpause = 0

[State 100, 1]
type = Velset
trigger1 = var(8)
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = enemynear,stateno!=[555,557]
trigger1 = enemynear,prevstateno!=[555,557]
Y = -5.2
Persistent = 0
ignorehitpause = 1

[State 100, 1]
type = Veladd
trigger1 = animelem =8
Y = -7.6
Persistent = 0
ignorehitpause = 1



[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=10
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 4
trigger1 = random <= 400
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 7
value = 300,3
ignorehitpause = 1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -36-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelem = 8
attr = A, NA
animtype  = hard
damage    = ceil(66*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
hitflag = MAF
guardflag = HA
pausetime = ifelse(var(8),11,14),ifelse(var(8),10,14)
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 3
guardsound = s120, 3
ground.type = low
ground.slidetime = 17+var(41)
ground.hittime  = 17+var(41)
ground.velocity = 2.5,-9.2
air.velocity = 4.5+(-2*fvar(14)),-9.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(34*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(60*fvar(31)*fvar(6)),ceil(25*fvar(31)*fvar(6))
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelem = 8
attr = A, NA
animtype  = hard
damage    = 72, 0
hitflag = MAF
guardflag = HA
pausetime = 12,24
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 3
guardsound = s120, 3
ground.type = low
ground.slidetime = 24+var(41)
ground.hittime  = 24+var(41)
ground.velocity = 2.5,-9.2
air.velocity = 2.5* fvar(14),-9.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(49*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(90*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -30-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 10
trigger1 = random <= 400
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-25), -30-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1


;---------------------------------------------------------------------------
; ジャンプ2弱
[Statedef 670]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 670
sprpriority = 2

[State 54, 0]
type = VarSet
trigger1 = var(2) = 0
var(2) = 1

[State 100, 1]
type = Veladd
trigger1 = prevstateno = 101
trigger1 = time = 0
X = -4
Persistent = 0
ignorehitpause = 1

[State 100, 1]
type = Velset
trigger1 = prevstateno = 102
trigger1 = time = 0
x=-3
Persistent = 0
ignorehitpause = 1

[State 50, 5];エリアル攻撃時重力増加
type = veladd
trigger1 = var(8)
y = 0.06
ignorehitpause = 0

[State 100, 1]
type = Velset
trigger1 = var(8)
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = enemynear,stateno!=[555,557]
trigger1 = enemynear,prevstateno!=[555,557]
Y = -5.2
Persistent = 0
ignorehitpause = 1

[State 100, 1]
type = Veladd
trigger1 = animelem =4
Y = -4.6
Persistent = 0
ignorehitpause = 1



[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=11
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = random <= 400
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 4
value = 300,3
ignorehitpause = 1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelem = 4
attr = A, NA
animtype  = hard
damage    = ceil(66*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
hitflag = MAF
guardflag = HA
pausetime = ifelse(var(8),11,14),ifelse(var(8),10,14)
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 3
guardsound = s120, 3
ground.type = low
ground.slidetime = 17+var(41)
ground.hittime  = 17+var(41)
ground.velocity = -3.9,-8.2
air.velocity = -3.9* fvar(14),-8.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(34*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(60*fvar(31)*fvar(6)),ceil(26*fvar(31)*fvar(6))
ground.cornerpush.veloff = ifelse(var(8),0,-3.9* fvar(14))
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelem = 4
attr = A, NA
animtype  = hard
damage    = 72, 0
hitflag = MAF
guardflag = HA
pausetime = 14,28
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 3
guardsound = s120, 3
ground.type = low
ground.slidetime = 24+var(41)
ground.hittime  = 24+var(41)
ground.velocity = -3.9,-8.2
air.velocity = -3.9* fvar(14),-8.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(51*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(90*fvar(31)*fvar(6)),ceil(26*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ground.cornerpush.veloff = ifelse(var(8),0,-3.9* fvar(14))
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 7
trigger1 = random <= 400
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
; エリアルスパイク
[Statedef 650]
type    = A
movetype= A
physics = A
juggle  = 0
poweradd= 0
ctrl = 0
anim = 650
sprpriority = 2

[State 50, 5];重力
type = velmul
triggerall = !time
triggerall = var(8)
trigger1 = enemynear,stateno=[555,557]
trigger2 = enemynear,prevstateno=[555,557]
y =0.6
ignorehitpause = 0

[State 50, 5];エリアル攻撃時重力増加
type = veladd
trigger1 = var(8)
y = 0.06
ignorehitpause = 0

[State 100, 1]
type = Velset
trigger1 = var(8)
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = enemynear,stateno!=[555,557]
trigger1 = enemynear,prevstateno!=[555,557]
Y = -5.2
Persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=14
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 4
trigger1 = random <= 400
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 4
value = 300,3
ignorehitpause = 1

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 4
value = 300,4
ignorehitpause = 1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -46-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelem = 4
attr = S, NA
animtype  = hard
damage    = ceil(17*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
hitflag = MAF
guardflag = HA
pausetime = ifelse(var(8),11,14),ifelse(var(8),10,14)
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 3
ground.type = low
ground.slidetime = 17+var(41)
ground.hittime  = 17+var(41)
ground.velocity = -10.5* fvar(14)
air.velocity = -4.1* fvar(14),14.2
fall.recover = 0
fall.recovertime = ceil(34*fvar(25))
fall.yvelocity = -5
fall.envshake.time = 9
air.fall = 1
yaccel = .51*fvar(15)
getpower = 40, 20
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelem = 4
attr = S, NA
animtype  = hard
damage    = 20, 0
hitflag = MAF
guardflag = HA
pausetime = 12,24
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 3
ground.type = low
ground.slidetime = 24+var(41)
ground.hittime  = 24+var(41)
ground.velocity = -10.5*fvar(14)
air.velocity = -4.1* fvar(14),14.2
fall.recover = 0
fall.recovertime = ceil(49*fvar(25))
fall.yvelocity = -5
fall.envshake.time = 9
air.fall = 1
yaccel = .51*fvar(15)
getpower = 40, 20
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -45-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[state 7000,]
type = varadd
trigger1 = movehit
trigger1 = numtarget(200)
fvar(30) = 0.02*fvar(6)
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 5
trigger1 = random <= 400
value = 200,3+random%3
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-25), -46-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
; デッドアングルガーキャン
[Statedef 910]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 900
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 2030,1]
type = poweradd
trigger1 = time = 0
value = -1000

[state 7000,]
type = varset
trigger1 = time=0
fvar(32) = 419
ignorehitpause = 1

[State 900]
type = NotHitBy
trigger1 = time <= 14
value = SCA,NA,SA,HA,NP,SP,HP
time = 1

[State 191, Snd 1];GC
type = PlaySnd
trigger1 = time = 0
value = 299,1

[State --4]
type = palfx
trigger1 = time = 0
time = 10
mul = 255,255,255
sinadd = 255,255,255,13
color = 255

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1
[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=16
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 8
value = 300,0
ignorehitpause = 1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -76-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelem = 8
attr = S, NA
animtype  = Hard
damage    = ceil(40*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
priority = 3
hitflag = MAF
guardflag = HA
pausetime = 15,15
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = low
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -10.2,-1
guard.velocity = -10
air.velocity = -10.2* fvar(14),-1
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(39*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = 40, 20
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelem = 8
attr = S, NA
animtype  = Hard
damage    = 45, 0
priority = 3
hitflag = MAF
guardflag = HA
pausetime = 15,30
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = low
ground.slidetime = 27+var(41)
ground.hittime  = 27+var(41)
ground.velocity = -10.2,-1
guard.velocity = -10
air.velocity = -10.2* fvar(14),-1
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(58*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = 40, 20
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-35), -76-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-35), -76-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1
[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 440, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 投げ
[Statedef 800]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 802
sprpriority = 2

[State 800]
type = HitDef
Trigger1 = Animelem = 4
attr = S, NT          ;攻撃属性: これは Standing, Normal Throw（立ち通常投げ）
hitflag = M-          ;相手がやられ状態ではない地上の時でしか掴む事が出来ません
priority = 1, Miss    ;投げなので優先度を低く、かつmissかdodgeの属性でなければなりません
sparkno = -1          ;-1にすればヒットスパークが表示しなくなります
sprpriority = 1       ;攻撃が当たった時に画像表示優先度を1に出来ます
p1facing = ifelse(command = "holdback", -1, 1) ;攻撃が当たった時の自分の向き ★６
p2facing = -1 ;攻撃が当たった時の相手の向き
p1stateno = 810       ;自分のステート変更
p2stateno = 820       ;相手を制御するステートに行かせる
guard.dist = 0        ;相手がガード状態に移行出来る距離（現在は0なのでガード不可）
fall = 1              ;1にすれば相手がダウン状態になる

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(12) < 0
edge = 90,0

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
[Statedef 810]
type    = S
movetype= A
physics = N
anim = 800
poweradd = 160
sprpriority = 0

[State 810, 掴んだ音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = 1, 1

[State 810, 放り投げた時の音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 7
value = 800, 0

[State 810, 掴んだ相手の位置１]
type = TargetBind
trigger1 = AnimElemTime(4) < 0
pos = 100, 0

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 110,0 ;前方の画面端を押す幅のみを変えています

[State 810, 掴んだ相手の体力ゲージの増減]
type = TargetLifeAdd
trigger1 = AnimElem = 4
value = -100
absolute = 1

[State 810, 掴んだ相手のステート変更]
type = TargetState
trigger1 = AnimElem = 4
value = 821

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = animelem = 4
value = 400,5
persistent = 0
ignorehitpause = 1

[State 191, Snd 1]
type = PlaySnd
trigger1 = animelem = 4
value = 850,0
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[state a];ヒットエフェクト
type = Helper
trigger1 = animelem = 4
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-45), -76-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-45), -76-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[state 7000,]
type = varadd
trigger1 = AnimTime = 0
fvar(30) = 0.01
persistent = 0

[State 810, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 相手側の投げられモーション１
; CNS レベル: 中級
;
; これはカンフーマンの投げ掴みステートのHitDefで移行した、相手側を制御しているステートです。
; ここで重要なのは「ChangeAnim2」のステートコントローラを使用している事です。
; 通常Statedefの下に置くanimやChangeAnimは「そのステートを所有するキャラのairファイル」からアニメを呼び出しますが、
; このコントローラを使うと「制御した側のキャラのairファイル」で相手のアニメーションを設定する事が出来ます。
; 「kfm.air」の[Begin Action 820]に追加の説明文もあります。

[Statedef 820]
type    = A
movetype= H
physics = N
velset = 0,0
sprpriority = 2

[State 820, 制御した相手のアニメ変更]
type = ChangeAnim2
Trigger1 = Time = 0
value = 820

[State 810, ステート変更]
type = SelfState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; 相手側の投げられモーション２
; CNS レベル: 中級
;
; このステートは相手が放り投げられた後に地面に落ちるまでの動作です。
; 着地した時やcmdファイルにある"recovery"のコマンドを相手が入力した時に、
;「SelfState」のステートコントローラで相手の制御を解除し、コントロールを戻させています。

[Statedef 821]
type    = A
movetype= H
physics = N
velset = 6.1,-8.8
poweradd = 80
anim = 5050

[State 821, 速度加算]
type = VelAdd
Trigger1 = 1
y = .5

[State 821, 制御解除して相手のステートに戻す]
type = SelfState
trigger1 = time >= 6
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100 ;common1.cns参照


;---------------------------------------------------------------------------------------
;空中投げ
[Statedef 860]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 861
sprpriority = 2

[State 850, 1] ;攻撃予約
type = HitDef
Trigger1 = animelem = 2
attr = A, NT						;空中通常投げ
hitflag = A						;空中の相手のみ
priority = 1, Miss					;優先度最低で相打ちになった場合攻撃は当たらない
sparkno = -1						;hitスパークを表示しない
sprpriority = 1 					;hitした場合自分を手前に表示
p1facing = ifelse (command = "holdback", -1, 1)	;hitし前キーが押されていた場合そのままの向きで
							;押されていない場合自分の向きを反転させる
p2facing = 1						;hitした場合相手を自分の向きと逆方向を必ず向くようにする
p1stateno = 861					;hitした場合自分をstate810へ
p2stateno = 870					;hitした場合相手を「自分」のstate820へ
guard.dist = 0					;相手がガードモーションにならないようにする
fall = 1						;相手をふっとび状態にする


[State 800, 2] ;終了
type = ChangeState
Trigger1 = AnimTime = 0
value = 50
ctrl = 1
;---------------------------------------------------------------------------
;投げが当たった場合（自分）
[Statedef 861]
type    = A
movetype= A
physics = N
velset = 0, 0
anim = 860
poweradd = 160

[state 7000,]
type = varadd
trigger1 = AnimTime = 0
fvar(30) = 0.5
persistent = 0

[State 810, 0] ;音
type = PlaySnd
trigger1 = time = 0
value = 400, 0

[State 810, 0] ;音
type = PlaySnd
trigger1 = AnimElem = 7
trigger2 = AnimElem = 13
value = 400, 3

[State 810, 0] ;音
type = PlaySnd
trigger1 = AnimElem = 21
value = 400, 4

[State 810, Bind 1] ;相手を自分から一定距離に固定
type = TargetBind
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(22) < 0
pos = 70, -8

[State 810, Width 2-11] ;画面端から押し返される幅を変更する
type = Width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(10) < 0
edge = 100, 0

[State 810, Hurt 11] ;相手のlifeを減らす
type = TargetLifeAdd
trigger1 = AnimElem = 13
trigger2 = AnimElem = 21
value = -30
kill = 0

[State 810, Hurt 11]
type = TargetLifeAdd
trigger1 = AnimElem = 7
value = -29

[state a];ヒットエフェクト
type = Helper
trigger1 = AnimElem = 7
trigger2 = AnimElem = 13
trigger3 = AnimElem = 21
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-14), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[state a];ヒットエフェクト
type = Helper
trigger1 = AnimElem = 13
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-14), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[state a];ヒットエフェクト
type = Helper
trigger1 = AnimElem = 21
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-14), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
[State 810, Throw 11] ;相手のstateを変更（自分のstate）
type = TargetState
trigger1 = AnimElem = 22
value = 871

[State 810, State End] ;終了
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;投げられている相手（つかまれている状態）
[Statedef 870]
type    = A
movetype= H
physics = N
velset = 0,0

[State 820, 1] ;自分の設定したアニメに変更
type = ChangeAnim2
Trigger1 = Time = 0
value = 870

[State 820, 1]
type = posadd
Trigger1 = Time >= 25
Trigger1 = Time%10 = 0
X = 3

[State 820, 1]
type = posadd
Trigger1 = Time >= 25
Trigger1 = Time%10 = 5
X = -3

[State 810, State End] ;終了
type = ChangeState
trigger1 = Time = 500
value = 871

;---------------------------------------------------------------------------
;投げられている相手（空中へ投げられた状態）
[Statedef 871]
type    = A
movetype= H
physics = N
velset = 0,0

[State 821, 1] 
type = posadd
Trigger1 = time = 0
y = 70

[State 821, 1] 
type = Velset
Trigger1 = time = 0
x = -3.2
y = 13

[State 821, 1] ;重力
type = VelAdd
Trigger1 = time >= 0
y = .51

[State 852 , 1]
type = ChangeAnim
trigger1 = 1
value = 5050

[State 821, 2] 
type = SelfState
trigger1 = time >= 1
trigger1 = Vel Y > 0
trigger1 = Pos Y >= -10
value = 5100 ;Hit ground

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
; グレイヴシュート
[Statedef 850]
type    = S
movetype= A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
anim = 850
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0


[State 200, 0];コンボ数加算
type = Varadd
trigger1=numtarget
trigger1=movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=14
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 6
trigger1 = random <= 800
value = 850,0
channel = 2
lowpriority = 1

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 6
value = 300,3

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-25), -66-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
triggerall = var(33) = 0
trigger1 = animelem = 6
attr = S, NA
animtype  = Diagup
damage    = ceil(65*fvar(6)*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.85,1)), 0
priority = 3
hitflag = MAFD
guardflag = M
pausetime = 14,14
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = hard
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = 0,-10.45
guard.velocity = -7
air.velocity = ifelse(p2statetype = L,-9,0*fvar(14)),ifelse(p2statetype = L,-.5,-10)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,0)
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 38

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(90*fvar(31)*fvar(6)),ceil(60*fvar(31)*fvar(6))
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
triggerall = var(33) >= 1
trigger1 = animelem = 6
attr = S, NA
animtype  = Diagup
damage    = 72, 0
priority = 3
hitflag = MAFD
guardflag = M
pausetime = 14,14
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = hard
ground.slidetime = 27+var(41)
ground.hittime  = 27+var(41)
ground.velocity = 0,-10.45
guard.velocity = -10
air.velocity = ifelse(p2statetype = L,-9,-0*fvar(14)),ifelse(p2statetype = L,-.5,-10)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,0)
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(51*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(210*fvar(31)*fvar(6)),ceil(60*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -66-Ceil(P2BodyDist Y)
postype = p2
stateno = 7003
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[state 7000,]
type = varadd
trigger1 = movehit
fvar(30) = 0.5
persistent = 0

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7021
name = "hit"
pos = Ceil(P2Dist X/2-25), -66-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1

[State var]
Type = varset
Trigger1 = MoveHit
trigger1 = numtarget(200)
var(8) = 1
IgNoreHitPause = 1

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 1500 , 0]
type = ChangeState
TriggerAll = MoveHit
triggerAll = numtarget
trigger1 = command = "holdup"
trigger2 = var(58) = 1
value = 40

[State 850, 7] ;終了
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------

;JET-X
[Statedef 1000]
type    = S
movetype= I
physics = N
juggle  = 4
poweradd= 0
anim = 1000
ctrl = 0
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0
[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0
[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 17
value = 1000,5
;----------------------[ヘルパー]
[state a];溜めエフェクト
type = Helper
trigger1 = time >= 15
trigger1 = time%4 = 0
id = 6025
name = "tame"
pos = 0 , 0
postype = p1
stateno = 6025
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[state 3400,];稲光
type = explod
trigger1 = time >= 15
trigger1 = time%7 = 0
postype = p1
pos = -40+random%80,0
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = 3
removetime = -2
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5

[State 1000, 3]
type = helper
trigger1 = time >= 15
persistent = 3
postype = p1
ignorehitpause = 1
pos = -40+random%80,-random%100
stateno = 1012
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
triggerall = time > 14
triggerall = time < 60
trigger1 = command != "holdP"
trigger2 = var(58)
trigger2 = p2statetype != L
trigger2 = p2movetype = A||p2bodydist x < 60
value = 1005

[State 200, 7]
type = ChangeState
trigger1 = time >= 60
trigger1 = command != "holdP"
trigger2 = time >= 64
trigger3 = time >= 61
trigger3 = var(58)
trigger3 = p2statetype != L
value = 1006


;---------------------------------------------------------------------------
; エェェェェックス
[Statedef 1005]
type    = S
movetype = A
physics = N
juggle  = 0
anim = 1005
ctrl = 0
sprpriority = 2
poweradd = ceil(30*fvar(31)*fvar(6))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0
[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 4
trigger1 = random <= 300
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = time = 7
trigger1 = random <= 800
value = 1000,random%2
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000,2

[State 1051, 0];エックス
type = helper
trigger1 = time = 2
ID = 1010
helpertype = normal
postype = p1
persistent = 0
pos = 61,-70
stateno = 1010
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, 7] ;終了
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
; エェェェェックス
[Statedef 1006]
type    = S
movetype = A
physics = N
juggle  = 0
anim = 1005
ctrl = 0
sprpriority = 2
poweradd = ceil(30*fvar(31)*fvar(6))

[State 100, 1]
type = Varset
trigger1 = time = 10
var(5) = 2

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0
[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0


[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 4
trigger1 = random <= 300
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = time = 7
trigger1 = random <= 800
value = 1000,random%2
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 4
value = 1000,2

[State 1051, 0];エックス
type = helper
trigger1 = time = 2
ID = 1010
helpertype = normal
postype = p1
persistent = 0
pos = 61,-70
stateno = 1015
ownpal = 1
size.xscale = 1.33
size.yscale = 1.33


[State a];
type = palfx
trigger1 = time = 0
time = 10
;add = 255,255,255
mul = 255,255,255
sinadd = 255,255,255,20
color = 255

[State -1, Boost]
type = ChangeState
value = 3900
triggerall = time >= 11
triggerall = time <= 25
Trigger1 = !var(58)
trigger1 = command = "holdfwd"
Trigger2 = var(58)

[State 1000, 7] ;終了
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;----------------------------------------------------------------------------------------
[Statedef 1010];エックス
type    = A
movetype= A
physics = S
anim = 1006
sprpriority = 6
juggle  = 0


[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 0
value = 1000,3

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = movecontact
var(22) = ifelse(movehit,-10,10)
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1=numtarget
trigger1=movehit
var(12) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];空中コンボ数加算
type = parentVaradd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = parentVaradd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 100, 2]
type = velset
trigger1 = time >= 0
x = 6.8

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = root,var(33) = 0
attr = S, SP
animtype  = medium
damage    = ceil(49*ifelse(root,fvar(6)<0.25,0.25,root,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 10
priority = 3
hitflag = MAF
guardflag = MA
pausetime = 0,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 1
guardsound = s120, 4
ground.type = low
ground.slidetime = 14+parent,var(41)
ground.hittime  = 14+parent,var(41)
ground.velocity = -7.5*parent,fvar(14)
air.velocity = -3.7*parent,fvar(14),-5.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(61*root,fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51
getpower = 40, 20
ID = 1000
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = root,var(33) >= 1
attr = S, SP
animtype  = medium
damage    = 55, 10
priority = 7
hitflag = MAF
guardflag = MA
pausetime = 0,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 1
guardsound = s120, 5
ground.type = low
ground.slidetime = 20+parent,var(41)
ground.hittime  = 20+parent,var(41)
ground.velocity = -7.5*parent,fvar(14)
air.velocity = -3.7*parent,fvar(14),-5.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(30*root,fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51
getpower = 40, 20
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
envshake.time = 11
ID = 1000

;ブースト
[state a]
type = targetstate
triggerall = numtarget
triggerall = target,prevstateno = [550,551]
trigger1 = movehit=1
value = 550
ignorehitpause = 1

[state a]
type = targetstate
triggerall = numtarget
triggerall = target,prevstateno = [555,559]
trigger1 = movehit=1
value = 555
ignorehitpause = 1


;ガードクラッシュ
[state gakura]
type = targetstate
triggerall = numtarget
triggerall = !target,ishelper
triggerall = target,alive
triggerall = (target,stateno=150||target,stateno=152||target,stateno=154)&&target,time<=4
trigger1 = root,var(6)>270
trigger1 = target,ID=helper(10000),var(50)
trigger2 = root,var(15)>270
trigger2 = target,ID=helper(10000),var(51)
value = 15000
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded = 1
trigger1 = P2MoveType = H
id = 7022
name = "hit"
pos = 9,-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = movehit
value = 400,2
ignorehitpause = 1
persistent = 0

[State 1000, 3];必殺ヒットエフェクトマーク
type = helper
trigger1 = movehit
trigger1 = P2MoveType = H
id = 7000
postype = p2
ignorehitpause = 1
persistent = 0
pos = 8,-Ceil(P2BodyDist Y)
priority = 2
stateno = 7005
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

[State 40 , 0]
type = Explod
trigger1 = 1
anim = 1007+random%4
postype = p1
pos = -60+random%20,20-random%80
sprpriority = 7
bindtime = 1
persistent = 6
ontop = 1
facing = -1
scale = 0.9,0.9

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(1000)
trigger1 = parent,var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(1000)
trigger1 = parent,var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0


[State 10000, 1];殴られたり投げられたりしないように設定
type = NotHitBy
trigger1 = 1
value = SCA, NP, SP, HP, AP, NA, SA, HA, NT, ST, HT

[State 10000, 1];殴られたり投げられたりしないように設定
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP, AP

[State 15000, Override]
type = HitOverride
trigger1 = Time = 0
time = -1
attr = SCA, NP, SP, HP, AP, NA, SA, HA, NT, ST, HT
slot = 0
stateno = 1011

[State 3000, 00]
type = changestate
trigger1 = moveguarded
trigger2 = movetype = H
trigger3 = movehit
trigger4 = time >= 400
value = 1011
ignorehitpause = 1

;----------------------------------------------------------------------------------------
[Statedef 1011];エックス消える
type    = A
movetype= A
physics = N
anim = 1011
sprpriority = 9
velset = 0,0
juggle  = 0

[State 3000, 00]
type = changeanim
trigger1 = time = 0
value = 1011
ignorehitpause = 1

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 1099, 1]
type = sprpriority
Trigger1 = Time >= 0 
value = 5

[State 3000, 00]
type = destroyself
trigger1 = animtime = 0

;----------------------------------------------------------------------------------------
[Statedef 1012]
type    = A
movetype= I
physics = N
anim = 1015
sprpriority = 7
velset = 0,0
juggle  = 0

[state b]
type = Trans
trigger1 = 1
trans = add

[state a]
type = angleset
trigger1 = time = 0
value = random%359

[state a]
type = angledraw
trigger1 = 1

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 3000, 00]
type = destroyself
trigger1 = animtime = 0

;----------------------------------------------------------------------------------------
[Statedef 1015];エックス
type    = A
movetype= A
physics = S
anim = 1017
sprpriority = 6
juggle  = 0


[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 0
value = 1000,3

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = numtarget(998)
trigger1 = movehit
trigger1 = P2MoveType = H
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = numtarget(999)
trigger1 = movehit
trigger1 = P2MoveType = H
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = numtarget(1000)
trigger1 = movehit
trigger1 = P2MoveType = H
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = numtarget(998)
trigger1 = movehit
trigger1 = P2MoveType = H
var(12) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = numtarget(999)
trigger1 = movehit
trigger1 = P2MoveType = H
var(12) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = numtarget(1000)
trigger1 = movehit
trigger1 = P2MoveType = H
var(12) = 1
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = numtarget(998)
trigger1 = movehit
trigger1 = P2Statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = numtarget(999)
trigger1 = movehit
trigger1 = P2Statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = numtarget(1000)
trigger1 = movehit
trigger1 = P2Statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = parentVaradd
trigger1 = numtarget(1000)
trigger1 = moveguarded
trigger1 = P2MoveType = H
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = parentVaradd
trigger1 = numtarget(999)
trigger1 = moveguarded
trigger1 = P2MoveType = H
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = parentVaradd
trigger1 = numtarget(998)
trigger1 = moveguarded
trigger1 = P2MoveType = H
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1
[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 100, 2]
type = velset
trigger1 = time >= 0
x = 6.8

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = !numtarget(998)
trigger1 = !numtarget(999)
trigger1 = !numtarget(1000)
attr = S, SP
animtype  = medium
damage    = ceil(49*ifelse(root,fvar(6)<0.25,0.25,root,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 10
priority = 5
hitflag = MAF
guardflag = MA
pausetime = 6,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 1
guardsound = s120, 4
ground.type = low
ground.slidetime = 14+parent,var(41)
ground.hittime  = 14+parent,var(41)
ground.velocity = -7.5*parent,fvar(14)
air.velocity = -3.7*parent,fvar(14),-5.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(20*root,fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51
getpower = 40, 20
ID = 998
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
persistent = 0


[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = numtarget(998)
attr = S, SP
animtype  = medium
damage    = ceil(49*ifelse(root,fvar(6)<0.25,0.25,root,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 10
priority = 5
hitflag = MAF
guardflag = MA
pausetime = 6,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 1
guardsound = s120, 4
ground.type = low
ground.slidetime = 14+parent,var(41)
ground.hittime  = 14+parent,var(41)
ground.velocity = -7.5*parent,fvar(14)
air.velocity = -3.7*parent,fvar(14),-5.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(22*root,fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51
getpower = 40, 20
ID = 999
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
persistent = 0


[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = numtarget(999)
attr = S, SP
animtype  = medium
damage    = ceil(49*ifelse(root,fvar(6)<0.25,0.25,root,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 9
priority = 5
hitflag = MAF
guardflag = MA
pausetime = 6,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 1
guardsound = s120, 4
ground.type = low
ground.slidetime = 14+parent,var(41)
ground.hittime  = 14+parent,var(41)
ground.velocity = -7.5*parent,fvar(14)
air.velocity = -3.7*parent,fvar(14),-5.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(22*root,fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51
getpower = 40, 20
ID = 1000
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
persistent = 0

;ブースト
[state a]
type = targetstate
triggerall = numtarget
triggerall = target,prevstateno = [550,551]
trigger1 = movehit=1
value = 550
ignorehitpause = 1

[state a]
type = targetstate
triggerall = numtarget
triggerall = target,prevstateno = [555,559]
trigger1 = movehit=1
value = 555
ignorehitpause = 1

;ガードクラッシュ
[state gakura]
type = targetstate
triggerall = numtarget
triggerall = !target,ishelper
triggerall = target,alive
triggerall = (target,stateno=150||target,stateno=152||target,stateno=154)&&target,time<=4
trigger1 = root,var(6)>270
trigger1 = target,ID=helper(10000),var(50)
trigger2 = root,var(15)>270
trigger2 = target,ID=helper(10000),var(51)
value = 15000
ignorehitpause = 1
[state a];ガードエフェクト
type = Helper
trigger1 = numtarget(998)
trigger1 = moveguarded
trigger1 = P2MoveType = H
id = 7022
name = "hit"
pos = 9,-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = numtarget(999)
trigger1 = moveguarded
trigger1 = P2MoveType = H
id = 7022
name = "hit"
pos = 9,-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = numtarget(1000)
trigger1 = moveguarded
trigger1 = P2MoveType = H
id = 7022
name = "hit"
pos = 9,-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[State 191, Snd 1]
type = PlaySnd
trigger1 = movehit
trigger1 = numtarget(998)
value = 400,2
ignorehitpause = 1
persistent = 0

[State 191, Snd 1]
type = PlaySnd
trigger1 = movehit
trigger1 = numtarget(999)
value = 400,2
ignorehitpause = 1
persistent = 0

[State 191, Snd 1]
type = PlaySnd
trigger1 = movehit
trigger1 = numtarget(1000)
value = 400,2
ignorehitpause = 1
persistent = 0

[State 1000, 3];必殺ヒットエフェクトマーク
type = helper
trigger1 = numtarget(998)
trigger1 = movehit
trigger1 = P2MoveType = H
id = 7000
postype = p2
ignorehitpause = 1
persistent = 0
pos = 8,-Ceil(P2BodyDist Y)
priority = 2
stateno = 7005
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
[State 1000, 3];必殺ヒットエフェクトマーク
type = helper
trigger1 = numtarget(999)
trigger1 = movehit
trigger1 = P2MoveType = H
id = 7000
postype = p2
ignorehitpause = 1
persistent = 0
pos = 8,-Ceil(P2BodyDist Y)
priority = 2
stateno = 7005
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5
[State 1000, 3];必殺ヒットエフェクトマーク
type = helper
trigger1 = numtarget(1000)
trigger1 = movehit
trigger1 = P2MoveType = H
id = 7000
postype = p2
ignorehitpause = 1
persistent = 0
pos = 8,-Ceil(P2BodyDist Y)
priority = 2
stateno = 7005
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

[State 40 , 0]
type = Explod
trigger1 = 1
anim = 1007+random%4
postype = p1
pos = -60+random%20,20-random%80
sprpriority = 7
bindtime = 1
persistent = 6
ontop = 1
facing = -1
scale = 0.9,0.9

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(1000)
trigger1 = parent,var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(1000)
trigger1 = parent,var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 3000, 00]
type = changestate
triggerall = numtarget(1000)
trigger1 = moveguarded
trigger2 = movetype = H
trigger3 = movehit
trigger4 = time >= 400
value = 1011
ignorehitpause = 1

;---------------------------------------------------------------------------
; エェェェェックス
[Statedef 1020]
type    = A
movetype = A
physics = N
juggle  = 0
anim = 1020
ctrl = 0
sprpriority = 2
poweradd = 0

[State 100, 2]
type = Velset
trigger1 = time <= 14
x = -2
y = -5


[State 100, 2]
type = Veladd
trigger1 = time > 14
y = .5

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 4
trigger1 = random <= 300
value = 200,random%3
channel = 2
lowpriority = 2

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = time = 6
trigger1 = random <= 800
value = 1000,random%2
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 9
value = 1000,2

[State 1051, 0];エックス
type = helper
trigger1 = animelem = 6
ID = 1030
helpertype = normal
postype = p1
persistent = 0
pos = 61,-20
stateno = 1030
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1000, 7] ;終了
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1


;----------------------------------------------------------------------------------------
[Statedef 1030];エックス
type    = A
movetype= A
physics = S
anim = 1030
sprpriority = 6
juggle  = 0

[state b]
type = Trans
trigger1 = 1
trans = add

[state a]
type = angleset
trigger1 = time = 0
value = -45

[state a]
type = angledraw
trigger1 = 1

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 0
value = 1000,3

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = movecontact
var(22) = ifelse(movehit,-8,8)
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = movehit
trigger1 = P2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = movehit
trigger1 = P2MoveType = H
var(12) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = parentVaradd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=16
persistent = 0
ignorehitpause = 1

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 100, 2]
type = velset
trigger1 = time >= 0
x = 3.4
y = 3.4

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = root,var(33) = 0
attr = S, SP
animtype  = medium
damage    = ceil(49*ifelse(root,fvar(6)<0.25,0.25,root,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 10
priority = 3
hitflag = MAF
guardflag = MA
pausetime = 0,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 1
guardsound = s120, 4
ground.type = low
ground.slidetime = 14+parent,var(41)
ground.hittime  = 14+parent,var(41)
ground.velocity = -7.5*parent,fvar(14)
air.velocity = -3.7*parent,fvar(14),-5.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 60
fall.envshake.time = 9
air.fall = 1
yaccel = .51
getpower = 40, 20
ID = 1000
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = root,var(33) >= 1
attr = S, SP
animtype  = medium
damage    = 55, 10
priority = 7
hitflag = MAF
guardflag = MA
pausetime = 0,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 1
guardsound = s120, 5
ground.type = low
ground.slidetime = 20+parent,var(41)
ground.hittime  = 20+parent,var(41)
ground.velocity = -7.5*parent,fvar(14)
air.velocity = -3.7*parent,fvar(14),-5.2
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 56
fall.envshake.time = 9
air.fall = 1
yaccel = .51
getpower = 40, 20
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
envshake.time = 11
ID = 1000

;ブースト
[state a]
type = targetstate
triggerall = numtarget
triggerall = target,prevstateno = [550,551]
trigger1 = movehit=1
value = 550
ignorehitpause = 1

[state a]
type = targetstate
triggerall = numtarget
triggerall = target,prevstateno = [555,559]
trigger1 = movehit=1
value = 555
ignorehitpause = 1


;ガードクラッシュ
[state gakura]
type = targetstate
triggerall = numtarget
triggerall = !target,ishelper
triggerall = target,alive
triggerall = (target,stateno=150||target,stateno=152||target,stateno=154)&&target,time<=4
trigger1 = root,var(6)>270
trigger1 = target,ID=helper(10000),var(50)
trigger2 = root,var(15)>270
trigger2 = target,ID=helper(10000),var(51)
value = 15000
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded = 1
trigger1 = P2MoveType = H
id = 7022
name = "hit"
pos = 9,-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = movehit
value = 400,2
ignorehitpause = 1
persistent = 0

[State 1000, 3];必殺ヒットエフェクトマーク
type = helper
trigger1 = movehit
trigger1 = P2MoveType = H
id = 7000
postype = p2
ignorehitpause = 1
persistent = 0
pos = 8,-Ceil(P2BodyDist Y)
priority = 2
stateno = 7005
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

[State 40 , 0]
type = Explod
trigger1 = 1
anim = 1007+random%4
postype = p1
pos = -25-random%30,-10-random%80
sprpriority = 7
bindtime = 1
persistent = 6
ontop = 1
facing = -1
scale = 0.9,0.9

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(1000)
trigger1 = parent,var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(1000)
trigger1 = parent,var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 10000, 1];殴られたり投げられたりしないように設定
type = NotHitBy
trigger1 = 1
value = SCA, NP, SP, HP, AP, NA, SA, HA, NT, ST, HT

[State 10000, 1];殴られたり投げられたりしないように設定
type = HitBy
trigger1 = 1
value = SCA, NP, SP, HP, AP

[State 15000, Override]
type = HitOverride
trigger1 = 1
time = -1
attr = SCA, NP, SP, HP, AP, NA, SA, HA, NT, ST, HT
slot = 0
stateno = 1031

[State 3000, 00]
type = changestate
trigger1 = moveguarded
trigger2 = movetype = H
trigger3 = movehit
trigger4 = Pos Y > 5
trigger5 = time >= 400
value = 1031
ignorehitpause = 1

;----------------------------------------------------------------------------------------
[Statedef 1031];エックス消える
type    = A
movetype= A
physics = N
anim = 1011
sprpriority = 9
velset = 0,0
juggle  = 0

[state b]
type = Trans
trigger1 = 1
trans = add

[state a]
type = angleset
trigger1 = time = 0
value = -45

[state a]
type = angledraw
trigger1 = 1
[State 3000, 00]
type = changeanim
trigger1 = time = 0
value = 1011
ignorehitpause = 1

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 1099, 1]
type = sprpriority
Trigger1 = Time >= 0
value = 5

[State 3000, 00]
type = destroyself
trigger1 = animtime = 0

;---------------------------------------------------------------------------

;DEATH FANG
[Statedef 1100]
movetype= A
physics = N
juggle  = 0
poweradd= 0
anim = 1100
ctrl = 0
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0
[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0

[State 170, 1]
type = NotHitBy
trigger1 = time < 12
value = SCA
time = 1

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 17
value = 1000,5

[state a];溜めエフェクト
type = Helper
trigger1 = time >= 15
trigger1 = time%4 = 0
id = 6025
name = "tame"
pos = 0 , 0
postype = p1
stateno = 6025
helpertype = normal
pausemovetime = 0
keyctrl = 0 
ownpal = 1

[state 3400,];稲光
type = explod
trigger1 = time >= 15
trigger1 = time%7 = 0
postype = p1
pos = -40+random%80,0
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = 1
sprpriority = 3
removetime = -2
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
supermovetime = 999999
pausemovetime = 999999

[State 1000, 3]
type = helper
trigger1 = time >= 15
persistent = 3
postype = p1
pos = -40+random%80,-random%100
stateno = 1012
helpertype = normal
persistent = 3
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
triggerall = time > 4
triggerall = time < 30
trigger1 = command != "holdS"
trigger2 = var(58)
trigger2 = p2bodydist X < 90
trigger2 = p2statetype != L
value = 1105

[State 200, 7]
type = ChangeState
triggerall = time >= 30
triggerall = time < 45
trigger1 = command != "holdS"
trigger2 = var(58)
trigger2 = p2bodydist X < 90
trigger2 = p2statetype != L
value = 1106

[State 200, 7]
type = ChangeState
triggerall = time >= 45
triggerall = time < 50
trigger1 = command != "holdS"
trigger2 = var(58)
trigger2 = p2bodydist X < 90
trigger2 = p2statetype != L
value = 1107

[State 200, 7]
type = ChangeState
triggerall = time >= 50
trigger1 = command != "holdS"
trigger2 = time >= 79
trigger3 = var(58)
trigger3 = p2bodydist X < 90
trigger3 = p2statetype != L
value = 1108




;---------------------------------------------------------------------------
; デスファ タメ4
[Statedef 1108]
type    = A
movetype = A
physics = N
juggle  = 0
anim = 1105
ctrl = 0
sprpriority = 2
poweradd = 0

[State 170, 1]
type = NotHitBy
trigger1 = time < 8
value = SCA
time = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 6
trigger1 = AnimElemTime(3) <= 11
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 12
trigger1 = AnimElemTime(3) <= 17
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) > 17
trigger1 = AnimElemTime(4) < 0
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
trigger1=p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1
[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1=p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 6
trigger1 = AnimElemTime(3) <= 11
trigger1=p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 12
trigger1 = AnimElemTime(3) <= 17
trigger1=p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) > 17
trigger1 = AnimElemTime(4) < 0
trigger1=p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(3) >= 6
trigger1 = AnimElemTime(3) <= 11
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(3) >= 12
trigger1 = AnimElemTime(3) <= 17
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(3) > 17
trigger1 = AnimElemTime(4) < 0
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 3

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(3) = 0
y = -15.6

[State 1100, Gravity]
type = Veladd
trigger1 = AnimElemTime(3) >= 0
y = .56

[State 1100, Velocity]
type = Velset
trigger1 = AnimElemTime(3) = 6
x = 0

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = time = 2
trigger1 = random <= 800
value = 1100,2+random%2
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 2
value = 1100,0


[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2), -70-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999


[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElem = 2
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(54*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 50
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -3.5,-9.7
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-3.5*fvar(14)),ifelse(p2statetype = L,-.5,-11.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-3.5*fvar(14))
down.velocity = -13.2,0
air.fall = 1
air.hittime = 100
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(50*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
ground.cornerpush.veloff = ifelse(var(8),0,-3.5* fvar(14))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 200
persistent = 0


[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElem = 2
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 59, 60
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = -1.5* fvar(14),-10.2
down.velocity = -13.2,0
air.fall = 1
air.hittime = 100
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
ground.cornerpush.veloff = ifelse(var(8),0,-1.5* fvar(14))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 200
persistent = 0


[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(89*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 29
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -2,-10.2
down.velocity = -13.2,0
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-11.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2*fvar(14))
air.fall = 1
air.hittime = 100
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower =ceil(40*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 197
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 34, 7
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-1.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-1.5*fvar(14))
air.fall = 1
air.hittime = 100
fall.recover = 0
fall.yvelocity = -3.2
down.velocity = -13.2,0
fall.envshake.time = 9
fall.recovertime = 100
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(20*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 197
persistent = 0

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElemTime(3) >= 6
trigger1 = AnimElemTime(3) <= 11
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(95*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 26
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -2,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-11.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2*fvar(14))
down.velocity = -13.2,0
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(20*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 198
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElemTime(3) >= 6
trigger1 = AnimElemTime(3) <= 11
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 39, 8
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-1.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-1.5*fvar(14))
down.velocity = -13.2,0
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(20*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 198
persistent = 0


[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElemTime(3) >= 12
trigger1 = AnimElemTime(3) <= 17
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(47*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 9
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -2,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-11.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2*fvar(14))
down.velocity = -13.2,0
fall.recover = 60
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(20*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 196
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElemTime(3) >= 12
trigger1 = AnimElemTime(3) <= 17
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 47, 9
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-1.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-1.5*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 196
persistent = 0

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElemTime(3) > 17
trigger1 = AnimElemTime(4) < 0
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(49*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 10
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -2,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-11.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(20*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 199
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElemTime(3) > 17
trigger1 = AnimElemTime(4) < 0
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 49, 10
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-1.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-1.5*fvar(14))
fall.recover = 1
fall.yvelocity = -3.2
down.velocity = -13.2,0
fall.recovertime = 100
fall = 1
fall.envshake.time = 9
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 199
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(199)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(198)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(197)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(196)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(199)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999



[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(198)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(197)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(196)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
trigger1 = movehit=1
trigger1 = enemynear,gethitvar(fall.recovertime)=55
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State counter]
Type = playsnd
trigger1 = movehit=1
trigger1 = enemynear,gethitvar(fall.recovertime)=55
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 48,-70
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal  = 1
ownpal = 1
scale = 0.5,1
IgNoreHitPause = 0

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 62,-52
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal = 1
scale = 0.65,1
IgNoreHitPause = 0

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 78,-10
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal = 1
scale = 0.78,1.2
IgNoreHitPause = 0


[State 1000, 7] ;終了
type = ChangeState
trigger1 = time > 11
trigger1 = pos y >= 0
value = 1110
ctrl = 0
;---------------------------------------------------------------------------
; デスファ タメ3
[Statedef 1107]
type    = A
movetype = A
physics = N
juggle  = 0
anim = 1105
ctrl = 0
sprpriority = 2
poweradd = 0

[State 170, 1]
type = NotHitBy
trigger1 = time < 4
value = SCA
time = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 6
trigger1 = AnimElemTime(3) <= 11
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) > 12
trigger1 = AnimElemTime(4) < 0
trigger1=var(12):=var(12)+1
var(11)=1
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
trigger1=p2statetype=A
var(11)=1
persistent = 0
ignorehitpause = 1
[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1=p2statetype=A
var(11)=1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 6
trigger1 = AnimElemTime(3) <= 11
trigger1=p2statetype=A
var(11)=1
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) > 12
trigger1 = AnimElemTime(4) < 0
trigger1=p2statetype=A
var(11)=1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(3) >= 6
trigger1 = AnimElemTime(3) <= 11
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(3) > 12
trigger1 = AnimElemTime(4) < 0
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 3

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(3) = 0
y = -14.1

[State 1100, Gravity]
type = Veladd
trigger1 = AnimElemTime(3) >= 0
y = .56

[State 1100, Velocity]
type = Velset
trigger1 = AnimElemTime(3) = 6
x = 0

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = time = 2
trigger1 = random <= 800
value = 1100,2+random%2
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 2
value = 1100,0


[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2), -70-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999


[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElem = 2
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(54*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 11
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -3.5,-8.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-3.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-3.5*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 60
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(30*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 200
persistent = 0


[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElem = 2
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 59, 11
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-10.2
guard.velocity = -6
air.velocity = -1.5* fvar(14),-9.2
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 55
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(60*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
ground.cornerpush.veloff = ifelse(var(8),0,-1.5* fvar(14))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 200
persistent = 0


[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(43*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 9
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -2,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-11.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 80
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 197
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 49, 10
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-8.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-1.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-1.5*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 80
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 197
persistent = 0

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElemTime(3) >= 6
trigger1 = AnimElemTime(3) <= 11
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(36*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 7
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -2,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-11.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 80
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(20*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 198
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElemTime(3) >= 6
trigger1 = AnimElemTime(3) <= 11
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 34, 7
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-1.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-1.5*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 55
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(100*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 198
persistent = 0

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElemTime(3) > 12
trigger1 = AnimElemTime(4) < 0
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(40*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 9
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -2,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-11.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 80
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 199
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElemTime(3) > 12
trigger1 = AnimElemTime(4) < 0
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 45, 9
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-1.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-1.5*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 55

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(100*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 199
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(199)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(198)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(197)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(199)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999



[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(198)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(197)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
trigger1 = movehit=1
trigger1 = enemynear,gethitvar(fall.recovertime)=55
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State counter]
Type = playsnd
trigger1 = movehit=1
trigger1 = enemynear,gethitvar(fall.recovertime)=55
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 48,-70
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal  = 1
ownpal = 1
scale = 0.5,1
IgNoreHitPause = 0

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 62,-52
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal = 1
scale = 0.65,1
IgNoreHitPause = 0

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 78,-10
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal = 1
scale = 0.78,1.2
IgNoreHitPause = 0

[State 1000, 7] ;終了
type = ChangeState
trigger1 = time > 11
trigger1 = pos y >= 0
value = 1110
ctrl = 0
;---------------------------------------------------------------------------
; デスファ タメ2
[Statedef 1106]
type    = A
movetype = A
physics = N
juggle  = 0
anim = 1105
ctrl = 0
sprpriority = 2
poweradd = 0

[State 170, 1]
type = NotHitBy
trigger1 = time < 4
value = SCA
time = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) > 5
trigger1 = AnimElemTime(4) < 0
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) > 5
trigger1 = AnimElemTime(4) < 0
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1


[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(3) > 5
trigger1 = AnimElemTime(4) < 0
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 3

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(3) = 0
y = -12.6

[State 1100, Gravity]
type = Veladd
trigger1 = AnimElemTime(3) >= 0
y = .56

[State 1100, Velocity]
type = Velset
trigger1 = AnimElemTime(3) = 6
x = 0

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = time = 2
trigger1 = random <= 800
value = 1100,2+random%2
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 2
value = 1100,0


[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2), -70-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999


[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElem = 2
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(54*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 9
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -3.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-3.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-3.5*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 80
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(20*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 200
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElem = 2
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 59, 9
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = -1.5* fvar(14),-10.2
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(100*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
ground.cornerpush.veloff = ifelse(var(8),0,-1.5* fvar(14))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 200
persistent = 0

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(30*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 6
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -2,-10.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-11.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(30*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 198
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(3) <= 5
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 34, 9
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-1.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-1.5*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(100*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 198
persistent = 0

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElemTime(3) > 5
trigger1 = AnimElemTime(4) < 0
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(30*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 6
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -2,-10.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-11.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(20*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 199
persistent = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElemTime(3) > 5
trigger1 = AnimElemTime(4) < 0
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 34, 7
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-1.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-1.5*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(100*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 199
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(199)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999


[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(198)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(199)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999



[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(198)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
trigger1 = movehit=1
trigger1 = enemynear,gethitvar(fall.recovertime)=68
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State counter]
Type = playsnd
trigger1 = movehit=1
trigger1 = enemynear,gethitvar(fall.recovertime)=68
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 48,-70
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal  = 1
ownpal = 1
scale = 0.5,1
IgNoreHitPause = 0

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 62,-52
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal = 1
scale = 0.65,1
IgNoreHitPause = 0

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 78,-10
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal = 1
scale = 0.78,1.2
IgNoreHitPause = 0

[State 1000, 7] ;終了
type = ChangeState
trigger1 = time > 11
trigger1 = pos y >= 0
value = 1110
ctrl = 0
;---------------------------------------------------------------------------
; デスファ タメ1
[Statedef 1105]
type    = A
movetype = A
physics = N
juggle  = 0
anim = 1105
ctrl = 0
sprpriority = 2
poweradd = 0

[State 170, 1]
type = NotHitBy
trigger1 = time < 5
value = SCA
time = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) < 0
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) < 0
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(2) >= 0
trigger1 = AnimElemTime(3) < 0
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1


[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = AnimElemTime(3) >= 0
trigger1 = AnimElemTime(4) < 0
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1


[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 3

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(3) = 0
y = -11.6

[State 1100, Gravity]
type = Veladd
trigger1 = AnimElemTime(3) >= 0
y = .56

[State 1100, Velocity]
type = Velset
trigger1 = AnimElemTime(3) = 6
x = 0

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = time = 2
trigger1 = random <= 800
value = 1100,2+random%2
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 2
value = 1100,0


[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2), -70-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999


[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = AnimElem = 2
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(62*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 9
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -3.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-3.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-3.5*fvar(14))
fall.recover = 0
air.fall = 1
air.hittime = 100
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(30*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 200

[State 240, 6] ;カウンター
type = HitDef
trigger1 = AnimElem = 2
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 59, 9
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-1.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-1.5*fvar(14))
fall.recover = 0
air.fall = 1
air.hittime = 100
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(100*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 200

[State Help,1]
Type = Helper
trigger1 = movehit=1
trigger1 = enemynear,gethitvar(fall.recovertime)=68
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State counter]
Type = playsnd
trigger1 = movehit=1
trigger1 = enemynear,gethitvar(fall.recovertime)=68
value = 9920,0
IgNoreHitPause = 1
Persistent = 0


[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 3
trigger1 = var(33) = 0
attr = A, SA
animtype  = medium
damage    = ceil(57*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 9
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = low
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -2,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-11.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-2*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
air.fall = 1
air.hittime = 100
yaccel = .51*fvar(15)
getpower = ceil(30*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 199

[State 240, 6] ;カウンター
type = HitDef
trigger1 = animelem = 3
trigger1 = var(33) >= 1
attr = A, SA
animtype  = up
damage    = 44, 9
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 13,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = high
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -1.5,-9.2
guard.velocity = -6
air.velocity = ifelse(p2statetype = L,-9,-1.5*fvar(14)),ifelse(p2statetype = L,-.5,-10.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-1.5*fvar(14))
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 100
fall.envshake.time = 9
fall = 1
air.fall = 1
air.hittime = 100
yaccel = .51*fvar(15)
getpower = ceil(100*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
palfx.add = 205,-50,-50
envshake.time = 11
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
ID = 199


[State 4]
type = null;Pause
triggerall = movecontact = 1
trigger1 = numtarget(200)
trigger2 = numtarget(199)
time = 13
movetime = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(199)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -80-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(199)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 48,-70
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal = 1
scale = 0.5,1
IgNoreHitPause = 0

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 62,-52
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal = 1
scale = 0.65,1
IgNoreHitPause = 0

[state 3400,];稲光
type = explod
trigger1 = time = 0
postype = p1
pos = 78,-10
anim = 1106
facing = 1
bindtime = -1
sprpriority = 4
removetime = -2
ownpal = 1
scale = 0.78,1.2
IgNoreHitPause = 0

[State Help,1]
Type = null;Helper
trigger1 = time = 0
StateNo = 1115
pos = 48,-70
PosType = p1
Persistent = 0
Ownpal = 1
size.xscale = 0.65
size.yscale = 1
IgNoreHitPause = 0

[State Help,1]
Type = null;Helper
trigger1 = time = 0
StateNo = 1116
pos = 48,-90
PosType = p1
Persistent = 0
Ownpal = 1
size.xscale = 0.78
size.yscale = 1.2
IgNoreHitPause = 0

[State 1000, 7] ;終了
type = ChangeState
trigger1 = time > 11
trigger1 = pos y >= 0
value = 1110
ctrl = 0

;---------------------------------------------------------------------------
; Jump Land
[Statedef 1110]
type    = S
physics = N
ctrl = 0
anim = 1110

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 1]
type = posset
trigger1 = Time = 0
y = 0

[State 52, 2]
type = posadd
trigger1 = Time = 0
x = 20

;---------------------[効果音]
[State 191, Snd 1];着地
type = PlaySnd
trigger1 = time = 0
value = 47,0

;---------------------[ヘルパー]
[state a];着地エフェクト
type = Helper
trigger1 = time = 0
id = 6005
name = "land"
pos = 0 , 0
postype = p1
stateno = 6005
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------------
[Statedef 1115];爪
type    = A
movetype= A
physics = N
anim = 1106
sprpriority = 9
velset = 0,0
juggle  = 0

[state 1115]
type = BindToParent
trigger1 = 1
pos = 62,-52

[state b]
type = Trans
trigger1 = 1
trans = add

[state a]
type = angleset
trigger1 = time = 0
value = -20

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 3000, 00]
type = destroyself
trigger1 = animtime = 0

;----------------------------------------------------------------------------------------
[Statedef 1116];爪
type    = A
movetype= A
physics = N
anim = 1106
sprpriority = 9
velset = 0,0
juggle  = 0

[state 1115]
type = BindToParent
trigger1 = 1
pos = 78,-10

[state b]
type = Trans
trigger1 = 1
trans = add

[state a]
type = angleset
trigger1 = time = 0
value = -40

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 3000, 00]
type = destroyself
trigger1 = animtime = 0
;---------------------------------------------------------------------------
; Jump Land
[Statedef 1111]
type    = S
physics = N
ctrl = 0
anim = 1110

[State 52, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

;---------------------[効果音]
[State 191, Snd 1];着地
type = PlaySnd
trigger1 = time = 0
value = 47,0

;---------------------[ヘルパー]
[state a];着地エフェクト
type = Helper
trigger1 = time = 0
id = 6005
name = "land"
pos = 0 , 0
postype = p1
stateno = 6005
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1

[State -2, 0]
type = turn
triggerall = p2dist X < -1
trigger1 = time = 2

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;---------------------------------------------------------------------------
;MAGNUM STEP
[Statedef 1200]
type    = S
physics = N
juggle  = 0
anim = 1200
ctrl = 0
sprpriority = 2
poweradd = 0

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 3000, 0]
type = NotHitBy
trigger1 = time < 2
value = ,NA,SA,HA,NP,SP,HP
time = 1

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 5
value = 1200,2

[State 100 , 0]
type = Explod
trigger1 = animelem = 5
anim = 6010
postype = p1
pos = 0,16
sprpriority = 8
bindtime = 1
ownpal = 1
scale = 0.5,0.5
ID = 6010

[State 100 , 0]
type = Explod
triggerall = numexplod(1206) = 0
trigger1 = P2bodydist X < 35
trigger2 = Animtime = 0
anim = 1206
ID = 1206
postype = p1
pos = -35,-90
sprpriority = 8
bindtime = 1
ownpal = 1
scale = 0.8,0.8
ID = 6010

[State Help,1]
Type = Helper
trigger1 = animelem = 5
StateNo = 1207
Pos = 0,0
PosType = p1
Persistent = 0
Ownpal = 1
size.xscale = 0.75
size.yscale = 0.75

[State 100, 2]
type = Velset
trigger1 = animelemtime(5) = 1
x = 11.8

[State 1000, 7] ;終了
type = ChangeState
triggerall = time >= 12
trigger1 = P2bodydist X < 35
trigger2 = Animtime = 0
value = 1201
ctrl = 0


;----------------------------------------------------------------------------------------
[Statedef 1207]
type    = A
movetype= A
physics = N
anim = 1207
sprpriority = 9
juggle  = 0

[state b]
type = Trans
trigger1 = 1
trans = add

[State 100, 2]
type = bindtoparent
trigger1 = 1
pos = 25,-90

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 3000, 00]
type = destroyself
trigger1 = parent,stateno != 1200


;----------------------------------------------------------------------------------------
[Statedef 1205]
type    = A
movetype= A
physics = N
anim = 1205
sprpriority = 10
juggle  = 0

[state a]
type = angleset
triggerall = time%2 = 0
trigger1 = root,HitPauseTime = 0
value = random%359

[State 100, 2]
type = bindtoparent
trigger1 = 1
pos = 105,-66

[state a]
type = angledraw
trigger1 = 1

[state b]
type = Trans
trigger1 = 1
trans = add

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 3000, 00]
type = destroyself
trigger1 = parent,Animelemtime(6) >= 0

;---------------------------------------------------------------------------
[Statedef 1201]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1201
sprpriority = 1

[State 100, 1]
type = Velset
trigger1 = time = 0
x = 0

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget(199)
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = animelem = 4
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = animelem = 5
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget(199)
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = animelem = 4
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = animelem = 5
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1


[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = numtarget(199)
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = animelem = 4
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = animelem = 5
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1


[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 2
trigger1 = random<= 800
value = 1200,random%2
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 3
value = 1200,3

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-5), -59-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State Help,1]
Type = Helper
trigger1 = animelem = 3
StateNo = 1205
Pos = 100,-84
PosType = p1
Persistent = 0
Ownpal = 1
size.xscale = 0.75
size.yscale = 0.75

[State 100 , 0]
type = Explod
trigger1 = animelem = 3
anim = 6010
postype = p1
pos = 10,16
facing = -1
sprpriority = 7
bindtime = 1
ownpal = 1
scale = 0.5,0.5
ID = 6010


[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 3
trigger1 = var(33) = 0
attr = S, SA
animtype  = Light
damage    = ceil(44*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 9
hitflag = MAFD
guardflag = MA
pausetime = 7,7
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 9
guardsound = s120, 3
ground.type = High
ground.slidetime = 10+var(41)
ground.hittime  = 10+var(41)
ground.velocity = -4.5
guard.velocity = -0.2
air.velocity = ifelse(p2statetype = L,-9,-3.1*fvar(14)),ifelse(p2statetype = L,-.5,-5.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-4.5*fvar(14))
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = ceil(21*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(30*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
ID = 199
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = animelem = 3
trigger1 = var(33) >= 1
attr = S, SA
animtype  = Light
damage    = 46, 8
hitflag = MAFD
guardflag = MA
pausetime = 7,14
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 9
guardsound = s120, 3
ground.type = High
ground.slidetime = 15+var(41)
ground.hittime  = 15+var(41)
ground.velocity = -4.5
guard.velocity = -0.2
air.velocity = ifelse(p2statetype = L,-9,-3*fvar(14)),ifelse(p2statetype = L,-.5,-5.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-4.5*fvar(14))
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = 45

fall.envshake.time = 9
fall = 1
air.hittime  = 20
yaccel = .51*fvar(15)
getpower = ceil(80*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
envshake.time = 11
ID = 199
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 4
attr = S, SA
animtype  = Light
damage    = ceil(40*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 8
hitflag = MAFD
guardflag = MA
pausetime = 7,7
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 9
guardsound = s120, 3
ground.type = High
ground.slidetime = 10+var(41)
ground.hittime  = 10+var(41)
ground.velocity = -4.5
guard.velocity = -0.2
air.velocity = ifelse(p2statetype = L,-9,-3*fvar(14)),ifelse(p2statetype = L,-.5,-5.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-4.5*fvar(14))
fall.recover = 0
fall.yvelocity = -3.2
fall = 1

fall.envshake.time = 9
yaccel = .51*fvar(15)
getpower = ceil(30*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
ID = 200
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 5
attr = S, SA
animtype  = Hard
damage    = ceil(40*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 8
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 14,14
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 9
guardsound = s120, 3
ground.type = high
guard.hittime = 16
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -7.6,-6.1
guard.velocity = -0.2
air.velocity = ifelse(p2statetype = L,-9,-4.9*fvar(14)),ifelse(p2statetype = L,-.5,-7.1)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-7.5*fvar(14))

fall.envshake.time = 9
fall.recover = 0
fall.yvelocity = -3.2
fall = 1
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
ID = 200
persistent = 0
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = numtarget(199)
trigger1 = movehit = 1
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = animelem = 4
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999


[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = animelem = 5
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded = 1
trigger1 = numtarget(199)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = animelem = 4
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = animelem = 5
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -70-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
Trigger1 = MoveHit=1
trigger1 = numtarget(200)||numtarget(199)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)||numtarget(199)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;WAR DANCE
[Statedef 1300]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1300
sprpriority = 1

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))


[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0

[State 100, 1]
type = Veladd
trigger1 = AnimElem = 8
trigger2 = AnimElem = 15
x = 3.1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget(199)
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget(200)
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget(199)
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget(200)
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = numtarget(199)
var(ifelse(target,ID=helper(10000),var(50),6,15))=4
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = numtarget(200)
var(ifelse(target,ID=helper(10000),var(50),6,15))=4
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 12
value = 1300,random%2
channel = 2
lowpriority = 1

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 9
trigger2 = AnimElem = 16
value = 1300,2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 25
value = 1000,2

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-5), -59-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 5
trigger1 = var(33) = 0
attr = S, SA
animtype  = Light
damage    = ceil(35*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 9
hitflag = MAFD
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = High
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -3.1* fvar(14)
guard.velocity = -3.1* fvar(14)
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-2.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-3.1*fvar(14))
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = ceil(26*fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(20*fvar(31)*fvar(6))
ID = 199
palfx.time = 35

[State 240, 6] ;カウンター
type = HitDef
trigger1 = animelem = 5
trigger1 = var(33) >= 1
attr = S, SA
animtype  = Light
damage    = 41, 8
hitflag = MAFD
guardflag = MA
pausetime = 10,20
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = High
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -3.1*fvar(14)
guard.velocity = -3.1* fvar(14)
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-2.3)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-3.1*fvar(14))
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = 44

fall.envshake.time = 9
air.fall = 1
yaccel = .51*fvar(15)
getpower = ceil(80*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
envshake.time = 11
ID = 199
palfx.add = 205,-50,-50

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 12
attr = S, SA
animtype  = Light
damage    = ceil(35*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 8
hitflag = MAFD
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = High
guard.hittime = 10
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -3.1* fvar(14)
guard.velocity = -3.1* fvar(14)
air.velocity = ifelse(p2statetype = L,-9,-2.1*fvar(14)),ifelse(p2statetype = L,-.5,-2.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-3.1*fvar(14))
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = ceil(26*fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
ID = 200

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(199)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -59-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999


[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -91-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded = 1
trigger1 = numtarget(200)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -91-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(199)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -59-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
Trigger1 = MoveHit=1
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 200, 7]
type = ChangeState
triggerall = AnimElemtime(18) >= 0
triggerall = AnimElemtime(22) < 0
trigger1 = command = "y"
trigger2 = var(58)
trigger2 = movehit
value = 1310

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
[Statedef 1310]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1310
sprpriority = 1


[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0

[State 100, 1]
type = Veladd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10
x = 3.1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget(199)
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget(200)
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget(199)
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = numtarget(200)
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = numtarget(199)
var(ifelse(target,ID=helper(10000),var(50),6,15))=4
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = numtarget(200)
var(ifelse(target,ID=helper(10000),var(50),6,15))=4
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 10
value = 1300,2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 22
value = 1000,2

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-5), -59-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 5
trigger1 = var(33) = 0
attr = S, SA
animtype  = Light
damage    = ceil(35*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 9
hitflag = MAFD
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = High
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -3.1* fvar(14)
guard.velocity = -3.1* fvar(14)
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-2.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-5.1*fvar(14))
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = ceil(26*fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
ID = 199
palfx.time = 35

[State 240, 6] ;カウンター
type = HitDef
trigger1 = animelem = 5
trigger1 = var(33) >= 1
attr = S, SA
animtype  = Light
damage    = 41, 8
hitflag = MAFD
guardflag = MA
pausetime = 10,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = High
ground.slidetime = 20+var(41)
ground.hittime  = 20+var(41)
ground.velocity = -3.1*fvar(14)
guard.velocity = -3.1* fvar(14)
air.velocity = ifelse(p2statetype = L,-9,-2*fvar(14)),ifelse(p2statetype = L,-.5,-2.3)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-5.1*fvar(14))
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = 44

fall.envshake.time = 9
air.fall = 1
yaccel = .51*fvar(15)
getpower = ceil(80*fvar(31)*fvar(6)),ceil(30*fvar(31)*fvar(6))
palfx.time = 5
envshake.time = 11
ID = 199
palfx.add = 205,-50,-50

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 12
attr = S, SA
animtype  = Light
damage    = ceil(35*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 8
hitflag = MAFD
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s120, 4
ground.type = High
guard.hittime = 10
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -3.1* fvar(14)
guard.velocity = -3.1* fvar(14)
air.velocity = ifelse(p2statetype = L,-9,-2.1*fvar(14)),ifelse(p2statetype = L,-.5,-2.2)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-5.1*fvar(14))
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = ceil(29*fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51*fvar(15)
getpower = ceil(40*fvar(31)*fvar(6)),ceil(10*fvar(31)*fvar(6))
ID = 200

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(199)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -59-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999


[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -91-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded = 1
trigger1 = numtarget(200)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -91-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(199)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -59-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
Trigger1 = MoveHit=1
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 200, 7]
type = ChangeState
triggerall = prevstateno !=1310
triggerall = AnimElemtime(13) >= 0
triggerall = AnimElemtime(17) < 0
trigger1 = command = "y"
trigger2 = var(58)
trigger2 = movehit
value = 1310

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;---------------------------------------------------------------------------
;RE-BITE
[Statedef 1400]
type    = S
movetype= I
physics = N
juggle  = 0
ctrl = 0
anim = 1400
sprpriority = 1


[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = Animelem=5
value = 1400,random%2
channel = 2
lowpriority = 2

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimelemTime(5)=0
value = 300,0

[State a];
type = palfx
trigger1 = AnimelemTime(5)=0
time = 10
;add = 255,255,255
mul = 255,255,255
sinadd = 255,255,255,20
color = 255

[State 1000, 3]
type = helper
trigger1 = AnimelemTime(5)>=0
trigger1 = AnimelemTime(7)<=2
persistent = 3
postype = p1
pos = -40+random%80,-random%100
stateno = 1012
helpertype = normal
persistent = 3
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999


[State 1300, 0]
type = HitOverride
trigger1 = AnimelemTime(5)>=0
trigger1 = AnimelemTime(7)<=0
attr = SA,NA,SA,HA
slot = 0
stateno = 1402 ;スーパーアーマーへ
time = 1              
forceair = 0
;ignorehitpause = 
;persistent = 

[State 1300, 0]
type = HitOverride
trigger1 = AnimelemTime(5)>=0
trigger1 = AnimelemTime(7)<=0
attr = SCA,NP,SP,HP
slot = 1
stateno = 1401 ;返し技へ      
time = 1                    
forceair = 0
;ignorehitpause = 
;persistent = 

[State a]
type = NotHitBy
triggerall = prevstateno=1401
trigger1 = AnimelemTime(7)>=0
trigger2 = AnimelemTime(5)<=0
value = SCA
time = 1

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;---------------------------------------------------------------------------
;返すぜ！
[Statedef 1401]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1400
sprpriority = 1
[State a]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0

[State 1051, 0];エックス
type = helper
trigger1 = !time
ID = 1010
helpertype = normal
postype = p1
persistent = 0
pos = 61,-70
stateno = 1415
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1300, 0]
type = HitOverride
trigger1 = Time=[1,28];AnimElem=1,=0
attr = SCA,NP,SP,HP
slot = 1
stateno = 1401 ;返し技へ      
time = 21                    
forceair = 0
;ignorehitpause = 
;persistent = 

[State 200, 7]
type = ChangeState
trigger1 = Time
value = 1400

;---------------------------------------------------------------------------
;当たった！
[Statedef 1402]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1401
poweradd = 0
sprpriority = 1

[State 1540, 4];光る
type = palfx
trigger1 = time = 0
time = 16
add = 0,0,255
ignorehitpause = 1
persistent = 0

[State snd]
type = playsnd
trigger1 = time = 0
value = 5200,0

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = time = 0
value = 1400,random%2
channel = 2
lowpriority = 2


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1
[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=24
persistent = 0
ignorehitpause = 1

[State 4]
type = Pause
trigger1 = time = 0
time = 30
movetime = 30

;---------------------[速度]
[State 100, 1]
type = Velset
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0

[state a]
type = velset
trigger1 = time = 0
trigger1 = prevstateno = 20
x = 0

;---------------------[攻撃]
[State 200, 1]
type = HitDef
trigger1 = animelem = 7
attr = S, NA
damage = ceil(60*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 12
getpower = 92,92
animtype = hard
guardflag = M
hitflag = MAFD
priority = 7, Hit
pausetime = 15,15
sparkno = s-1
sparkxy = 0, 0
hitsound = s400, 5
guard.sparkno = S-1
down.bounce = 1
guardsound = s120, 5
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
ground.velocity = -8,-6
down.velocity = -13.2,0
air.type = high
air.velocity = -8,-6
air.hittime = ifelse(var(5) = 0,20,24)

fall.envshake.time = 9
fall = 1
fall.recover = 0
fall.yvelocity = -3.2
yaccel = 0.5
ID = 200
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0

;---------------------[相手制御]
[state a]
type = targetstate
trigger1 = movehit = 1
trigger1 = enemy,stateno != 550
trigger1 = enemy,prevstateno != [550,569]
value = 550
ignorehitpause = 1
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -71-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded = 1
trigger1 = numtarget(200)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -71-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999


[state a]
type = Helper
trigger1 = animelem = 7
pos = 50, -91
postype = p1
stateno = 1410
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Helper
trigger1 = animelem = 7
pos = -50, -81
postype = p1
stateno = 1411
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
[state a]
type = Helper
trigger1 = animelem = 7
pos = 50, -61
postype = p1
stateno = 1410
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Helper
trigger1 = animelem = 7
pos = -50, -51
postype = p1
stateno = 1411
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Helper
trigger1 = animelem = 7
pos = 50, -31
postype = p1
stateno = 1410
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a]
type = Helper
trigger1 = animelem = 7
pos = -50, -21
postype = p1
stateno = 1411
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
;---------------------[ステート移行]
[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;----------------------------------------------------------------------------------------
[Statedef 1410]
type    = A
movetype= A
physics = N
anim = 1411
sprpriority = 9
velset = -10,0
juggle  = 0

[state b]
type = Trans
trigger1 = 1
trans = add

[state a]
type = angledraw
trigger1 = 1
scale = 3+(time*0.2),4.5-(time*0.25)

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 3000, 00]
type = destroyself
trigger1 = time = 20



;----------------------------------------------------------------------------------------
[Statedef 1411]
type    = A
movetype= A
physics = N
anim = 1410
sprpriority = 9
velset = 10,0
juggle  = 0

[state b]
type = Trans
trigger1 = 1
trans = add

[state a]
type = angledraw
trigger1 = 1
scale = 3+(time*0.2),4.5-(time*0.25)

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 3000, 00]
type = destroyself
trigger1 = time = 20
;----------------------------------------------------------------------------------------
[Statedef 1415];エックス
type    = A
movetype= A
physics = N
anim = 1017
sprpriority = 6
juggle  = 0

[State 100, 2]
type = velset
trigger1 = time = 0
x = 5+(random%80*0.1)
y = -5+(random%100*0.1)

[state b]
type = Trans
trigger1 = 1
trans = add

[state a]
type = angleset
trigger1 = time = 0
value = atan(Vel Y/Vel X)*(-180.0/pi)+((Vel X<0)*180)

[state a]
type = angledraw
trigger1 = 1


[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 0
value = 1000,3

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = movecontact
var(22) = ifelse(movehit,-10,8)
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = movehit
var(12) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = parentVaradd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = parentVaradd
trigger1=numtarget
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = root,var(33) = 0
attr = S, SP
animtype  = medium
damage    = ceil(49*ifelse(root,fvar(6)<0.25,0.25,root,fvar(6))*ifelse((var(29)&4),0.7,1)*ifelse((var(29)&8),0.85,1)), 10
priority = 3
hitflag = MAFD
guardflag = MA
pausetime = 0,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 1
guardsound = s120, 4
ground.type = low
ground.slidetime = 14+parent,var(41)
ground.hittime  = 14+parent,var(41)
ground.velocity = -7.5*parent,fvar(14)
air.velocity = -3.7*parent,fvar(14),-5.2
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = ceil(29*root,fvar(25))

fall.envshake.time = 9
air.fall = 1
yaccel = .51*root,fvar(15)
getpower = 40, 20
ID = 1000
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0

[State 240, 6] ;カウンター
type = HitDef
trigger1 = root,var(33) >= 1
attr = S, SP
animtype  = medium
damage    = 55, 11
priority = 7
hitflag = MAFD
guardflag = MA
pausetime = 0,26
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 1
guardsound = s120, 5
ground.type = low
ground.slidetime = 20+parent,var(41)
ground.hittime  = 20+parent,var(41)
ground.velocity = -7.5*parent,fvar(14)
air.velocity = -3.7*parent,fvar(14),-5.2
down.velocity = -13.2,0
fall.recover = 1
fall.yvelocity = -3.2
fall.recovertime = 56

fall.envshake.time = 9
air.fall = 1
yaccel = .51*root,fvar(15)
getpower = 40, 20
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
envshake.time = 11
ID = 1000

;ブースト
[state a]
type = targetstate
triggerall = numtarget
triggerall = target,prevstateno = [550,551]
trigger1 = movehit=1
trigger1 = !target,ishelper
value = 550
ignorehitpause = 1

[state a]
type = targetstate
triggerall = numtarget
triggerall = target,prevstateno = [555,559]
trigger1 = movehit=1
trigger1 = !target,ishelper
value = 555
ignorehitpause = 1


;ガードクラッシュ
[state gakura]
type = targetstate
triggerall = numtarget
triggerall = !target,ishelper
triggerall = target,alive
triggerall = (target,stateno=150||target,stateno=152||target,stateno=154)&&target,time<=4
trigger1 = root,var(6)>270
trigger1 = target,ID=helper(10000),var(50)
trigger2 = root,var(15)>270
trigger2 = target,ID=helper(10000),var(51)
value = 15000
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded = 1
trigger1 = P2MoveType = H
id = 7022
name = "hit"
pos = 9,-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = movehit
value = 400,2
ignorehitpause = 1
persistent = 0

[State 1000, 3];必殺ヒットエフェクトマーク
type = helper
trigger1 = movehit
trigger1 = P2MoveType = H
id = 7000
postype = p2
ignorehitpause = 1
persistent = 0
pos = 8,-Ceil(P2BodyDist Y)
priority = 2
stateno = 7005
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

[State 40 , 0]
type = Explod
trigger1 = 1
anim = 1007+random%4
postype = p1
pos = -60+random%20,20-random%80
sprpriority = 7
bindtime = 1
persistent = 6
ontop = 1
facing = -1
scale = 0.9,0.9

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(1000)
trigger1 = parent,var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(1000)
trigger1 = parent,var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 3000, 00]
type = changestate
trigger1 = moveguarded
trigger2 = movetype = H
trigger3 = movehit
trigger4 = time >= 400
trigger5 = Pos Y > 5
value = 1011
ignorehitpause = 1


;---------------------------------------------------------------------------
; ここからはBASARA技のステート
;---------------------------------------------------------------------------
;HELL DRAGON
[Statedef 3000]
type    = S
movetype = A
physics = N
juggle  = 0
anim = 3000
ctrl = 0
sprpriority = 2
poweradd = -1000

[state 7000,]
type = varset
trigger1 = time=0
fvar(32) = 419
ignorehitpause = 1

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State 193, 2]
type = AssertSpecial
trigger1 = roundstate=1
flag = Intro

[state -1]
type = ScreenBound
trigger1 = roundstate=1
value = 0

[State a]
type = NotHitBy
trigger1 = roundstate=1
value = SCA
time = 1

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) = [-3.1,3.1]
x = 0
[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time != [11,61]
trigger1 = time >= 0
trigger1 = abs(Vel X) != 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time != [11,61]
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time != [11,61]
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) = [-0.01,0.01]
x = 0

[State a]
type = NotHitBy
trigger1 = time <= 55
value = SCA
time = 1

[State 100, 2]
type = poweradd
trigger1 = numhelper(2000)
trigger1 = helper(2000),stateno=[2050,2059]
value = -1000
persistent = 0

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = time = 7
value = 3000,0
channel = 1
lowpriority = 1
persistent = 0

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = time = 65
value = 3000,1+random%2
channel = 2
lowpriority = 1
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = numhelper(2000)
trigger1 = helper(2000),stateno=[2050,2059]
value = 3000,5
channel = 2
lowpriority = 0
persistent = 0
ignorehitpause = 1

[state a];vel
type = posfreeze
trigger1 = time = [11,61]
;---------------------[BASARA技]
[state a];BASARA技発動エフェクト
type = Helper
trigger1 = time = 11
id = 6100
name = "BASARA"
pos = 0 , -62
postype = p1
stateno = 6100
helpertype = normal
pausemovetime = 999
supermovetime = 999
keyctrl = 0 
ownpal = 1

[State 2000, 2]
type = superPause
trigger1 = roundstate>=2
trigger1 = animelem = 11
time = 50
movetime = 50
anim = -1
sound = -1,-1
darken = 0
unhittable = 0
p2defmul = 1

[State 2000, 2]
type = Pause
trigger1 = roundstate<2
trigger1 = animelem = 11
time = 50
movetime = 50
anim = -1

[State 1000 , 2];
type = Projectile
trigger1 = animelem = 9
projID = 3014
projanim = 3014
postype = p1
offset = 2,-40
velocity =  0,0
accel = 0,0
projsprpriority = 3
bindtime = -1
projremovetime = 8
ignorehitpause = 0
projstagebound = 700
pausemovetime = 9999999
supermovetime = 9999999
persistent = 1
projscale = 0.7-(fvar(3)*0.02),0.7-(fvar(3)*0.02)

[State 1051, 0];球
type = helper
trigger1 = animelem = 9
ID = 3010
helpertype = normal
postype = p1
persistent = 0
pos = 41,-70
stateno = 3010
ownpal = 1
size.xscale = 1.4
size.yscale = 1.4
pausemovetime = 999999
supermovetime = 999999

[State 1051, 0];球
type = null;helper
trigger1 = animelem = 9
ID = 3011
helpertype = normal
postype = p1
persistent = 0
pos = 41,-70
stateno = 3011
ownpal = 1
size.xscale = 1.4
size.yscale = 1.4
pausemovetime = 999999
supermovetime = 999999

[State 1000, 7] ;終了
type = ChangeState
trigger1 = AnimTime = 0
trigger1 = roundstate = 1
value = 10099

[State -1]
Type = AllPalFX
Trigger1 = Time > 96
trigger1 = roundstate = 1
Time = 1
Add = (96-time)*10,(96-time)*10,(96-time)*10
IgnoreHitPause = 1
Peresistent = 1

[State 1000, 7] ;終了
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1



;----------------------------------------------------------------------------------------
[Statedef 3010];球
type    = A
movetype= A
physics = N
anim = 3010
sprpriority = 6
juggle  = 0

[State 100 , 0]
type = Explod
trigger1 = time > 40
anim = 6010
postype = p1
pos = 0,86
sprpriority = 8
bindtime = 1
ownpal = 1
scale = 0.5,0.5
ID = 6010
persistent = 7


[State 1051, 0];球
type = helper
trigger1 = parent,animelemtime(14) =0
ID = 3011
helpertype = normal
postype = p1
persistent = 0
pos = 0,0
stateno = 3011
ownpal = 1
size.xscale = 1.4
size.yscale = 1.4
pausemovetime = 999999
supermovetime = 999999

[state a]
type = varset
trigger1 = time=0
fvar(1)=50

[state a]
type = angleset
trigger1 = 1
value = time

[state a]
type = angledraw
trigger1 = parent,animelemtime(14) <0
scale = 1.5-(fvar(1)*0.03),1.5-(fvar(1)*0.03)

[state a]
type = angledraw
trigger1 = parent,animelemtime(14) >=0
scale = 1,1

[state a]
type = varadd
trigger1 = parent,animelemtime(14) <0
fvar(1)=-0.3

[state b]
type = Trans
trigger1 = 1
trans = add

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 41
value = 3000,4

[State 200, 0];コンボ数加算
type = ParentVaradd
trigger1 = movehit = 1
trigger1=var(33)%2=0
var(12) = 1
persistent = 1
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = ParentVaradd
trigger1 = movehit = 1
trigger1=var(33)%2=0
trigger1 = p2statetype=A
var(11) = 1
persistent = 1
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = ParentVaradd
trigger1=var(33)%2=0
trigger1 = movecontact = 1
var(22) = ifelse(movehit,-10,10)
persistent = 1
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = parentVaradd
trigger1=numtarget
trigger1=var(33)%2=0
trigger1=moveguarded=1
var(ifelse(target,ID=helper(10000),var(50),6,15))=4
persistent = 1
ignorehitpause = 1

[State 200, 0];制限
type = Varadd
trigger1=numtarget
trigger1=movecontact=1
var(33)=1
persistent = 1
ignorehitpause = 1

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 100, 2]
type = velset
trigger1 = parent,animelemtime(14)>=0
x = 6.8

[state 7000,]
type = parentvaradd
trigger1 = movehit = 1
fvar(30) = 0.03
persistent = 0
ignorehitpause = 1

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = var(33)<=8
;trigger1 = time%9 = 0
attr = S, HP
animtype  = hard
damage    = ceil(36*ifelse(root,fvar(6)*ifelse((root,var(29)&4),0.6,1)*ifelse((root,var(29)&8),0.85,1)<0.25,0.25,root,fvar(6)*ifelse((root,var(29)&4),0.6,1)*ifelse((root,var(29)&8),0.85,1))),11
priority = 3
hitflag = MAF
guardflag = MA
pausetime = 2,2
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 2
guardsound = s120, 1
ground.type = low
ground.hittime  = 10
ground.slidetime = 19+parent,var(41)
ground.hittime  = 19+parent,var(41)
ground.velocity = -15.5*parent,fvar(14)
guard.velocity = -3
air.velocity = -3.7*parent,fvar(14),-5.2
fall.recover = 0
fall.yvelocity = -3.2
fall = 1
ground.cornerpush.veloff = 0
fall.envshake.time = 9
yaccel = .51*root,fvar(15)
ID = 1000
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
persistent = 2

[State 1000, 3];必殺ヒットエフェクトマーク
type = helper
trigger1 = movehit=1
trigger1 = numtarget(1000)
trigger1 = hitcount <=5
id = 7000
postype = p2
ignorehitpause = 1
persistent = 2
pos = 8,-Ceil(P2BodyDist Y)
priority = 2
stateno = 7005
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5


[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded=1
trigger1 = numtarget(1000)
id = 7022
pos = 9,-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 2
ignorehitpause = 1
keyctrl = 0
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

[State Help,1]
Type = Helper
Trigger1 = MoveHit
trigger1 = numtarget(1000)
trigger1 = parent,var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(1000)
trigger1 = parent,var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[state a]
type = targetstate
trigger1 = movehit = 1
trigger1 = numtarget
trigger1 = !Target,Ishelper
value = 555
ignorehitpause = 1
;persistent = 0


;ガードクラッシュ
[state gakura]
type = targetstate
triggerall = numtarget
triggerall = !target,ishelper
triggerall = target,alive
triggerall = (target,stateno=150||target,stateno=152||target,stateno=154)&&target,time<=4
trigger1 = root,var(6)>270
trigger1 = target,ID=helper(10000),var(50)
trigger2 = root,var(15)>270
trigger2 = target,ID=helper(10000),var(51)
value = 15000
ignorehitpause = 1

[State 1000 , 2];
type = Projectile
trigger1 = parent,animelemtime(14) >= 2
projID = 3012
projanim = 3012
postype = p1
offset = -40+(1+random%80),-50+(1+random%100)
velocity =  6.8,0
accel = 0,0
projsprpriority = 16
bindtime = -1
projremovetime = 8
ignorehitpause = 0
projstagebound = 700
pausemovetime = 9999999
supermovetime = 9999999
persistent = 2
projscale = 0.7,0.7

[State 1000 , 2];
type = Projectile
trigger1 = time
trigger1 = parent,animelemtime(14) <= 0
projID = 3012
projanim = 3012
postype = p1
offset = -(time/2)+(random%time),-(time/2)+(random%time)
velocity =  0,0
accel = 0,0
projsprpriority = 3
projremovetime = 8
ignorehitpause = 0
projstagebound = 700
pausemovetime = 9999999
supermovetime = 9999999
persistent = 2
projscale = 1.5-(fvar(1)*0.03),1.5-(fvar(1)*0.03)

[State 1000 , 2];
type = Projectile
trigger1 = 1
projanim = 3013
postype = p1
offset = 90+random%80*ifelse(random%2=1,1,-1),90+random%80*ifelse(random%2=1,1,-1)
velocity =  0,0
accel = 0,0
projsprpriority = 3
projremovetime = 8
ignorehitpause = 0
projstagebound = 700
pausemovetime = 9999999
supermovetime = 9999999
persistent = 5
projscale = 0.5,0.5

[state a]
type = varset
trigger1 = time=0
fvar(3)=20

[state a]
type = varadd
trigger1 = parent,animelemtime(14) <0
fvar(3)=-0.5


[State 1000, 3];必殺ヒットエフェクトマーク
type = helper
trigger1 = roundstate = 1
trigger1 = ScreenPos X = [130,190]
id = 7000
postype = p1
ignorehitpause = 1
persistent = 5
pos = random%10+10,random%80-40
priority = 2
stateno = 7005
ownpal = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

[State counter]
Type = playsnd
trigger1 = roundstate = 1
trigger1 = ScreenPos X = [130,190]
value = 400,2
Persistent = 5


[state t]
type = velset
trigger1 = roundstate = 1
trigger1 = ScreenPos X = [130,190]
x = 0

[state a]
type = destroyself
trigger1 = time >= 300
;trigger1 = ScreenPos X != [-200,550]
trigger2 = roundstate = 1
trigger2 = root,stateno != 3000
ignorehitpause = 1

;----------------------------------------------------------------------------------------
[Statedef 3011]
type    = A
movetype= A
physics = N
anim = 3011
sprpriority = 7
velset = 0,0
juggle  = 0

[state a]
type = bindtoparent
trigger1 = root,numhelper(3010)

[state a]
type = varset
trigger1 = !time
fvar(1)=50

[state a]
type = angledraw
trigger1 = parent,animelemtime(14) <0
scale = 1.5-(fvar(1)*0.03),1.5-(fvar(1)*0.03)

[state a]
type = angledraw
trigger1 = parent,animelemtime(14) >=0
scale = 1,1

[state a]
type = varadd
trigger1 = parent,animelemtime(14) <0
fvar(1)=-0.3

[State 100, 2]
type = velset
trigger1 = parent,animelemtime(14) =0
x =6.8

[state a]
type = angleadd
trigger1 = 1
value = 22

[state a]
type = angledraw
trigger1 = 1

[state b]
type = Trans
trigger1 = 1
trans = add

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 3000, 00]
type = destroyself
trigger1 = time >= 200
trigger2 = !root,numhelper(3010)
trigger3 = root,stateno != 3000
trigger4 = parent,ScreenPos X != [-170,520]

;---------------------------------------------------------------------------
; PHANTOM DIVE
[Statedef 3100]
type    = S
movetype= A
physics = N
juggle  = 0
anim = 3100
ctrl = 0
sprpriority = 2

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State a]
type = NotHitBy
trigger1 = time <= 55
value = SCA
time = 1

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
trigger1 = animelemtime(14) < 0
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = animelemtime(3) != [0,50]
trigger1 = abs(Vel X) > 0
trigger1 = animelemtime(14) < 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = animelemtime(3) != [0,50]
trigger1 = abs(Vel X) > 0
trigger1 = animelemtime(14) < 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = animelemtime(3) != [0,50]
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
trigger1 = animelemtime(14) < 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
trigger1 = animelemtime(14) < 0
x = 0

[state a];vel
type = posfreeze
trigger1 = animelemtime(3) = [0,50]
;---------------------[BASARA技]
[state a];BASARA技発動エフェクト
type = Helper
trigger1 = animelem = 3
id = 6100
name = "BASARA"
pos = 0 , -62
postype = p1
stateno = 6100
helpertype = normal
pausemovetime = 9999
supermovetime = 99999
keyctrl = 0 
ownpal = 1

[State 2000, 2]
type = superPause
trigger1 = animelem = 3
time = 50
movetime = 50
anim = -1
sound = -1,-1
darken = 0
unhittable = 0
p2defmul = 1

[State 191, Snd 1]
type = poweradd
trigger1 = animelem = 3
value = -1000

[state 7000,]
type = varset
trigger1 = animelem = 3
fvar(32) = 419
ignorehitpause = 1

[State 100, 1]
type = Velset
trigger1 = animelem = 14
x = 6
y = -12.5


[State 100, 2]
type = Veladd
trigger1 = animelemtime(15) > 0
y = 0.51

[State 100, 2]
type = Veladd
trigger1 = animelemtime(20) >= 0
y = 0.61

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = AnimElem = 3
value = 3100,random%2
channel = 2
lowpriority = 2

[State 100, 1]
type = StateTypeSet
trigger1 = animelem = 14
statetype = A

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = animelem = 7
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = animelemtime(14) >= 0
trigger1 = animelemtime(17) < 0
trigger1=var(12):=var(12)+1
var(22) = -10
persistent = 0
ignorehitpause = 1


[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = animelem = 7
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = animelemtime(14) >= 0
trigger1 = animelemtime(17) < 0
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = animelem = 7
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
trigger1 = animelemtime(14) >= 0
trigger1 = animelemtime(17) < 0
var(ifelse(target,ID=helper(10000),var(50),6,15))=8
persistent = 0
ignorehitpause = 1

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-5), -59-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 7
attr = S, HA
animtype  = up
damage    = ceil(60*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.6,1)*ifelse((var(29)&8),0.85,1)), 12
hitflag = MAF
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 4
ground.type = High
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = 2.2,-9
guard.velocity = -3.1* fvar(14)
air.velocity = 2.2,-9
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = ceil(26*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
getpower = 0
ID = 199

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelemtime(14) >= 0
trigger1 = animelemtime(17) < 0
attr = A, HA
animtype  = up
damage    = ceil(80*ifelse(fvar(6)<0.25,0.25,fvar(6))*ifelse((var(29)&4),0.6,1)*ifelse((var(29)&8),0.85,1)), 16
hitflag = MAF
guardflag = MA
pausetime = 10,10
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 4
ground.type = High
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -7.4,-9.9
guard.velocity = -7.4* fvar(14)
air.velocity = -7.4,-9.9
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = ceil(26*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .45
ID = 200
persistent = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(199)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -59-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999


[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-25), -91-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded = 1
trigger1 = numtarget(200)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -91-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(199)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-25), -59-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
Trigger1 = MoveHit=1
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[State 100 , 0]
type = Explod
trigger1 = animelem = 6
anim = 1411
postype = p1
pos = 70,-10
sprpriority = 7
bindtime = 1
ownpal = 1
scale = 2,1
vel = -21,0
IgNoreHitPause = 1
removetime = 10

[State 100 , 0]
type = Explod
trigger1 = animelem = 6
anim = 1411
postype = p1
pos = 90,-25
sprpriority = 7
bindtime = 1
ownpal = 1
scale = 2,1
vel = -21,0
IgNoreHitPause = 1
removetime = 10

[State 100 , 0]
type = Explod
trigger1 = animelem = 6
anim = 1411
postype = p1
pos = 110,-40
sprpriority = 7
bindtime = 1
ownpal = 1
scale = 2,1
vel = -21,0
IgNoreHitPause = 1
removetime = 10

[State 100 , 0]
type = Explod
trigger1 = animelem = 6
anim = 1411
postype = p1
pos = 130,-55
sprpriority = 7
bindtime = 1
ownpal = 1
scale = 2,1
vel = -21,0
IgNoreHitPause = 1
removetime = 10

[State 100 , 0]
type = Explod
trigger1 = animelem = 6
anim = 1411
postype = p1
pos = 150,-70
sprpriority = 7
bindtime = 1
ownpal = 1
scale = 2,1
vel = -21,0
IgNoreHitPause = 1
removetime = 10

[State 200, 7]
type = ChangeState
trigger1 = animelemtime(17) > 0
trigger1 = Pos y >= 0
value = 3101

;---------------------------------------------------------------------------
[Statedef 3101]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 3101
sprpriority = 1

[state u76yh6]
type = Width
trigger1 = 1
value = 57,47

[State 100, 1]
type = Velset
trigger1 = time = 0
x = 0
y = 0


[State 3101, 5]
type = EnvShake
trigger1 = time = 0
trigger1=!(var(29)&1)
time = 30
freq = 40
ampl = -12

[State 193, 5]
type = PlaySnd
trigger1 = animelem = 10
value = 1000, 2

[State 200, 0];コンボ数加算
type = Varadd
trigger1 = movehit
trigger1=var(12):=var(12)+1
var(22) = ifelse(movehit,-10,10)
persistent = 0
ignorehitpause = 1
[State 200, 0];空中コンボ数加算
type = Varadd
trigger1 = movehit
trigger1 = p2statetype=A
var(11) = 1
persistent = 0
ignorehitpause = 1
[State 200, 0];ガードゲージ
type = Varadd
trigger1=numtarget
trigger1=moveguarded=1
var(50) = (ifelse(target,ID=helper(10000),var(50),6,15))=14
persistent = 0
ignorehitpause = 1
[state 7000,]
type = varadd
trigger1 = movehit = 1
fvar(30) = 0.05
persistent = 0
ignorehitpause = 1

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = AnimElem = 2
value = 3100,2

[State -3, re];相殺	
type = ReversalDef
TriggerAll = MoveContact = 0
triggerall=MoveReversed=0
Trigger1 = P2MoveType = A
attr = s,sa
NumHits = 0
reversal.attr = sca,na,sa,ha
pausetime = 16,16
hitsound = s200,8
sparkno = S-1
ID = 201
ignorehitpause = 0

[State 1540 , 1];相殺エフェクト
type = helper
trigger1 = Numtarget(201) = 1
ID = 9930
postype = p2
ignorehitpause = 1
persistent = 0
pos = Ceil(P2Dist X/2-5), -59-Ceil(P2BodyDist Y)
priority = 2
stateno = 9930
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = animelem = 2
attr = S, HA
animtype  = hard
damage    = ceil(108*ifelse(fvar(6)<0.50,0.50,fvar(6))*ifelse((var(29)&4),0.8,1)*ifelse((var(29)&8),0.95,1)), 20
hitflag = MAFD
guardflag = MA
pausetime = 14,14
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 4
guardsound = s120, 3
ground.type = High
ground.slidetime = 14+var(41)
ground.hittime  = 14+var(41)
ground.velocity = -10.1,-7.5
guard.velocity = -8.1
air.velocity = ifelse(p2statetype = L,-9,-10),ifelse(p2statetype = L,-.5,-7.5)
ground.cornerpush.veloff = ifelse(p2statetype = L,-12,-10.1*fvar(14))
fall.recover = 0
fall.yvelocity = -3.2
fall.recovertime = ceil(30*fvar(25))

fall.envshake.time = 9
fall = 1
yaccel = .51*fvar(15)
ID = 200
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0

[state a];ヒットエフェクト
type = Helper
trigger1 = movehit
trigger1 = numtarget(200)
id = 7000
name = "hit"
pos = Ceil(P2Dist X/2-15), -59-Ceil(P2BodyDist Y)
postype = p2
stateno = 7005
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5
supermovetime = 999999
pausemovetime = 999999

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded
trigger1 = numtarget(200)
id = 7022
name = "hit"
pos = Ceil(P2Dist X/2-15), -59-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
supermovetime = 999999
pausemovetime = 999999

[State Help,1]
Type = Helper
Trigger1 = MoveHit=1
trigger1 = numtarget(200)
trigger1 = var(33)
StateNo = 9920
Pos = 0,0
PosType = back
IgNoreHitPause = 1
Persistent = 0
Ownpal = 1

[State counter]
Type = playsnd
Trigger1 = MoveHit
trigger1 = numtarget(200)
trigger1 = var(33)
value = 9920,0
IgNoreHitPause = 1
Persistent = 0

[state b]
type = Helper
trigger1 = animelem = 2
pos = 140,-10
postype = p1
stateno = 3110
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 1.1
size.yscale = 1.1

[State 100, 1]
type = Veladd
trigger1=(var(29)&1)
trigger1 = time > 0
trigger1 = pos y<0
y = .6

[State 100, 1]
type = posset
trigger1 = time = 0
trigger2=(var(29)&1)
trigger2 = pos y>0
y = 0

[State 100, 1]
type = Velset
trigger1=(var(29)&1)
trigger1 = animelem = 2
y = -13

[State 100, 1]
type = Varadd
trigger1=(var(29)&1)
trigger1 = animelem = 2
fvar(30)=0.09

[state s]
type = StateTypeSet
trigger1 = pos y<0
trigger1 = statetype != A
statetype = A

[state s]
type = StateTypeSet
trigger1 = pos y>=0
trigger1 = statetype != S
statetype = S

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;----------------------------------------------------------------------------------------
[Statedef 3110];雷
type    = A
movetype= A
physics = N
anim = 3110
sprpriority = 9
velset = 0,0
juggle  = 0

[state b]
type = Trans
trigger1 = 1
trans = add

[state a]
type = angledraw
trigger1 = time >=39
scale = 1.1-((time-39)*0.02),1.1

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[state b]
type = ModifyExplod
trigger1 = time >= 59
trigger1 = (time-59)*0.02 <=0.5
ID = 1016
scale = 0.5-((time-59)*0.02),0.5

[state a]
type = Helper
trigger1 = animelem = 2
pos = -40,10
postype = p1
stateno = 3111
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 1.1
size.yscale = 1.1

[state a]
type = Helper
trigger1 = animelem = 2
pos = 40,10
postype = p1
stateno = 3112
helpertype = normal
persistent = 0
ignorehitpause = 1
keyctrl = 0 
ownpal = 1
size.xscale = 1.1
size.yscale = 1.1

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = 40,-7
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = -1
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = 60,0
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = -1
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = 90,-5
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = -1
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = 130,15
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = 3
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = 100,20
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = 3
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = 70,25
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = 3
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = 40,30
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = 3
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = 10,35
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = 3
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = -20,30
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = 3
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = -50,25
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = 3
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = -70,20
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = 3
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = -100,15
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = 3
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = -130,10
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = 3
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = -90,3
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = -1
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = -60,-4
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = -1
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = -30,-13
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = -1
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016

[state 3400,];稲光
type = explod
trigger1 = time = 2
postype = p1
pos = 0,-20
anim = 1016
facing = ifelse(random % 2 = 0,1,-1)
bindtime = -1
sprpriority = -1
removetime = 90
ownpal  = 1
ignorehitpause = 1
ownpal = 1
scale = 0.5,0.5
persistent = 0
ID = 1016




[State 3000, 00]
type = destroyself
trigger1 = ((time-39)*0.02)>=1.1



;----------------------------------------------------------------------------------------
[Statedef 3111];雷
type    = A
movetype= A
physics = N
anim = 3111
sprpriority = 9
juggle  = 0

[state b]
type = Veladd
trigger1 = time = [45,60]
x = .5

[state b]
type = Veladd
trigger1 = time >= 65
x = -.5

[state a]
type = angledraw
trigger1 = time >= 49
scale = 1.1-((time-19)*0.02),1.1

[state b]
type = Trans
trigger1 = 1
trans = add

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 100 , 0]
type = Explod
trigger1 = time = 0
anim = 3112
postype = p1
pos = 0,0
sprpriority = 7
bindtime = -1
ownpal = 1
;scale = 2,1
IgNoreHitPause = 1
removetime = -1
ID = 3111
scale = 1,1

[State 3000, 00]
type = removeexplod
trigger1 = (time-19)*0.02 >= 1.1
ID = 3111

[State 3000, 00]
type = destroyself
trigger1 = (time-19)*0.02 >= 1.1


;----------------------------------------------------------------------------------------
[Statedef 3112];雷
type    = A
movetype= A
physics = N
anim = 3111
sprpriority = 9
juggle  = 0

[state b]
type = Veladd
trigger1 = time = [45,60]
x = -.5

[state b]
type = Veladd
trigger1 = time >= 65
x = .5

[state a]
type = angledraw
trigger1 = time >= 49
scale = 1.1-((time-19)*0.02),1.1

[state b]
type = Trans
trigger1 = 1
trans = add

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 100 , 0]
type = Explod
trigger1 = time = 0
anim = 3112
postype = p1
pos = 0,0
sprpriority = 7
bindtime = -1
ownpal = 1
;scale = 2,1
IgNoreHitPause = 1
removetime = -1
ID = 3111
scale = 1,1

[State 3000, 00]
type = removeexplod
trigger1 = (time-19)*0.02 >= 1.1
ID = 3111

[State 3000, 00]
type = destroyself
trigger1 = (time-19)*0.02 >= 1.1




;---------------------------------------------------------------------------
; HELL END DRAGON
[Statedef 3500]
type    = S
movetype = A
physics = N
juggle  = 0
anim = 3500
ctrl = 0
sprpriority = 0
poweradd = -5000

[state t]
type = Turn
trigger1 = !time&&P2dist X<=0&&(prevstateno=52||(prevstateno=[200,1999]))

[State a];
type = palfx
trigger1 = !time
time = 1
;add = 255,255,255
mul = 0,0,0
color = 255
ignorehitpause = 1

[State a]
type = NotHitBy
trigger1 = time <= 55
value = SCA
time = 1

;---------------------[BASARA技]
[state a];BASARA技発動エフェクト
type = Helper
trigger1 = time = 10
id = 6200
name = "BASARA"
pos = 0 , 0
postype = p1
stateno = 6200
helpertype = normal
pausemovetime = 999
supermovetime = 99999
keyctrl = 0 
ownpal = 1

[State 2000, 2]
type = superPause
trigger1 = time = 12
time = 54
movetime = 54
anim = -1
sound = -1,-1
darken = 0
unhittable = 0
p2defmul = 1

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0
[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time != [10,60]
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time != [10,60]
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time != [10,60]
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0

[state a];vel
type = posfreeze
trigger1 = time = [10,60]

[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = Animelem = 7
value = 3500,0
channel = 2
lowpriority = 2

[State 1051, 0];絶じゃないよ
type = helper
trigger1 = Animelem = 10
ID = 3510
helpertype = normal
postype = p1
persistent = 0
pos = 21,-90
stateno = 3510
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 1051, 0];
type = helper
trigger1 = time = 12
ID = 3511
postype = p1
persistent = 0
pos = -45,-57
stateno = 3511
ownpal = 1
ignorehitpause = 1
supermovetime = 999999
pausemovetime = 999999

[State 1051, 0]
type = helper
trigger1 = time = 12
ID = 3512
postype = p1
persistent = 0
pos = 28,-60
stateno = 3511
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1

[State 1051, 0]
type = helper
trigger1 = Animelem = 11
ID = 3516
postype = p1
persistent = 0
pos = 40,-79
stateno = 3516
ownpal = 1
supermovetime = 999999
pausemovetime = 999999
ignorehitpause = 1
size.xscale = 1.3
size.yscale = 1.3

[state a]
type = varset
trigger1 = time = 0
v = 24
value = 1

[state a]
type = varset
trigger1 = winko
v = 13
value = 1
ignorehitpause = 1
loop = 1

[State 191, Snd 1];音楽
type = PlaySnd
trigger1 = winko
value = 6200,99
persistent = 0
ignorehitpause = 1
loop = 1

[State 1000, 7] ;終了
type = ChangeState
trigger1 = winko
trigger1 = numhelper(3510)=0
value = 0
ctrl = 1

[State 1000, 7] ;終了
type = ChangeState
trigger1 = Time >= 74
trigger1 = !winko
trigger1 = numhelper(3510)=0
value = 3504

;-------------------------------------
;まさかの失敗
[Statedef 3504]
type    = S
movetype = A
physics = N
juggle  = 0
anim = 3504
ctrl = 0
sprpriority = 0
poweradd = 0

[State 1000, 7] ;終了
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------
;ｵｰﾓｰｲｰｶﾞｰ
[Statedef 3501]
type    = S
movetype = A
physics = N
juggle  = 0
anim = 3501
ctrl = 0
sprpriority = 0
poweradd = 0

[State 193, 5]
type = PlaySnd
trigger1 = time = 1
value = 181, 2+random%2
channel = 2

[State 1000, 7]
type = EnvShake
trigger1 = time<=30
time = 10
freq = 30
ampl = -3
persistent = 10

[State 1000, 7]
type = EnvShake
trigger1 = time>30
time = 10
freq = 60
ampl = -6
persistent = 10

[State 193, 5]
type = PlaySnd
trigger1 = 1
value = 187, 1
pan = -600+(time*8)
persistent = 40
volume = time

[State 1000, 7] ;終了
type = ChangeState
trigger1 = AnimTime = 0
value = 3502

;-------------------------------------
;GO!
[Statedef 3502]
type    = A
movetype = A
physics = N
juggle  = 0
anim = 3502
ctrl = 0
sprpriority = 0
poweradd = 0

[State 193, 5]
type = PlaySnd
trigger1 = time < 80
value = 187, 1
persistent = 40
volume = 255

[State 193, 5]
type = PlaySnd
trigger1 = time = [81,260]
value = 187, 1
persistent = 40
pan = 1
volume = 255-((time*2)-81)

[State 1051, 0];馬
type = helper
trigger1 = Animelem = 7
ID = 3513
helpertype = normal
postype = p1
persistent = 0
pos = -360,0
stateno = 3513
ownpal = 1

[State 1051, 0];まさかの小十郎
type = helper
trigger1 = time = 320
trigger1 = var(40)=1
trigger1 = !numhelper(2000)
trigger1 = !numhelper(2500)
ID = 2100
helpertype = normal
postype = back
persistent = 0
pos = -190,0
stateno = 3523
ownpal = 1

[State 1000, 7]
type = EnvShake
trigger1 = time <=200
time = 10
freq = 60
ampl = -4
phase = 0
persistent = 10

[State 100, 2]
type = velset
trigger1 = animelem = 8
x = -3
y = -11

[State 193, 5]
type = PlaySnd
trigger1 = animelem = 8
value = 41,0

[State 100, 2]
type = veladd
trigger1 = animelemtime(8) > 0
trigger1 = animelemtime(15) < 0
y = .49

[State 193, 5]
type = PlaySnd
trigger1 = animelemtime(15) = 8
value = 187,0
channel = 2

[State 100, 2]
type = velset
trigger1 = animelem = 15
x = 10
y = 0

[State camera]
type = ScreenBound
trigger1 = BackEdgeDist < 3
trigger2 = FrontEdgeDist < 2
value = 0

[State 182, 特殊効果]
type = AssertSpecial
trigger1 = Time = [0,330]
flag = RoundNotOver

[State 182, 特殊効果]
type = AssertSpecial
trigger1 = numhelper(2000)
trigger1 = Time = [0,550]
flag = RoundNotOver

[State 182, 特殊効果]
type = AssertSpecial
trigger1 = numhelper(2100)
trigger1 = Time = [0,600]
flag = RoundNotOver
;-------------------------------------
;馬
[Statedef 3513]
type    = S
movetype = I
physics = N
juggle  = 0
anim = 3513
ctrl = 0
sprpriority = -1
poweradd = 0

[State 100, 2]
type = velset
trigger1 = time = 20
x = 10


[State 100, 2]
type = BindToParent
trigger1 = time >= 44
time = 1
pos = 20,40

[State 100 , 0]
type = Explod
trigger1 = time >= 0
trigger1 = Time%7 = 6
anim = 6010
postype = p1
pos = -50,10
sprpriority = 8
bindtime = 1
ownpal = 1
scale = 0.5,0.5
ID = 6010

;-------------------------------------
;馬
[Statedef 3514]
type    = S
movetype = I
physics = N
juggle  = 0
anim = 3513
ctrl = 0
sprpriority = -5
poweradd = 0

[State 100, 2]
type = velset
trigger1 = time = 20
x = 10


[State 100, 2]
type = BindToParent
trigger1 = time >= 44
time = 1
pos = 20,40

[State 100 , 0]
type = Explod
trigger1 = time >= 0
trigger1 = Time%7 = 6
anim = 6010
postype = p1
pos = -50,10
sprpriority = 8
bindtime = 1
ownpal = 1
scale = 0.5,0.5
ID = 6010

;-------------------------------------
;小十郎（オマケ）
[Statedef 3523]
type    = S
movetype = I
physics = N
juggle  = 0
anim = 2104
ctrl = 0
sprpriority = -1
poweradd = 0

[State 100, 2]
type = velset
trigger1 = time = 0
x = 7

[State 193, 5]
type = PlaySnd
trigger1 = time = 60
value = 2100,0
pan = 300
volume = 255-((time*2)-61)

[State 193, 5]
type = PlaySnd
trigger1 = time%15 = 9
value = 100,1
pan = 1
volume = 255-((time*2)-61)

[State 100 , 0]
type = Explod
trigger1 = time >= 0
trigger1 = Time%7 = 6
anim = 6010
postype = p1
pos = -50,10
sprpriority = 8
bindtime = 1
ownpal = 1
scale = 0.5,0.5
ID = 6010
;-------------------------------------
;電気球
[Statedef 3511]
type    = A
movetype = I
physics = N
juggle  = 0
anim = 3511
ctrl = 0
sprpriority = 2
poweradd = 0

[state b]
type = Trans
trigger1 = 1
trans = add

[state a]
type = BindToRoot
trigger1 = ishelper(3511)
trigger1 = root,animelemtime(9)=0
time = 1
pos = -14, -80

[state a]
type = BindToRoot
trigger1 = ishelper(3512)
trigger1 = root,animelemtime(9)=0
time = 1
pos = 20, -77

[state a]
type = angledraw
trigger1 = 1
scale = 0.05+(time*0.02),0.05+(time*0.02)

[State bv]
type = destroyself
trigger1 = root,animelemtime(12) > 0
trigger2 = root,movetype = H

;-------------------------------------
;電気球
[Statedef 3516]
type    = A
movetype = I
physics = N
juggle  = 0
anim = 3512
ctrl = 0
sprpriority = 2
poweradd = 0

[state b]
type = Trans
trigger1 = 1
trans = add

[State bv]
type = destroyself
trigger1 = time >= 90
trigger2 = root,movetype = H

;----------------------------------------------------------------------------------------
[Statedef 3510];DRAGon
type    = A
movetype= A
physics = N
anim = 3510
sprpriority = 2
juggle  = 0


[State 191, Snd 1];振り
type = PlaySnd
trigger1 = time = 0
value = 3500,1

[State 100, 2]
type = AssertSpecial
trigger1 = time >= 0
flag = noshadow

[State 100, 2]
type = velset
trigger1 = time >= 0
x = 7.4

[State 240, 6] ;攻撃予約
type = HitDef
trigger1 = 1
attr = A, HP
animtype  = medium
damage    = 990+random%1000,0;-2147483648, 0
priority = 999
hitflag = MAF
guardflag = MA
pausetime = 13,13
sparkno = -1
guard.sparkno = S-1
down.bounce = 1
sparkxy = -2, -94
hitsound = s400, 5
guardsound = s121, 0
ground.type = high
ground.slidetime = 14+parent,var(41)
ground.hittime  = 14+parent,var(41)
ground.velocity = -4.5,-6.2
air.velocity = -4.7,-6.2
fall.recover = 0
fall.yvelocity = -3.2
fall = 1

fall.envshake.time = 9
yaccel = .51*root,fvar(15)
getpower = 0,0
ID = 1000
palfx.time = 35
palfx.add         = -100,0,130
palfx.sinadd      = 110,110,110,10
palfx.invertall = 1
palfx.color     = 0
persistent = 0

[state a]
type = null;targetstate
trigger1 = movehit
trigger1 = !Target,Ishelper
value = 5000
persistent = 0
ignorehitpause = 1

[state a];ガードエフェクト
type = Helper
trigger1 = moveguarded = 1
trigger1 = P2MoveType = H
id = 7022
name = "hit"
pos = 9,-Ceil(P2BodyDist Y)
postype = p2
stateno = 7020
helpertype = normal
pausemovetime = 0
persistent = 0
ignorehitpause = 1
keyctrl = 0
ownpal = 1
size.xscale = 0.5
size.yscale = 0.5

[State 191, Snd 1];振り
type = PlaySnd
trigger1 = movehit
value = 400,2
ignorehitpause = 1
persistent = 0

[State 1000, 3];必殺ヒットエフェクトマーク
type = helper
trigger1 = movehit
trigger1 = P2MoveType = H
id = 7000
postype = p2
ignorehitpause = 1
persistent = 0
pos = 8,-Ceil(P2BodyDist Y)
priority = 2
stateno = 7005
ownpal = 1
supermove = 1
pausemovetime = 999999
supermovetime = 999999
size.xscale = 0.5
size.yscale = 0.5

[state lifeadd]
type = targetlifeadd
trigger1 = movehit
value = -9000-random%130
pausemovetime = 9990000
supermovetime = 9990000
persistent = 1

[State 40 , 0]
type = Explod
trigger1 = 1
anim = 1007+random%4
postype = p1
pos = -180+random%180,-90+random%180*ifelse(random%2=1,1,-1)
sprpriority = 7
bindtime = 1
persistent = 6
ontop = 1
facing = -1
scale = 0.9,0.9

[State 3000, 00]
type = destroyself
trigger1 = time >= 80
ignorehitpause = 1

;--------------------------------------------------
;一撃BASARA発動準備
[Statedef 3499]
type = S
ctrl = 0
anim = 3499
;velset = 0,0
movetype = I
physics = N
sprpriority = 2

[State 100, 1]
type = Velset
trigger1 = !var(5)
trigger1 = time = 0
trigger1 = abs(Vel X) <= 3.1
x = 0

[State 100, 1]
type = Velmul
trigger1 = !var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.9

[State 100, 1]
type = Velmul
trigger1 = var(5)
trigger1 = time >= 0
trigger1 = abs(Vel X) > 0
x = 0.975

[State 100, 1]
type = Velmul
trigger1 = var(5)=3
trigger1 = time >= 0
trigger1 = abs(Vel X )> 0
x = 0.975


[State 100, 2]
type = Velset
trigger1 = time >= 1
trigger1 = abs(Vel X) <= 1
x = 0
;---------------------[変数]
[state a]
type = varset
trigger1 = time = 13
v = 24
value = (300+const(data.life))-(life/2)

;---------------------[効果音]
[State 191, Snd 1];ボイス
type = PlaySnd
trigger1 = time = 15
value = 3499,random%4
channel = 2
lowpriority = 0


[State 191, Snd 1]
type = PlaySnd
trigger1 = time = 15
value = 1000,5

;---------------------[ステート移動]
[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[Statedef 900];大ジャンプ
type    = S
physics = S

[State 900, 1] 
type = varset
trigger1 = stateno = 900
trigger1 = var(2) = 0
;trigger1 = ctrl = 1
v = 2
value = 5

[State 54, 0]
type = VarSet
trigger1 = var(48) = 1
var(48) = 2

[State 900, 1] 
type = varset
trigger1 = command = "jump"||var(58)
;trigger1 = ctrl = 1
trigger1 = statetype != A
v = 3
value = 1

[State 102, 7] 
type = ChangeState
Trigger1 = Var(3) = 1
trigger1 = var(2)
value = 40

[State 102, 7] 
type = ChangeState
Trigger1 = time > 1
value = 0
ctrl = 1
;-------------------------------------------------------------------------------------------------
[Statedef 101];空中ダッシュ
type    = A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
velset = 1,-2
anim = 110
sprpriority = 2

[State 00]
type = PlaySnd
trigger1 = time = 0
value = 41, 1

[State 101, 0]
type = ctrlset
trigger1 = time >= 0
value = 0

[State 101, 0];２段ジャンプ不可
type = Varset
trigger1 = time = 0
v = 2
value = 2

[State 101, 0]
type = Varset
trigger1 = time = 0
v = 4
value = 1

[State 101, 3]
type = Velset
Trigger1 = time >= 0
Trigger1 = time <= 14
x = 8
y = 0

[State 101, 4]
type = veladd
Trigger1 = time = 15
x = -4
y = 0

[State 102, 7] 
type = ChangeState
trigger1 = time = 15
value = 51
ctrl = 1

;-------------------------------------------------------------------------------
[Statedef 102];空中バックダッシュ
type    = A
physics = N
juggle  = 0
poweradd= 0
ctrl = 0
velset = 1,-2
anim = 115
sprpriority = 2

[State 00]
type = PlaySnd
trigger1 = time = 0
value = 41, 1

[State 101, 0];２段ジャンプ不可
type = Varset
trigger1 = time = 0
v = 2
value = 2

[State 101, 0]
type = Varset
trigger1 = time = 0
v = 4
value = 2

[State 101, 3]
type = Velset
Trigger1 = time >= 0
Trigger1 = time <= 13
x = -7
y = 0

[State 101, 4]
type = veladd
Trigger1 = time = 14
x = 4
y = 0

[State 102, 7] 
type = ChangeState
Trigger1 = time >= 18
value = 51
ctrl = 1

;---------------------------------------------------------------------------
;クウチュウガークラ
[Statedef 15030]
type    = A
movetype = I
physics = N
ctrl = 0
velset = 0,0

[state pause]
type = Pause
trigger1 = time = 0
trigger1 = prevstateno=15000
time = 25
movetime = 0

[state 15910]
type = ChangeAnim
trigger1 = time=0
value = 5002

[state 15910]
type = ChangeAnim
trigger1 = time>0&&animtime=-1&&(anim=[5000,5029])
value = anim
elem = AnimElemNo(0)

[state 15910]
type = ChangeAnim
trigger1 = time=0
trigger1 = SelfAnimExist(5930)
value = 5930

[state 15910]
type = VelAdd
trigger1 = 1
y = .5

[state 15910]
type = ChangeState
trigger1 = time>0 && vel Y>0 && Pos Y>=0
value = 15010

;---------------------------------------------------------------
;ガードクラッシュ
[Statedef 15000]
type = U
movetype=I
physics = N
ctrl = 0
velset = 0,0
;anim = 150

[state 15910]
type = ChangeState
trigger1 = !enemynear,hitpausetime
trigger2 = time>15
value = ifelse(statetype=A,15030,15010)
ignorehitpause = 1

;ガークラ
[Statedef 15010]
type    = S
movetype = I
physics = S
ctrl = 0
velset = -6,0

[state pause]
type = Pause
trigger1 = time = 0
trigger1 = prevstateno=15000
time = 25
movetime = 0

[state 15910]
type = ChangeAnim
trigger1 = time=0
value = 5002

[state 15910]
type = ChangeAnim
trigger1 = time>0&&animtime=-1&&(anim=[5000,5030])
value = anim
elem = AnimElemNo(0)



[state 15910]
type = ChangeAnim
trigger1 = time=0
trigger1 = SelfAnimExist(5910)
value = 5910

[state 15910]
type = ChangeAnim
trigger1 = time=109
value = 5007

[state 15910]
type = ChangeAnim
triggerall = Anim!=5930
triggerall = SelfAnimExist(5911)
trigger1 = time=109
value = 5911


[state 15910]
type = ChangeAnim
trigger1 = time=0
trigger1 = statetype=A
trigger1 = SelfAnimExist(5930)
value = 5930

[state 15910]
type = SelfState
trigger1 = time>=120
value = 0
ctrl = 1

[Statedef -3]

;ＡＩ判定
[State -3, varset] 
type = varset
triggerall = !ishelper
TriggerAll = Var(58) = 0
TriggerAll = RoundState = [1,2]
trigger1 = command = "AI1"
trigger2 = command = "AI2"
trigger3 = command = "AI3"
trigger4 = command = "AI4"
trigger5 = command = "AI5"
trigger6 = command = "AI6"
trigger7 = command = "AI7"
trigger8 = command = "AI8"
trigger9 = command = "AI9"
trigger10 = command = "AI10"
trigger11 = command = "AI11"
trigger12 = command = "AI12"
trigger13 = command = "AI13"
trigger14 = command = "AI14"
trigger15 = command = "AI15"
trigger16 = command = "AI16"
trigger17 = command = "AI17"
trigger18 = command = "AI18"
trigger19 = command = "AI19"
trigger20 = command = "AI20"
trigger21 = command = "AI21"
trigger22 = command = "AI22"
trigger23 = command = "AI23"
trigger24 = command = "AI24"
trigger25 = command = "AI25"
trigger26 = command = "AI26"
trigger27 = command = "AI27"
trigger28 = command = "AI28"
trigger29 = command = "AI29"
trigger30 = command = "AI30"
trigger31 = command = "AI31"
trigger32 = command = "AI32"
trigger33 = command = "AI33"
trigger34 = command = "AI34"
trigger35 = command = "AI35"
trigger36 = command = "AI36"
trigger37 = command = "AI37"
trigger38 = command = "AI38"
trigger39 = command = "AI39"
trigger40 = command = "AI40"
trigger41 = command = "AI41"
trigger42 = command = "AI42"
trigger43 = command = "AI43"
trigger44 = command = "AI44"
trigger45 = command = "AI45"
trigger46 = command = "AI46"
trigger47 = command = "AI47"
trigger48 = command = "AI48"
trigger49 = command = "AI49"
trigger50 = command = "AI50"
Trigger51 = var(58)=0
Trigger51 = numhelper(10000+id)
Trigger51 = helper(10000+id),var(58)>0
v = 58
value = 1

;ラウンド終了でストップ
[State -3]
type = VarSet
triggerall = !ishelper
triggerall = Var(58)
trigger1 = statetype != A 
trigger1 = P2life <= 0
trigger2 = life <= 0
trigger2 = statetype != A 
var(58) = 0

[State -3, AI]
type = VarSet
triggerall = !ishelper
TriggerAll = Var(58)
Trigger1 = RoundState = 4
Trigger2 = Win = 1
Trigger3 = Lose = 1
Trigger4 = DrawGame = 1
V = 58
Value = 0















[State -1, Stand K]
type = ChangeState
triggerall = !ishelper
value = 260
TriggerAll = Var(58)
TriggerAll = P2StateType != L
trigger1 = statetype != A
trigger1 = movecontact
trigger1 = stateno = 430

;ブーストダッシュ
[State -1, Boost]
type = ChangeState
triggerall = !ishelper
value = ifelse(var(5)=1,40,3900)
TriggerAll = var(58)
trigger1 = stateno = 291 && movehit
trigger2 = stateno = 1005 && movehit

;HELL END DRAGON
[State -1, hed]
type = ChangeState
triggerall = !ishelper
value = 3500
TriggerAll = Var(58)
triggerall = var(24) > 1
triggerall = !var(13)
triggerall = enemynear,statetype != L
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) < 160
triggerall = enemynear,stateno != [120,169]
triggerall = enemynear,ctrl = 0
trigger1 = movehit
trigger1 = stateno = 230
trigger2 = movehit
trigger2 = stateno = 430
trigger3 = movehit
trigger3 = stateno = 260
trigger4 = movehit
trigger4 = stateno = 271
trigger5 = statetype != A
trigger5 = ctrl

[State -1, FD]
type = varset
triggerall = !ishelper
var(26) = 1
triggerall = var(58)
trigger1 = (StateNo = [120,165])||movetype != H
trigger1 = power > 70
trigger1 = BackEdgeBodyDist < 37
ignorehitpause = 1
[state 120x,]
type = varset
triggerall = !ishelper
triggerall = var(58)
triggerall = var(45) <= 2
triggerall = power > 10
triggerall = var(26)
trigger1 = ctrl || fvar(0) || (stateno = 52 && time > 0)||stateno = 100||stateno = 103
var(45)  = 2
ignorehitpause = 1



;---------------------------------------------------------------------------------------------
;RE-BITE
[State -1, rb]
type = ChangeState
triggerall = !ishelper
value = 1400
TriggerAll = Var(58)
TriggerAll = StateType != A
TriggerAll = P2StateType != C
TriggerAll = InGuardDist
triggerall = EnemyNear,StateNo != [120,159]
triggerall = enemynear,time > P2BodyDist X/5
triggerall = p2movetype = A
;Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-20,90]
;TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) >= -120
;TriggerAll = EnemyNear,NumProj>0||EnemyNear,NumHelper>0
;Triggerall = Var(57) = [66,100]
;TriggerAll = P2BodyDist X>40
triggerAll   = Random < 400
TriggerAll = !(EnemyNear,HitDefAttr=,AT)
trigger1 = statetype != A
trigger1 = ctrl
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movecontact
trigger4 = stateno = 200
trigger5 = movecontact
trigger5 = stateno = 210
trigger6 = movecontact
trigger6 = stateno = 400
trigger7 = movecontact
trigger7 = stateno = 410
trigger8 = movecontact
trigger8 = stateno = 230
trigger9 = movecontact
trigger9 = stateno = 430
trigger10 = movecontact
trigger10 = stateno = 260
trigger11 = movecontact
trigger11 = stateno = 271
Trigger12 = (HitOver && (StateNo = 5001 || StateNo = 5011)) || (StateNo = 5120 && AnimTime = 0)

[State -3,立ちガード]
type = ChangeState
triggerall = !ishelper
Value = 120
Triggerall = Var(58)
TriggerAll = RoundState = 2
TriggerAll = StateType != A
TriggerAll = Ctrl || (stateno = [100,101]) || stateno = 52
TriggerAll = StateNo != [120,159]
Trigger1 = InguardDist
Trigger1 = P2BodyDist X >= 0
Trigger2 = InguardDist
Trigger2 = Enemy,NumHelper > 0 || Enemy,NumProj > 0
Trigger3 =!(EnemyNear,HitDefAttr = , NT, ST, HT)
Trigger3 = EnemyNear,MoveType = A
Trigger3 = Enemy,MoveType = A
Trigger3 = P2BodyDist X < 0
IgnoreHitPause = 1
[State -3,しゃがみガード]
type = ChangeState
triggerall = !ishelper
value = 131
Triggerall = Var(58)
TriggerAll = RoundState = 2
TriggerAll = StateType != A
triggerAll = Ctrl = 1
Trigger1 = inguarddist
Trigger2 = Enemy,NumHelper > 0 || Enemy,NumProj > 0
trigger2 = inguarddist
Trigger3 = EnemyNear,HitDefAttr = C,AA || EnemyNear,HitDefAttr = SCA,AP 
Trigger3 = P2BodyDist X < 110
Trigger4 = EnemyNear,HitDefAttr = S,AA 
Trigger4 = EnemyNear,Vel Y <= 0 
Trigger5 = EnemyNear,StateType != S 
Trigger5 = EnemyNear,HitDefAttr = S,AA 
Trigger5 = EnemyNear,Vel Y <= 0

[State -3, 空中ガード]
type  = ChangeState
value = 132
triggerall = p2movetype = A
triggerall = statetype = A
Triggerall = Var(58)
TriggerAll = RoundState = 2
triggerall = ctrl
triggerall = stateno != [190,194]
triggerall = p2statetype = A
trigger1   = P2BodyDist X = [40,80]
trigger2   = P2BodyDist X = [-20,39]

[State -3, 対地 立ちガード]
type  = ChangeState
value = 130
triggerall = p2movetype = A
triggerall = statetype != A
Triggerall = Var(58)
TriggerAll = RoundState = 2
triggerall = ctrl
triggerall = stateno != [190,194]
triggerall = p2statetype = S
trigger1   = P2BodyDist X = [40,90]
trigger1   = var(57) = [0,84]
trigger2   = P2BodyDist X = [-15,39]
trigger2   = var(57) = [20,79]
trigger3   = enemy,teammode = simul
trigger3   = P2BodyDist X = [-50,-16]
trigger3   = var(57) = [0,89]
trigger4   = P2BodyDist X = [-15,39]
trigger4   = enemy,hitdefattr = S, NA,SA,HA
trigger4   = Random < 600

[State -3, 対空 立ちガード]
type  = ChangeState
value = 130
triggerall = p2movetype = A
triggerall = statetype != A
Triggerall = Var(58)
TriggerAll = RoundState = 2
triggerall = ctrl
triggerall = stateno != [190,194]
triggerall = p2statetype = A
trigger1   = P2BodyDist X = [40,90]
trigger1   = var(57) = [10,95]
trigger2   = P2BodyDist X = [-40,39]
trigger2   = var(57) = [0,92]
trigger3   = P2BodyDist X = [-40,39]
trigger3   = enemy,hitdefattr = A, NA,SA,HA
trigger3   = Random < 600

[State -3, しゃがみガード]
type  = ChangeState
value = 131
triggerall = p2movetype = A
triggerall = statetype != A
Triggerall = Var(58)
TriggerAll = RoundState = 2
triggerall = ctrl
triggerall = stateno != [190,194]
trigger1   = p2statetype = C
trigger1   = P2BodyDist X = [40,85]
trigger1   = var(57) = [20,94]
trigger2   = p2statetype = C
trigger2   = P2BodyDist X = [-20,39]
trigger2   = var(57) = [10,89]
trigger3   = p2statetype = S
trigger3   = P2BodyDist X = [-15,39]
trigger3   = var(57) = [0,69]
trigger4   = p2statetype = C
trigger4   = enemy,teammode = simul
trigger4   = P2BodyDist X = [-50,-16]
trigger4   = var(57) = [30,99]
trigger5   = P2BodyDist X = [-20,39]
trigger5   = enemy,hitdefattr = C, NA,SA,HA
trigger5   = Random < 800

;直前ガード
[state -1,tyokuga]
type = varset
triggerall = !ishelper
Triggerall = Var(58) >= 1
triggerall = !var(35)
trigger1 = time = 0
trigger1 = stateno = 120 || stateno = 131
var(35)  = 30
ignorehitpause = 1
[State -3,空中ガード]
type = ChangeState
triggerall = !ishelper
value = 132
Triggerall = Var(58) >= 1
TriggerAll = StateType = A
Trigger1 = inguarddist
trigger1 = Ctrl = 1 || (stateno = 110) && time >= 6 || (stateno = 115) && time >= 6
Trigger2 = Enemy,NumHelper > 0 || Enemy,NumProj > 0
trigger2 = inguarddist
trigger2 = Ctrl = 1 || (stateno = 110) && time >= 6 || (stateno = 115) && time >= 6

;---------------------------------------------------------------------------
;Run Back
;後退ダッシュ
[State -1, Run Back]
type = ChangeState
triggerall = !ishelper
value = 105
TriggerAll = Var(58)
triggerAll = statetype != A
triggerAll = ctrl || fvar(0)
TriggerAll = P2StateType != L
TriggerAll = BackEdgeBodyDist >= 40
TriggerAll = P2MoveType != H
Trigger1 = P2StateNo != [120,159]
Trigger1 = P2StateType != A
Trigger1 = P2MoveType != A
Trigger1 = !InguardDist
Trigger1 = P2BodyDist X = [0,150]
Trigger1 = Ctrl
Trigger1 = Var(57) = [35,70]
trigger2 = P2MoveType = A
;trigger2 = !InguardDist
Trigger2 = Ctrl
Trigger2 = Var(57) = [60,99]
Trigger3 = P2BodyDist X = [0,80]
Trigger3 = Enemy,NumProj = 0
Trigger3 = P2MoveType = A
Trigger3 = EnemyNear,HitDefAttr = , ST, HT
Trigger3 = Ctrl
Trigger3 = Var(57) = [45,74]
Trigger4 = P2BodyDist X = [0,80]
Trigger4 = Enemy,NumProj = 0
Trigger4 = P2MoveType = A
Trigger4 = P2StateType != A
Trigger4 = EnemyNear,HitDefAttr = , NT, ST, HT
Trigger4 = Ctrl
Trigger4 = Var(57) = [45,74]
;---------------------------------------------------------------------------------------------
;リバサDEATH FANG
[State -1, df]
type = ChangeState
triggerall = !ishelper
value = 1100
TriggerAll = Var(58)
TriggerAll = P2StateType != L
TriggerAll = random < 490
triggerall = enemynear,ctrl = 0
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [0,121]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-111,2]
Trigger1 = (HitOver && (StateNo = 5001 || StateNo = 5011)) || (StateNo = 5120 && AnimTime = 0)
trigger2 = prevstateno = 5120&&ctrl
;---------------------------------------------------------------------------
;ハイジャンプキャンセル
[State -1, Jump cansel]
type = ChangeState
triggerall = !ishelper
value = 900
TriggerAll = Var(58)
Triggerall = P2MoveType != A || P2MoveType = A && EnemyNear,Time <= 1
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-10,110]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-160,-290]
Triggerall = P2MoveType = H
TriggerAll = P2Statetype = A
Triggerall = !InguardDist
triggerall = statetype != A
triggerall = statetype != A
trigger1 = stateno = 210
trigger1 = movecontact
trigger2 = stateno = 250
trigger2 = movecontact
trigger3 = stateno = 230
trigger3 = movecontact
trigger4 = stateno = 410
trigger4 = movecontact
trigger5 = stateno = 260
trigger5 = movecontact
trigger6 = stateno = 1402
trigger6 = movecontact
trigger6 = frontedgebodydist < 77
trigger7 = stateno = 271
trigger7 = movecontact

;ジャンプキャンセル
[State -1, Jump cansel]
type = ChangeState
triggerall = !ishelper
value = 40
TriggerAll = Var(58)
Triggerall = P2MoveType != A || P2MoveType = A && EnemyNear,Time <= 1
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-10,110]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) <= -49
Triggerall = P2MoveType = H
TriggerAll = P2Statetype = A
Triggerall = !InguardDist
triggerall = statetype != A
trigger1 = stateno = 210
trigger1 = movecontact
trigger2 = stateno = 250
trigger2 = movecontact
trigger3 = stateno = 230
trigger3 = movecontact
trigger4 = stateno = 410
trigger4 = movecontact
trigger5 = stateno = 260
trigger5 = movecontact
trigger6 = stateno = 1402
trigger6 = movecontact
trigger6 = frontedgebodydist < 77
trigger7 = stateno = 271
trigger7 = movecontact

;---------------------------------------------------------------------------
;空中ハイジャンプキャンセル
[State -1, Air Jump cansel]
type = varset
triggerall = !ishelper
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-10,85]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-160,-290]
Triggerall = P2MoveType = H
Triggerall = !InguardDist
triggerall = statetype = A
triggerall = var(2) <= 1
trigger1 = stateno = 610
trigger1 = movecontact
trigger2 = stateno = 660
trigger2 = movecontact
v = 3
value = 1
ignorehitpause = 1

;空中ジャンプキャンセル
[State -1, Air Jump cansel]
type = ChangeState
triggerall = !ishelper
value = 45
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-10,85]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) <= -54
Triggerall = P2MoveType = H
Triggerall = !InguardDist
triggerall = statetype = A
triggerall = var(2) <= 1
trigger1 = stateno = 610
trigger1 = movecontact
trigger2 = stateno = 660
trigger2 = movecontact
;---------------------------------------------------------------------------------------------
;JET-X
[State -1, jet-x]
type = ChangeState
triggerall = !ishelper
value = 1000
TriggerAll = Var(58)
Triggerall = Var(57) = [0,60]
TriggerAll = P2StateType != L
TriggerAll = P2MoveType != H
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) >= 115
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-51,72]
TriggerAll = !InGuardDist
;TriggerAll = p2movetype != A
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = prevstateno != 5120
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movecontact
trigger4 = stateno = 200
trigger5 = movecontact
trigger5 = stateno = 210
trigger6 = movecontact
trigger6 = stateno = 400
trigger7 = movecontact
trigger7 = stateno = 410
trigger8 = movecontact
trigger8 = stateno = 230
trigger9 = movecontact
trigger9 = stateno = 430
trigger10 = movecontact
trigger10 = stateno = 260
trigger11 = movecontact
trigger11 = stateno = 271
Trigger12 = (HitOver && (StateNo = 5001 || StateNo = 5011)) || (StateNo = 5120 && AnimTime = 0)
;---------------------------------------------------------------------------
;Run Fwd
;ダッシュ
[State -1, Run Fwd]
type = ChangeState
triggerall = !ishelper
value = 100
TriggerAll = Var(58)
triggerAll = statetype != A
triggerAll = p2statetype != L
triggerAll = ctrl || fvar(0)
TriggerAll = StateNo != [100,103]
TriggerAll = P2BodyDist X != [-90,90]
TriggerAll = P2StateNo != [39,41]
Trigger1 = P2MoveType != A
Trigger1 = !InguardDist
Trigger1 = P2BodyDist X >= 90
Trigger1 = random < 700||p2movetype = H

;ガーキャン
[State -1, dead angle attack]
type = ChangeState
triggerall = !ishelper
value = 910
TriggerAll = Var(58) = 1
triggerall = Power >= 1000
triggerall = backedgebodydist < 30
triggerall = life < 100
trigger1 = Stateno = 150
trigger2 = Stateno = 151
trigger3 = Stateno = 152
trigger4 = Stateno = 153


[State -38]
type = ChangeState
triggerall = !ishelper
TriggerAll = Var(58)
TriggerAll = StateType != A
TriggerAll = P2StateType != L
TriggerAll = P2StateType != A || P2StateType = A && P2MoveType != H
TriggerAll = Ctrl
TriggerAll = StateNo != [120,159]
TriggerAll = P2BodyDist X != [-120,120]
Trigger1 = P2MoveType != A || P2MoveType = A && EnemyNear,Time <= 1
Trigger1 = !InguardDist
Trigger1 = Var(57) = [0,49]
Value = 900

[State -30, AI]
type = ChangeState
triggerall = !ishelper
Value = 20
TriggerAll = Var(58)
TriggerAll = StateType != A
TriggerAll = Ctrl
Trigger1 = P2StateType = L
Trigger1 = P2BodyDist X = [0,49]
Trigger2 = P2StateType = L
Trigger2 = P2BodyDist X = [71,115]

[State -3,9 AI]
type = ChangeState
triggerall = !ishelper
Value = 40
TriggerAll = Var(58)
TriggerAll = StateType != A
TriggerAll = StateNo != [120,159]
TriggerAll = P2StateType != L
TriggerAll = Stateno != 40
trigger1 = random < 120+(P2statetype=C)*10
Trigger1 = P2MoveType != A || P2MoveType = A && EnemyNear,Time <= 1
Trigger1 = P2MoveType = H && P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) < -60 || P2MoveType != H
Trigger1 =!InguardDist
Trigger1 = P2BodyDist X != [-50,50]
Trigger1 = Ctrl||stateno=100
Trigger2 = P2BodyDist X = [110,190]
trigger2 = random < 200
Trigger2 = Ctrl||stateno=100
trigger2 = enemynear,vel x = 0
Trigger3 = P2BodyDist X = [-20,60]
trigger3 = p2statetype = A
trigger3 = random < 150
Trigger3 = Ctrl||stateno=100
;---------------------------------------------------------------------------
[State -1, air dash];空中ダッシュ
type = ChangeState
triggerall = !ishelper
value = 101
TriggerAll = Var(58)
triggerall = Var(4) = 0
triggerall = statetype = A
triggerAll = ctrl || fvar(0)
triggerAll = Var(2) <= 1||Var(2) = 5
TriggerAll = P2MoveType != A
TriggerAll = P2StateType != L
TriggerAll = P2BodyDist X >= 80
triggerall = Pos Y <= -30
Trigger1 = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) > 0
Trigger1 = P2StateType != A && P2MoveType != H
Trigger1 = Ctrl
Trigger1 = Var(57) = [10,14]
trigger1 = stateno != 103
trigger1 = stateno != 108
Trigger2 = Vel Y <= 0
Trigger2 = P2StateType != A
Trigger2 = Pos Y = [-155,-115]
Trigger2 = Ctrl
Trigger2 = Var(57) = [10,24]

;---------------------------------------------------------------------------
[State -1, air dash];空中後ダッシュ
type = ChangeState
triggerall = !ishelper
value = 102
TriggerAll = Var(58)
triggerall = Var(4) = 0
triggerall = statetype = A
triggerAll = ctrl || fvar(0)
triggerAll = Var(2) <= 1||Var(2) = 5
TriggerAll = P2MoveType != A
TriggerAll = BackEdgeBodyDist >= 30
TriggerAll = P2StateType != A && P2MoveType != H
triggerall = Pos Y <= -30
Trigger1 = P2StateNo != [120,159]
Trigger1 = P2StateType != L
Trigger1 = P2BodyDist X = [50,150]
Trigger1 = Ctrl
Trigger1 = Var(57) = [15,19]
trigger1 = ctrl
trigger1 = stateno != 103
trigger1 = stateno != 108
Trigger2 = P2StateNo != [120,159]
Trigger2 = P2StateType != L
Trigger2 = P2StateType != A
Trigger2 = Vel Y <= 0
Trigger2 = Ctrl
Trigger2 = Var(57) = [25,44]
trigger2 = stateno = 103
trigger2 = time > 14
Trigger3 = P2StateType != A
Trigger3 = P2BodyDist X = [-40,-30]
Trigger3 = P2BodyDist Y = [80,120]
Trigger3 = Ctrl
Trigger3 = Var(57) = [50,99]
;---------------------------------------------------------------------------
;吹き飛ばし攻撃
[State -1, Stand Strong Punch]
type = ChangeState
triggerall = !ishelper
value = 290
TriggerAll = var(58)
Triggerall = Var(57) = [41,51]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-27,22]
TriggerAll = P2StateType != L
triggerall = !inguarddist
trigger1 = statetype != A
trigger1 = ctrl|| fvar(0)
Trigger1 = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [56,164]
trigger2 = stateno = 260 && movecontact
Trigger2 = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [0,64]

;---------------------------------------------------------------------------
;援軍要請
[state 7000,]
type = varset
triggerall = !ishelper
TriggerAll = var(58)
Triggerall = Var(57) = [0,43]
triggerall = roundstate = 2
triggerall = !var(40)
triggerall = movetype != H
trigger1 = fvar(11) >= 87
Trigger2 = random = [779,781]
Trigger2 = Var(57) = [19,21]
var(40) = 1



;援軍アシスト
[state 210]
type = varset
triggerall = !ishelper
TriggerAll = var(58)
triggerall = ctrl || stateno>0
TriggerAll = P2StateType != L
TriggerAll = Var(57) = [16,28]
triggerall = helper(10000),numexplod(2904) = 0&&helper(10000),Numexplod(2905) = 0&&helper(10000),Numexplod(2906) = 0&&helper(10000),Numexplod(2909) = 0
triggerall = var(40)=2&&fvar(10)
triggerall = movetype != H
triggerall = numhelper(2001)
triggerall = helper(2001),stateno=2155||helper(2001),stateno=19000
triggerall = roundstate = 2
triggerall = stateno = 3000
triggerall = power >= 3000
triggerall = time < 57
trigger1 = !numhelper(2000)
trigger2 = numhelper(2000)
trigger2 = helper(2000),stateno=2000
var(43)=8



;援軍カウンター
[state 210]
type = varset
triggerall = !ishelper
TriggerAll = var(58)
triggerall = ctrl || stateno>0
TriggerAll = P2StateType != L
triggerall = roundstate = 2
triggerall = enemynear,alive
triggerall = (enemynear,const(data.life)/enemynear,life) >= 6||life < 100
triggerall = numhelper(2001)
triggerall = helper(2001),stateno=2155||helper(2001),stateno=19000
triggerall = fvar(11) > 50
triggerall = power >= 3000||(power >= 1000&&roundno >= 3)
triggerall = alive
triggerall = helper(10000),numexplod(2904) = 0&&helper(10000),Numexplod(2905) = 0&&helper(10000),Numexplod(2906) = 0&&helper(10000),Numexplod(2909) = 0
triggerall = var(40)=2&&fvar(10)
triggerall = statetype != L
triggerall = movetype = H&&(stateno!=[120,160])
trigger1 = !numhelper(2000)
trigger2 = numhelper(2000)
trigger2 = helper(2000),stateno=2000
var(43)=10

;エリアル援軍
[state 210]
type = varset
triggerall = !ishelper
TriggerAll = var(58)
triggerall = ctrl || stateno>0
TriggerAll = P2StateType != L
triggerall = helper(10000),numexplod(2904) = 0&&helper(10000),Numexplod(2905) = 0&&helper(10000),Numexplod(2906) = 0&&helper(10000),Numexplod(2909) = 0
triggerall = var(40)=2&&fvar(10)
TriggerAll = (P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) >= 50)||(P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) <= -150)
triggerall = movetype != H
triggerall = roundstate = 2
triggerall = var(8)
triggerall = p2statetype = A
triggerall = numhelper(2001)
triggerall = helper(2001),stateno=2155||helper(2001),stateno=19000
trigger1 = !numhelper(2000)
trigger2 = numhelper(2000)
trigger2 = helper(2000),stateno=2000
var(43)=7

;5援軍
[state 210]
type = varset
triggerall = !ishelper
TriggerAll = var(58)
triggerall = ctrl || stateno>0
TriggerAll = P2StateType != L
triggerall = movehit
triggerall = helper(10000),numexplod(2904) = 0&&helper(10000),Numexplod(2905) = 0&&helper(10000),Numexplod(2906) = 0&&helper(10000),Numexplod(2909) = 0
triggerall = var(40)=2&&fvar(10)
triggerall = movetype != H
triggerall = stateno != 5120
triggerall = numhelper(2001)
triggerall = helper(2001),stateno=2101||helper(2001),stateno=2155||helper(2001),stateno=19000
triggerall = roundstate = 2
triggerall = (stateno = 1201&&time>=7)||(stateno = 1310&&time>=10)||(stateno = 250&&time>=10)||(stateno = 210&&p2bodydist x >= 109)
trigger1 = !numhelper(2000)
trigger2 = numhelper(2000)
trigger2 = helper(2000),stateno=2000
var(43)=1+random%3

;2援軍
[state 210]
type = varset
triggerall = !ishelper
TriggerAll = var(58)
triggerall = ctrl || stateno>0
TriggerAll = P2StateType != L
TriggerAll = Var(57) = [50,100]
triggerall = movehit
triggerall = (stateno = [1105,1108])&&time>=24
triggerall = helper(10000),numexplod(2904) = 0&&helper(10000),Numexplod(2905) = 0&&helper(10000),Numexplod(2906) = 0&&helper(10000),Numexplod(2909) = 0
triggerall = var(40)=2&&fvar(10)
triggerall = movetype != H
triggerall = stateno != 5120
triggerall = numhelper(2001)
triggerall = helper(2001),stateno=2155||helper(2001),stateno=19000
triggerall = roundstate = 2
trigger1 = !numhelper(2000)
trigger2 = numhelper(2000)
trigger2 = helper(2000),stateno=2000
var(43)=4+random%3

;5援軍
[state 210]
type = varset
triggerall = !ishelper
TriggerAll = var(58)
triggerall = ctrl || stateno>0
TriggerAll = Var(57) <= 30
TriggerAll = P2StateType != L
TriggerAll = P2StateType != A
TriggerAll = P2Stateno != [120,169]
triggerall = enemynear,ctrl=0
triggerall = !movehit
triggerall = stateno < 3500
triggerall = helper(10000),numexplod(2904) = 0&&helper(10000),Numexplod(2905) = 0&&helper(10000),Numexplod(2906) = 0&&helper(10000),Numexplod(2909) = 0
triggerall = var(40)=2&&fvar(10)
triggerall = movetype != H
triggerall = stateno != 5120
triggerall = EnemyNear,Vel Y < 3
triggerall = numhelper(2001)
triggerall = helper(2001),stateno=2155||helper(2001),stateno=19000
triggerall = roundstate = 2
trigger1 = !numhelper(2000)
trigger2 = numhelper(2000)
trigger2 = helper(2000),stateno=2000
var(43)=1+random%3

;5援軍
[state 210]
type = varset
triggerall = !ishelper
TriggerAll = var(58)
triggerall = ctrl || stateno>0
TriggerAll = Var(57) >= 90
triggerall = movehit
TriggerAll = P2StateType != L
triggerall = stateno < 2000
triggerall = helper(10000),numexplod(2904) = 0&&helper(10000),Numexplod(2905) = 0&&helper(10000),Numexplod(2906) = 0&&helper(10000),Numexplod(2909) = 0
triggerall = var(40)=2&&fvar(10)
triggerall = movetype != H
triggerall = stateno != 5120
triggerall = numhelper(2001)
triggerall = helper(2001),stateno=2155||helper(2001),stateno=19000
triggerall = roundstate = 2
trigger1 = !numhelper(2000)
trigger2 = numhelper(2000)
trigger2 = helper(2000),stateno=2000
var(43)=1+random%3

;2援軍
[state 210]
type = varset
triggerall = !ishelper
TriggerAll = var(58)
triggerall = ctrl || stateno>0
TriggerAll = Var(57) <= 10
triggerall = movehit
triggerall = stateno < 2000
TriggerAll = P2StateType != L
triggerall = helper(10000),numexplod(2904) = 0&&helper(10000),Numexplod(2905) = 0&&helper(10000),Numexplod(2906) = 0&&helper(10000),Numexplod(2909) = 0
triggerall = var(40)=2&&fvar(10)
triggerall = movetype != H
triggerall = stateno != 5120
triggerall = numhelper(2001)
triggerall = helper(2001),stateno=2155||helper(2001),stateno=19000
triggerall = roundstate = 2
triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) <= 80
Triggerall = P2StateType = A
trigger1 = !numhelper(2000)
trigger2 = numhelper(2000)
trigger2 = helper(2000),stateno=2000
var(43)=4+random%3


;援軍アタック
[state e]
type = Helper
triggerall = !ishelper
TriggerAll = var(58)
triggerall = (var(43)=[1,19]) && numhelper(2001) && !numhelper(2000)
triggerall = var(40)=2
triggerall = stateno!=910
trigger1 = !(numpartner)
trigger2 = numpartner
trigger2 = partner,name != "Katakura Kojuro"
name="Katakura Kojuro"
id = 2000
stateno = 11000
pos = floor(helper(2001),pos x-pos x)*ifelse(helper(2001),facing!=facing,-1,1)*ifelse(teamside=2,-1,1),floor(helper(2001),pos y-pos y)
postype = p1
ownpal = 1
supermovetime = 99999
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
size.ground.front = 20
size.ground.back = 20
size.head.pos = -10,-80
size.mid.pos = -5,-50
facing = helper(2001),facing
ignorehitpause=1
;---------------------------------------------------------------------------
;空中投げ
[State -1, Air Throw]
type = ChangeState
triggerall = !ishelper
value = 860
TriggerAll = Var(58)
TriggerAll = P2StateType != L
triggerall = p2statetype = A
triggerall = ctrl || fvar(0)
triggerall = statetype = A
triggerall = p2movetype != H
Triggerall = Var(57) = [24,66]
Triggerall = !Var(8)
trigger1 = p2bodydist X < 38
trigger1 = P2bodyDist Y >= -30
trigger1 = P2bodyDist Y <= 30
trigger2 = p2bodydist X < 38
trigger2 = P2bodyDist Y >= -30
trigger2 = P2bodyDist Y <= 30

;---------------------------------------------------------------------------
;投げ
[State -1, Throw]
type = ChangeState
triggerall = !ishelper
value = 800
TriggerAll = Var(58)
TriggerAll = P2StateType != L
triggerall = statetype != A
Triggerall = Var(57) = [0,43]
triggerall = ctrl || fvar(0)
triggerall = stateno != 100
trigger1 = p2bodydist X <= 20
trigger1 = (p2statetype = S) || (p2statetype = C)
trigger1 = p2movetype != H
trigger2 = p2bodydist X <= 20
trigger2 = (p2statetype = S) || (p2statetype = C)
trigger2 = p2movetype != H

;一撃BASARA発動準備
[State -1, ichigeki]
type = ChangeState
triggerall = !ishelper
value = 3499
TriggerAll = Var(58)
;Triggerall = Var(57) = [30,80]
triggerall = fvar(30) >= 2
triggerall = var(24) = 0
trigger1 = statetype != A
trigger1 = ctrl || fvar(0)
;---------------------------------------------------------------------------
;立ち→中
[State -1, Stand K]
type = ChangeState
triggerall = !ishelper
value = 250
TriggerAll = Var(58)
;Triggerall = Var(57) = [0,80]
triggerall = moveguarded
triggerall = p2statetype = C
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [6,84]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-87,62]
trigger1 = statetype != A
trigger1 = ctrl || fvar(0)
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movecontact
trigger4 = stateno = 200
trigger5 = movecontact
trigger5 = stateno = 210
trigger6 = movecontact
trigger6 = stateno = 400
trigger7 = movecontact
trigger7 = stateno = 410
trigger8 = movecontact
trigger8 = stateno = 230
trigger9 = movecontact
trigger9 = stateno = 430
trigger10 = stateno = 3900

;---------------------------------------------------------------------------
;立ち弱
[State -1, Stand Slash]
type = ChangeState
triggerall = !ishelper
value = 200
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-5,32]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-31,56]
TriggerAll = P2StateType != L
triggerall = !moveguarded
trigger1 = statetype != A
trigger1 = ctrl || fvar(0)
Trigger1 = Var(57) = [21,80]
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movecontact
trigger4 = stateno = 200
trigger4 = vel x > 1
trigger4 = prevstateno != 200
trigger5 = stateno = 3900
;---------------------------------------------------------------------------
;しゃがみ弱
[State -1, Crouching Jak]
type = ChangeState
triggerall = !ishelper
value = 400
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-5,68]
TriggerAll = P2StateType != L
TriggerAll = P2statetype != A
trigger1 = statetype != A
Trigger1 = p2statetype = S
Trigger1 = enemynear,ctrl||Var(57) >= 61
trigger1 = ctrl || fvar(0)
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movecontact
trigger4 = stateno = 200
trigger5 = stateno = 3900

;---------------------------------------------------------------------------------------------
;グレイブシュート
[State -1, dust attack]
type = ChangeState
triggerall = !ishelper
value = 850
TriggerAll = Var(58) 
TriggerAll = P2StateType != L
TriggerAll = P2MoveType != H
TriggerAll = !InGuardDist
triggerall = enemynear,ctrl = 0
Triggerall = Var(57) = [21,85]
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [15,104]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-101,12]
trigger1 = statetype != A
trigger1 = ctrl || fvar(0)
trigger1 = prevstateno != 5120
trigger2 = stateno = 103
trigger3 = stateno = 100

;---------------------------------------------------------------------------
;立ち強
[State -1, Stand Kick]
type = ChangeState
triggerall = !ishelper
value = 230
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-5,89]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-84,62]
TriggerAll = P2StateType != L
triggerall = !moveguarded
trigger1 = statetype != A
trigger1 = ctrl || fvar(0)
Trigger1 = Var(57) = [51,100]
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movehit
trigger4 = stateno = 210
trigger5 = movehit
trigger5 = stateno = 400
trigger6 = movehit
trigger6 = stateno = 410
trigger7 = stateno = 3900
;---------------------------------------------------------------------------
;しゃがみ中
[State -1, Crouching Chu]
type = ChangeState
triggerall = !ishelper
value = 410
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-5,73]
TriggerAll = (P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-117,-40])||(P2BodyDist X<44&&p2statetype = S)
TriggerAll = P2StateType != L
triggerall = !moveguarded
trigger1 = statetype != A
trigger1 = ctrl || fvar(0)
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movecontact
trigger4 = stateno = 400
trigger5 = movecontact
trigger5 = stateno = 210
trigger6 = stateno = 3900
;---------------------------------------------------------------------------
;しゃがみ強
[State -1, Crouching Kyou]
type = ChangeState
triggerall = !ishelper
value = 430
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [0,90]
TriggerAll = P2statetype != A
TriggerAll = P2StateType != L
trigger1 = statetype != A
trigger1 = ctrl || fvar(0)
Trigger1 = Var(57) = [0,53]
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movecontact
trigger4 = stateno = 210
trigger5 = movecontact
trigger5 = stateno = 400
trigger6 = movecontact
trigger6 = stateno = 410
trigger7 = movecontact
trigger7 = stateno = 230
trigger8 = stateno = 3900

;---------------------------------------------------------------------------
;立ち→強
[State -1, Stand K]
type = ChangeState
triggerall = !ishelper
value = 260
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [40,96]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-67,62]
TriggerAll = P2StateType != L
trigger1 = statetype != A
trigger1 = ctrl || fvar(0)
Trigger1 = Var(57) = [46,96]
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movecontact
trigger4 = stateno = 210
trigger6 = movecontact
trigger6 = stateno = 410
trigger7 = movecontact
trigger7 = stateno = 230
trigger8 = movecontact
trigger8 = stateno = 430
trigger9 = stateno = 3900

;---------------------------------------------------------------------------
;立ち中
[State -1, Stand Slash]
type = ChangeState
triggerall = !ishelper
value = 210
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-5,113]
TriggerAll = P2statetype != A
TriggerAll = P2StateType != L
Trigger1 = Var(57) = [40,90]
trigger1 = statetype != A
trigger1 = ctrl || fvar(0)
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movehit
trigger4 = stateno = 200
trigger5 = movehit
trigger5 = stateno = 400
trigger6 = stateno = 3900
;---------------------------------------------------------------------------
;ジャンプ2弱
[State -1, Jump Slash]
type = ChangeState
triggerall = !ishelper
value = 670
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-5,73]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-137,62]
TriggerAll = P2StateType != L
trigger1 = statetype = A
trigger1 = ctrl || fvar(0)
Trigger1 = Var(57) = [8,40]
trigger2 = stateno = 600
trigger2 = movecontact
Trigger2 = Var(8)
trigger3 = stateno = 610
trigger3 = movecontact
trigger4 = stateno = 630
trigger4 = movecontact
Trigger4 = Var(8)
trigger5 = stateno = 660
trigger5 = movecontact
Trigger5 = Var(8)
;---------------------------------------------------------------------------
;ジャンプ2中
[State -1, Jump Slash]
type = ChangeState
triggerall = !ishelper
value = 660
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-71,31]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-27,82]
TriggerAll = P2StateType != L
trigger1 = statetype = A
Trigger1 = (Var(57) = [70,100])||(Var(57) = [0,20])
trigger1 = ctrl || fvar(0)
trigger2 = stateno = 600
trigger2 = movecontact
trigger3 = stateno = 610
trigger3 = movecontact
trigger4 = stateno = 630
trigger4 = movecontact
Trigger4 = Var(8)
trigger5 = stateno = 670
trigger5 = movecontact
;---------------------------------------------------------------------------
;ジャンプ弱
[State -1, Jump Punch]
type = ChangeState
triggerall = !ishelper
value = 600
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-5,77]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-37,40]
TriggerAll = P2StateType != L
trigger1 = statetype = A
trigger1 = ctrl || fvar(0)
Trigger1 = Var(57) = [30,89]
trigger2 = stateno = 600
trigger2 = movecontact
Trigger2 = !Var(8)
trigger3 = stateno = 610
trigger3 = movecontact
Trigger3 = Var(8)
trigger4 = stateno = 630
trigger4 = movecontact
Trigger4 = Var(8)
trigger5 = stateno = 670
trigger5 = movecontact
Trigger5 = Var(8)
trigger6 = stateno = 660
trigger6 = movecontact
Trigger6 = Var(8)
;---------------------------------------------------------------------------
;ジャンプ中
[State -1, Jump Slash]
type = ChangeState
triggerall = !ishelper
value = 610
TriggerAll = Var(58)
Triggerall = Var(57) = [30,79]
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-15,48]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-5,134]
TriggerAll = P2StateType != L
trigger1 = statetype = A
trigger1 = ctrl || fvar(0)
trigger2 = stateno = 600
trigger2 = movecontact
trigger3 = stateno = 630
trigger3 = movecontact
Trigger3 = Var(8)
trigger4 = stateno = 670
trigger4 = movecontact
trigger5 = stateno = 660
trigger5 = movecontact
Trigger5 = Var(8)
;---------------------------------------------------------------------------
;ジャンプ強
[State -1, Jump Kick]
type = ChangeState
triggerall = !ishelper
value = 630
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-5,76]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-77,80]
TriggerAll = P2StateType != L
Trigger1 = Var(57) = [20,100]
trigger1 = statetype = A
trigger1 = ctrl || fvar(0)
trigger2 = stateno = 600
trigger2 = movecontact
trigger3 = stateno = 610
trigger3 = movecontact
trigger4 = stateno = 670
trigger4 = movecontact
trigger5 = stateno = 660
trigger5 = movecontact

;---------------------------------------------------------------------------
;エリアルスパイク
[State -1, Jump dust]
type = ChangeState
triggerall = !ishelper
value = 650
TriggerAll = Var(58)
Triggerall = Var(8)
TriggerAll = P2StateType != L
trigger1 = stateno = 600
trigger1 = movecontact
trigger2 = stateno = 610
trigger2 = movecontact
trigger3 = stateno = 630
trigger3 = movecontact
trigger4 = stateno = 660
trigger4 = movecontact
trigger5 = stateno = 670
trigger5 = movecontact

[State 50, 0];二段ジャンプ
type = ChangeState
triggerall = !ishelper
TriggerAll = Var(58)
triggerall = stateno = 50
triggerall = Ctrl
triggerall = numhelper(6030) = 0
triggerall = var(2) = 1||var(48) = 3
triggerall = !var(5)
Trigger1 = P2StateType != L
Trigger1 = StateNo = 50 && Time >= 8
Trigger1 = Ctrl
Trigger1 = Var(57) = [0,5]
Trigger2 = P2StateType != A
Trigger2 = P2BodyDist X = [-30,-20]
Trigger2 = P2BodyDist Y = [10,30]
Trigger2 = Ctrl
Trigger2 = Var(57) = [10,29]
value = 45
ctrl = 1

;HELL DRAGON
[State -1, hd]
type = ChangeState
triggerall = !ishelper
value = 3000
triggerall = power >= 3000
TriggerAll = Var(58)
Triggerall = Var(57) = [0,67]
TriggerAll = P2StateType != L
triggerall = numhelper(3010)=0
triggerall = enemynear,ctrl=0
Triggerall = P2Stateno != [120,169]
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) >= 30
TriggerAll = (P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-81,-42])||p2statetype != A
trigger1 = statetype != A
trigger1 = ctrl
Trigger1 = Var(57) = [27,30]
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movehit
trigger4 = stateno = 410
trigger5 = movehit
trigger5 = stateno = 230
trigger6 = movehit
trigger6 = stateno = 430
trigger7 = movehit
trigger7 = stateno = 260
trigger8 = movehit
trigger8 = stateno = 271


;PHANTOM DIVE
[State -1, pd]
type = ChangeState
triggerall = !ishelper
value = 3100
triggerall = power >= 2000
TriggerAll = Var(58)
Triggerall = Var(57) = [18,99]
triggerall = enemynear,ctrl=0
Triggerall = P2StateType != L
Triggerall = P2Stateno != [120,169]
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [50,109]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-55,2]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) != [-15,-1]
trigger1 = statetype != A
trigger1 = ctrl
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movehit
trigger4 = stateno = 410
trigger5 = movehit
trigger5 = stateno = 230
trigger6 = movehit
trigger6 = stateno = 430
trigger7 = movehit
trigger7 = stateno = 260
trigger8 = movehit
trigger8 = stateno = 271
Trigger9 = (HitOver && (StateNo = 5001 || StateNo = 5011)) || (StateNo = 5120 && AnimTime = 0)
;---------------------------------------------------------------------------------------------
;JET-X 空中
[State -1, jet-x]
type = ChangeState
triggerall = !ishelper
value = 1020
TriggerAll = Var(58)
Triggerall = Var(57) = [81,100]
TriggerAll = P2MoveType != H&&stateno != [120,169]
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) >= 85||P2StateType != L
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) > 0
TriggerAll = !InGuardDist
trigger1 = statetype = A
trigger1 = ctrl
trigger2 = stateno = 600
trigger2 = movecontact
trigger3 = stateno = 610
trigger3 = movecontact
trigger4 = stateno = 630
trigger4 = movecontact
trigger5 = stateno = 660
trigger5 = movecontact
trigger6 = stateno = 670
trigger6 = movecontact

;---------------------------------------------------------------------------------------------
;WAR DANCE
[State -1, wd]
type = ChangeState
triggerall = !ishelper
value = 1300
TriggerAll = Var(58)
Triggerall = (Var(57) = [60,100])||var(57)<35
TriggerAll = P2StateType != L
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-4,76]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-57,5]
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = random <200
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movecontact
trigger4 = stateno = 410
trigger5 = movecontact
trigger5 = stateno = 230
trigger6 = movecontact
trigger6 = stateno = 430
trigger7 = movecontact
trigger7 = stateno = 260
trigger8 = movecontact
trigger8 = stateno = 271
Trigger9 = (HitOver && (StateNo = 5001 || StateNo = 5011)) || (StateNo = 5120 && AnimTime = 0)
trigger10 = stateno = 3900
;---------------------------------------------------------------------------------------------
;MAGNUM STEP
[State -1, df]
type = ChangeState
triggerall = !ishelper
value = 1200
TriggerAll = Var(58)
;Triggerall = Var(57) = [18,70]
TriggerAll = P2StateType != L
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [64,250]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-63,5]
TriggerAll = !InGuardDist
triggerall = !var(5)
TriggerAll = p2movetype != A
trigger1 = statetype != A
trigger1 = ctrl
Trigger1 = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) > 140
trigger1 = enemynear,vel x = [-1,1]
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movehit
trigger4 = stateno = 410
trigger5 = movehit
trigger5 = stateno = 230
trigger6 = movehit
trigger6 = stateno = 430
trigger7 = movehit
trigger7 = stateno = 260
trigger8 = movehit
trigger8 = stateno = 271
Trigger9 = (HitOver && (StateNo = 5001 || StateNo = 5011)) || (StateNo = 5120 && AnimTime = 0)
trigger10 = stateno = 3900

;---------------------------------------------------------------------------------------------
;DEATH FANG
[State -1, df]
type = ChangeState
triggerall = !ishelper
value = 1100
TriggerAll = Var(58)
Triggerall = Var(57) >= 68||Var(57) <= 47
TriggerAll = P2StateType != L
triggerall = !var(5)&&(P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) != [-77,0])
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [30,70]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-161,2]
trigger1 = statetype != A
trigger1 = ctrl
trigger1 = !var(8)
trigger1 = P2statetype = A
trigger2 = stateno = 100
trigger3 = stateno = 103
trigger4 = movehit
trigger4 = stateno = 410
Trigger4 = Var(57) = [40,44]
trigger5 = movehit
trigger5 = stateno = 230
Trigger5 = Var(57) = [40,44]
trigger6 = movehit
trigger6 = stateno = 430
Trigger6 = Var(57) = [40,44]
trigger7 = movehit
trigger7 = stateno = 260
Trigger7 = Var(57) = [40,44]
trigger8 = movehit
trigger8 = stateno = 271
Trigger8 = Var(57) = [40,44]
Trigger9 = (HitOver && (StateNo = 5001 || StateNo = 5011)) || (StateNo = 5120 && AnimTime = 0)
trigger10 = stateno = 3900

;DEATH FANG 空中
[State -1, df]
type = ChangeState
triggerall = !ishelper
value = 1105
TriggerAll = Var(58)
triggerall = !var(5)&&(P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) != [-77,0])
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [-5,100]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-197,50]
TriggerAll = P2StateType != L
triggerAll = p2statetype = A
trigger1 = statetype = A
trigger1 = ctrl
trigger1 = !var(8)
trigger2 = stateno = 600
trigger2 = movehit
trigger3 = stateno = 610
trigger3 = movehit
trigger4 = stateno = 630
trigger4 = movehit
trigger5 = stateno = 660
trigger5 = movehit
trigger6 = stateno = 670
trigger6 = movehit
;---------------------------------------------------------------------------
;立ち3弱
[State -1, Stand K]
type = ChangeState
triggerall = !ishelper
value = 270
TriggerAll = Var(58)
Triggerall = P2BodyDist X-Ceil(Vel X)-Ceil(EnemyNear,Vel X) = [65,163]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) = [-87,62]
TriggerAll = P2BodyDist Y-Ceil(Vel Y)+Ceil(EnemyNear,Vel Y) != [-27,-3]
TriggerAll = P2StateType != L
TriggerAll = !inguarddist
TriggerAll = p2movetype != A
triggerall = !moveguarded
trigger1 = statetype != A
trigger1 = ctrl || fvar(0)
trigger2 = movecontact
trigger2 = stateno = 230
trigger3 = movecontact
trigger3 = stateno = 260
;---------------------------------------------------------------------------
;挑発
[State -1, Taunt]
type = ChangeState
triggerall = !ishelper
value = 195
TriggerAll = Var(58)
TriggerAll = random>270
Triggerall = life>600
triggerall = p2movetype != A
Triggerall = P2BodyDist X > 120
triggerall = p2statetype = L
trigger1 = statetype != A
trigger1 = ctrl