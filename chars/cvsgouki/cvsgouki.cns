;Var(0)  = ジャストディフェンス判定
;Var(1)  = 地上受身可能判定
;Var(2)  = 
;Var(3)  = ジャンプ管理1（距離）
;Var(4)  = ジャンプ管理2（高さ）
;Var(5)  = 強弱管理
;Var(6)  = 百鬼襲animelem
;Var(7)  = Cグルーヴパワー量による攻撃力変動
;Var(8)  = 残りライフ量による攻撃力変動
;Var(9)  = 相手残りライフ量による攻撃力変動
;Var(10) = ブロッキング前入力
;Var(11) = ブロッキング下入力
;Var(12) = モード判定
;Var(13) = 瞬獄殺KO判定用
;Var(14) = SグルーヴパワーMAX残り時間
;Var(15) = NグルーヴパワーMAX残り時間
;Var(16) = オリコン残り時間
;Var(17) = オリコン時ヒット数用
;Var(18) = オリコンOn/Off
;Var(19) = オリコン時残りゲージ量
;Var(20) = グルーヴ判定
;Var(21) = KグルーヴパワーMAXによる攻撃力変動
;Var(22) = 強制fall=0時juggle判別用
;Var(23) = 追い討ち用
;Var(24) = グルーヴによるパワー増加量変動
;Var(25) = ジャストディフェンス入力
;Var(26) = 前ラウンド勝敗判定
;Var(27) = KOボイス判定
;Var(28) = Play Anim / Time Offset
;Var(29) = 
;Var(30) = イントロ種類
;Var(31) = Kグルーヴライフ残量によるパワー増加量変動
;Var(32) = roundstate3時間経過
;Var(33) = 
;Var(34) = 前ブロッキング入力後ニュートラルに戻したか否か
;Var(35) = 下ブロッキング入力後ニュートラルに戻したか否か
;Var(36) = Hit判定
;Var(37) = gethitvar(hitshaketime)
;Var(38) = カウンターヒットエフェクト表示位置（X軸）（攻撃）
;Var(39) = カウンターヒットエフェクト表示位置（Y軸）（攻撃）
;Var(40) = コンボ制限用1
;Var(41) = カウンターヒット用
;Var(42) = コンボ制限用2
;Var(43) = Kグルーヴ怒りMAX中判定
;Var(44) = 残像再発生用
;Var(45) = 食らい判定再出現用
;var(46) = GetHitVar(damage)
;Var(47) = MAXヒット数
;Var(48) = プレイヤー状態
;Var(49) = 相手状態
;Var(50) = グルーヴポイント
;var(51) = ラウンド開始からの経過時間
;Var(52) = キャラ判別
;var(53) = 相手ライフ（ダメージ前）
;var(54) = コンプリートボーナス用
;var(55) = コンプリートボーナス用2
;var(56) = matchover時間経過
;var(57) = 相手動作によるゲージ消去判定
;Var(58) = ファーストストライク判定
;Var(59) = AI判定

;fvar(0)  = コンボ補正
;fvar(1)  = ガード中State判定
;fvar(2)  = 投げ抜け判定
;fvar(3)  = グルーヴポイント表示On/Off
;fvar(4)  = 
;fvar(5)  = ボーナスメッセージアイコン表示一段目有無
;fvar(6)  = ボーナスメッセージアイコン表示二段目有無
;fvar(7)  = ボーナスメッセージアイコン表示三段目有無
;fvar(8)  = アイコン種類
;fvar(9)  = フィニッシュヒット判定
;fvar(10) = 攻撃力補正
;fvar(11) = roundstate4経過時間
;fvar(12) = ライフ
;fvar(13) = KグルーヴパワーMAX残り時間
;fvar(14) = パーフェクト判定
;fvar(15) = カウンターヒットメッセージ用
;fvar(16) = DoubleRes設定（ゲージのみ）
;fvar(17) = 
;fvar(18) = 
;fvar(19) = KOボイス種類判定
;fvar(20) = やられ時にゲージ消去をする相手動作の判定
;fvar(21) = パワー溜まった時の音用
;fvar(22) = リバーサル判定用1
;fvar(23) = リバーサル判定用2
;fvar(24) = GP表示背景色変化用
;fvar(25) = 燃焼、感電エフェクト用
;fvar(26) = 空中コンボ用
;fvar(27) = 
;fvar(28) = 
;fvar(29) = 
;fvar(30) = 
;fvar(31) = 
;fvar(32) = 
;fvar(33) = 
;fvar(34) = 
;fvar(35) = 
;fvar(36) = 強制停止中ガード不能時間
;fvar(37) = メッセージアイコンの表示Y座標補正
;fvar(38) = 空中復帰誘導
;fvar(39) = ゲームシステム判別

[Data]
life = 889
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 20
airjuggle = 15
sparkno = 2
guard.sparkno = 40
KO.echo = 0
volume = 100
IntPersistIndex = 0
FloatPersistIndex = 0

[Size]
xscale = 1			;水平方向の縮尺（通常１）
yscale = 1			;垂直方向の縮尺（通常１）
ground.back = 15		;キャラの幅(後方,地上)
ground.front = 15		;キャラの幅(前方,地上)
air.back = 15			;キャラの幅(後方,空中)
air.front = 15		;キャラの幅(前方,空中)
height = 78			;キャラの高さ
attack.dist = 160		;攻撃をした時相手がガード体制に入る最低距離
proj.attack.dist = 90	;攻撃をした時相手がガード体制に入る最低距離（飛び道具）
proj.doscale = 0		;上で設定した縮尺を飛び道具にも適用するか（１でＯＮ）   
head.pos = 13, -90		;頭の大体の座標
mid.pos = 5, -64		;体の中心の大体の座標
shadowoffset = 0		;影の垂直方向のオフセット
draw.offset = 0,0		;使用しない

[Velocity]
walk.fwd  = 3.50		;前進の速度
walk.back = -2.29		;後退の速度
run.fwd  = 5.66, 0		;前ダッシュの速度（ホップする時はyを-にする）
run.back = -4.8,-4.5		;後ダッシュの速度（ホップする時はyを-にする）
jump.neu = 0,-10.68		;垂直ジャンプの速度
jump.back = -3.87,-10.75	;後ジャンプの速度
jump.fwd = 3.16	,-10.75	;前ジャンプの速度
runjump.back = -4.5,-10.79	;後ダッシュしながらのジャンプ速度(オプション)
runjump.fwd = 4.74,-10.79;前ダッシュしながらのジャンプ速度(オプション)
airjump.neu = 0,-6.5		;２段ジャンプ以降の垂直ジャンプの速度(オプション)
airjump.back = -2.8		;２段ジャンプ以降の後ジャンプの速度(オプション)
airjump.fwd = 2.8		;２段ジャンプ以降の前ジャンプの速度

[Movement]
airjump.num = 0		;空中でジャンプする回数
airjump.height = 28		;空中でジャンプする最低限の高さ
yaccel = .51			;重力
stand.friction = .85		;立ち状態の摩擦係数
crouch.friction = .82	;屈み状態の摩擦係数

;---------------------------------------------------------------------------
;歩き（CPU）
[Statedef 21]
type    = S
physics = N
sprpriority = 0
ctrl = 0
velset = 0,0

[State 20, 1]
type = Turn
trigger1 = P2dist X < 0

[State 20, 1]
type = VelSet
trigger1 = time = 0
x = ifelse(random%3=0||P2bodydist x<50,const(velocity.walk.back.x),const(velocity.walk.fwd.x))*ifelse(var(12),1.4,1)

[State 20, 1]
type = VelSet
triggerall = time = 0
trigger1 = P2bodydist X > 160
trigger2 = numtarget
trigger2 = target,StateType != L
trigger2 = fvar(26) < 3
x = const(velocity.walk.fwd.x)
persistent = 0

[State 20, 3]
type = ChangeAnim
triggerall = vel x > 0
trigger1 = Anim != 20
value = 20
persistent = 0

[State 20, 4]
type = ChangeAnim
triggerall = vel x < 0
trigger1 = Anim != 21
value = 21
persistent = 0

[State 20, 4]
type = changestate
trigger1 = time > 20
trigger1 = P2bodydist x <= 50 && anim = 20
trigger2 = time > 20
trigger2 = P2bodydist x >= 150 && anim = 21
trigger3 = inguarddist
trigger4 = roundstate != 2
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;ラン
[Statedef 100]
type    = S
physics = S
anim = 100
velset = 0,0
ctrl = 0

[State 1000, Spark]
type = Explod
trigger1 = Time = 1
Anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 100, 1]
type = VelSet
triggerall = !var(12)
trigger1 = AnimElemTime(2) >= 0
x = const(velocity.run.fwd.x)

[State 100, 1]
type = VelSet
triggerall = var(12)
trigger1 = AnimElemTime(2) >= 0
x = const(velocity.run.fwd.x)*1.2

[State 100, 2]
type = AssertSpecial
trigger1 = 1
flag = NoWalk

[State 100, 3]
type = AssertSpecial
trigger1 = 1
flag = NoAutoTurn

[State 100, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 100, Effect]
type = PlaySnd
trigger1 = time = 1
value = 100,0
channel = 18

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElemTime(3) = 0
value = 100,1
channel = 19

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElemTime(6) = 0
value = 100,2
channel = 20

[State 100, 5]
type = ChangeState
triggerall = !var(59)
triggerall = AnimElemTime(2) >= 1
trigger1 = command != "holdfwd"
value = 101
ctrl = 1

[State 100, 5]
type = ChangeState
triggerall = var(59)
triggerall = AnimElemTime(2) >= 1
trigger1 = P2BodyDist X <= 45 && Random <= 700
trigger2 = P2MoveType = A && Random <= 500 && P2BodyDist X <= 70
trigger3 = roundstate != 2
value = 101
ctrl = 1

;---------------------------------------------------------------------------
;ラン停止
[Statedef 101]
type = S
physics = N
ctrl = 0
anim = 101

[State 100, 4]
type = ChangeState
trigger1 = command = "holdup"
value = 40

[State 100, 1]
type = VelMul
trigger1 = 1
x = .9

[State 100, 1]
type = VelSet
trigger1 = animtime = 0
x = 0

[State 100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 100,3
channel = 20

[State 101, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ステップ
[Statedef 102]
type    = A
physics = N
ctrl = 0
anim = 102
velset = 0,0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 100, 0
channel = 20

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 105, 1]
type = VelSet
triggerall = !var(12)
trigger1 = AnimElem = 2
x = 6.4

[State 105, 1]
type = VelSet
triggerall = var(12)
trigger1 = AnimElem = 2
x = 6.4*1.4

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .98

[State 105, 3]
type = ChangeState
trigger1 = animtime = 0
value = 103

;---------------------------------------------------------------------------
;ステップ着地
[Statedef 103]
type    = S
physics = S
ctrl = 1
anim = 103
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 100, 1
channel = 20

[State 106, 1]
type = VelSet
trigger1 = Time = 0
y = 0

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;バックステップ
[Statedef 105]
type    = A
physics = N
ctrl = 0
anim = 105
velset = 0,0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 105, 0
channel = 20

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8040
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 105, 1]
type = VelSet
triggerall = !var(12)
trigger1 = AnimElem = 2
x = -6.75

[State 105, 1]
type = VelSet
triggerall = var(12)
trigger1 = AnimElem = 2
x = -6.75*1.4

[State 105, 1]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .98

[State 105, 3]
type = ChangeState
trigger1 = animtime = 0
value = 106

;---------------------------------------------------------------------------
;バックステップ（着地）
[Statedef 106]
type    = S
physics = S
ctrl = 0
anim = 106
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 106, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, 3]
type = CtrlSet
trigger1 = time = 3
value = 1

[State 106, 4]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; タイムオーバー負け
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 52, 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
; タイムオーバー引き分け
[Statedef 175]
type = S
ctrl = 0
anim = 170
velset = 0,0

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 52, 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

;---------------------------------------------------------------------------
;勝利ポーズ分岐
[Statedef 180]
type = S
ctrl = 0
velset = 0,0

[State 180,0]
type = Changestate
trigger1 = Time = 0
trigger1 = Prevstateno = 3303
value = 3304

[State 180, 1]
type = ChangeState
trigger1 = time = 0
value = 181+(random%2)

;---------------------------------------------------------------------------
;勝ちポーズ1
[Statedef 181]
type = S
physics = S
ctrl = 0
velset = 0,0
anim = 181

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 180,1+var(12)
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 5100,1

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 270]
flag = RoundNotOver

[State 1100, Fire1]
type = Explod
trigger1 = AnimElem = 5
Anim = 7701
pos = 0,0
postype = p1
ownpal = 1
ignorehitpause = 1
ID = 7701
bindtime = -1
sprpriority = -1
removetime = -1

[State 191, Cloth]
type = Helper
trigger1 = random%2=1
trigger1 = Time = 1
ID = 7960
stateno = 7960
postype = p1
pos = 0,0
ownpal = 1
name = "afterimage_win"
size.xscale = .95
size.yscale = 1.05

[State 191, Cloth]
type = Helper
trigger1 = numhelper(7960)
trigger1 = Time = 6
ID = 7961
stateno = 7960
postype = p1
pos = 0,0
ownpal = 1
name = "afterimage_win"
size.xscale = .9
size.yscale = 1.1

;---------------------------------------------------------------------------
;勝ちポーズ2
[Statedef 182]
type = S
physics = S
ctrl = 0
velset = 0,0
anim = 180

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 4
value = 180,(random%2)*2+var(12)
channel = 0

[State 191, Cloth]
type = Helper
triggerall = !var(12)
trigger1 = AnimElemtime(4) = 10
ID = 7910
stateno = 7910
postype = p1
pos = 0,0
name = "ten3"
ownpal = 1

[State 1200, Flames]
type = Explod
triggerall = var(12)
trigger1 = AnimElemtime(4) = 10
anim = ifelse(facing=1,186,187)
id = 183
pos = 0,0
postype = P1
sprpriority = 1
bindtime = -1
ownpal = 0
removetime = -1

[State 191, Cloth]
type = Helper
trigger1 = random%2=1
trigger1 = Time = 1
ID = 7960
stateno = 7960
postype = p1
pos = 0,0
ownpal = 1
name = "afterimage_win"
size.xscale = .95
size.yscale = 1.05

[State 191, Cloth]
type = Helper
trigger1 = numhelper(7960)
trigger1 = Time = 6
ID = 7961
stateno = 7960
postype = p1
pos = 0,0
ownpal = 1
name = "afterimage_win"
size.xscale = .9
size.yscale = 1.1

[State 181, 1]
type = AssertSpecial
trigger1 = Time = [0, 270]
flag = RoundNotOver

;---------------------------------------------------------------------------
;残像（勝利）（出現）
[Statedef 7960]
ctrl = 0
anim = root,anim
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = varset
trigger1 = root,fvar(13)&&root,var(43)
var(1) = 1

[State 9000, 1]
type = varset
trigger1 = !root,fvar(13)||!root,var(43)
var(1) = 0

[State 9000, 1]
type = velset
trigger1 = 1
x = .12*cos(var(0)*0.075)
y = .12*sin(var(0)*0.075)

[State 9000, 1]
type = posadd
trigger1 = time = 1
x = anim=180

[State 8200, PalFX]
type = PalFX
trigger1 = time = [0,4]
mul = 0,0,0
time = 1

[State 8200, PalFX]
type = PalFX
trigger1 = time > 4
mul = ceil((time-4)*16*ifelse(var(1),.8984375,1)),ceil((time-4)*16*ifelse(var(1),ceil(152-abs(76*sin(gametime*.05)))*.00390265,1)),ceil((time-4)*16*ifelse(var(1),ceil(128-abs(64*sin(gametime*.05)))*.00390265,1))
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 64,256

[State 9000, Assert]
type = AssertSpecial
trigger1 = time = [0,1]
flag = invisible
flag2 = noshadow

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, ChangeState]
type = ChangeState
trigger1 = time = 20
value = 7961

;---------------------------------------------------------------------------
;残像（勝利）
[Statedef 7961]
ctrl = 0

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = varset
trigger1 = root,fvar(13)&&root,var(43)
var(1) = 1

[State 9000, 1]
type = varset
trigger1 = !root,fvar(13)||!root,var(43)
var(1) = 0

[State 9000, 1]
type = velset
trigger1 = 1
x = .12*cos(var(0)*0.075)
y = .12*sin(var(0)*0.075)

[State 8200, PalFX]
type = PalFX
trigger1 = var(1)
mul = 230,ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 128,192

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------------------------------------------------------------
;イントロ（分岐）
[Statedef 190]
type = S
ctrl = 0
anim = 0
velset = 0,0

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(30) = 0

[State -2, 3]
type = ChangeState
triggerall = IsHomeTeam && Roundstate = 0 && Pos X > 0
trigger1 = var(12)
value = 192

[State -2, 3]
type = ChangeState
triggerall = !var(12)
trigger1 = (P2Name = "cvsryu" || P4Name = "cvsryu") && (EnemyNear,PalNo = [7,12]) && EnemyNear,AuthorName = "warusaki3"
trigger2 = (P2Name = "cvsryu_ex" || P4Name = "cvsryu_ex") && EnemyNear,AuthorName = "warusaki3"
value = 196

[State -2, 3]
type = ChangeState
trigger1 = random%4=0
value = 193+(random%2)

[State 190, 1]
type = ChangeState
trigger1 = 1
value = 191+(random%3=0&&var(12))

;---------------------------------------------------------------------------
;イントロ（通常）
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 191, Cloth]
type = Helper
trigger1 = random%2=1
trigger1 = Time = 1
trigger1 = !var(12)
ID = 7950
stateno = 7950
postype = p1
pos = 0,0
ownpal = 1
name = "afterimage_intro"
size.xscale = .95
size.yscale = 1.05

[State 191, Cloth]
type = Helper
trigger1 = numhelper(7950)
trigger1 = Time = 6
ID = 7951
stateno = 7950
postype = p1
pos = 0,0
ownpal = 1
name = "afterimage_intro"
size.xscale = .9
size.yscale = 1.1

[State 181, 2]
type = PlaySnd
triggerall = var(12)
trigger1 = AnimElemtime(1) = 60
value = 3400, 0

[State 1200, Flames]
type = Explod
triggerall = var(12)
trigger1 = Time = 1
anim = ifelse(facing=1,188,189)
pos = 0,0
postype = P1
sprpriority = 6
bindtime = -1
ownpal = 0

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;残像（イントロ）
[Statedef 7950]
ctrl = 0
anim = root,anim
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = varset
trigger1 = root,fvar(13)&&root,var(43)
var(1) = 1

[State 9000, 1]
type = varset
trigger1 = !root,fvar(13)||!root,var(43)
var(1) = 0

[State 9000, 1]
type = velset
trigger1 = 1
x = .12*cos(var(0)*0.075)
y = .12*sin(var(0)*0.075)

[State 9000, 1]
type = posadd
trigger1 = time = 0
x = 1

[State 8200, PalFX]
type = PalFX
trigger1 = var(1)
mul = 230,ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 128,192

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1000, ChangeState]
type = ChangeState
trigger1 = animelem = 2
value = 7951

;---------------------------------------------------------------------------
;残像（イントロ）（消滅）
[Statedef 7951]
ctrl = 0
ownpal = 1
sprpriority = 2

[State 9000, 1]
type = varadd
trigger1 = 1
var(0) = 1

[State 9000, 1]
type = varset
trigger1 = root,fvar(13)&&root,var(43)
var(1) = 1

[State 9000, 1]
type = varset
trigger1 = !root,fvar(13)||!root,var(43)
var(1) = 0

[State 9000, 1]
type = velset
trigger1 = 1
x = .12*cos(var(0)*0.075)
y = .12*sin(var(0)*0.075)

[State 8200, PalFX]
type = PalFX
trigger1 = 1
mul = (256-(time*16))*ifelse(var(1),.8984375,1),(256-(time*16))*ifelse(var(1),ceil(152-abs(76*sin(gametime*.05)))*.00390265,1),(256-(time*16))*ifelse(var(1),ceil(128-abs(64*sin(gametime*.05)))*.00390265,1)
time = 1

[State 9000, 1]
type = trans
trigger1 = 1
trans = add1
alpha = 64,256

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8200, Destroy]
type = DestroySelf
trigger1 = time = 16

;---------------------------------------------------------------------------
;イントロ（神）
[Statedef 192]
type = S
ctrl = 0
anim = ifelse(facing=1,191,192)
velset = 0,0

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 181, 2]
type = PlaySnd
trigger1 = AnimElemtime(6) = 50
value = 190, 0

[State 181, 2]
type = PlaySnd
trigger1 = time = 40
value = 190, 1

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 18
value = 5100,1

[State -3, Burn sparks]
type = Explod
trigger1 = time = 40
anim = 7500
id = 7500
postype = P1
pos = 4,-76
ownpal = 1
bindtime = -1
sprpriority = 4
removetime = -1
facing = 1

[State 4900, 16]
type = modifyExplod
trigger1 = 1
Id = 7500
scale = 1.5*sin(0.0125*(time-40)),1.5*sin(0.0125*(time-40))
ignorehitpause = 1

[State -2, Power Chage]
type = RemoveExplod
trigger1 = time = 290
ID = 7500

[State 190, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ（瞬獄殺）
[Statedef 193]
type = S
physics = N
ctrl = 0
anim = 6900
velset = 0,0
sprpriority = 2

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(30) = 2

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 190, groove]
type = helper
trigger1 = time = 0
ID = 7802
stateno = 7802
postype = p1
pos = 0,0
name = "shungokusatsu"

[state 190, groove]
type = helper
trigger1 = time = 150
ID = 7850
stateno = 7850
postype = p1
pos = 270,0
name = "shungokusatsu_dummy"
ownpal = 1
facing = -1

[State 820, Anim]
type = ChangeAnim
trigger1 = time > 150
trigger1 = !NumHelper(7850)
value = 193
persistent = 0

[state 190, groove]
type = helper
triggerall = anim = 193
trigger1 = animelem = 1
ID = 7804
stateno = 7804
postype = p1
pos = 0,0
name = "vega3"
ownpal = 1
size.shadowoffset = 30

[State 191, Cloth]
type = Helper
triggerall = anim = 193
triggerall = !var(12)
trigger1 = animelem = 1
ID = 7900
stateno = 7900
postype = p1
pos = 0,0
ownpal = 1
name = "ten1"

[State 1200, Flames]
type = Explod
triggerall = anim = 193
triggerall = var(12)
trigger1 = animelem = 1
anim = ifelse(facing=1,188,189)
id = 183
pos = 0,0
postype = P1
sprpriority = 6
bindtime = -1
ownpal = 1

[State 200, 2]
type = Playsnd
triggerall = anim = 193
trigger1 = animelem = 1
value = 3300, 1

[State 3105, Voice]
type = Playsnd
triggerall = anim = 193
trigger1 = animelemtime(1) = 10
value = 3300, 2
channel = 0

[State -2, Power Chage]
type = RemoveExplod
triggerall = anim = 193
trigger1 = animelem = 2
ID = 183

[State 3810,5]
type = Changestate
triggerall = anim = 193
trigger1 = animTime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ（瞬極殺）（ダミー）1
[Statedef 7850]
type = S
physics = N
ctrl = 0
anim = 7850
velset = 6,0
sprpriority = 2

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1500,root,var(12)

[State 3000, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 39
TimeGap  = 1
FrameGap = 13
length = 39
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .8,.8,.8
trans = add1

[State 1100, ChangeState]
type = ChangeState
trigger1 = rootdist X <= 30
value = 7851

;---------------------------------------------------------------------------
;イントロ（瞬獄殺）（ダミー）2
[Statedef 7851]
anim = 7851
velset = 0,0

[State 200, 2]
type = Playsnd
trigger1 = Time = 0
value = 195,10
channel = 0

[State 200, 2]
type = Playsnd
trigger1 = Time = 0
value = 900,0
channel = 1

[State 3105, AssertSpecial]
type = AssertSpecial
trigger1 = !root,var(12)
trigger1 = Time = [24,83]
trigger2 = root,var(12)
trigger2 = Time = [24,144]
flag = NoBG
flag2 = NoFG
flag3 = timerfreeze

[State 3000, AfterImage]
type = AfterImage
trigger1 = time = 24
time = 0

[State 9606, EnvColor]
type = Playsnd
trigger1 = !root,var(12)
trigger1 = (Time = [25,83]) && Time % 4 = 0
trigger2 = root,var(12)
trigger2 = Time = 32 || Time = 35 || Time = 47 || Time = 77 || Time = 83 || Time = 89
trigger3 = root,var(12)
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4 = root,var(12)
trigger4 = (Time = [92,113]) && Time % 3 = 2
trigger5 = root,var(12)
trigger5 = (Time = [115,143]) && Time % 2 = 1
value = 2,2+((random%2)*3)
channel = 5

[State 9606, EnvColor]
type = Playsnd
trigger1 = !root,var(12)
trigger1 = Time = 84
trigger2 = root,var(12)
trigger2 = Time = 145
value = 2,22
channel = 5

[State 4110, Explod]
type = Explod
trigger1 = !root,var(12)
trigger1 = (Time = [25,83]) && Time % 4 = 0
trigger2 = root,var(12)
trigger2 = Time = 32 || Time = 35 || Time = 47 || Time = 77 || Time = 83 || Time = 89 || Time = 145
trigger3 = root,var(12)
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4 = root,var(12)
trigger4 = (Time = [92,113]) && Time % 3 = 2
trigger5 = root,var(12)
trigger5 = (Time = [115,143]) && Time % 2 = 1
anim = 8200+(random%8)
id = 8201
pos = 30,-70
random = 20,20
postype = P1
ontop = 1
ownpal = 1
facing = ifelse(Random<=500,-1,1)

[State 200, 2]
type = DestroySelf
trigger1 = !root,var(12)
trigger1 = Time = 84
trigger2 = root,var(12)
trigger2 = Time = 145

;---------------------------------------------------------------------------
;イントロ（瞬獄殺）（ベガ）1
[Statedef 7802]
type = S
physics = N
ctrl = 0
anim = 7802
velset = 0,0
sprpriority = 2

[State 181, 2]
type = PlaySnd
trigger1 = AnimElemTime(1) = 50
value = 192,0

[State 1100, ChangeState]
type = ChangeState
trigger1 = root,time = 191
value = 7803

;---------------------------------------------------------------------------
;イントロ（瞬獄殺）（ベガ）2
[Statedef 7803]
anim = 7803
sprpriority = 1

[State 3105, Voice]
type = Playsnd
trigger1 = Time = 28 && !root,var(12)
trigger2 = Time = 32 && root,var(12)
value = 192, 3

[State 1100, ChangeState]
type = DestroySelf
trigger1 = time = 40

;---------------------------------------------------------------------------
;イントロ（瞬獄殺）（ベガ）3
[Statedef 7804]
type = S
ctrl = 0
anim = 7804
velset = 0,0
sprpriority = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8200, Assert]
type = AssertSpecial
trigger1 = parent,stateno = 3301
trigger1 = parent,Time >= 25
flag = Invisible

;---------------------------------------------------------------------------
;イントロ（禊）
[Statedef 194]
type = S
physics = S
ctrl = 0
anim = 6900
velset = 0,0

[State 180, 1]
type = VarSet
trigger1 = Time = 0
var(30) = 1

[state 190, groove]
type = helper
trigger1 = time = 0
ID = 7800
stateno = 7800
postype = p1
pos = 0,0
name = "misogi_intro"
bindtime = -1
ownpal = 1

[state 190, groove]
type = helper
trigger1 = time = 150
ID = 7860
stateno = 7860
postype = p1
pos = 0,-150
name = "misogi_dummy"
bindtime = -1
ownpal = 1

[State 820, Anim]
type = ChangeAnim
trigger1 = time > 150
trigger1 = !NumHelper(7860)
value = 194
persistent = 0

[State 181, 2]
type = PlaySnd
triggerall = anim = 194
trigger1 = AnimElem = 10
value = 180, 2+var(12)
channel = 0

[State 181, 2]
type = PlaySnd
triggerall = anim = 194
trigger1 = AnimElem = 1
value = 5100,1
channel = 1

[State 1000, Spark]
type = Explod
triggerall = anim = 194
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 190, 4]
type = ChangeState
triggerall = anim = 194
trigger1 = AnimTime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ（禊）（ダミー）
[Statedef 7860]
type = A
physics = N
ctrl = 0
anim = 7860
velset = 0,0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 3
y = 3

[State 1100, Velocity]
type = VelAdd
trigger1 = AnimElemTime(3) >= 0
y = .9

[State 1100, ChangeState]
type = DestroySelf
triggerall = AnimElemTime(3) >= 0
trigger1 = Pos Y >= 0 && Vel Y > 0

;---------------------------------------------------------------------------
;イントロ（禊）（ベガ）1
[Statedef 7800]
type = S
physics = N
ctrl = 0
anim = 7800
velset = 0,0
sprpriority = 2

[State 181, 2]
type = PlaySnd
trigger1 = AnimElemTime(1) = 50
value = 192,0
channel = 2

[State 190, 4]
type = ChangeState
trigger1 = time > 150
trigger1 = !root,NumHelper(7860)
value = 7801

;---------------------------------------------------------------------------
;イントロ（禊）（ベガ）2
[Statedef 7801]
anim = 7801

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2, 12

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 192,1
channel = 2

[State 1200, Flames]
type = Explod
trigger1 = AnimElem = 1
anim = 7900
pos = 0,0
postype = P1
sprpriority = 3
ownpal = 1

[State 8200, Assert]
type = AssertSpecial
trigger1 = parent,stateno = 3301
trigger1 = parent,Time >= 25
flag = Invisible

[State 181, 2]
type = PlaySnd
trigger1 = animelem = 11
value = 5100,0

;---------------------------------------------------------------------------
;イントロ（禊）（ベガ）3
[Statedef 7805]
type = S
ctrl = 0
anim = 7805
velset = 0,0
sprpriority = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 8200, Assert]
type = AssertSpecial
trigger1 = parent,stateno = 3301
trigger1 = parent,Time >= 25
flag = Invisible

;---------------------------------------------------------------------------
;天（瞬獄殺イントロ）
[Statedef 7900]
ctrl = 0
anim = ifelse(root,facing=1,182,183)
sprpriority = 3

[State 1000, 0]
type = BindToRoot
trigger1 = 1
pos = 0,0

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 9000, 1]
type = varset
trigger1 = root,fvar(13)&&root,var(43)
var(1) = 1

[State 9000, 1]
type = varset
trigger1 = !root,fvar(13)||!root,var(43)
var(1) = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = time = 90
value = 7905

;---------------------------------------------------------------------------
;天（瞬獄殺通常）
[Statedef 7901]
ctrl = 0
anim = ifelse(root,facing=1,182,183)
sprpriority = 3

[State 1000, 0]
type = BindToRoot
trigger1 = 1
pos = 0,0

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 1000, ChangeState]
type = ChangeState
trigger1 = time = 60
value = 7905

;---------------------------------------------------------------------------
;天（瞬獄殺KO）
[Statedef 7902]
ctrl = 0
anim = ifelse(root,facing=1,182,183)
sprpriority = 3

[State 1000, 0]
type = BindToRoot
trigger1 = 1
pos = 0,0

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

;---------------------------------------------------------------------------
;天（消滅）
[Statedef 7905]
ctrl = 0
anim = ifelse(root,facing=1,182,183)
sprpriority = 3
ownpal = 1

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 9000, 1]
type = varset
trigger1 = root,fvar(13)&&root,var(43)
var(1) = 1

[State 9000, 1]
type = varset
trigger1 = !root,fvar(13)||!root,var(43)
var(1) = 0

[State 8200, PalFX]
type = PalFX
trigger1 = 1
mul = (256-(time*16))*ifelse(var(1),.8984375,1),(256-(time*16))*ifelse(var(1),ceil(152-abs(76*sin(gametime*.05)))*.00390265,1),(256-(time*16))*ifelse(var(1),ceil(128-abs(64*sin(gametime*.05)))*.00390265,1)
time = 1

[State 8200, Destroy]
type = DestroySelf
trigger1 = time = 16

;---------------------------------------------------------------------------
;天（出現）
[Statedef 7910]
ctrl = 0
anim = ifelse(root,facing=1,182,183)
sprpriority = 2

[State 8200, Assert]
type = AssertSpecial
trigger1 = Time = [0,1]
flag = Invisible
flag2 = noshadow

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 9000, 1]
type = varset
trigger1 = root,fvar(13)&&root,var(43)
var(1) = 1

[State 9000, 1]
type = varset
trigger1 = !root,fvar(13)||!root,var(43)
var(1) = 0

[State 8200, PalFX]
type = PalFX
trigger1 = time < 16
mul = time*16*ifelse(var(1),.8984375,1),time*16*ifelse(var(1),ceil(152-abs(76*sin(gametime*.05)))*.00390265,1),time*16*ifelse(var(1),ceil(128-abs(64*sin(gametime*.05)))*.00390265,1)
time = 1

[State 8200, PalFX]
type = PalFX
trigger1 = time >= 16
trigger1 = var(1)
mul = 230,ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
time = 1

;---------------------------------------------------------------------------
;イントロ（対殺意リュウ）
[Statedef 196]
type = S
physics = N
ctrl = 0
anim = 6900
velset = 0,0
sprpriority = 2

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[state 190, groove]
type = helper
trigger1 = time = 50
ID = 7850
stateno = 7852
postype = p1
pos = -80,0
name = "shungokusatsu_dummy"
ownpal = 1

[State 820, Anim]
type = ChangeAnim
trigger1 = time > 50
trigger1 = !NumHelper(7850)
value = 196
persistent = 0

[State 3105, Voice]
type = Playsnd
triggerall = anim = 196
trigger1 = animelem = 2
value = 900, 1
channel = 0

[State 3105, Voice]
type = Playsnd
triggerall = anim = 196
trigger1 = animelem = 1
value = 810, 0

[State 3105, Voice]
type = Playsnd
triggerall = anim = 196
trigger1 = animelem = 1
value = 3300, 1

[State 903, EnvShake]
type = EnvShake
triggerall = anim = 196
trigger1 = animelem = 1
time = 20
ampl = 5

[State 3810,5]
type = Changestate
triggerall = anim = 196
trigger1 = animTime = 0
value = 0

;---------------------------------------------------------------------------
;イントロ（対殺意リュウ）（ダミー）1
[Statedef 7852]
type = S
physics = N
ctrl = 0
anim = 7850
velset = 5,0
sprpriority = 2

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1500,0

[State 3000, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 39
TimeGap  = 1
FrameGap = 13
length = 39
PalBright = 1,1,1
PalContrast = 160,160,160
PalAdd = 0,0,0
PalMul = .9,.9,.9
trans = add1

[State 1100, ChangeState]
type = ChangeState
trigger1 = abs(Pos X) <= 40
value = 7853

;---------------------------------------------------------------------------
;イントロ（対殺意リュウ）（ダミー）2
[Statedef 7853]
anim = 7851
velset = 0,0

[State 200, 2]
type = Playsnd
trigger1 = Time = 0
value = 195,10
channel = 0

[State 200, 2]
type = Playsnd
trigger1 = Time = 0
value = 900,0
channel = 1

[State 3105, AssertSpecial]
type = AssertSpecial
trigger1 = Time = [24,83]
flag = NoBG
flag2 = NoFG
flag3 = timerfreeze

[State 3000, AfterImage]
type = AfterImage
trigger1 = time = 24
time = 0

[State 9606, EnvColor]
type = Playsnd
trigger1 = (Time = [25,83]) && Time % 4 = 0
value = 1,1
channel = 5

[State 9606, EnvColor]
type = Playsnd
trigger1 = (Time = [25,83]) && Time % 4 = 0
value = 2,2+((random%2)*3)
channel = 6

[State 9606, EnvColor]
type = Playsnd
trigger1 = Time = 84
value = 1,1
channel = 5

[State 9606, EnvColor]
type = Playsnd
trigger1 = Time = 84
value = 2,22
channel = 6

[State 4110, Explod]
type = Explod
trigger1 = (Time = [25,83]) && Time % 4 = 0
anim = 8200+(random%8)
pos = 40,-75
random = 75,75
postype = P1
ontop = 1
ownpal = 1
facing = ifelse(Random<=500,-1,1)

[State 200, 2]
type = DestroySelf
trigger1 = Time = 84

;---------------------------------------------------------------------------
;挑発
[Statedef 195]
type = S
ctrl = 0
anim = 195
velset = 0,0
movetype = I
physics = S

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 3
value = 195, var(12)
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 6
value = 5100,1

[State 195, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち弱パンチ
[Statedef 200]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 200
poweradd = 0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 200, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, (random&2)+var(12)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -78
hitsound = S2, 0
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 10+(((var(0)&2**12)/2**12)*2)
ground.hittime = 10+(((var(0)&2**12)/2**12)*2)
air.hittime = 10+(((var(0)&2**12)/2**12)*2)
guard.ctrltime = 11
ground.velocity = -6*(2-(var(16)>0))/2
guard.velocity = -6*(2-(var(16)>0))/2
air.velocity = -6*(5.0/4.0)*(160.0/179.0),-3.671875*(5.0/4.0)
airguard.velocity = -4,-.75
ground.cornerpush.veloff = -8.4*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 205, Time Offset]
type = VarSet
trigger1 = moveContact = 1
var(28) = Time
ignorehitpause = 1
persistent = 0
[State 205, Play Anim]
type = ChangeAnim
triggerall = AnimElemTime(2) >= 0 && AnimElemTime(3) <= 0
trigger1 = hitPauseTime = [1,ceil(9*(2-(Var(16)>0))/2) - (1 - Var(28))]
value = anim
elem = 3
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -78

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち弱パンチ
[Statedef 201]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 201
poweradd = 0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 200, 1]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 200, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, (random%2)+var(12)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 200, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -81
hitsound = S2, 0
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 10+(((var(0)&2**12)/2**12)*2)
ground.hittime = 10+(((var(0)&2**12)/2**12)*2)
air.hittime = 10+(((var(0)&2**12)/2**12)*2)
guard.ctrltime = 11
ground.velocity = -6*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -4,-1
ground.cornerpush.veloff = -8.4*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -81

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち中パンチ
[Statedef 210]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 210
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 210, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((63*fvar(10))<7,7,(63*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -74
hitsound = S2, 1
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 14+(((var(0)&2**12)/2**12)*3)
ground.hittime = 14+(((var(0)&2**12)/2**12)*3)
air.hittime = 14+(((var(0)&2**12)/2**12)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -15*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 205, Time Offset]
type = VarSet
trigger1 = moveContact = 1
var(28) = Time
ignorehitpause = 1
persistent = 0
[State 205, Play Anim]
type = ChangeAnim
triggerall = AnimElemTime(3) >= 0 && AnimElemTime(4) <= 0
trigger1 = hitPauseTime = [1,ceil(9*(2-(Var(16)>0))/2) - (1 - Var(28))]
value = anim
elem = 4
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -74

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち中パンチ
[Statedef 211]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = ifelse(var(12),212,211)
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 1
channel = 1

[State 210, Voice]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -52
hitsound = S2, 1
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 14+(((var(0)&2**12)/2**12)*3)
ground.hittime = 14+(((var(0)&2**12)/2**12)*3)
air.hittime = 14+(((var(0)&2**12)/2**12)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -15*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -52

[State 860, 5]
type = VarSet
trigger1 = time = 0
var(6) = 0

[State -2, Combo]
type = VarSet
triggerall = AnimElemTime(4) >= 0
triggerall = !var(59)
triggerall = var(12)
triggerall = !var(6)
trigger1 = command = "z"
trigger1 = command != "holddown" && Command != "holdfwd" && Command != "holdback"
var(6) = 1

[State 901, State End]
type = ChangeState
triggerall = AnimElemTime(4) > 0
triggerall = var(12)
triggerall = var(36) = [1,2]
trigger1 = var(6)
value = 310
ignorehitpause = 0

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち強パンチ
[Statedef 220]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0
anim = 220
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 220, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = prevstateno != 830
trigger1 = AnimElem = 3 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 220, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((91*fvar(10))<7,7,(91*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -58
hitsound = S2, 2
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 17+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 17
ground.velocity = -8*(2-(var(16)>0))/2
guard.velocity = -8*(2-(var(16)>0))/2
air.velocity = -6*(5.0/4.0)*(160.0/179.0),-3.671875*(5.0/4.0)
airguard.velocity = -6,-.75
ground.cornerpush.veloff = -20*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 250, 1]
type = Hitdef
triggerall = prevstateno = 830
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((91*fvar(10))<7,7,(91*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -58
hitsound = S2, 2
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 17+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 17
ground.velocity = -8,-5
guard.velocity = -10*(2-(var(16)>0))/2
air.velocity = -8,-5 
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
fall = 1
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 205, Time Offset]
type = VarSet
trigger1 = moveContact = 1
var(28) = Time
ignorehitpause = 1
persistent = 0
[State 205, Play Anim]
type = ChangeAnim
triggerall = AnimElemTime(4) >= 0 && AnimElemTime(5) <= 0
trigger1 = hitPauseTime = [1,ceil(9*(2-(Var(16)>0))/2) - (1 - Var(28))]
value = anim
elem = 5
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -58

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;鬼哭突き
[Statedef 310]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0
anim = 220

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 220, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 2
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 250, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((70*fvar(10))<7,7,(70*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -58
hitsound = S2, 2
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 17+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 17
ground.velocity = -6,-6
guard.velocity = -10*(2-(var(16)>0))/2
air.velocity = -6,-6
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -58

[State 220, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ガードキャンセル攻撃
[Statedef 2800]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0

[State 180, 1]
type = VarAdd
trigger1 = time = 0
var(50)=1000
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = !var(20) || var(20) = 4 || var(20) = 6
trigger1 = time = 0
value = -1000

[State 860, 4]
type = PowerAdd
triggerall = var(20) = 1
trigger1 = time = 0
value = -1500

[State 860, 4]
type = VarSet
triggerall = var(20) = 3
trigger1 = time = 0
var(14) = 0

[State 860, 4]
type = PowerAdd
triggerall = var(20) = 3
trigger1 = time = 0
value = -3000

[State 902, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 18

[State 1100, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 810,0
channel = 1

[State -3,Super]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifelse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 7
supermovetime = 99999999999999
persistent = 0
size.xscale = 1
size.yscale = 1

[State 0]
type = pause
trigger1 = time = 1
time = 6
movetime = 6

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 190, 4]
type = ChangeAnim
trigger1 = time <= 12
value = anim

[State 190, 4]
type = ChangeAnim
trigger1 = time = 13
value = 225

[State 105, 1]
type = statetypeset
triggerall = anim = 225
trigger1 = AnimElem = 8
movetype = I

[State 220, Effect]
type = PlaySnd
triggerall = anim = 225
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 220, Voice]
type = PlaySnd
triggerall = anim = 225
trigger1 = AnimElem = 3
value = 0, 2
channel = 0

[State 1100, HitDef]
type = HitDef
triggerall = anim = 225
trigger1 = AnimElem = 4
attr = S, SA
animtype  = diagup
air.animtype  = diagup
damage=ceil(ifelse((42*fvar(10))<7,7,(42*fvar(10)))),ceil(ifelse((42*fvar(10)/8)<7,7,(42*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -58
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -6.4, -4.8
guard.velocity = -8
air.velocity = -6.4, -4.8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0
givepower = 35, 35
kill = 0
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -58

[State 220, 3]
type = ChangeState
triggerall = anim = 225
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち強パンチ
[Statedef 221]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0
anim = 221
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 221, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 2
channel = 1

[State 221, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 221, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((70*fvar(10))<7,7,(70*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -60
hitsound = S2, 2
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 17+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
air.velocity = -3, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -20*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 221, 1]
type = Hitdef
triggerall = var(36) != [1,2]
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((70*fvar(10))<7,7,(70*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -89
hitsound = S2, 2
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 17+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
air.velocity = -3, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -20*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 3 || AnimElem = 4
ignorehitpause = 1
var(39) = ifelse((AnimElem = 3),-60,-89)

[State 221, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;立ち弱キック
[Statedef 230]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 230
poweradd = 0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 230, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 3
channel = 1

[State 230, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, (random&2)+var(12)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 230, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -20
hitsound = S2, 3
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 10+(((var(0)&2**12)/2**12)*2)
ground.hittime = 10+(((var(0)&2**12)/2**12)*2)
air.hittime = 10+(((var(0)&2**12)/2**12)*2)
guard.ctrltime = 11
ground.velocity = -5.77*(2-(var(16)>0))/2
guard.velocity = -5.77*(2-(var(16)>0))/2
air.velocity = -5,-4.296875*(5.0/4.0)
airguard.velocity = -4,-.75
ground.cornerpush.veloff = -8.4*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 205, Time Offset]
type = VarSet
trigger1 = moveContact = 1
var(28) = Time
ignorehitpause = 1
persistent = 0
[State 205, Play Anim]
type = ChangeAnim
triggerall = AnimElemTime(3) >= 0 && AnimElemTime(4) <= 0
trigger1 = hitPauseTime = [1,ceil(9*(2-(Var(16)>0))/2) - (2 - Var(28))]
value = anim
elem = 4
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -20

[State 230, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち中キック
[Statedef 240]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 240   
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 240, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 4
channel = 1

[State 240, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 240, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -80
hitsound = S2, 4
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 14+(((var(0)&2**12)/2**12)*3)
ground.hittime = 14+(((var(0)&2**12)/2**12)*3)
air.hittime = 14+(((var(0)&2**12)/2**12)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -15*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -80

[State 240, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち中キック
[Statedef 241]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 241
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 240, 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 4
channel = 1

[State 240, Voice]
type = PlaySnd
triggerall = prevstateno != 830
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 240, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -67
hitsound = S2, 4
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 14+(((var(0)&2**12)/2**12)*3)
ground.hittime = 14+(((var(0)&2**12)/2**12)*3)
air.hittime = 14+(((var(0)&2**12)/2**12)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -15*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -67

[State 240, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;遠距離立ち強キック
[Statedef 250]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0
anim = 250
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 2
y = 0

[State 250, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 5
channel = 1

[State 250, Voice]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 250, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(10))<7,7,(84*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -83
hitsound = S2, 5
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 17+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
air.velocity = -3, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -20*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 250, 1]
type = Hitdef
triggerall = var(36) != [1,2]
trigger1 = AnimElem = 5
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((77*fvar(10))<7,7,(77*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -20, -83
hitsound = S2, 5
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 17+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -20*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -20

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 4
ignorehitpause = 1
var(39) = -83

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 5
ignorehitpause = 1
var(39) = -78

[State 250, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;近距離立ち強キック
[Statedef 251]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0
anim = 251
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 251, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 5
channel = 1

[State 251, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 251, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -99
hitsound = S2, 5
guardsound = S1, 0
ground.type = High
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 17+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -10*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 251, 1]
type = Hitdef
trigger1 = AnimElem = 5
attr = S, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -75
hitsound = S2, 5
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 17+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -20*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 3
ignorehitpause = 1
var(39) = -99

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 5
ignorehitpause = 1
var(39) = -75

[State 251, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱パンチ
[Statedef 400]
type    = C
movetype = A
physics = C
juggle = 8
ctrl = 0
anim = 400
poweradd = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 400, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 400, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, (random&2)+var(12)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 400, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -43
hitsound = S2, 0
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 10+(((var(0)&2**12)/2**12)*2)
ground.hittime = 10+(((var(0)&2**12)/2**12)*2)
air.hittime = 10+(((var(0)&2**12)/2**12)*2)
guard.ctrltime = 11
ground.velocity = -6*(2-(var(16)>0))/2
guard.velocity = -6*(2-(var(16)>0))/2
air.velocity = -4,-4.921875*(5.0/4.0)
airguard.velocity = -4,-.75
ground.cornerpush.veloff = -8.4*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 205, Time Offset]
type = VarSet
trigger1 = moveContact = 1
var(28) = Time
ignorehitpause = 1
persistent = 0
[State 205, Play Anim]
type = ChangeAnim
triggerall = AnimElemTime(2) >= 0 && AnimElemTime(3) <= 0
trigger1 = hitPauseTime = [1,ceil(9*(2-(Var(16)>0))/2) - (2 - Var(28))]
value = anim
elem = 3
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -43

[State 400, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ中パンチ
[Statedef 410]
type    = C
movetype = A
physics = C
juggle = 8
ctrl = 0
anim = ifelse(var(12),411,410)
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 410, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 1
channel = 1

[State 410, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 410, 2]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -45
hitsound = S2, 1
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 14+(((var(0)&2**12)/2**12)*3)
ground.hittime = 14+(((var(0)&2**12)/2**12)*3)
air.hittime = 14+(((var(0)&2**12)/2**12)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -11.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -45

[State 410, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強パンチ
[Statedef 420]
type    = C
movetype = A
physics = C
juggle = 8
ctrl = 0
anim = 420
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 420, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 2
channel = 1

[State 420, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 420, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((77*fvar(10))<7,7,(77*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -56
hitsound = S2, 2
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 17+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
air.velocity = -3, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -20*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 420, 1]
type = Hitdef
triggerall = var(36) != [1,2]
trigger1 = AnimElem = 4
attr = C, NA
hitflag = MAF
guardflag = M
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -98
hitsound = S2, 2
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 17+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 17
ground.velocity = -10*(2-(var(16)>0))/2
air.velocity = -3, -8
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -20*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 3 || AnimElem = 4
ignorehitpause = 1
var(39) = ifelse((AnimElem = 3),-56,-98)

[State 420, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ弱キック
[Statedef 430]
type    = C
movetype = A
physics = C
juggle = 8
ctrl = 0
anim = 430
poweradd = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 430, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 3
channel = 1

[State 430, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, (random&2)+var(12)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 430, 2]
type = Hitdef
trigger1 = AnimElem = 2
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((14*fvar(10))<7,7,(14*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -6
hitsound = S2, 3
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 10+(((var(0)&2**12)/2**12)*2)
ground.hittime = 10+(((var(0)&2**12)/2**12)*2)
air.hittime = 10+(((var(0)&2**12)/2**12)*2)
guard.ctrltime = 11
ground.velocity = -6*(2-(var(16)>0))/2
guard.velocity = -6*(2-(var(16)>0))/2
air.velocity = -4,-4.296875*(5.0/4.0)
airguard.velocity = -4,-.75
ground.cornerpush.veloff = -8.4*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 205, Time Offset]
type = VarSet
trigger1 = moveContact = 1
var(28) = Time
ignorehitpause = 1
persistent = 0
[State 205, Play Anim]
type = ChangeAnim
triggerall = AnimElemTime(2) >= 0 && AnimElemTime(3) <= 0
trigger1 = hitPauseTime = [1,ceil(9*(2-(Var(16)>0))/2) - (2 - Var(28))]
value = anim
elem = 3
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -6

[State 403, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ中キック
[Statedef 440]
type    = C
movetype = A
physics = C
juggle = 8
velset = 0,0
ctrl = 0
anim = 440
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 440, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 4
channel = 1

[State 440, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 440, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -9
hitsound = S2, 4
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 14+(((var(0)&2**12)/2**12)*3)
ground.hittime = 14+(((var(0)&2**12)/2**12)*3)
air.hittime = 14+(((var(0)&2**12)/2**12)*3)
guard.ctrltime = 14
guard.velocity = -6*(2-(var(16)>0))/2
ground.velocity = -6*(2-(var(16)>0))/2
air.velocity = -6*(5.0/4.0)*(160.0/179.0),-3.671875*(5.0/4.0)
airguard.velocity = -5,-.75
ground.cornerpush.veloff = -15*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 205, Time Offset]
type = VarSet
trigger1 = moveContact = 1
var(28) = Time
ignorehitpause = 1
persistent = 0
[State 205, Play Anim]
type = ChangeAnim
triggerall = AnimElemTime(3) >= 0 && AnimElemTime(4) <= 0
trigger1 = hitPauseTime = [1,ceil(9*(2-(Var(16)>0))/2) - (2 - Var(28))]
value = anim
elem = 4
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -9

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;しゃがみ強キック
[Statedef 450]
type    = C
movetype = A
physics = C
juggle = 8
ctrl = 0
anim = ifelse(var(12),451,450)
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 450, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 5
channel = 1

[State 450, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 450, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, NA
hitflag = MAF
guardflag = L
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((84*fvar(10))<7,7,(84*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -5
hitsound = S2, 5
guardsound = S1, 0
ground.type = Trip
air.type = High
ground.slidetime = 17+(((var(0)&2**12)/2**12)*4)
guard.slidetime = 16+(((var(0)&2**12)/2**12)*4)
ground.hittime = 17+(((var(0)&2**12)/2**12)*4)
air.hittime = 18
guard.ctrltime = 17
ground.velocity = -.7,-6.25
guard.velocity = -10*(2-(var(16)>0))/2
air.velocity = -.7,-6.25
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
yaccel = 0.328125*(25.0/16.0)
air.fall = 1
fall = 1
fall.recover = 0
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
nochainID = var(40)

[State 205, Time Offset]
type = VarSet
trigger1 = moveContact = 1
var(28) = Time
ignorehitpause = 1
persistent = 0
[State 205, Play Anim]
type = ChangeAnim
triggerall = AnimElemTime(3) >= 0 && AnimElemTime(4) <= 0
trigger1 = hitPauseTime = [1,ceil(9*(2-(Var(16)>0))/2) - (1 - Var(28))]
value = anim
elem = 4
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -5

[State 450, 2]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;ジャンプ弱パンチ
[Statedef 600]
type    = A
movetype = A
physics = N
juggle = 8                  
ctrl = 0
anim = 600
poweradd = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 600, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 600, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, (random&2)+var(12)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 600, 2]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -51
hitsound = S2, 0
guardsound = S1, 0
ground.type = High
ground.slidetime = 9+(((var(0)&2**12)/2**12)*2)
ground.hittime = 9+(((var(0)&2**12)/2**12)*2)
air.hittime = 9+(((var(0)&2**12)/2**12)*2)
guard.ctrltime = 12
ground.velocity = -3*(2-(var(16)>0))/2
guard.velocity = -5.33*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -4,-1
ground.cornerpush.veloff = -4.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -51

[State 920, 0]
type = VelAdd
trigger1 = 1
y = ifelse(var(12),.48,.53)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ中パンチ
[Statedef 610]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 610
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 610, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 1
channel = 1

[State 610, Voice]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 7
movetype = I

[State 610, 2]
type = Hitdef
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -57
hitsound = S2, 1
guardsound = S1, 0
ground.type = High
ground.slidetime = 12+(((var(0)&2**12)/2**12)*3)
ground.hittime = 12+(((var(0)&2**12)/2**12)*3)
air.hittime = 12+(((var(0)&2**12)/2**12)*3)
guard.ctrltime = 15
ground.velocity = -4*(2-(var(16)>0))/2
guard.velocity = -5.33*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -5.6*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -57

[State 920, 0]
type = VelAdd
trigger1 = 1
y = ifelse(var(12),.48,.53)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;ジャンプ強パンチ
[Statedef 620]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 620
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 620, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 620, Voice]
type = PlaySnd
trigger1 = AnimElem = 3 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 620, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage =  ceil(ifelse((77*fvar(10))<7,7,(77*fvar(10))))
pausetime =  ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -57
hitsound = S2, 2
guardsound = S1, 0
ground.type = High
ground.slidetime = 12+(((var(0)&2**12)/2**12)*4)
ground.hittime = 12+(((var(0)&2**12)/2**12)*4)
air.hittime = 12+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 18
ground.velocity = -5*(2-(var(16)>0))/2
guard.velocity = -9.33*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -9.33,-1
ground.cornerpush.veloff = -7*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -57

[State 920, 0]
type = VelAdd
trigger1 = 1
y = ifelse(var(12),.48,.53)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;斜めジャンプ弱キック
[Statedef 630]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 630
poweradd = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 630, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 3
channel = 1

[State 630, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, (random&2)+var(12)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 630, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = back
fall.animtype = back
priority = 3,Hit
damage = ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -47
hitsound = S2, 3
guardsound = S1, 0
ground.type = High
ground.slidetime = 9+(((var(0)&2**12)/2**12)*2)
ground.hittime = 9+(((var(0)&2**12)/2**12)*2)
air.hittime = 9+(((var(0)&2**12)/2**12)*2)
guard.ctrltime = 12
ground.velocity = -3*(2-(var(16)>0))/2
guard.velocity = -5.33*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -4,-1
ground.cornerpush.veloff = -4.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -47

[State 920, 0]
type = VelAdd
trigger1 = 1
y = ifelse(var(12),.48,.53)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;垂直ジャンプ弱キック
[Statedef 631]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 631
poweradd = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 630, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 3
channel = 1

[State 630, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, (random&2)+var(12)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 8
movetype = I

[State 630, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Light
air.animtype = up
fall.animtype = up
priority = 3,Hit
damage = ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10))))
pausetime = ceil(9*(2-(var(16)>0))/2),ceil(9*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -84
hitsound = S2, 3
guardsound = S1, 0
ground.type = High
ground.slidetime = 9+(((var(0)&2**12)/2**12)*2)
ground.hittime = 9+(((var(0)&2**12)/2**12)*2)
air.hittime = 9+(((var(0)&2**12)/2**12)*2)
guard.ctrltime = 12
ground.velocity = -3*(2-(var(16)>0))/2
guard.velocity = -5.33*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -4,-1
ground.cornerpush.veloff = -4.2*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -84

[State 920, 0]
type = VelAdd
trigger1 = 1
y = ifelse(var(12),.48,.53)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;斜めジャンプ中キック
[Statedef 640]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 640
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 640, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 4
channel = 1

[State 601, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 640, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -49
hitsound = S2, 4
guardsound = S1, 0
ground.type = High
ground.slidetime = 12+(((var(0)&2**12)/2**12)*3)
ground.hittime = 12+(((var(0)&2**12)/2**12)*3)
air.hittime = 12+(((var(0)&2**12)/2**12)*3)
guard.ctrltime = 15
ground.velocity = -6*(2-(var(16)>0))/2
guard.velocity = -6*(2-(var(16)>0))/2
air.velocity = -6*(5.0/4.0)*(160.0/179.0),-3.671875*(5.0/4.0)
airguard.velocity = -5,-.75
ground.cornerpush.veloff = -5.6*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 205, Time Offset]
type = VarSet
trigger1 = moveContact = 1
var(28) = Time
ignorehitpause = 1
persistent = 0
[State 205, Play Anim]
type = ChangeAnim
triggerall = AnimElemTime(3) >= 0 && AnimElemTime(4) <= 0
trigger1 = hitPauseTime = [1,ceil(9*(2-(Var(16)>0))/2) - (1 - Var(28))]
value = anim
elem = 4
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -49

[State 920, 0]
type = VelAdd
trigger1 = 1
y = ifelse(var(12),.48,.53)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;垂直ジャンプ中キック
[Statedef 641]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 641
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 640, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 4
channel = 1

[State 601, Voice]
type = PlaySnd
trigger1 = AnimElem = 1 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 640, 1]
type = Hitdef
trigger1 = AnimElem = 2
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = up
fall.animtype = up
priority = 4,Hit
damage = ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -84
hitsound = S2, 4
guardsound = S1, 0
ground.type = High
ground.slidetime = 12+(((var(0)&2**12)/2**12)*3)
ground.hittime = 12+(((var(0)&2**12)/2**12)*3)
air.hittime = 12+(((var(0)&2**12)/2**12)*3)
guard.ctrltime = 15
ground.velocity = -4*(2-(var(16)>0))/2
guard.velocity = -5.33*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -5.6*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -84

[State 920, 0]
type = VelAdd
trigger1 = 1
y = ifelse(var(12),.48,.53)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;----------------------------------------------------------------------------
;斜めジャンプ強キック
[Statedef 650]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 650
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 650, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 5
channel = 1

[State 650, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 650, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((70*fvar(10))<7,7,(70*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -49
hitsound = S2, 5
guardsound = S1, 0
ground.type = High
ground.slidetime = 12+(((var(0)&2**12)/2**12)*4)
ground.hittime = 12+(((var(0)&2**12)/2**12)*4)
air.hittime = 12+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 18
ground.velocity = -6*(2-(var(16)>0))/2
guard.velocity = -6*(2-(var(16)>0))/2
air.velocity = -6*(5.0/4.0)*(160.0/179.0),-3.671875*(5.0/4.0)
airguard.velocity = -6,-.75
ground.cornerpush.veloff = -7*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 205, Time Offset]
type = VarSet
trigger1 = moveContact = 1
var(28) = Time
ignorehitpause = 1
persistent = 0
[State 205, Play Anim]
type = ChangeAnim
triggerall = AnimElemTime(3) >= 0 && AnimElemTime(4) <= 0
trigger1 = hitPauseTime = [1,ceil(9*(2-(Var(16)>0))/2) - (1 - Var(28))]
value = anim
elem = 4
ignorehitpause = 1

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -49

[State 920, 0]
type = VelAdd
trigger1 = 1
y = ifelse(var(12),.48,.53)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;----------------------------------------------------------------------------
;垂直ジャンプ強キック
[Statedef 651]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 651
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 650, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 5
channel = 1

[State 650, Voice]
type = PlaySnd
trigger1 = AnimElem = 2 && Random <= 500
value = 0, ifelse(Random <= 500, 1+var(12), 2)
channel = 0

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 4
movetype = I

[State 650, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((70*fvar(10))<7,7,(70*fvar(10))))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -64
hitsound = S2, 5
guardsound = S1, 0
ground.type = High
ground.slidetime = 12+(((var(0)&2**12)/2**12)*4)
ground.hittime = 12+(((var(0)&2**12)/2**12)*4)
air.hittime = 12+(((var(0)&2**12)/2**12)*4)
guard.ctrltime = 18
ground.velocity = -5*(2-(var(16)>0))/2
guard.velocity = -9.33*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -9.33,-1
ground.cornerpush.veloff = -7*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -64

[State 920, 0]
type = VelAdd
trigger1 = 1
y = ifelse(var(12),.48,.53)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;頭蓋破殺
[Statedef 300]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0
anim = 300
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 210, 1]
type = PlaySnd
trigger1 = AnimElem = 4
value = 3, 1
channel = 1

[State 210, Voice]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2
channel = 0

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 5
x = 6

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 9
movetype = I

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 5
attr = S, NA
hitflag = MAF
guardflag = H
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -5, -79
hitsound = S2, 1
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 14+(((var(0)&2**12)/2**12)*3)
ground.hittime = 14+(((var(0)&2**12)/2**12)*3)
air.hittime = 14+(((var(0)&2**12)/2**12)*3)
guard.ctrltime = 15
ground.velocity = -8*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -15*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 210, 1]
type = Hitdef
trigger1 = AnimElem = 6
attr = S, NA
hitflag = MAF
guardflag = H
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -15, -38
hitsound = S2, 1
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 14+(((var(0)&2**12)/2**12)*3)
ground.hittime = 14+(((var(0)&2**12)/2**12)*3)
air.hittime = 14+(((var(0)&2**12)/2**12)*3)
guard.ctrltime = 14
ground.velocity = -8*(2-(var(16)>0))/2
air.velocity = -4, -5.25
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -15*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 5 || AnimElem = 6
ignorehitpause = 1
var(39) = ifelse((AnimElem = 5),-79,-38)

[State 210, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;天魔空刃脚
[Statedef 700]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 700
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 640, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 4
channel = 1

[State 920, 0]
type = Posfreeze
trigger1 = AnimElemTime(3) < 0

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 3
x = 5.5
Y = 8.5

[State 601, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, var(12)
channel = 0

[State 640, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, NA
hitflag = MAF
guardflag = HA
animtype = Medium
air.animtype = back
fall.animtype = back
priority = 4,Hit
damage = ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10))))
pausetime = ceil(11*(2-(var(16)>0))/2),ceil(11*(2-(var(16)>0))/2)
sparkno = S8200+(random%8)
guard.sparkno = S8100
sparkxy = -10, -16
hitsound = S2, 4
guardsound = S1, 0
ground.type = High
ground.slidetime = ifelse(var(12),15+(((var(0)&2**12)/2**12)*3),12+(((var(0)&2**12)/2**12)*3))
ground.hittime = ifelse(var(12),15+(((var(0)&2**12)/2**12)*3),12+(((var(0)&2**12)/2**12)*3))
air.hittime = ifelse(var(12),15+(((var(0)&2**12)/2**12)*3),12+(((var(0)&2**12)/2**12)*3))
guard.ctrltime = 14
ground.velocity = -4*(2-(var(16)>0))/2
guard.velocity = -5.33*(2-(var(16)>0))/2
air.velocity = -6.4, -4.8
airguard.velocity = -5.33,-1
ground.cornerpush.veloff = -5.6*(2-(var(16)>0))/2
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
yaccel = 0.328125*(25.0/16.0)
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -16

[State 210, 7]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52
ctrl = 1

;---------------------------------------------------------------------------
;回り込み
[Statedef 800]
type    = S
physics = N
movetype = I
anim = 800
ctrl = 0
velset = 0,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 810, Voice]
type = Playsnd
triggerall = !var(12)
trigger1 = time = 1
value = ifelse(random<500,195,0),0
channel = 0

[State 810, Voice]
type = Playsnd
triggerall = var(12)
trigger1 = time = 1
value = ifelse(random<500,800,0),11
channel = 0

[State 810, Voice]
type = Playsnd
trigger1 = time = 1
value = 800,50

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 6.6

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 7
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = AnimElemTime(8) < 1
value = SCA, NT,ST,HT

[State 810, Push]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 0

[State 810, AfterImage]
type = Afterimage
triggerall = !var(16)
trigger1 = AnimElem = 2
time = 22
TimeGap = 1
FrameGap = 5
length = 12
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .9,.9,.9
trans = add1

[State 810, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ガードキャンセル移動（前）
[Statedef 810]
type    = S
physics = N
movetype = I
ctrl = 0
velset = 0,0
poweradd = -1000

[State 180, 1]
type = VarAdd
trigger1 = time = 0
var(50)=500
ignorehitpause = 1

[State 902, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 1100, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 810,0
channel = 1

[State -3,Super]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifelse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 7
supermovetime = 99999999999999
persistent = 0
size.xscale = 1
size.yscale = 1

[State 0]
type = pause
trigger1 = time = 1
time = 6
movetime = 6

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 190, 4]
type = ChangeAnim
trigger1 = time <= 12
value = anim

[State 190, 4]
type = ChangeAnim
trigger1 = time = 13
value = 800

[State 810, Voice]
type = Playsnd
triggerall = !var(12)
triggerall = anim = 800
trigger1 = animelem = 1
value = ifelse(random<500,195,0),0
channel = 0

[State 810, Voice]
type = Playsnd
triggerall = var(12)
triggerall = anim = 800
trigger1 = animelem = 1
value = ifelse(random<500,800,0),11
channel = 0

[State 810, Voice]
type = Playsnd
triggerall = anim = 800
trigger1 = animelem = 1
value = 800,50

[State 810, Velocity]
type = VelSet
triggerall = anim = 800
trigger1 = AnimElem = 2
x = 6.6

[State 810, Velocity]
type = VelSet
triggerall = anim = 800
trigger1 = AnimElem = 7
x = 0

[State 810, HitBy]
type = HitBy
trigger1 = time <= 32
value = SCA, NT,ST,HT

[State 810, Push]
type = PlayerPush
triggerall = anim = 800
trigger1 = AnimElemTime(2) > 0
value = 0

[State 810, AfterImage]
type = Afterimage
triggerall = anim = 800
trigger1 = AnimElem = 3
time = 15
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 810, StateChange]
type = Changestate
triggerall = anim = 800
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;ガードキャンセル移動（後）
[Statedef 820]
type    = A
physics = N
ctrl = 0
poweradd = -1000
velset = 0,0

[State 180, 1]
type = VarAdd
trigger1 = time = 0
var(50)=-1000
ignorehitpause = 1

[State 902, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 22

[State 1100, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 810,0
channel = 1

[State -3,Super]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifelse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 7
supermovetime = 99999999999999
persistent = 0
size.xscale = 1
size.yscale = 1

[State 0]
type = pause
trigger1 = time = 1
time = 6
movetime = 6

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 1,0

[State 190, 4]
type = ChangeAnim
trigger1 = time <= 12
value = anim

[State 190, 4]
type = ChangeAnim
trigger1 = time = 13
value = 105

[State 800, AfterImage]
type = Afterimage
triggerall = anim = 105
trigger1 = AnimElem = 2
time = 22
length = 10
FrameGap = 3
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 40, 0
channel = 20

[State 400, Voice]
type = PlaySnd
triggerall = anim = 105
trigger1 = AnimElem = 1
value = 0, 2+var(12)
channel = 0

[State 1000, Spark]
type = Explod
triggerall = anim = 105
trigger1 = AnimElem = 1
Anim = 8040
pos = 10, 10
postype = p1
ownpal = 1
sprpriority = 3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 105, 1]
type = VelSet
triggerall = !var(12)
triggerall = anim = 105
trigger1 = AnimElem = 2
x = -6.75

[State 105, 1]
type = VelSet
triggerall = var(12)
triggerall = anim = 105
trigger1 = AnimElem = 2
x = -6.75*1.4

[State 105, 1]
type = VelMul
triggerall = anim = 105
trigger1 = AnimElemTime(2) > 0
x = .98

[State 105, 3]
type = ChangeState
triggerall = anim = 105
trigger1 = animtime = 0
value = 106

;---------------------------------------------------------------------------
;避け
[Statedef 830]
type    = S
physics = S
movetype = I
anim = 830
ctrl = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 400, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3, 0
channel = 1

[State 400, Voice]
type = PlaySnd
triggerall = !var(12)
trigger1 = AnimElem = 1
value = 0, 0
channel = 0

[State 3000, Voice]
type = PlaySnd
triggerall = var(12)
trigger1 = AnimElem = 1
value = 3300,0
channel = 0

[State 810, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 800, HitBy]
type = HitBy
trigger1 = 1
value = SCA, NT,ST,HT

[State 800, AfterImage]
type = Afterimage
triggerall = !var(16)
trigger1 = AnimElem = 1
time = 26
length = 10
FrameGap = 6
PalBright = 1,1,1
PalContrast = 128,128,128
PalAdd = 0,0,0
PalMul = .5,.5,.5
trans = add1

[State 800, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;パワー溜め
[Statedef 850]
type    = S
physics = S
movetype = I
anim = 850
ctrl = 0
velset = 0,0

[State 820, Voice]
type = Playsnd
trigger1 = Anim = 850 && AnimElem = 2
value = 180,1+var(12)
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = Anim = 850 && AnimElem = 4
value = 5100,1

[State 820, PowerAdd]
type = null;PowerAdd
trigger1 = 1
value = ((time+2)/7)*(1+(var(20)=3))
[State 820, PowerAdd]
type = null;PowerAdd
trigger1 = 1
value = ((time+2)/7)*(1+(var(20)=3))
[State 820, PowerAdd]
type = PowerAdd
triggerall = Anim = 850
trigger1 = 1
value = ((time+10)/10)*(1+(var(20)=3))
[State 820, PowerAdd]
type = PowerAdd
trigger1 = 1
value = ((time+20)/20)*(1+(var(20)=3))

[State 820, Anim]
type = ChangeAnim
triggerall = !var(59)
trigger1 = (Command != "chargec" || Command != "chargez") || ((power >= 1000 && var(20) = 3) || (power >= 3000 && var(20) = 6))
value = 851
persistent = 0

[State 704, 8]
type = ChangeAnim
triggerall = (var(20) = 3 && !var(14)) || var(20) = 6
triggerall = Time >= 2
triggerall = var(59)
trigger1 = P2bodydist X = [0,190]
trigger1 = P2MoveType = A
trigger2 = P2bodydist X = [0,80]
trigger2 = enemynear,statetype != L
trigger3 = ((power >= 1000 && var(20) = 3) || (power >= 3000 && var(20) = 6))
trigger4 = win
trigger5 = enemynear,numproj
trigger6 = inguarddist
trigger7 = time > 20
trigger7 = random%60=2
value = 851
persistent = 0

[State 820, Voice]
type = Stopsnd
trigger1 = Anim = 851
channel = 0
persistent = 0

[State 3001, Super]
type = Helper
trigger1 = !NumHelper(8500)
trigger1 = Time = 1
id = 8500
name = "Charge"
pos = 0,0
postype = P1
stateno = 8500
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
size.xscale = 1
size.yscale = 1

[State 1100, Fire1]
type = Explod
triggerall = Anim = 850
trigger1 = AnimElem = 6
Anim = 7701
pos = 0,0
postype = p1
ownpal = 1
ignorehitpause = 1
ID = 850
bindtime = -1
sprpriority = -1
removetime = -1

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Anim = 851 && AnimElem = 1
ID = 850

[State 1850, ctrlset]
type = ctrlset
triggerall = !ctrl
trigger1 = anim = 851
value = 1

[State 820, StateChange]
type = ChangeState
trigger1 = Anim = 851 && AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;パワーMAX発動
[Statedef 860]
type = S
physics = S
movetype = I
anim = 860
ctrl = 0
velset = 0,0

[State 860, 1]
type = Explod
trigger1 = time = 6
anim = 8415
pos = 0,-60
postype = p1
bindtime = -1
sprpriority = 4
ontop = 0
ownpal = 1
scale = .5,.5
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 181, 2]
type = PlaySnd
triggerall = !var(12)
trigger1 = time = 6
value = 0, 2
channel = 0

[State 181, 2]
type = PlaySnd
triggerall = var(12)
trigger1 = time = 6
value = 3300, 0
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 5
value = 5100,1

[State 860, 2]
type = Playsnd
trigger1 = time = 6
value = 6000, 10

[State 860, 4]
type = PowerAdd
trigger1 = time = 6
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 6
var(15) = 675

[State 3001, Super]
type = Helper
trigger1 = time = 6
id = 6170
name = "n_gauge"
pos = 0,0
postype = P1
stateno = 6170
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
facing = facing*ifelse(teamside=1,1,-1)

[State 1100, Fire1]
type = Explod
trigger1 = AnimElem = 6
Anim = 7701
pos = 0,0
postype = p1
ownpal = 1
ignorehitpause = 1
ID = 860
bindtime = -1
sprpriority = -1
removetime = -1

[State -2, Power Chage]
type = RemoveExplod
trigger1 = AnimElem = 8
ID = 860

[State 1850, ctrlset]
type = ctrlset
trigger1 = time = 16
value = 1

[State 860, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;オリコン発動（地上）
[Statedef 870]
type = S
physics = S
movetype = A
anim = 870
ctrl = 0
velset = 0,0

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 4
time = 37
movetime = 37
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, Super]
type = Helper
trigger1 = Time = 4
persistent = 0
id = 8080
name = "oricom"
pos = 0,-60
postype = P1
stateno = 8080
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 3000, VarSet]
type = VarSet
triggerall = Time = 4
trigger1 = enemynear,stateno != [120,155]
trigger1 = !(enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "H”" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane")
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "H”" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4400,4405]))
trigger4 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 37

[State 181, 2]
type = PlaySnd
triggerall = !var(12)
trigger1 = time = 4
value = 195, 10

[State 181, 2]
type = PlaySnd
triggerall = var(12)
trigger1 = time = 4
value = 3400, 1

[State 860, 2]
type = Playsnd
trigger1 = animelem = 5
value = 5100,1

[State 3000, AfterImage]
type = AfterImage
trigger1 = Time = 2
time = 999
TimeGap  = 1
FrameGap = 14
length = 42
PalBright = 1,1,1
PalContrast = 0, 100, 150
PalAdd = 0,0,0
PalMul = .9,.9,.9
trans = add1

[State 860, 5]
type = VarSet
trigger1 = AnimTime = 0
var(16) = 334

[State 860, 5]
type = VarAdd
triggerall = !(var(0)&2**2)
trigger1 = time = 0
var(0) = 2**2

[State 860, 5]
type = VarSet
trigger1 = AnimTime = 0
var(19) = 3000

;[State 7000,Muteki]
;type = NotHitBy
;trigger1 = Time = 0
;value = SCA
;time = 50

[State 7000,Muteki]
type = NotHitBy
trigger1 = 1
value = SCA
time = 19

[State -2, 1]
type = Poweradd
trigger1 = AnimTime = 0
value = -3000
ignorehitpause = 1

[State 1100, Fire1]
type = Explod
trigger1 = AnimElem = 6
Anim = 7701
pos = 0,0
postype = p1
ownpal = 1
ignorehitpause = 1
ID = 870
bindtime = -1
sprpriority = -1
removetime = -1
;pausemovetime = -1
supermovetime = -1

[State 860, 6]
type = ChangeState
triggerall = var(59)
trigger1 = P2StateType = A
trigger1 = animtime = 0
value = 1100

[State 860, 6]
type = ChangeState
triggerall = var(59)
trigger1 = P2StateType != A
trigger1 = animtime = 0
value = 450

[State 860, 6]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;オリコン発動（空中）
[Statedef 875]
type = A
movetype = A
physics = N
anim = 875
ctrl = 0

[State 7050,PosFreeze]
type = PosFreeze
trigger1 = 1

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 4
time = 37
movetime = 37
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, Super]
type = Helper
trigger1 = Time = 4
persistent = 0
id = 8080
name = "oricom"
pos = 0,-60
postype = P1
stateno = 8080
helpertype = normal
supermove = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 3000, VarSet]
type = VarSet
triggerall = Time = 4
trigger1 = enemynear,stateno != [120,155]
trigger1 = !(enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "H”" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane")
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "H”" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4400,4405]))
trigger4 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 37

[State 181, 2]
type = PlaySnd
triggerall = !var(12)
trigger1 = time = 4
value = 195, 10

[State 181, 2]
type = PlaySnd
triggerall = var(12)
trigger1 = time = 4
value = 3400, 1

[State 3000, AfterImage]
type = AfterImage
trigger1 = Time = 2
time = 9999
TimeGap  = 1
FrameGap = 14
length = 42
PalBright = 1,1,1
PalContrast = 0, 100, 150
PalAdd = 0,0,0
PalMul = .9,.9,.9
trans = add1

[State 860, 5]
type = VarSet
trigger1 = AnimTime = 0
var(16) = 334

[State 860, 5]
type = VarAdd
triggerall = !(var(0)&2**2)
trigger1 = time = 0
var(0) = 2**2

[State 860, 5]
type = VarSet
trigger1 = AnimTime = 0
var(19) = 3000

;[State 7000,Muteki]
;type = NotHitBy
;trigger1 = Time = 0
;value = SCA
;time = 50

[State 7000,Muteki]
type = NotHitBy
trigger1 = 1
value = SCA
time = 19

[State -2, 1]
type = Poweradd
trigger1 = AnimTime = 0
value = -3000
ignorehitpause = 1

[State 1850, 9]
type = changestate
trigger1 = AnimTime = 0
value = 876

;------------------------------------------------------------------------------------------
;オリコン発動（空中）（終了）
[Statedef 876]
type = A
movetype = I
physics = N
anim = 4030
ctrl = 1

[State 920, 0]
type = VelAdd
trigger1 = Time >= 0
y = ifelse(var(12),.48,.53)

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 52

;---------------------------------------------------------------------------
;投げ（掴みモーション）
[Statedef 900]
type    = S
movetype = A
physics = S
juggle = 0
velset = 0,0
ctrl = 0
anim = ifelse(Command = "z"||(var(59)&&(random%2=0)), 900, 910)
poweradd = 89*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 900, 1]
type = HitDef
triggerall = Anim = 900
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [-const(size.ground.front),22]
trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 901
p2stateno = 906
guard.dist = 0
numhits = 0
nochainID = var(40)

[State 900, 1]
type = HitDef
triggerall = Anim = 910
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [-const(size.ground.front),22]
trigger1 = AnimElem = 2
attr = S, NT
hitflag = M-
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 911
p2stateno = 916
guard.dist = 0
numhits = 0
nochainID = var(40)

[State 900, 1]
type = HitDef
triggerall = Anim = 900
triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [-const(size.ground.front),22]
triggerall = var(16)
trigger1 = AnimElem = 2
attr = S, NT
hitflag = MF
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 901
p2stateno = 906
guard.dist = 0
numhits = 0
nochainID = var(40)

[State 900, 1]
type = HitDef
triggerall = Anim = 910
triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [-const(size.ground.front),22]
triggerall = var(16)
trigger1 = AnimElem = 2
attr = S, NT
hitflag = MF
priority = 3, Miss
sparkno = -1
p1facing = ifelse(command = "holdfwd", 1, -1)
p2facing = 1
p1stateno = 911
p2stateno = 916
guard.dist = 0
numhits = 0
nochainID = var(40)

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 900, 1
channel = 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 900, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;背負い投げ
[Statedef 901]
type    = S
movetype = A
physics = N
velset = 0,0

[State 900, 1]
type = VarAdd
triggerall = var(0)&2**9
trigger1 = Time = 0
var(0) = -(2**9)

[State 900, 1]
type = VarAdd
triggerall = Time < 7 && !(var(0)&2**9)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
var(0) = 2**9

[State 900,TargetBind]
type = TargetBind
trigger1 = Time < 7 && (var(0)&2**9)
pos = 40, 0

[State 900,TargetBind]
type = ChangeState
trigger1 = Time < 7 && (var(0)&2**9)
value = 950

[State 1201, 2]
type = Playerpush
trigger1 = 1
value = 0

[State 901, Throw]
type = TargetState
trigger1 = Time = 0
value = 905

[State 820, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 901
persistent = 0

[State 3001, Width]
type = Width
trigger1 = animelemtime(5) < 0
edge = 45,45

[State 3001, Width]
type = Width
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
edge = 75,0

[State 3001, Width]
type = Width
trigger1 = AnimElem = 6
edge = 105,0

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 900, 0
channel = 1

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0, 0
channel = 0

[State 901,1]
type = TargetBind
trigger1 = animelem = 1
pos = -30,0
time = -1

[State 901,1]
type = TargetBind
trigger1 = animelem = 2
pos = -27,-64
time = -1

[State 901,1]
type = TargetBind
trigger1 = animelem = 3
pos = -5, -78
time = -1

[State 901,1]
type = TargetBind
trigger1 = animelem = 4
pos = 50, -88
time = -1

[State 901,1]
type = TargetBind
trigger1 = animelem = 5
pos = 73, -57
time = -1

[State 901,1]
type = TargetBind
trigger1 = animelem = 6
pos = 88, -60
time = 1

[State 3001, Add Hits!]
type = HitAdd
trigger1 = AnimElem = 6
value = 1

[State -2, Combo]
type = VarAdd
trigger1 = AnimElem = 6
var(17) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = AnimElem = 6
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = var(17) >= 2
trigger1 = AnimElem = 6
var(50)=ifelse(var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 6
value = ceil(ifelse((-119*fvar(10))>-7,-7,(-119*fvar(10))))

[State 901, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 6
value = 35

[State 901, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;背負い投げ（相手）
[Statedef 905]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 1201, screenbound]
type = screenbound
trigger1 = AnimElemTime(5) <= 0
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 905

[State 902, 1]
type = sprpriority
trigger1 = AnimElem = 3
value = 2

[State 902, 1]
type = sprpriority
trigger1 = AnimElem = 4
value = -1

[State 903, Vel]
type = VelSet
trigger1 = AnimElem = 6
x = -6
y = -6

[State 903, Vel]
type = VelAdd
trigger1 = AnimElemTime(6) >= 0
y = .49

[State 903, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 1300,Turn]
type = Turn
trigger1 = AnimElemTime(6) > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(6) > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;背負い投げ（相手）2
[Statedef 906]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1205, ChangeState]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;巴投げ
[Statedef 911]
type    = S
movetype = A
physics = N
velset = 0,0

[State 900, 1]
type = VarAdd
triggerall = var(0)&2**9
trigger1 = Time = 0
var(0) = -(2**9)

[State 900, 1]
type = VarAdd
triggerall = Time < 4 && !(var(0)&2**9)
triggerall = Target,Command = "holdfwd" || Target,Command = "holdback"
trigger1 = Target,Command = "y" || Target,Command = "z"
trigger2 = Target,Command = "b" || Target,Command = "c"
var(0) = 2**9

[State 900,TargetBind]
type = TargetBind
trigger1 = Time < 4 && (var(0)&2**9)
pos = 40, 0

[State 900,TargetBind]
type = ChangeState
trigger1 = Time < 4 && (var(0)&2**9)
value = 950

[State 820, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 911
persistent = 0

[State 1201, 2]
type = Playerpush
trigger1 = 1
value = 0

[State 901, Throw]
type = TargetState
trigger1 = Time = 0
value = 915

[State 3001, Width]
type = Width
trigger1 = animelemtime(5) < 0
edge = 45,45

[State 3001, Width]
type = Width
trigger1 = animelemtime(5) >= 0 && animelemtime(6) < 0
edge = 75,0

[State 3001, Width]
type = Width
trigger1 = AnimElem = 6
edge = 105,0

[State 901, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 900, 0
channel = 1

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 0, 2
channel = 0

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 5100, 0

[State 820, Anim]
type = ChangeAnim
trigger1 = Time = 0
value = 911
persistent = 0

[State 901,1]
type = TargetBind
trigger1 = animelem = 1
pos = -30,0
time = -1

[State 901,1]
type = TargetBind
trigger1 = animelem = 2
pos = -40,-59
time = -1

[State 901,1]
type = TargetBind
trigger1 = animelem = 3
pos = -25,-69
time = -1

[State 901,1]
type = TargetBind
trigger1 = animelem = 4
pos = 14,-60
time = -1

[State 901,1]
type = TargetBind
trigger1 = animelem = 5
pos = 90, -72
time = -1

[State 901,1]
type = TargetBind
trigger1 = animelem = 6
pos = 100, -54
time = 1

[State 3001, Add Hits!]
type = HitAdd
trigger1 = AnimElem = 6
value = 1

[State -2, Combo]
type = VarAdd
trigger1 = AnimElem = 6
var(17) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = AnimElem = 6
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = var(17) >= 2
trigger1 = AnimElem = 6
var(50)=ifelse(var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 6
value = ceil(ifelse((-140*fvar(10))>-7,-7,(-140*fvar(10))))

[State 901, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 6
value = 35

[State 901, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;巴投げ（相手）
[Statedef 915]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 1201, screenbound]
type = screenbound
trigger1 = AnimElemTime(6) <= 0
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 915

[State 903, Vel]
type = VelSet
trigger1 = AnimElem = 6
x = -5.5
y = -6.5

[State 903, Vel]
type = VelAdd
trigger1 = AnimElemTime(6) >= 0
y = .49

[State 903, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 20

[State 1300,Turn]
type = Turn
trigger1 = AnimElemTime(6) > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(6) > 0
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;巴投げ（相手）2
[Statedef 916]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1205, ChangeState]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;豪波動拳
[Statedef 1000]
type    = S
movetype = A
physics = S
poweradd = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
velset = 0,0
ctrl = 0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = AnimElem = 1
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = AnimElem = 1
ID = 1356

[State -2, Power Chage]
type = RemoveExplod
trigger1 = AnimElem = 1
ID = 1357

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 1000, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse((Map(x)||Map(r_x)), 0, ifelse((Map(y)||Map(r_y)), 1, 2))

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(5) = ifelse(numtarget,2,random%3)

[State 902, 1]
type = ChangeAnim
triggerall = var(12) =10
Trigger1 = Time = 0
value = ifelse(!var(5), 1000, ifelse(var(5) = 1, 1010, 1020))

[State 902, 1]
type = ChangeAnim
triggerall = var(12) =0
Trigger1 = Time = 0
value = ifelse(!var(5), 1020, ifelse(var(5) = 1, 1030, 1040))

[State 1000, Effect]
type = PlaySnd
triggerall = var(12) =0
trigger1 = AnimElem = 5
value = 0, 0
channel = 0

[State 1000, Effect]
type = PlaySnd
triggerall = var(12) =10
trigger1 = AnimElem = 5
value = 1000, 10
channel = 0

[State 1000, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
value = 1000, 1

[State -3,Super]
type = Helper
trigger1 = AnimElemTime(5) = 1
id = 7000
name = "hadouken"
pos = 70,-65
postype = P1
stateno = 7000
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;豪波動拳（飛び道具）
[Statedef 7000]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7000+parent,var(12)
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 7000, VarSet]
type = Null
trigger1 = time = 0
trigger1 = 1 || var(5) := root,var(5)
trigger1 = 1 || var(12) := root,var(12)

[State 7000, VarSet]
type = Null
trigger1 = 1 || var(15) := root,var(15)
trigger1 = 1 || var(16) := root,var(16)
trigger1 = 1 || var(17) := root,var(17)
trigger1 = 1 || var(24) := root,var(24)
trigger1 = 1 || fvar(10) := root,fvar(10)

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 3.375 + (var(5)*1.6875)

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(1005) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(1005) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
triggerall = !var(12)
trigger1 = time = 0
projanim = 7050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = ifelse(!var(5),16,ifelse(var(5)=1,11,6))
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = A, SP
damage=ceil(ifelse(((56+(var(5)*7))*fvar(10))<7,7,((56+(var(5)*7))*fvar(10)))),ceil(ifelse(((56+(var(5)*7))*fvar(10)/8)<7,7,((56+(var(5)*7))*fvar(10)/8)))
animtype = Heavy
animtype = Low
hitflag = MAF
guardflag = MA
pausetime = 4,ceil(11*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -4.5,-6
guard.velocity = -8
air.velocity = -4.5, -6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 1
fall.recover = 0
air.fall = 1
envshake.time = 8
envshake.ampl = 2
ProjID = 1005
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((root,var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = 0.328125*(25.0/16.0)

[State 1000, Proj]
type = Projectile
triggerall = !var(12)
trigger1 = Time = ifelse(!var(5),17,ifelse(var(5)=1,12,7))
projanim = 7051
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = A, SP
damage=ceil(ifelse(((49+(var(5)*7))*fvar(10))<7,7,((49+(var(5)*7))*fvar(10)))),ceil(ifelse(((49+(var(5)*7))*fvar(10)/8)<7,7,((49+(var(5)*7))*fvar(10)/8)))
animtype = Heavy
animtype = Low
hitflag = MAF
guardflag = MA
pausetime = 4,ceil(11*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8,0
guard.velocity = -8
air.velocity = -4.5, -6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 0
fall.recover = 0
air.fall = 1
envshake.time = 8
envshake.ampl = 2
ProjID = 1005
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((root,var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = 0.328125*(25.0/16.0)

[State 1000, Proj]
type = Projectile
triggerall = var(12)
trigger1 = time = 0
projanim = 7050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projremovetime = ifelse(!var(5),16,ifelse(var(5)=1,11,6))
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = A, SP
damage=ceil(ifelse((70*fvar(10))<7,7,(70*fvar(10)))),ceil(ifelse((70*fvar(10)/8)<7,7,(70*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,ceil(11*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -4.5,-6
guard.velocity = -8
air.velocity = -4.5, -6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 1
fall.recover = 0
air.fall = 1
envshake.time = 8
envshake.ampl = 2
ProjID = 1005
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((root,var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = 0.328125*(25.0/16.0)
nochainID = root,var(40)

[State 1000, Proj]
type = Projectile
triggerall = var(12)
trigger1 = Time = ifelse(!var(5),17,ifelse(var(5)=1,12,7))
projanim = 7051
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = A, SP
damage=ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10)))),ceil(ifelse((56*fvar(10)/8)<7,7,(56*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,ceil(11*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8,0
guard.velocity = -8
air.velocity = -4.5, -6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 0
fall.recover = 0
air.fall = 1
envshake.time = 8
envshake.ampl = 2
ProjID = 1005
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((root,var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = 0.328125*(25.0/16.0)
nochainID = root,var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(1005) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1005) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1005)
value = 7005

;---------------------------------------------------------------------------
;豪波動拳（飛び道具）（消滅）
[Statedef 7005]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7005+var(12)

[State -3, Blocking5]
type = helper
triggerall = !NumHelper(8130)
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1005) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, Spark]
type = angledraw
trigger1 = 1
scale = 1+(.1*var(12)),1+(.1*var(12))

[State 9000, Assert]
type = trans
trigger1 = 1
trans = add

[State 1100, Voice]
type = PlaySnd
triggerall = !parent,var(36)
trigger1 = time = 1
value = 1, 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;灼熱豪波動
[Statedef 1300]
type    = S
movetype = A
physics = S
poweradd = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
velset = 0,0
ctrl = 0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1356

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1357

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse((Map(x)||Map(r_x)), 0, ifelse((Map(y)||Map(r_y)), 1, 2))

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(5) = ifelse(numtarget,2,random%3)

[State 902, 1]
type = ChangeAnim
triggerall = var(12)
Trigger1 = Time = 0
value = ifelse(!var(5), 1330, ifelse(var(5) = 1, 1340, 1310))

[State 902, 1]
type = ChangeAnim
triggerall = !var(12)
Trigger1 = Time = 0
value = ifelse(!var(5), 1300, ifelse(var(5) = 1, 1310, 1320))

[State 1000, Effect]
type = PlaySnd
triggerall = !var(12)
trigger1 = !var(5) && AnimElem = 9
trigger2 = var(5) && AnimElem = 8
value = 0, 0
channel = 0

[State 1000, Effect]
type = PlaySnd
triggerall = var(12)
trigger1 = !var(5) && AnimElem = 9
trigger2 = var(5) && AnimElem = 8
value = 1000, 10
channel = 0

[State 1000, Effect]
type = PlaySnd
trigger1 = !var(5) && AnimElem = 9
trigger2 = var(5) && AnimElem = 8
value = 1000, 1

[State 1100, Fire1]
type = Explod
trigger1 = AnimElem = 1
Anim = 7701
pos = 0,0
postype = p1
ownpal = 1
ignorehitpause = 1
ID = 1355
bindtime = -1
sprpriority = -1
removetime = -1

[State -2, Power Chage]
type = RemoveExplod
trigger1 = !var(5) && AnimElem = 6
trigger2 = var(5) && AnimElem = 5
ID = 1355

[State -3,Super]
type = Helper
trigger1 = !var(5) && AnimElemTime(9) = 1
trigger2 = var(5) && AnimElemTime(8) = 1
id = 7100
name = "shakunetsu"
pos = 70,-65
postype = P1
stateno = 7100
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;灼熱波動拳（飛び道具）
[Statedef 7100]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7100+parent,var(12)
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 7000, VarSet]
type = Null
trigger1 = time = 0
trigger1 = 1 || var(5) := root,var(5)
trigger1 = 1 || var(12) := root,var(12)

[State 7000, VarSet]
type = Null
trigger1 = 1 || var(15) := root,var(15)
trigger1 = 1 || var(16) := root,var(16)
trigger1 = 1 || var(17) := root,var(17)
trigger1 = 1 || var(24) := root,var(24)
trigger1 = 1 || fvar(10) := root,fvar(10)

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 3.375 + (var(5)*1.6875)

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(1305) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(1305) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
triggerall = !var(12)
trigger1 = time = 0
projanim = 7050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
projmisstime = 0
projhits = 1+var(5)
velocity = vel X, vel Y
attr = A, SP
damage=ceil(ifelse(((ifelse(!Var(5),63,ifelse(Var(5)=1,35,28)))*fvar(10))<17,17,((ifelse(!Var(5),63,ifelse(Var(5)=1,35,28)))*fvar(10)))),ceil(ifelse((35*fvar(10)/8)<17,17,(35*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,ceil(11*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,16
guardsound = S1,1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -4.5,-6
guard.velocity = -8
air.velocity = -4.5,-6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 1
fall.recover = 0
air.fall = 1
envshake.time = 8
envshake.ampl = 2
ProjID = 1305
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.color = 64
palfx.add = 100,40,50
palfx.mul = 90,50,40
palfx.time = 45
forcestand = 1
yaccel = 0.328125*(25.0/16.0)
nochainID = root,var(40)

[State 1000, Proj]
type = Projectile
triggerall = var(12)
trigger1 = time = 0
projanim = 7050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
projmisstime = 0
projhits = 1+var(5)
velocity = vel X, vel Y
attr = A, SP
damage=ceil(ifelse(((ifelse(!Var(5),77,ifelse(Var(5)=1,42,35)))*fvar(10))<17,17,((ifelse(!Var(5),77,ifelse(Var(5)=1,42,35)))*fvar(10)))),ceil(ifelse((100*fvar(10)/8)<12,12,(100*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,ceil(11*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,16
guardsound = S1,1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -4.5,-6
guard.velocity = -8
air.velocity = -4.5,-6
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 1
fall.recover = 0
air.fall = 1
envshake.time = 8
envshake.ampl = 2
ProjID = 1305
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.color = 64
palfx.add = 100,40,50
palfx.mul = 90,50,40
palfx.time = 45
forcestand = 1
yaccel = 0.328125*(25.0/16.0)
nochainID = root,var(40)

[State 3001, Super]
type = Explod
trigger1 = root,projhittime(1305) = 1
id = 8210
name = "projhit_s"
pos = 0,0
postype = P1
anim = 8210+(random%8)
ownpal = 1
ontop = 1
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
size.xscale = 1
size.yscale = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1305) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = ceil(4*(2-(var(16)>0))/2)
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(1305) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1305)
value = 7105

;---------------------------------------------------------------------------
;灼熱波動拳（飛び道具）（消滅）
[Statedef 7105]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7105+var(12)

[State -3, Blocking5]
type = helper
triggerall = !NumHelper(8130)
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1305) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, Spark]
type = angledraw
trigger1 = 1
scale = 1+(.1*var(12)),1+(.1*var(12))

[State 9000, Assert]
type = trans
trigger1 = 1
trans = add

[State 1100, Voice]
type = PlaySnd
triggerall = !parent,var(36)
trigger1 = time = 1
value = 1, 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;------------------------------------------------------------------------------------------
;豪昇龍拳
[Statedef 1100]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
poweradd = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
velset = 0,0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1356

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1357

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse((Map(x)||Map(r_x)), 0, ifelse((Map(y)||Map(r_y)), 1, 2))

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(5) = ifelse(numtarget,2,random%3)

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 1100, ifelse(var(5) = 1, 1110, 1120))

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 5
movetype = I

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 170, 1]
type = NotHitBy
triggerall = !var(12)
trigger1 = AnimElemTime(3) < 0 && var(5) != 2
trigger2 = AnimElemTime(3) < 0 && var(5) = 2
value = SCA
ignorehitpause = 1
time = 3

[State 170, 1]
type = NotHitBy
triggerall = var(12)
trigger1 = AnimElemTime(3) < 0 && var(5) != 2
trigger2 = AnimElemTime(3) < 0 && var(5) = 2
value = SCA
ignorehitpause = 1
time = 3

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,1+var(12)
channel = 0

[State 1100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,2
channel = 2

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 4
value = 40, 0
channel = 20

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElemTime(4) = 2
StateType = A
physics = N

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(4) = 2
x = 4+(var(5)*2.667)
y = -6.667-(var(5)*2.667)

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[State 1100, Gravity]
type = Veladd
trigger1 = AnimElemTime(4) > 2
y = .667

[State 1100, Velocity]
type = VelMul
trigger1 = AnimElemTime(4) > 2
x = .85

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 4
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse(((70+(var(5)*7))*fvar(10))<7,7,((70+(var(5)*7))*fvar(10)))),ceil(ifelse(((70+(var(5)*7))*fvar(10)/8)<7,7,((70+(var(5)*7))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -30
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -1.3,-11
guard.velocity = -8
air.velocity = -1.3,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 2
envshake.freq = 150
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,14*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 3
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse((38*fvar(10))<7,7,(38*fvar(10)))),ceil(ifelse((38*fvar(10)/8)<7,7,(38*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -5, -59
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -1.3,-11
guard.velocity = -8
air.velocity = -1.3,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 2
envshake.freq = 150
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,14*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse((31*fvar(10))<7,7,(31*fvar(10)))),ceil(ifelse((31*fvar(10)/8)<7,7,(31*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -75
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -2.8,-11
guard.velocity = -8
air.velocity = -2.8,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,14*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 2
ignorehitpause = 1
var(39) = -30

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 3
ignorehitpause = 1
var(39) = -59

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 4
ignorehitpause = 1
var(39) = -75

[State 1100, ChangeState]
type = ChangeState
triggerall = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(4) >= 2
value = 1105

;------------------------------------------------------------------------------------------
;ガードキャンセル攻撃（神）
[Statedef 2900]
type    = S
movetype = A
physics = S
juggle = 8
ctrl = 0
velset = 0,0

[State 180, 1]
type = VarAdd
trigger1 = time = 0
var(50)=1000
ignorehitpause = 1

[State 860, 4]
type = PowerAdd
triggerall = !var(20) || var(20) = 4 || var(20) = 6
trigger1 = time = 0
value = -1000

[State 860, 4]
type = PowerAdd
triggerall = var(20) = 1
trigger1 = time = 0
value = -1500

[State 860, 4]
type = VarSet
triggerall = var(20) = 3
trigger1 = time = 0
var(14) = 0

[State 860, 4]
type = PowerAdd
triggerall = var(20) = 3
trigger1 = time = 0
value = -3000

[State 902, Shock]
type = PalFX
trigger1 = Time = 0
time = 2
invertall = 1
mul = 0,0,0

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 18

[State 1100, Effect]
type = PlaySnd
trigger1 = Time = 1
value = 810,0
channel = 1

[State -3,Super]
type = Helper
trigger1 = Time = 0
id = 8070
name = "GUARD CANCEL"
pos = 10,-ifelse(PrevStateNo = 152,40,80)
postype = P1
stateno = 8070
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 7
supermovetime = 99999999999999
persistent = 0
size.xscale = 1
size.yscale = 1

[State 0]
type = pause
trigger1 = time = 1
time = 6
movetime = 6

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 190, 4]
type = ChangeAnim
trigger1 = time <= 12
value = anim

[State 190, 4]
type = ChangeAnim
trigger1 = time = 13
value = 1120

[State 105, 1]
type = statetypeset
triggerall = anim = 1120
trigger1 = AnimElem = 5
movetype = I

[State 1100, Voice]
type = PlaySnd
triggerall = anim = 1120
trigger1 = AnimElem = 1
value = 0,11
channel = 0

[State 1100, Effect]
type = PlaySnd
triggerall = anim = 1120
trigger1 = AnimElem = 1
value = 3,2
channel = 2

[State 52, Effect]
type = PlaySnd
triggerall = anim = 1120
trigger1 = AnimElem = 3
value = 40, 0
channel = 20

[State 1100, StateType]
type = StateTypeSet
triggerall = anim = 1120
trigger1 = AnimElemTime(3) = 2
StateType = A
physics = N

[State 1100, Velocity]
type = VelSet
triggerall = anim = 1120
trigger1 = AnimElemTime(4) = 2
x = 6.667
y = -9.333

[State 1100, Velocity]
type = VelSet
triggerall = anim = 1120
trigger1 = AnimElem = 6
x = 0

[State 1100, Gravity]
type = Veladd
triggerall = anim = 1120
trigger1 = AnimElemTime(4) > 2
y = .667

[State 1100, Velocity]
type = VelMul
triggerall = anim = 1120
trigger1 = AnimElemTime(4) > 2
x = .85

[State 3001, Super]
type = Helper
triggerall = anim = 1120
trigger1 = AnimElem = 4
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 1100, HitDef]
type = HitDef
triggerall = anim = 1120
trigger1 = AnimElem = 2
attr = S, SA
animtype  = diagup
air.animtype  = diagup
damage=ceil(ifelse((14*fvar(10))<7,7,(14*fvar(10)))),ceil(ifelse((14*fvar(10)/8)<7,7,(14*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -30
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -1.3,-11
guard.velocity = -8
air.velocity = -1.3,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
kill = 0
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
triggerall = anim = 1120
trigger1 = AnimElem = 3
attr = S, SA
animtype  = diagup
air.animtype  = diagup
damage=ceil(ifelse((14*fvar(10))<7,7,(14*fvar(10)))),ceil(ifelse((14*fvar(10)/8)<7,7,(14*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -5, -59
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -1.3,-11
guard.velocity = -8
air.velocity = -1.3,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
kill = 0
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
triggerall = anim = 1120
trigger1 = AnimElem = 4
attr = S, SA
animtype  = diagup
air.animtype  = diagup
damage=ceil(ifelse((14*fvar(10))<7,7,(14*fvar(10)))),ceil(ifelse((14*fvar(10)/8)<7,7,(14*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -75
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -2.8,-11
guard.velocity = -8
air.velocity = -2.8,-11
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
kill = 0
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
triggerall = anim = 1120
trigger1 = AnimElem = 2
ignorehitpause = 1
var(39) = -30

[State 3001, VarSet]
type = VarSet
triggerall = anim = 1120
trigger1 = AnimElem = 3
ignorehitpause = 1
var(39) = -59

[State 3001, VarSet]
type = VarSet
triggerall = anim = 1120
trigger1 = AnimElem = 4
ignorehitpause = 1
var(39) = -75

[State 1100, ChangeState]
type = ChangeState
triggerall = anim = 1120
triggerall = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(5) > 0
value = 1105

;---------------------------------------------------------------------------
;豪昇龍拳（着地）
[Statedef 1105]
type    = S
physics = S
ctrl = 0
anim = ifelse(var(12),1106,1105)
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;竜巻斬空脚
[Statedef 1200]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
poweradd = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse((Map(a)||Map(r_a)), 0, ifelse((Map(b)||Map(r_b)), 1, 2))
;var(5) = ifelse(command = "竜巻斬空脚1", 0, ifelse(command = "竜巻斬空脚2", 1, 2))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(5) = ifelse(prevstateno=450||numtarget,0,(random%2)*2)

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 1200, ifelse(var(5) = 1, 1210, 1220))

[State 105, 1]
type = statetypeset
trigger1 = !var(5) && AnimElem = 12
trigger2 = var(5) = 1 && AnimElem = 24
trigger3 = var(5) = 2 && AnimElem = 30
movetype = I

[State 3001, Width]
type = Width
trigger1 = 1
edge = 20,0
player = 5,10

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1356

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1357

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,2
channel = 0

[State 1100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1 || AnimElem = 5 || AnimElem = 9
trigger2 = var(5) && (AnimElem = 12 || AnimElem = 15 || AnimElem = 18 || AnimElem = 21)
trigger3 = var(5) = 2 && (AnimElem = 24 || AnimElem = 27)
value = 3,4

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 1
x = ifelse(!var(5),3,ifelse(var(5)=1,3.1,3.71))
y = -5

[State 1100, Velocity]
type = VelMul
trigger1 = !var(5) && AnimElemTime(13) >= 0
trigger2 = var(5) = 1 && AnimElemTime(25) >= 0
trigger3 = var(5) = 2 && AnimElemTime(31) >= 0
x = .96

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 6
y = 0

[State 1100, Gravity]
type = Veladd
trigger1 = AnimElemTime(5) < 0
trigger2 = !var(5) && AnimElemTime(13) >= 0
trigger3 = var(5) = 1 && AnimElemTime(25) >= 0
trigger4 = var(5) = 2 && AnimElemTime(31) >= 0
y = .45

[State 1201, 1]
type = PlayerPush
trigger1 = abs(P2bodydist Y) > 45
value = 0

[State 170, 1]
type = NotHitBy
triggerall = var(12)
trigger1 = AnimElemTime(3) < 0
value = SCA
ignorehitpause = 1

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 1
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse((48*fvar(10))<7,7,(48*fvar(10)))),ceil(ifelse((48*fvar(10)/8)<7,7,(48*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -48
hitsound   = S2,5
guardsound = S1,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -4,-7.5
guard.velocity = -8
air.velocity = -4,-7
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,14*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 7
trigger2 = AnimElem = 10
trigger3 = AnimElem = 11
trigger4 = AnimElem = 16
trigger5 = AnimElem = 19
trigger6 = AnimElem = 22
trigger7 = AnimElem = 25
trigger8 = AnimElem = 28
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse(((ifelse(var(12),52,35))*fvar(10))<7,7,((ifelse(var(12),52,35))*fvar(10)))),ceil(ifelse(((ifelse(var(12),52,35))*fvar(10)/8)<7,7,((ifelse(var(12),52,35))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -66
hitsound   = S2,5
guardsound = S1,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
guard.ctrltime = 12
ground.velocity = -1.5*ifelse(p2dist x>0,1,-1),-7.5
guard.velocity = -8*ifelse(p2dist x>0,1,-1)
air.velocity = -1.5*ifelse(p2dist x>0,1,-1),-7
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 12
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 1
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,14*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 2
ignorehitpause = 1
var(39) = -48

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 4
ignorehitpause = 1
var(39) = -66

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1205

;---------------------------------------------------------------------------
;竜巻斬空脚（着地）
[Statedef 1205]
type    = S
physics = S
ctrl = 0
anim = 1205
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;------------------------------------------------------------------------------------------
;空中竜巻斬空脚
[Statedef 1250]
type    = A
movetype = A
physics = N
juggle = 8
anim = 1250
ctrl = 0
poweradd = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = ifelse((Map(a)||Map(r_a)), 0, ifelse((Map(b)||Map(r_b)), 1, 2))
;var(5) = ifelse(command = "竜巻斬空脚1", 0, ifelse(command = "竜巻斬空脚2", 1, 2))

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 15
movetype = I

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,2
channel = 0

[State 1100, Effect]
type = PlaySnd
trigger1 = AnimElem = 3 || AnimElem = 6 || AnimElem = 9 || AnimElem = 12
value = 3,4

[State 1050, Velocity]
type = VelAdd
trigger1 = AnimElem = 1
x = ifelse(Vel X >= 0, 1.5, -1.5)
y = ifelse(Vel Y <= 0, (-5-var(5))*.4, (5+var(5))*.2)

[State 1310, 3]
type = VelAdd
trigger1 = Time >= 0
Y = .4

[State 1201, 1]
type = PlayerPush
trigger1 = abs(P2bodydist Y) > 45
value = 0

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 4
trigger2 = AnimElem = 7
trigger3 = AnimElem = 10
trigger4 = AnimElem = 13
attr = A, SA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse(((ifelse(var(12),42,28))*fvar(10))<7,7,((ifelse(var(12),42,28))*fvar(10)))),ceil(ifelse(((ifelse(var(12),42,28))*fvar(10)/8)<7,7,((ifelse(var(12),42,28))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = MA
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -66
hitsound   = S2,5
guardsound = S1,0
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
guard.ctrltime = 12
ground.velocity = -1.5*ifelse(p2dist x>0,1,-1),-7.5
guard.velocity = -8*ifelse(p2dist x>0,1,-1)
air.velocity = -1.5*ifelse(p2dist x>0,1,-1),-7
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
airguard.velocity = -6.67,-1
envshake.time = 10
envshake.ampl = 3
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 1
getpower = ifelse(var(17),70,143)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,14*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -66

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1255

;---------------------------------------------------------------------------
;空中竜巻斬空脚（着地）
[Statedef 1255]
type    = S
physics = S
ctrl = 0
anim = ifelse(var(12),1205,1206)
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;斬空波動拳
[Statedef 1400]
type    = A
movetype = A
physics = N
poweradd = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
ctrl = 0
anim = 1400

[State 1000, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse((Map(x)||Map(r_x)), 0, ifelse((Map(y)||Map(r_y)), 1, 2))
;var(5) = ifelse(command = "豪波動拳1", 0, ifelse(command = "豪波動拳2", 1, 2))

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
var(5) = random%3

[State 1000, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = Time = 0
trigger1 = numtarget
var(5) = 2

[State 1000, Effect]
type = PlaySnd
triggerall = !var(12)
trigger1 = AnimElem = 1
value = 0, 0
channel = 0

[State 1000, Effect]
type = PlaySnd
triggerall = var(12)
trigger1 = AnimElem = 1
value = 195, 0
channel = 0

[State 1000, Effect]
type = PlaySnd
trigger1 = AnimElem = 5
trigger2 = var(12) && AnimElem = 2
value = 1000, 1

[State 1310, 3]
type = VelAdd
trigger1 = 1
y = ifelse(var(12),.48,.53)

[State -3,Super]
type = Helper
trigger1 = !var(12)
trigger1 = animelemtime(5) = 1
trigger2 = var(12)
trigger2 = animelemtime(2) = 1
id = 7200
name = "zanku1"
pos = 48,-54
postype = P1
stateno = 7200
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State -3,Super]
type = Helper
trigger1 = var(12)
trigger1 = animelemtime(5) = 1
id = 7201
name = "zanku2"
pos = 48,-54
postype = P1
stateno = 7200
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1000, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1405

;---------------------------------------------------------------------------
;斬空波動拳（着地）
[Statedef 1405]
type    = S
physics = S
ctrl = 0
anim = ifelse(var(12),1406,1405)
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;斬空波動拳（飛び道具）
[Statedef 7200]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 2.5+parent,var(5),2.5+parent,var(5)
anim = 7200+parent,var(12)
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 7000, VarSet]
type = Null
trigger1 = time = 0
trigger1 = 1 || var(5) := root,var(5)
trigger1 = 1 || var(12) := root,var(12)

[State 7000, VarSet]
type = Null
trigger1 = 1 || var(15) := root,var(15)
trigger1 = 1 || var(16) := root,var(16)
trigger1 = 1 || var(17) := root,var(17)
trigger1 = 1 || var(24) := root,var(24)
trigger1 = 1 || fvar(10) := root,fvar(10)

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(1405+IsHelper(7201)) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(1405+IsHelper(7201)) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
triggerall = !var(12)
trigger1 = time = 0
projanim = 7250
Projhitanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = A, SP
damage=ceil(ifelse(((42+(var(5)*7))*fvar(10))<7,7,((42+(var(5)*7))*fvar(10)))),ceil(ifelse(((42+(var(5)*7))*fvar(10)/8)<7,7,((42+(var(5)*7))*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,ceil(11*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8
guard.velocity = -8
air.velocity = -5.5, 7.5
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 0
fall.recover = 0
air.fall = 1
envshake.time = 8
envshake.ampl = 2
ProjID = 1405+IsHelper(7201)
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((root,var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = 0.328125*(25.0/16.0)
nochainID = root,var(40)

[State 1000, Proj]
type = Projectile
triggerall = var(12)
trigger1 = time = 0
projanim = 7250
Projhitanim = -1
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = A, SP
damage=ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10)))),ceil(ifelse((49*fvar(10)/8)<7,7,(49*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,ceil(11*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,15
guardsound = S1,1
ground.type = High
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -8
guard.velocity = -8
air.velocity = -5.5, 7.5
airguard.velocity = -5.33,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 0
fall.recover = 0
air.fall = 1
envshake.time = 8
envshake.ampl = 2
ProjID = 1405+IsHelper(7201)
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
palfx.time = 12*((root,var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1
yaccel = 0.328125*(25.0/16.0)
nochainID = root,var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(1405+IsHelper(7201)) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1405+IsHelper(7201)) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7206

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(1405+IsHelper(7201))
value = 7205

;---------------------------------------------------------------------------
;斬空波動拳（飛び道具）（消滅）
[Statedef 7205]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7205+var(12)

[State -3, Blocking5]
type = helper
triggerall = !NumHelper(8130)
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(1405+IsHelper(7201)) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, Spark]
type = angledraw
trigger1 = 1
scale = 1+(.1*var(12)),1+(.1*var(12))

[State 9000, Assert]
type = trans
trigger1 = 1
trans = add

[State 1100, Voice]
type = PlaySnd
triggerall = !parent,var(36)
trigger1 = time = 1
value = 1, 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;斬空波動拳（飛び道具）（消滅）2
[Statedef 7206]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7205+var(12)

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, Spark]
type = angledraw
trigger1 = 1
scale = 1+(.1*var(12)),1+(.1*var(12))

[State 9000, Assert]
type = trans
trigger1 = 1
trans = add

[State 1100, Voice]
type = PlaySnd
trigger1 = time = 1
value = 1, 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;阿修羅閃空
[Statedef 1500]
type = S
movetype = I
physics = N
anim = 1500
velset = 0,0
ctrl = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1356

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1357

[State 1100, Fire1]
type = Explod
trigger1 = AnimElem = 1
Anim = 7701
pos = 0,0
postype = p1
ownpal = 1
ignorehitpause = 1
ID = 1356
bindtime = -1
sprpriority = -1
removetime = -1

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = time = 0
var(5) = ifelse(Map(DP)&&(Map(xy)||Map(yz)||Map(x)&&Map(z)), 0, ifelse(Map(RDP)&&(Map(xy)||Map(yz)||Map(x)&&Map(z)), 1, ifelse(Map(DP)&&(map(ab)||map(bc)||map(a)&&map(c)), 2, 3)))
;var(5) = ifelse(command = "阿修羅閃空（前方）（P）", 0, ifelse(Command = "阿修羅閃空（後方）（P）", 1, ifelse(Command = "阿修羅閃空（前方）（K）", 2, 3)))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
var(5) = random%4

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
trigger1 = time = 0
trigger1 = enemynear,numproj
var(5) = (random%2)*2

[State 1300, Velocity]
type = VelSet
trigger1 = Time = 0 || AnimElemTime(4) = 0
x = ifelse(Time = 0, 3.5, -3.5)

[State 3000, AfterImage]
type = AfterImage
triggerall = !var(16)
trigger1 = AnimElem = 1
time = ifelse((var(5) = [0,1]),50,38)
TimeGap  = 1
FrameGap = 11
length = 33
PalBright = 1,1,1
PalContrast = 128, 128, 128
PalAdd = 0,0,0
PalMul = .8,.8,.8
trans = add1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1201, ChangeState]
type = ChangeState
Trigger1 = animtime = 0
value = 1501

;---------------------------------------------------------------------------
;阿修羅閃空（移動）
[Statedef 1501]
type = S
movetype = I
physics = N
anim = 1501
juggle = 0
velset = ifelse(!var(5), 15, ifelse(var(5) = 1, -15, ifelse(var(5) = 2, 10, -10))),0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = time = 0
ID = 1356

[State 1300,Velocity]
type = VelAdd
trigger1 = AnimElemTime(1) > 0
x = ifelse(Vel X > 0, -.32, .32)

[State 3000, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 1500, var(12)

[State 3000, Voice]
type = PlaySnd
triggerall = !var(12)
trigger1 = AnimElem = 1
value = 195, 0
channel = 0

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 1300, Push]
type = PlayerPush
trigger1 = 1
value = 0

[State 1300,Turn]
type = Turn
trigger1 = P2Dist X < -5

[State 1201, ChangeState]
type = ChangeState
Trigger1 = (Time = 34 && var(5) = [0,1]) || (Time = 22 && var(5) = [2,3])
Trigger2 = frontedgedist <= 1 && animelemtime(1) > 0
Trigger3 = backedgedist <= 1 && animelemtime(1) > 0
value = 1505

;---------------------------------------------------------------------------
;阿修羅閃空（停止）
[Statedef 1505]
type = S
movetype = I
physics = N
anim = ifelse(var(12),1506,1505) 
juggle = 0
velset = 0,0
ctrl = 0

[State 1201, ChangeState]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;前方転身
[Statedef 1600]
type    = S
physics = N
movetype = I
ctrl = 0
velset = 0,0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1356

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1357

[State 1000, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = ifelse((Map(x)||Map(r_x)), 0, ifelse((Map(y)||Map(r_y)), 1, 2))
;var(5) = ifelse(command = "前方転身1", 0, ifelse(command = "前方転身2", 1, 2))

[State 1100, VarSet]
type = VarSet
triggerall = var(59) = 1
trigger1 = Time = 0
var(5) = ifelse((P2Dist X = [0,39]), 0, ifelse((P2Dist X = [40,79]), 1, 2))

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 1600, ifelse(var(5) = 1, 1610, 1620))

[State 810, Voice]
type = Playsnd
trigger1 = AnimElem = 1
value = 0,1
channel = 0

[State 810, Voice]
type = Playsnd
trigger1 = AnimElem = 1
value = 800,50

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 4.4

[State 810, Velocity]
type = VelSet
trigger1 = AnimElem = 9
x = 0

[State 810, Push]
type = PlayerPush
trigger1 = AnimElemTime(2) > 0
value = 0

[State 810, StateChange]
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;天魔朱裂刀（待機）
[Statedef 1700]
type = S
movetype = I
physics = S
ctrl = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1356

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1357

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse(Command = "天魔朱裂刀1", 0, 1)

[State 1100, VarSet]
type = VarSet
triggerall = var(59) = 1
trigger1 = Time = 0
var(5) = ifelse(P2statetype != C, 0, 1)

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 1700, 1710)

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 0,0
channel = 0

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3,0
channel = 1

[State 1035, 2]
type = ReversalDef
triggerall = !var(5)
trigger1 = AnimElem = 1
attr = S, SA
reversal.attr = SCA, NA, SA, HA
pausetime = 0,0
sparkno = -1
hitsound = S1,0
p1stateno = 1701
sprpriority = -1
getpower = 35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 1035, 2]
type = ReversalDef
triggerall = var(5)
trigger1 = AnimElem = 1
attr = C, SA
reversal.attr = C, NA, SA, HA
pausetime = 0,0
sparkno = -1
hitsound = S1,0
p1stateno = 1701
sprpriority = -1
getpower = 35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 1035, 9]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;天魔朱裂刀（発動）
[Statedef 1701]
type    = A
movetype = A
physics = N
juggle = 0
velset = 0,0
ctrl = 0
anim = 1701

[State 180, 1]
type = VarAdd
trigger1 = time = 0
var(50)=5000
ignorehitpause = 1

[State 3000, Voice]
type = PlaySnd
trigger1 = Time = 0
value = 3300,0
channel = 0

[State 3000, Voice]
type = PlaySnd
trigger1 = Time = 0
value = 3400,2

[State 191, Cloth]
type = Helper
trigger1 = Time = 0
ID = 3405
stateno = 3405
postype = p1
pos = 0,0
name = "misogi1"

[State 191, Cloth]
type = Helper
trigger1 = Time = 0
ID = 3406
stateno = 3405
postype = p1
pos = 0,0
name = "misogi2"

[State 906, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 900, 0]
type = PosAdd
trigger1 = Time = 0
x = (P2dist X)-20
y = -180

[State 1100, Velocity]
type = VelAdd
trigger1 = 1
y = .9

[State 1200, 1]
type = HitDef
trigger1 = AnimElem = 2
attr = A, SA
animtype  = hard
hitflag = MAF
guardflag = HA
priority = 3, Miss
pausetime = 0, 0
guard.pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -32
hitsound   = S2,2
guardsound = S1,0
damage    = ceil(ifelse((140*fvar(10))<7,7,(140*fvar(10)))),ceil(ifelse((140*fvar(10)/8)<7,7,(140*fvar(10)/8)))
p2facing = 1
ground.type = low
ground.velocity = 0,0
guard.velocity = -8
air.velocity =  -5,20
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
kill = 1
envshake.time = 15
envshake.ampl = 4
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
fall = 1
air.fall = 1
fall.recover = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35,35
nochainID = var(40)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -52

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1702

;---------------------------------------------------------------------------
;天魔朱裂刀（着地）
[Statedef 1702]
type    = S
physics = S
ctrl = 0
anim = 3401
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 5100, 1

[State 903, EnvShake]
type = EnvShake
trigger1 = Time = 0
time = 12

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;天魔朱裂刀（相手）1
[Statedef 1750]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 52, 4]
type = ChangeState
trigger1 = Pos Y < 0
value = 2020

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1750, Velocity]
type = VelSet
trigger1 = Time = 0
x = -3

[State 902, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3003, ChangeAnim]
type = ChangeAnim
triggerall = Time < 7 && SelfAnimExist(5950)
trigger1 = AuthorName = "Tin" || AuthorName = "Mouser" || AuthorName = "H”" || AuthorName = "adamskie" 
trigger2 = AuthorName = "M.M.R." || AuthorName = "ryokucha" || AuthorName = "Bad Darkness" || AuthorName = "Third"
trigger3 = AuthorName = "CAMRAT Type KOF" || AuthorName = "keyu" || AuthorName = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "Nyan☆Kiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "SUMI" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSS†CAT" || AuthorName = "CrossCat"
value = 5950

[State 3003, ChangeAnim]
type = ChangeAnim2
trigger1 = Time < 7 && anim != 5950
value = 3450

[State 3003, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3450 && animtime = 0
value = 5080

[State 105, 1]
type = statetypeset
triggerall = Anim = 5950 || Anim = 5080
trigger1 = AnimElemTime(AnimElemNo(0)+1)=0
statetype = L

[State 3450,1]
type = ChangeAnim
triggerall = Anim = 5080
trigger1 = AnimElemTime(AnimElemNo(0)+1)=0
value = 5110+(SelfAnimExist(5112)*2)

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 16
x = 0

[State 1100, turn]
type = turn
triggerall = Time = 80
trigger1 = Name = "cvszangief" && AuthorName = "warusaki3"
trigger2 = Name = "cvszangief_normal" && AuthorName = "warusaki3"
trigger3 = Name = "cvszangief_ex" && AuthorName = "warusaki3"
trigger4 = Name = "raiden" && AuthorName = "H”"

[State 3450,1]
type = ChangeAnim
triggerall = Time = 80
triggerall = SelfAnimExist(5112)
triggerall = anim = 5950
trigger1 = AuthorName = "Tin" || AuthorName = "Mouser" || AuthorName = "H”" || AuthorName = "adamskie" 
trigger2 = AuthorName = "M.M.R." || AuthorName = "ryokucha" || AuthorName = "Bad Darkness" || AuthorName = "Third"
trigger3 = AuthorName = "CAMRAT Type KOF" || AuthorName = "keyu" || AuthorName = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "Nyan☆Kiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "SUMI" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSS†CAT" || AuthorName = "CrossCat"
value = 5112

[State 3002, ChangeAnim]
type = SelfState
trigger1 = Time = 80
value = ifelse(alive, 5120, 5150)

;---------------------------------------------------------------------------
; HIT_SHAKE
[Statedef 2020]
movetype = H
physics = N
velset = 0,0

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 2030

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 2030]
type    = A
movetype = H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 4]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0 ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 2050 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 2035 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 2035]
type    = A
movetype = H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 4]
type = ChangeState
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0 ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0  ;No transition anim
trigger4 = Anim != 5035 ;.
value = 2050 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 2050]
type    = A
movetype = H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0  ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 2100 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 2080]
type    = L
movetype = H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse(GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 2081 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 2030 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 2081]
type    = L
movetype = H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 2110 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 2100]
type    = L
movetype = H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 2110 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 2101

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 2101]
type    = L
movetype = H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 2110

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 2110]
type    = L
movetype = H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 11] ;If just died
type = SelfState
trigger1 = time = 40
value = 5120

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

;------------------------------------------------------------------------------------------
;百鬼襲
[Statedef 1800]
type    = S
movetype = A
physics = S
juggle = 0
anim = 1800
ctrl = 0
velset = 0,0
poweradd = 70*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
trigger1 = Time = 0
var(5) = ifelse((Map(a)||Map(r_a)), 0, ifelse((Map(b)||Map(r_b)), 1, 2))
;var(5) = ifelse(command = "百鬼襲1", 0, ifelse(command = "百鬼襲2", 1, 2))

[State 1100, VarSet]
type = VarSet
triggerall = var(59) = 1
trigger1 = Time = 0
var(5) = ifelse((P2Dist X = [0,69]), 0, ifelse((P2Dist X = [70,139]), 1, 2))

[State 1100, VarSet]
type = VarSet
trigger1 = AnimElem = 3
var(6) = 0

[State 1100, VarSet]
type = VarSet
trigger1 = AnimElem = 4
var(6) = 1

[State 1100, VarSet]
type = VarSet
trigger1 = AnimElem = 5
var(6) = 2

[State 1100, VarSet]
type = VarSet
trigger1 = AnimElem = 6
var(6) = 3

[State 1100, VarSet]
type = VarSet
trigger1 = AnimElem = 7
var(6) = 4

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 0,0
channel = 0

[State 1100, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 40,0
channel = 2

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElem = 2
StateType = A
physics = N

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 2+(var(5)*1.5)

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
y = -9

[State 1100, Gravity]
type = Veladd
trigger1 = animelemtime(2) > 0
y = .55

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 1
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 1400, 8]
type = ChangeState
triggerall = !var(59)
triggerall = Time > 17
triggerall = p2bodydist X < 6
triggerall = p2bodydist Y < 70
trigger1 = (Command = "x" || Command = "y" || Command = "z") && (command = "holdfwd" || command = "holdback")
value = 1830

[State 1400, 8]
type = ChangeState
triggerall = !var(59)
triggerall = Time > 17
triggerall = p2bodydist X < 6
triggerall = p2bodydist Y < 40
trigger1 = (Command = "a" || Command = "b" || Command = "c") && (command = "holdfwd" || command = "holdback")
value = 1840

[State 1400, 8]
type = ChangeState
triggerall = !var(59)
triggerall = Time > 17
trigger1 = Command = "x" || Command = "y" || Command = "z"
value = 1810

[State 1400, 8]
type = ChangeState
triggerall = !var(59)
triggerall = Time > 17
trigger1 = Command = "a" || Command = "b" || Command = "c"
value = 1820

[State 1400, 8]
type = ChangeState
triggerall = var(59) = 1
triggerall = Time > 17
triggerall = p2bodydist X < 6
triggerall = p2bodydist Y < 70
trigger1 = Random <= 150 && frontedgedist < 40
trigger2 = Random > 350 && frontedgedist >= 40
value = 1830

[State 1400, 8]
type = ChangeState
triggerall = var(59) = 1
triggerall = Time > 17
triggerall = p2bodydist X < 6
triggerall = p2bodydist Y < 40
trigger1 = Random > 350 && frontedgedist < 40
trigger2 = Random <= 150 && frontedgedist >= 40
value = 1840

[State 1400, 8]
type = ChangeState
triggerall = var(59) = 1
triggerall = Time > 17
trigger1 = p2bodydist X > 6 && Random < 450
trigger2 = (p2bodydist X = [0,6]) && Random = [151,329]
value = 1810

[State 1400, 8]
type = ChangeState
triggerall = var(59) = 1
triggerall = Time > 17
trigger1 = p2bodydist X > 6 && Random > 950
trigger2 = (p2bodydist X = [0,6]) && Random = [330,349]
value = 1820

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
trigger1 = AnimElemTime(2) > 0
value = 1805

;---------------------------------------------------------------------------
;百鬼豪斬
[Statedef 1805]
type    = C
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 1805+var(5)

[State 220, Position]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 220, Position]
type = VelSet
trigger1 = Time = 0
y = 0

[State 220, Position]
type = VelSet
trigger1 = AnimElem = 6
x = 0

[State 220, Position]
type = VelMul
trigger1 = 1
x = 0.92

[State 440, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 5

[State 440, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0, 1
channel = 0

[State 181, 2]
type = PlaySnd
trigger1 = AnimElem = 1
value = 5100, 1

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 440, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = C, SA
hitflag = MAF
guardflag = L
animtype = Heavy
air.animtype = back
fall.animtype = back
priority = 5,Hit
damage = ceil(ifelse((70*fvar(10))<7,7,(70*fvar(10)))),ceil(ifelse((70*fvar(10)/8)<7,7,(70*fvar(10)/8)))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -9
hitsound = S2, 5
guardsound = S1, 0
ground.type = Low
air.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -6,-4.5
guard.velocity = -8
air.velocity = -6,-4.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -15
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
fall = 1
air.fall = 1
fall.recover = 0
yaccel = 0.328125*(25.0/16.0)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -9

[State 440, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪衝
[Statedef 1810]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 1810
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 620, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3, 2
channel = 1

[State 620, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 195,0
channel = 0

[State 1100, Gravity]
type = Veladd
trigger1 = 1
y = .55

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 6
movetype = I

[State 620, 1]
type = Hitdef
trigger1 = AnimElem = 4
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((77*fvar(10))<7,7,(77*fvar(10)))),ceil(ifelse((77*fvar(10)/8)<7,7,(77*fvar(10)/8)))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -38
hitsound = S2, 2
guardsound = S1, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -1.5,10
guard.velocity = -8
air.velocity =  -5,10
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
fall = 1
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -68

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1815

;---------------------------------------------------------------------------
;百鬼豪斬（着地）
[Statedef 1815]
type    = S
physics = S
ctrl = 0
anim = 1815
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪断
[Statedef 1820]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 1820
poweradd = 17*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10

[State 620, Effect]
type = PlaySnd
trigger1 = AnimElem = 2
value = 3, 5
channel = 1

[State 620, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,2
channel = 0

[State 1100, Gravity]
type = Veladd
trigger1 = 1
y = .55

[State 620, 1]
type = Hitdef
trigger1 = AnimElem = 3
attr = A, SA
hitflag = MAF
guardflag = MA
animtype = Heavy
air.animtype = up
fall.animtype = up
priority = 5,Hit
damage = ceil(ifelse((84*fvar(10))<7,7,(84*fvar(10)))),ceil(ifelse((84*fvar(10)/8)<7,7,(84*fvar(10)/8)))
pausetime = ceil(13*(2-(var(16)>0))/2),ceil(13*(2-(var(16)>0))/2)
sparkno = S8210+(random%8)
guard.sparkno = S8105
sparkxy = -10, -63
hitsound = S2, 5
guardsound = S1, 0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -1.5,10
guard.velocity = -8
air.velocity =  -5,10
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -20
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = ifelse(var(17),70,214)*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10,35*(1000+var(24))/1000*!(var(15)||var(16))*(10+((var(12)&&var(59))*6))/10
givepower = 35, 35
persistent = 0
fall = 1
air.fall = 1
fall.recover = !var(16)
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -73

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1825

;---------------------------------------------------------------------------
;百鬼豪断（着地）
[Statedef 1825]
type    = S
physics = S
ctrl = 0
anim = 1825
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪砕（掴みモーション）
[Statedef 1830]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 1830+var(6)

[State 1100, Gravity]
type = Veladd
trigger1 = 1
y = .47

[State 900, 1]
type = HitDef
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [-const(size.ground.front),11]
triggerall = P2bodydist Y = [-18,-enemynear,const(size.head.pos.y)+2]
trigger1 = AnimElem = 1
attr = A, ST
hitflag = MA-
priority = 3, Miss
sparkno = -1
p1facing = 1
p2facing = 1
p2getp1state = 1
p1stateno = 1835
p2stateno = 1839
guard.dist = 0
fall = 1
air.fall = 1
fall.recover = 0
numhits = 0

[State 900, 1]
type = HitDef
triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [-const(size.ground.front),11]
triggerall = P2bodydist Y = [-18,-enemynear,const(size.head.pos.y)+2]
triggerall = var(16)
trigger1 = AnimElem = 1
attr = A, ST
hitflag = MAF
priority = 3, Miss
sparkno = -1
p1facing = 1
p2facing = 1
p2getp1state = 1
p1stateno = 1835
p2stateno = 1839
guard.dist = 0
fall = 1
air.fall = 1
fall.recover = 0
numhits = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1810

;---------------------------------------------------------------------------
;百鬼豪砕
[Statedef 1835]
type    = A
movetype = A
physics = N
velset = 0,0
anim = 1835

[State 3001, Width]
type = Width
trigger1 = 1
edge = 25,0

[State 901, Throw]
type = TargetState
trigger1 = Time = 0
value = 1837

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 3
x = 1.5
y = -4.5

[State 1100, Gravity]
type = VelAdd
trigger1 = AnimElemTime(3) > 0
y = .55

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 900, 0
channel = 1

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 195, 10
channel = 0

[State 620, Voice]
type = PlaySnd
trigger1 = AnimElem = 3
value = 3,5

[State 901,1]
type = BindToTarget
trigger1 = AnimElem = 1
pos = -10,25,Head
time = -1

[State 901,1]
type = TargetBind
trigger1 = AnimElem = 3
pos = -24, -58
time = -1

[State 901,1]
type = TargetBind
trigger1 = AnimElem = 4
pos = -19, -86
time = -1

[State 901,1]
type = TargetBind
trigger1 = AnimElem = 5
pos = 20, -86
time = -1

[State 901,1]
type = TargetBind
trigger1 = AnimElem = 6
pos = 25, -78
time = -1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1836

;---------------------------------------------------------------------------
;百鬼豪砕（叩きつけ）
[Statedef 1836]
type    = S
movetype = A
physics = N
velset = 0,0
anim = 1836

[State 901, Throw]
type = TargetState
trigger1 = Time = 0
value = 1838

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 1
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 1
Anim = 8310
pos = 0, 5
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 901,1]
type = TargetBind
trigger1 = animelem = 1
pos = 30,0
time = 20

[State 620, Voice]
type = PlaySnd
trigger1 = time = 0
value = 2,2

[State 620, Voice]
type = PlaySnd
trigger1 = time = 0
value = 5100,1

[State 3001, Add Hits!]
type = HitAdd
trigger1 = AnimElem = 1
value = 1

[State -2, Combo]
type = VarAdd
trigger1 = AnimElem = 1
var(17) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = AnimElem = 1
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = var(17) >= 2
trigger1 = AnimElem = 1
var(50)=ifelse(var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = ceil(ifelse((-77*fvar(10))>-7,-7,(-77*fvar(10))))

[State 901, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 1
value = 35

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElem = 1
time = 20
ampl = 5

[State 901, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪砕（相手）
[Statedef 1837]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1837

[State 3001, Anim]
type = sprpriority
trigger1 = AnimElem = 4
value = 2

[State 3001, Anim]
type = AngleSet
trigger1 = AnimElem = 5
value = 90

[State 3001, Anim]
type = AngleSet
trigger1 = AnimElem = 6
value = 0

[State 3001, Anim]
type = AngleDraw
trigger1 = AnimElemTime(5) >= 0
trigger1 = AnimElemTime(6) < 0

;---------------------------------------------------------------------------
;百鬼豪砕（相手）2
[Statedef 1838]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = 2

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1838

[State 902, 1]
type = NotHitBy
trigger1 = Time <= 20
value = SCA

[State 903, Vel]
type = VelSet
trigger1 = AnimElemTime(1) = 20
x = -4.5
y = -6

[State 903, Vel]
type = veladd
trigger1 = AnimElemTime(1) >= 20
y = .49

[State 903, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(1) > 30
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;百鬼豪砕（相手）3
[Statedef 1839]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1205, ChangeState]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;百鬼豪墜（掴みモーション）
[Statedef 1840]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
anim = 1830+var(6)

[State 1100, Gravity]
type = Veladd
trigger1 = 1
y = .47

[State 900, 1]
type = HitDef
triggerall = P2MoveType != H
triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [-const(size.ground.front),30]
triggerall = P2bodydist Y = [-45,-enemynear,const(size.head.pos.y)-23]
trigger1 = AnimElem = 1
attr = A, ST
hitflag = MA-
priority = 3, Miss
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 1845
p2stateno = 1849
guard.dist = 0
fall = 1
air.fall = 1
fall.recover = 0
numhits = 0

[State 900, 1]
type = HitDef
triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [-const(size.ground.front),30]
triggerall = P2bodydist Y = [-45,-enemynear,const(size.head.pos.y)-23]
triggerall = var(16)
trigger1 = AnimElem = 1
attr = A, ST
hitflag = MAF
priority = 3, Miss
sparkno = -1
p1facing = 1
p2facing = 1
p1stateno = 1845
p2stateno = 1849
guard.dist = 0
fall = 1
air.fall = 1
fall.recover = 0
numhits = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 1820

;---------------------------------------------------------------------------
;百鬼豪墜
[Statedef 1845]
type    = A
movetype = A
physics = N
velset = 0,0
anim = 1845

[State 3001, Width]
type = Width
trigger1 = 1
edge = 30,0

[State 901, Throw]
type = TargetState
trigger1 = Time = 0
value = 1847

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 4
y = -8

[State 1100, Velocity]
type = VelMul
trigger1 = AnimElemTime(2) > 0
x = .98

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElemTime(16) = 3
x = 0

[State 1100, Gravity]
type = VelAdd
trigger1 = AnimElemTime(2) > 0
trigger1 = AnimElemTime(16) < 3
y = .2

[State 1100, Gravity]
type = VelAdd
trigger1 = AnimElemTime(16) >= 3
y = .55

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 900, 0
channel = 1

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
trigger3 = AnimElem = 11
trigger4 = AnimElem = 15
value = 3, 5

[State 901, Effect]
type = PlaySnd
trigger1 = AnimElem = 8
value = 3000, 1
channel = 0

[State 901,1]
type = TargetBind
trigger1 = AnimElem = 1
pos = 30,0
time = -1

[State 901,1]
type = targetBind
trigger1 = animelem = 2
pos = -16,-70
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 3
trigger2 = AnimElem = 7
trigger3 = AnimElem = 11
trigger4 = AnimElem = 15
pos = 0,-45
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 4
trigger2 = AnimElem = 8
trigger3 = AnimElem = 12
trigger4 = AnimElem = 16
pos = 10,-24
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 5
trigger2 = AnimElem = 9
trigger3 = AnimElem = 13
pos = -24,-16
time = -1

[State 901,1]
type = targetBind
trigger1 = AnimElem = 6
trigger2 = AnimElem = 10
trigger3 = AnimElem = 14
pos = -20, -60
time = -1

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 1846

;---------------------------------------------------------------------------
;百鬼豪墜（叩きつけ）
[Statedef 1846]
type    = S
movetype = A
physics = N
velset = 0,0
anim = 1846

[State 901, Throw]
type = TargetState
trigger1 = Time = 0
value = 1848

[State 901, Throw]
type = Turn
trigger1 = animelem = 2

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 1
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 1000, Spark]
type = Explod
trigger1 = AnimElem = 1
Anim = 8310
pos = 0, 5
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 901,1]
type = TargetBind
trigger1 = animelem = 1
pos = 25,0
time = 1

[State 620, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 2,2

[State 620, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 5100,1

[State 3001, Add Hits!]
type = HitAdd
trigger1 = AnimElem = 1
value = 1

[State -2, Combo]
type = VarAdd
trigger1 = AnimElem = 1
var(17) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = AnimElem = 1
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = var(17) >= 2
trigger1 = AnimElem = 1
var(50)=ifelse(var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 901, Hurt]
type = TargetLifeAdd
trigger1 = AnimElem = 1
value = ceil(ifelse((-98*fvar(10))>-7,-7,(-98*fvar(10))))

[State 901, Hurt]
type = TargetPowerAdd
trigger1 = AnimElem = 1
value = 35

[State 903, EnvShake]
type = EnvShake
trigger1 = AnimElem = 1
time = 20
ampl = 5

[State 901, State End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;百鬼豪墜（相手）
[Statedef 1847]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 1201, screenbound]
type = screenbound
trigger1 = 1
value = 1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1847

;---------------------------------------------------------------------------
;百鬼豪墜（相手）2
[Statedef 1848]
type    = A
movetype = H
physics = N
velset = 0,0
sprpriority = -1

[State 902, 1]
type = ChangeAnim2
trigger1 = Time = 0
value = 1838

[State 902, 1]
type = NotHitBy
trigger1 = Time <= 15
value = SCA

[State 903, Vel]
type = VelSet
trigger1 = AnimElemTime(1) = 15
x = -3.5
y = -7.5

[State 903, Vel]
type = veladd
trigger1 = AnimElemTime(1) >= 15
y = .4

[State 903, EnvShake]
type = EnvShake
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
time = 10

[State 903, 2]
type = SelfState
trigger1 = AnimElemTime(1) > 25
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;百鬼豪墜（相手）3
[Statedef 1849]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1205, ChangeState]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;滅殺豪波動
[Statedef 3000]
type    = S
movetype = A
physics = S
juggle = 0
ctrl = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1356

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1357

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = Time = 0
var(5) = ifelse(((Map(y)||Map(r_y)) && Power >= 2000) || ((Map(z)||Map(r_z)) && (Power >= 2000 && Power < 3000)), 1, ifelse((Map(z)||Map(r_z)) && Power >= 3000, 2, 0))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = !var(17)
trigger1 = Time = 0
var(5) = ifelse(power>=2000&&P2movetype=A, floor(power*.001)-1, random%(1+(power>=2000)))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = var(17)
trigger1 = Time = 0
var(5) = ifelse((floor(power*.001)-(P2life<120)-(P2life<240)-1)<0,0,floor(power*.001)-(P2life<120)-(P2life<240)-1)

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && !var(14)) || var(20) = 4 
trigger1 = Time = 0
var(5) = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(15)
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(16)
trigger1 = Time = 0
var(5) = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 3000

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifelse(!var(5), 53, ifelse(var(5) = 1, 59, 64))

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 4
time = 50+(var(5)*2)
movetime = 50+(var(5)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, VarSet]
type = VarSet
triggerall = Time = 4
trigger1 = enemynear,stateno != [120,155]
trigger1 = !(enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "H”" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane")
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "H”" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4400,4405]))
trigger4 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 50+(var(5)*2)

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = time = 0
value = ifelse(!var(5), -1000, ifelse(var(5) = 1, -2000, -3000))

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 4
trigger1 = time = 0
value = -1000

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1
trigger1 = time = 0
value = -1500

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(16)
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(15)
trigger1 = time = 0
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 0
fvar(13) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(14) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(15) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !(var(0)&2**2) && prevstateno != [3000,3999]
trigger1 = time = 4
time = 999
TimeGap  = 1
FrameGap = 9
length = 27
PalBright = 1,1,1
PalContrast = ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 150)),ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 50)),ifelse(!var(5), 128, ifelse(var(5) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .9,.9,.9
trans = add1

[State 3001, Super]
type = Helper
trigger1 = Time = 2
id = 8000
name = "Super"
pos = -24,-48
postype = P1
stateno = ifelse((var(20)=[3,5]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,var(12)
channel = 0

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 27
value = 3000,1
channel = 0

[State 1000, Effect]
type = PlaySnd
trigger1 = AnimElem = 27
value = 1000, 1

[State 1100, Fire1]
type = Explod
trigger1 = AnimElem = 1
Anim = 7701
pos = 0,0
postype = p1
ownpal = 1
ignorehitpause = 1
ID = 1357
bindtime = -1
sprpriority = -1
removetime = -1
pausemovetime = 99999999999999
supermovetime = 99999999999999

[State -2, Power Chage]
type = RemoveExplod
trigger1 = AnimElem = 23
ID = 1357

[State -3,Super]
type = Helper
trigger1 = AnimElemTime(27) = 1
id = 7300
name = "hadouken"
pos = 70,-65
postype = P1
stateno = 7300
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2000, AfterImagePersist]
type = AfterImageTime
trigger1 = Time > 1
time = 2

[State 1000, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;滅殺豪波動（飛び道具）
[Statedef 7300]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7300+parent,var(12)
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 7000, VarSet]
type = Null
trigger1 = time = 0
trigger1 = 1 || var(5) := root,var(5)
trigger1 = 1 || var(12) := root,var(12)

[State 7000, VarSet]
type = Null
trigger1 = 1 || var(15) := root,var(15)
trigger1 = 1 || var(16) := root,var(16)
trigger1 = 1 || var(17) := root,var(17)
trigger1 = 1 || var(24) := root,var(24)
trigger1 = 1 || fvar(10) := root,fvar(10)

[State 1100, Velocity]
type = VelSet
trigger1 = time = 0
x = 5.5 + (var(5)*0.125)

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(3005) = 1
trigger2 = root,projhittime(3006) = 1
trigger3 = root,projhittime(3007) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(3005) = 1
trigger2 = root,projhittime(3006) = 1
trigger3 = root,projhittime(3007) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
trigger1 = time = 0
projanim = 7050
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projmisstime = 0
projhits = 4+var(5)*2
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = vel X, vel Y
attr = A, HP
damage=ceil(ifelse((42*fvar(10))<7,7,(42*fvar(10)))),ceil(ifelse((42*fvar(10)/8)<7,7,(42*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = M
pausetime = 3,11
sparkno = -1
guard.sparkno = S8105
sparkxy = 0, 0
hitsound = S2,ifelse(var(5)=2,16,15)
guardsound = S1,1
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -5, -6.67
guard.velocity = -8
air.velocity = -5, -6.67
airguard.velocity = -6.67,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8); = ifelse(((P2MoveType = H && P2stateType = A)&&(parent,prevstateno = [1000,3999])),0,8)
fall = 1
fall.recover = 0
air.fall = 1
envshake.time = 12
envshake.ampl = 2
ProjID = 3005+var(5)
getpower = 0,0
givepower = 35, 35
palfx.color = ifelse(var(5)=2,64,255)
palfx.add = ifelse(var(5)=2,1,255),ifelse(var(5)=2,1,255),ifelse(var(5)=2,1,255)
palfx.mul = ifelse(var(5)=2,100,128),ifelse(var(5)=2,60,128),ifelse(var(5)=2,60,128)
palfx.time = ifelse(var(5)=2,64,12*((root,var(0)&2**12)/2**12))
forcestand = 1
yaccel = 0.328125*(25.0/16.0)

[State 3001, Super]
type = Explod
trigger1 = root,projhittime(3005) = 1
trigger2 = root,projhittime(3006) = 1
trigger3 = root,projhittime(3007) = 1
id = 8220
name = "projhit_s"
pos = 0,0
postype = P1
anim = 8220+(random%8)
ownpal = 1
ontop = 1
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
size.xscale = 1
size.yscale = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(3005) = 1
trigger2 = root,projhittime(3006) = 1
trigger3 = root,projhittime(3007) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 4
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(3005) = 1 || root,ProjContactTime(3006) = 1 || root,ProjContactTime(3007) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(3005) && !root,NumProjID(3006) && !root,NumProjID(3007)
value = 7305

;---------------------------------------------------------------------------
;滅殺豪波動（飛び道具）（消滅）
[Statedef 7305]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7305-(29*var(12))

[State -3, Blocking5]
type = helper
triggerall = !NumHelper(8130)
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(3005) = 1
trigger2 = root,projhittime(3006) = 1
trigger3 = root,projhittime(3007) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, Spark]
type = angledraw
trigger1 = 1
scale = 1+(.1*var(12)),1+(.1*var(12))

[State 9000, Assert]
type = trans
trigger1 = 1
trans = add

[State 1100, Voice]
type = PlaySnd
triggerall = !parent,var(36)
trigger1 = time = 1
value = 1, 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;------------------------------------------------------------------------------------------
;滅殺豪昇龍
[Statedef 3100]
type    = S
movetype = A
physics = N
juggle = 8
ctrl = 0
velset = 0,0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1356

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1357

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = Time = 0
var(5) = ifelse(((Map(y)||Map(r_y)) && Power >= 2000) || ((Map(z)||Map(r_z)) && (Power >= 2000 && Power < 3000)), 1, ifelse((Map(z)||Map(r_z)) && Power >= 3000, 2, 0))
;var(5) = ifelse((command = "滅殺豪昇龍2" && Power >= 2000) || (command = "滅殺豪昇龍3" && (Power >= 2000 && Power < 3000)), 1, ifelse(command = "滅殺豪昇龍3" && Power >= 3000, 2, 0))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = !var(17)
trigger1 = Time = 0
var(5) = ifelse(power>=2000&&P2movetype=A, floor(power*.001)-1, random%(1+(power>=2000)))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = var(17)
trigger1 = Time = 0
var(5) = ifelse((floor(power*.001)-(P2life<150)-(P2life<300)-1)<0,0,floor(power*.001)-(P2life<150)-(P2life<300)-1)

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && !var(14)) || var(20) = 4 
trigger1 = Time = 0
var(5) = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(15)
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(16)
trigger1 = Time = 0
var(5) = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = ifelse(!var(5), 3100, ifelse(var(5) = 1, 3110, 3120))

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifelse(!var(5), 53, ifelse(var(5) = 1, 59, 64))

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 4
time = 50+(var(5)*2)
movetime = 50+(var(5)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, VarSet]
type = VarSet
triggerall = Time = 4
trigger1 = enemynear,stateno != [120,155]
trigger1 = !(enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "H”" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane")
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "H”" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4400,4405]))
trigger4 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 50+(var(5)*2)

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = time = 0
value = ifelse(!var(5), -1000, ifelse(var(5) = 1, -2000, -3000))

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 4
trigger1 = time = 0
value = -1000

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1
trigger1 = time = 0
value = -1500

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(16)
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(15)
trigger1 = time = 0
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 0
fvar(13) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(14) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(15) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !(var(0)&2**2) && prevstateno != [3000,3999]
trigger1 = time = 4
time = 999
TimeGap  = 1
FrameGap = 15
length = 45
PalBright = 1,1,1
PalContrast = ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 150)),ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 50)),ifelse(!var(5), 128, ifelse(var(5) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .9,.9,.9
trans = add1

[State 3001, Super]
type = Helper
trigger1 = Time = 2
id = 8000
name = "Super"
pos = 11,-54
postype = P1
stateno = ifelse((var(20)=[3,5]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 105, 1]
type = statetypeset
trigger1 = var(5) != 2 && AnimElem = 16
trigger2 = var(5) = 2 && AnimElem = 27
movetype = I

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3000,var(12)
channel = 0

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 2
value = 0,0
channel = 0

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 13 && var(5) = 2
value = 0,1+var(12)
channel = 0

[State 1100, Voice]
type = PlaySnd
trigger1 = var(5) != 2 && AnimElem = 13
trigger2 = var(5) = 2 && AnimElem = 23
value = 0,2
channel = 0

[State 1100, Effect]
type = PlaySnd
trigger1 = AnimElem = 3 || AnimElem = 12 || AnimElem = 22
value = 3,2
channel = 2

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 11
trigger2 = var(5) = 2 && AnimElem = 21
value = 105, 0

[State 52, Effect]
type = PlaySnd
trigger1 = var(5) != 2 && AnimElem = 11
trigger2 = var(5) = 2 && AnimElem = 21
value = 100, 10

[State 1100, StateType]
type = StateTypeSet
trigger1 = var(5)!=2 && AnimElemTime(14) = 1
trigger2 = var(5)=2 && AnimElemTime(24) = 1
StateType = A
physics = N

[State 3001, Width]
type = Width
trigger1 = 1
edge = 5,0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 2
x = 4

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 6
trigger2 = var(5)=2 && AnimElem = 11
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 11
x = ifelse(var(5)=1,13.333,8.667)

[State 1100, Velocity]
type = VelSet
trigger1 = var(5)=2 && AnimElem = 21
x = 13.333

[State 1100, Velocity]
type = VelMul
trigger1 = StateType = S
x = .95

[State 1100, Velocity]
type = VelMul
trigger1 = var(5)!=2 && AnimElemTime(14) > 1
trigger2 = var(5)=2 && AnimElemTime(24) > 1
x = .8

[State 1100, Velocity]
type = VelSet
triggerall = vel x < .1
trigger1 = var(5)!=2 && AnimElemTime(14) > 1
trigger2 = var(5)=2 && AnimElemTime(24) > 1
x = 0

[State 1100, Velocity]
type = VelSet
trigger1 = var(5)!=2 && AnimElemTime(14) = 1
trigger2 = var(5)=2 && AnimElemTime(24) = 1
x = ifelse(!var(5), 3.333, 8)
y = ifelse(!var(5), -10.667, -13.333)

[State 1100, Gravity]
type = VelAdd
trigger1 = var(5)!=2 && AnimElemTime(14) > 1
trigger2 = var(5)=2 && AnimElemTime(24) > 1
y = .667

[State 3001, Super]
type = Helper
trigger1 = AnimElem = 11
trigger2 = var(5)=2 && AnimElem = 21
trigger3 = var(5)!=2 && AnimElemTime(14) = 1
trigger4 = var(5)=2 && AnimElemTime(24) = 1
id = 8020
name = "jump Effect"
pos = 0,0
postype = P1
stateno = 8020
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 0
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 2
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse((77*fvar(10))<7,7,(77*fvar(10)))),ceil(ifelse((77*fvar(10)/8)<7,7,(77*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,6
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -30
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 0
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
triggerall = var(5)!=1
trigger1 = AnimElem = 3
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse(((ifelse(!var(5),70,84))*fvar(10))<7,7,((ifelse(!var(5),70,84))*fvar(10)))),ceil(ifelse(((ifelse(!var(5),70,84))*fvar(10)/8)<7,7,((ifelse(!var(5),70,84))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,6
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -59
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 0
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
triggerall = var(5)=1
trigger1 = AnimElem = 3
attr = S, HA
animtype  = Heavy
air.animtype  = Back
damage=ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10)))),ceil(ifelse((49*fvar(10)/8)<7,7,(49*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,6
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -59
hitsound   = S2,2
guardsound = S1,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 0
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
triggerall = var(5)!=1
trigger1 = AnimElem = 4
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage=ceil(ifelse(((ifelse(Var(5)=2,72,35))*fvar(10))<7,7,((ifelse(Var(5)=2,72,35))*fvar(10)))),ceil(ifelse(((ifelse(Var(5)=2,72,35))*fvar(10)/8)<7,7,((ifelse(Var(5)=2,72,35))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,6
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -75
hitsound = S2,2
guardsound = S1,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 0
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
triggerall = var(5)=1
trigger1 = AnimElem = 4
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage=ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10)))),ceil(ifelse((28*fvar(10)/8)<7,7,(28*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,6
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -75
hitsound = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 0
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 12
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage=ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10)))),ceil(ifelse((56*fvar(10)/8)<7,7,(56*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,6
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -30
hitsound = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 0
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
triggerall = var(5)!=1
trigger1 = AnimElem = 13
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage=ceil(ifelse(((ifelse(!var(5),49,77))*fvar(10))<7,7,((ifelse(!var(5),49,77))*fvar(10)))),ceil(ifelse(((ifelse(!var(5),49,77))*fvar(10)/8)<7,7,((ifelse(!var(5),49,77))*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,6
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -59
hitsound = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 0
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
triggerall = var(5)=1
trigger1 = AnimElem = 13
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage=ceil(ifelse((28*fvar(10))<7,7,(28*fvar(10)))),ceil(ifelse((28*fvar(10)/8)<7,7,(28*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,6
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -59
hitsound = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 0
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
triggerall = var(5)!=2
trigger1 = AnimElem = 14
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,6
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -75
hitsound = S2,2
guardsound = S1,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.5,-6.5
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
triggerall = var(5)=2
trigger1 = AnimElem = 14
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage=ceil(ifelse((49*fvar(10))<7,7,(49*fvar(10)))),ceil(ifelse((49*fvar(10)/8)<7,7,(49*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 6,6
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -75
hitsound = S2,2
guardsound = S1,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 0
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 22
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage=ceil(ifelse((56*fvar(10))<7,7,(56*fvar(10)))),ceil(ifelse((56*fvar(10)/8)<7,7,(56*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 19,19
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -30
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 10
envshake.ampl = 3
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 0
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 23
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage=ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10)))),ceil(ifelse((35*fvar(10)/8)<7,7,(35*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 19,19
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -59
hitsound   = S2,2
guardsound = S1,0
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.33,0
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 0
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 1100, HitDef]
type = HitDef
trigger1 = AnimElem = 24
attr = S, HA
animtype  = Heavy
air.animtype  = Up
damage=ceil(ifelse((21*fvar(10))<7,7,(21*fvar(10)))),ceil(ifelse((21*fvar(10)/8)<7,7,(21*fvar(10)/8)))
priority  = 7, Hit
hitflag = MAF
guardflag = M
pausetime = 19,19
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -75
hitsound   = S2,2
guardsound = S1,0
ground.type = Low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = -5.5,-6.5
guard.velocity = -8
air.velocity = -5.5,-6.5
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
envshake.time = 14
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall = 1
fall.recover = 0
air.fall = 1
yaccel = 0.328125*(25.0/16.0)
persistent = 0
getpower = 0,0
givepower = 35, 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
forcestand = 1

[State 2000, AfterImagePersist]
type = AfterImageTime
trigger1 = Time > 2
time = 2

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 2
trigger2 = AnimElem = 12
trigger3 = AnimElem = 22
ignorehitpause = 1
var(39) = -30

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 3
trigger2 = AnimElem = 13
trigger3 = AnimElem = 23
ignorehitpause = 1
var(39) = -59

[State 3001, VarSet]
type = VarSet
trigger1 = AnimElem = 4
trigger2 = AnimElem = 15
trigger3 = AnimElem = 26
ignorehitpause = 1
var(39) = -75

[State 1100, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3105

;---------------------------------------------------------------------------
;滅殺豪昇龍（着地）
[Statedef 3105]
type    = S
physics = S
ctrl = 0
anim = ifelse(var(12),3106,3105)
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;天魔豪斬空
[Statedef 3200]
type    = A
movetype = A
physics = N
juggle = 8
ctrl = 0
velset = 0,0

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = Time = 0
var(5) = ifelse(((Map(y)||Map(r_y)) && Power >= 2000) || ((Map(z)||Map(r_z)) && (Power >= 2000 && Power < 3000)), 1, ifelse((Map(z)||Map(r_z)) && Power >= 3000, 2, 0))
;var(5) = ifelse((command = "滅殺豪昇龍2" && Power >= 2000) || (command = "滅殺豪昇龍3" && (Power >= 2000 && Power < 3000)), 1, ifelse(command = "滅殺豪昇龍3" && Power >= 3000, 2, 0))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = !var(17)
trigger1 = Time = 0
var(5) = ifelse(power>=2000&&P2movetype=A, floor(power*.001)-1, random%(1+(power>=2000)))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = var(17)
trigger1 = Time = 0
var(5) = ifelse((floor(power*.001)-(P2life<120)-(P2life<240)-1)<0,0,floor(power*.001)-(P2life<120)-(P2life<240)-1)

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && !var(14)) || var(20) = 4 
trigger1 = Time = 0
var(5) = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(15)
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(16)
trigger1 = Time = 0
var(5) = 0

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 3200

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = ifelse(!var(5), 53, ifelse(var(5) = 1, 59, 64))

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 4
time = 50+(var(5)*2)
movetime = 50+(var(5)*2)
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, VarSet]
type = VarSet
triggerall = Time = 4
trigger1 = enemynear,stateno != [120,155]
trigger1 = !(enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "H”" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane")
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "H”" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4400,4405]))
trigger4 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 50+(var(5)*2)

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = time = 0
value = ifelse(!var(5), -1000, ifelse(var(5) = 1, -2000, -3000))

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 4
trigger1 = time = 0
value = -1000

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1
trigger1 = time = 0
value = -1500

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(16)
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(15)
trigger1 = time = 0
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 0
fvar(13) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(14) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(15) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !(var(0)&2**2) && prevstateno != [3000,3999]
trigger1 = time = 4
time = 999
TimeGap  = 1
FrameGap = 13
length = 39
PalBright = 1,1,1
PalContrast = ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 150)),ifelse(!var(5), 128, ifelse(var(5) = 1, 50, 50)),ifelse(!var(5), 128, ifelse(var(5) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .9,.9,.9
trans = add1

[State 3001, Super]
type = Helper
trigger1 = Time = 2
id = 8000
name = "Super"
pos = 48,-42
postype = P1
stateno = ifelse((var(20)=[3,5]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 920, 0]
type = Posfreeze
trigger1 = AnimElemTime(8) < 0

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem >= 8
x = -.5

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 8
y = -9-var(5)

[State 1100, Gravity]
type = Veladd
trigger1 = AnimElemTime(8) >= 0
y = .47

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 180,1
channel = 0

[State 1100, Voice]
type = PlaySnd
trigger1 = AnimElem = 7
value = 3200,0
channel = 0

[State 1000, Effect]
type = PlaySnd
trigger1 = AnimElem = 7
value = 1000, 1

[State -3,Super]
type = Helper
trigger1 = AnimElemTime(7) = 1
id = 7400
name = "tenma"
pos = 54,-48
postype = P1
stateno = 7400
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 2000, AfterImagePersist]
type = AfterImageTime
trigger1 = Time > 2
time = 2

[State 1000, ChangeState]
type = ChangeState
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3205

;---------------------------------------------------------------------------
;天魔豪斬空（着地）
[Statedef 3205]
type    = S
physics = S
ctrl = 0
anim = ifelse(var(12),3206,3205)
velset = 0,0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 52, Effect]
type = PlaySnd
trigger1 = Time = 0
value = 52, 0
channel = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;天魔豪斬空（飛び道具）
[Statedef 7400]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 4.5,4
anim = 7400+parent,var(12)
sprpriority = 4

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 7000, VarSet]
type = Null
trigger1 = time = 0
trigger1 = 1 || var(5) := root,var(5)
trigger1 = 1 || var(12) := root,var(12)

[State 7000, VarSet]
type = Null
trigger1 = 1 || var(15) := root,var(15)
trigger1 = 1 || var(16) := root,var(16)
trigger1 = 1 || var(17) := root,var(17)
trigger1 = 1 || var(24) := root,var(24)
trigger1 = 1 || fvar(10) := root,fvar(10)

[State -3, Blocking5]
type = ParentVarAdd
trigger1 = root,projhittime(3205) = 1
trigger2 = root,projhittime(3206) = 1
trigger3 = root,projhittime(3207) = 1
fvar(26) = 1
persistent = 0

[State -3, Blocking5]
type = VarSet
trigger1 = root,projhittime(3205) = 1
trigger2 = root,projhittime(3206) = 1
trigger3 = root,projhittime(3207) = 1
var(4) = 1
persistent = 0

[State 1000, Proj]
type = Projectile
trigger1 = time = 0
projanim = 7250
Projhitanim = -1
Projremanim = -1
projcancelanim = -1
projmisstime = 0
projhits = 4+(var(5)*2)
offset = 0, 0
projpriority = 1
projsprpriority = 4
velocity = 4.5,4
attr = A, HP
damage=ceil(ifelse((35*fvar(10))<7,7,(35*fvar(10)))),ceil(ifelse((35*fvar(10)/8)<7,7,(35*fvar(10)/8)))
animtype = Heavy
hitflag = MAF
guardflag = MA
pausetime = 4,11
sparkno = -1
guard.sparkno = S8105
sparkxy = 0, 10
hitsound = S2,ifelse(var(5)=2,16,15)
guardsound = S1,0
ground.type = Low
ground.slidetime = 14
ground.hittime = 14
air.hittime = 14
guard.ctrltime = 14
ground.velocity = -5.5, 7.5
guard.velocity = -8
air.velocity = -5.5, 7.5
airguard.velocity = -6.67,-1
air.juggle = ifelse(root,var(45)||root,var(22)=-1||root,var(23)=1,0,8)
fall = 1
fall.recover = 0
air.fall = 1
envshake.time = 12
envshake.ampl = 2
envshake.freq = 120
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
ProjID = 3205+var(5)
getpower = 0,0
givepower = 35, 35
palfx.color = ifelse(var(5)=2,64,255)
palfx.add = ifelse(var(5)=2,1,255),ifelse(var(5)=2,1,255),ifelse(var(5)=2,1,255)
palfx.mul = ifelse(var(5)=2,100,128),ifelse(var(5)=2,60,128),ifelse(var(5)=2,60,128)
palfx.time = ifelse(var(5)=2,30,12*((root,var(0)&2**12)/2**12))

[State 3001, Super]
type = Explod
trigger1 = root,projhittime(3205) = 1
trigger2 = root,projhittime(3207) = 1
trigger3 = root,projhittime(3206) = 1
id = 8220
name = "projhit_s"
pos = 0,0
postype = P1
anim = 8220+(random%8)
ownpal = 1
ontop = 1
ignorehitpause = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
size.xscale = 1
size.yscale = 1

[State -3, Blocking5]
type = helper
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(3205) = 1
trigger2 = root,projhittime(3206) = 1
trigger3 = root,projhittime(3207) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 3001, VarSet]
type = VarSet
trigger1 = var(1) = 5
ignorehitpause = 1
var(1) = 0

[State 3001, VarSet]
type = VarSet
trigger1 = root,ProjContactTime(3205) = 1 || root,ProjContactTime(3206) = 1 || root,ProjContactTime(3207) = 1
ignorehitpause = 1
var(1) = 1

[State 3001, VarSet]
type = VarAdd
trigger1 = var(1)
ignorehitpause = 1
var(1) = 1

[State 1000, 0]
type = PosFreeze
trigger1 = var(1)
value = 1
ignorehitpause = 1
persistent = 1

[State 4110, DestroySelf]
type = DestroySelf
triggerall = time > 1
trigger1 = FrontEdgeDist <= -40 && !var(1)

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 7406

[State 900, 4]
type = ChangeState
triggerall = time > 1
trigger1 = !root,NumProjID(3205) && !root,NumProjID(3206) && !root,NumProjID(3207)
value = 7405

;---------------------------------------------------------------------------
;天魔豪斬空（飛び道具）（消滅）
[Statedef 7405]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7405-(19*var(12))

[State -3, Blocking5]
type = helper
triggerall = !NumHelper(8130)
triggerall = root,fvar(8) = 1 || root,fvar(8) = -2
trigger1 = root,projhittime(3205) = 1
trigger2 = root,projhittime(3206) = 1
trigger3 = root,projhittime(3207) = 1
id = 8130
name = "COUNTER HIT EFFECT"
pos = 0,0
postype = P1
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, Spark]
type = angledraw
trigger1 = 1
scale = 1+(.1*var(12)),1+(.1*var(12))

[State 9000, Assert]
type = trans
trigger1 = 1
trans = add

[State 1100, Voice]
type = PlaySnd
triggerall = !parent,var(36)
trigger1 = time = 1
value = 1, 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;天魔豪斬空（飛び道具）（消滅）2
[Statedef 7406]
type    = S
movetype = I
physics = N
ctrl = 0
velset = 0,0
anim = 7405-(19*var(12))

[State 9000, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow
ignorehitpause = 1

[State 1000, Spark]
type = angledraw
trigger1 = 1
scale = 1+(.1*var(12)),1+(.1*var(12))

[State 9000, Assert]
type = trans
trigger1 = 1
trans = add

[State 1100, Voice]
type = PlaySnd
trigger1 = time = 0
value = 1, 1

[State 4110, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0

;---------------------------------------------------------------------------
;瞬獄殺
[Statedef 3300]
type    = S
movetype = A
physics = N
juggle = 8
velset = 0,0
ctrl = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1356

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1357

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(44) = 2

[State 1100, VarSet]
type = VarSet
triggerall = prevstateno = [3000,3999]
trigger1 = Time = 0
var(44) = var(5)

[State 1100, VarSet]
type = VarSet
triggerall = var(0)&2**2
trigger1 = Time = 0
var(44) = 3

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 2

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 3300

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 64

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 4
time = 50
movetime = 50
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 2 || var(20) = 6 || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(15)
trigger1 = time = 0
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 0
fvar(13) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(14) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(15) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !(var(0)&2**2) && prevstateno != [3000,3999]
trigger1 = Time = 2
time = 999
TimeGap  = 1
FrameGap = 12
length = 36
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = .8,.8,.8
trans = add1

[State 3001, Super]
type = Helper
trigger1 = Time = 2
id = 8000
name = "Super"
pos = 5,-99
postype = P1
stateno = ifelse((var(20)=[3,5]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3000, Voice]
type = PlaySnd
triggerall = !var(12)
trigger1 = Time = 3
value = 0,0
channel = 0

[State 3000, Voice]
type = PlaySnd
triggerall = var(12)
trigger1 = Time = 3
value = 3300,0
channel = 0

[State 3000, Voice]
type = PlaySnd
trigger1 = Time = 50
value = 1500,var(12)
channel = 1

[State 3000, Voice]
type = PlaySnd
trigger1 = animtime = 0
value = 52,0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 50
x = ifelse(var(12),7,3.5)

[State 3200]
type = StateTypeSet
triggerall = P2movetype = H
triggerall = !(var(0)&2**2)
trigger1 = Animelem = 2,>= 0
trigger1 = animelem = 3,< 0
movetype = I

[State 3200]
type = StateTypeSet
triggerall = P2movetype != H
trigger1 = teamside = 1
trigger1 = Animelem = 2,>= 0
trigger1 = animelem = 3,< 0
movetype = A

[State 105, 1]
type = statetypeset
trigger1 = AnimElem = 3
movetype = I

[State 1200, 1]
type = HitDef
;triggerall = P2movetype != H
;triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [-const(size.ground.front),25]
triggerall = movetype = A
triggerall = !var(2)
trigger1 = animelem = 2,>= 0
trigger1 = animelem = 3,< 0
attr = S, HT
hitflag = M-
numhits = 0
priority = 7, Miss
sparkno = -1
hitsound   = S900,0
p1stateno = 3301
p2stateno = 3309
guard.dist = 0
p1facing = 1
p2facing = 1
fall = 1
fall.recover = 0
nochainID = var(40)

[State 1200, 1]
type = HitDef
;triggerall = P2StateNo != [150,155]
triggerall = P2bodydist X = [-const(size.ground.front),25]
triggerall = var(0)&2**2
triggerall = !var(2)
trigger1 = animelem = 2,>= 0
trigger1 = animelem = 3,< 0
attr = S, HT
hitflag = MF
numhits = 0
priority = 7, Miss
sparkno = -1
hitsound   = S900,0
p1stateno = 3301
p2stateno = 3309
guard.dist = 0
p1facing = 1
p2facing = 1
fall = 1
fall.recover = 0
nochainID = var(40)

[State 3200]
type = StateTypeSet
triggerall = P2movetype != H
trigger1 = teamside = 2
trigger1 = Animelem = 2,>= 0
trigger1 = animelem = 3,< 0
movetype = A

[State 1200, 2]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;瞬獄殺（発動）
[Statedef 3301]
type    = S
movetype = A
physics = N
juggle = 0
ctrl = 0
anim = 3301
velset = 0,0

[State 901, Throw]
type = TargetState
trigger1 = AnimElem = 1
value = 3305

[State 3001, Width]
type = Width
trigger1 = Time = 0
edge = 50,0

[State 901,1]
type = TargetBind
trigger1 = animelem = 1
pos = 45,0
postype = P1

[State 200, 2]
type = Playsnd
trigger1 = Time = 0
value = 195,10
channel = 0

[State 3105, AssertSpecial]
type = AssertSpecial
trigger1 = !var(12)
trigger1 = Time = [24,83]
trigger2 = var(12)
trigger2 = Time = [24,144]
flag = NoBG
flag2 = NoFG
flag3 = timerfreeze

[State 3105, AssertSpecial]
type = AssertSpecial
trigger1 = win
trigger1 = 1
flag = NoMusic

[State 3000, AfterImage]
type = AfterImage
trigger1 = time = 24
time = 0
TimeGap  = 1
FrameGap = 13
length = 39
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = .9,.9,.9
trans = add1

;10,4,16,8,8,8,16,8,8,4,4,4,4,4,4,4,2,
;8,3,12,6,6,6,12,6,6,3,3,3,3,3,3,3,2...

[State 9606, EnvColor]
type = Playsnd
trigger1 = !var(12)
trigger1 = (Time = [25,83]) && Time % 4 = 0
trigger2 = var(12)
trigger2 = Time = 32 || Time = 35 || Time = 47 || Time = 77 || Time = 83 || Time = 89
trigger3 = var(12)
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4 = var(12)
trigger4 = (Time = [92,113]) && Time % 3 = 2
trigger5 = var(12)
trigger5 = (Time = [115,143]) && Time % 2 = 1
value = 2,2+((random%2)*3)
channel = 5

[State 9606, EnvColor]
type = Playsnd
trigger1 = !var(12)
trigger1 = Time = 84
trigger2 = var(12)
trigger2 = Time = 145
value = 2,22
channel = 5

[State 4110, Explod]
type = Explod
trigger1 = !var(12)
trigger1 = (Time = [25,83]) && Time % 4 = 0
trigger2 = var(12)
trigger2 = Time = 32 || Time = 35 || Time = 47 || Time = 77 || Time = 83 || Time = 89 || Time = 145
trigger3 = var(12)
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4 = var(12)
trigger4 = (Time = [92,113]) && Time % 3 = 2
trigger5 = var(12)
trigger5 = (Time = [115,143]) && Time % 2 = 1
anim = 8200+(random%8)
id = 8201
pos = -15+random%20,-70+random%20
postype = P2
ontop = 1
bindtime = 1
ownpal = 1
facing = ifelse(Random<=500,-1,1)
scale = (120+var(17))*.01,(120+var(17))*.01

[State 3001, Add Hits!]
type = HitAdd
trigger1 = !var(12)
trigger1 = (Time = [25,84]) && Time % 4 = 0
trigger2 = var(12)
trigger2 = Time = 32 || Time = 35 || Time = 47 || Time = 77 || Time = 83 || Time = 89 || Time = 145
trigger3 = var(12)
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4 = var(12)
trigger4 = (Time = [92,113]) && Time % 3 = 2
trigger5 = var(12)
trigger5 = (Time = [115,143]) && Time % 2 = 1
value = 1

[State -2, Combo]
type = VarAdd
trigger1 = !var(12)
trigger1 = (Time = [25,84]) && Time % 4 = 0
trigger2 = var(12)
trigger2 = Time = 32 || Time = 35 || Time = 47 || Time = 77 || Time = 83 || Time = 89 || Time = 145
trigger3 = var(12)
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4 = var(12)
trigger4 = (Time = [92,113]) && Time % 3 = 2
trigger5 = var(12)
trigger5 = (Time = [115,143]) && Time % 2 = 1
var(17) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = !var(12)
trigger1 = (Time = [25,84]) && Time % 4 = 0
trigger2 = var(12)
trigger2 = Time = 32 || Time = 35 || Time = 47 || Time = 77 || Time = 83 || Time = 89 || Time = 145
trigger3 = var(12)
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4 = var(12)
trigger4 = (Time = [92,113]) && Time % 3 = 2
trigger5 = var(12)
trigger5 = (Time = [115,143]) && Time % 2 = 1
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = var(17) >= 2
trigger1 = !var(12)
trigger1 = (Time = [25,84]) && Time % 4 = 0
trigger2 = var(12)
trigger2 = Time = 32 || Time = 35 || Time = 47 || Time = 77 || Time = 83 || Time = 89 || Time = 145
trigger3 = var(12)
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4 = var(12)
trigger4 = (Time = [92,113]) && Time % 3 = 2
trigger5 = var(12)
trigger5 = (Time = [115,143]) && Time % 2 = 1
var(50)=ifelse(var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State 3105, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = !var(12)
trigger1 = (Time = [25,83]) && Time % 4 = 0
trigger2 = var(12)
trigger2 = Time = 32 || Time = 35 || Time = 47 || Time = 77 || Time = 83 || Time = 89
trigger3 = var(12)
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4 = var(12)
trigger4 = (Time = [92,113]) && Time % 3 = 2
trigger5 = var(12)
trigger5 = (Time = [115,143]) && Time % 2 = 1
value = ceil(ifelse(((ifelse(var(12),-14,-32))*fvar(10))>-7,-7,((ifelse(var(12),-14,-32))*fvar(10))))
kill=0

[State 3105, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = !var(12)
trigger1 = Time = 83
value = ceil(ifelse((-109*fvar(10))>-7,-7,(-109*fvar(10))))

[State 3105, TargetLifeAdd]
type = TargetLifeAdd
trigger1 = var(12)
trigger1 = Time = 144
value = ceil(ifelse((-122*fvar(10))>-7,-7,(-122*fvar(10))))

[State 180, 1]
type = TargetPowerAdd
triggerall = var(17) >= 2
trigger1 = !var(12)
trigger1 = (Time = [25,83]) && Time % 4 = 0
trigger2 = var(12)
trigger2 = Time = 32 || Time = 35 || Time = 47 || Time = 77 || Time = 83 || Time = 89 || Time = 145
trigger3 = var(12)
trigger3 = (Time = [48,65]) && Time % 6 = 5
trigger4 = var(12)
trigger4 = (Time = [92,113]) && Time % 3 = 2
trigger5 = var(12)
trigger5 = (Time = [115,143]) && Time % 2 = 1
value = 35
ignorehitpause = 1
persistent = 1

[State 901, Throw]
type = TargetState
trigger1 = !var(12)
trigger1 = Time = 84
trigger2 = var(12)
trigger2 = Time = 145
value = 3306

[State 200, 2]
type = ChangeState
trigger1 = !var(12)
trigger1 = Time = 84
trigger2 = var(12)
trigger2 = Time = 145
value = 3302

;---------------------------------------------------------------------------
;瞬獄殺（発動）（相手）
[Statedef 3305]
type    = S
movetype = H
physics = N
juggle = 0
ctrl = 0
velset = 0, 0
sprpriority = -1

[State 200, 2]
type = ChangeAnim2
trigger1 = time = 0
value = 3305

[State 3000, Voice]
type = PlaySnd
triggerall = Time = 35
triggerall = enemy,var(12)
trigger1 = authorname = "warusaki3"
value = 5950,var(12)

[State 3000, Voice]
type = PlaySnd
triggerall = Time = 35
triggerall = enemy,var(12)
trigger1 = authorname = "H”"
value = 5950+(var(29)*10000),0

[State 3000, Voice]
type = PlaySnd
triggerall = Time = 35
triggerall = enemy,var(12)
trigger1 = authorname = "Sumi"
value = 5950,0

[State 3000, Voice]
type = PlaySnd
triggerall = Time = 35
triggerall = enemy,var(12)
trigger1 = authorname = "mouser"
value = 5950,0

;---------------------------------------------------------------------------
;瞬獄殺（発動）（相手）2
[Statedef 3306]
type    = L
movetype = H
physics = N
juggle = 0
ctrl = 0
anim = 5110
velset = 0, 0
sprpriority = -1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3110, ChangeState]
type = SelfState
trigger1 = Time = 130
value = ifelse(alive, 5120, 5150)

;---------------------------------------------------------------------------
;瞬獄殺（発動）（相手）3
[Statedef 3309]
type    = A
movetype = H
physics = N
velset = 0,0
ctrl = 0

[State 1205, ChangeState]
type = selfstate
trigger1 = Time > 5
value = 5100

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA

;---------------------------------------------------------------------------
;瞬獄殺（終了）
[Statedef 3302]
type = S
ctrl = 0
anim = 3302
velset = 0,0

[State 3105, AssertSpecial]
type = AssertSpecial
trigger1 = win
trigger1 = Time <= 90
flag = NoBarDisplay
flag2 = NoBG
flag3 = noFG

[State 3105, AssertSpecial]
type = AssertSpecial
trigger1 = win
trigger1 = Time <= 90
flag = NoMusic
flag2 = globalnoshadow

[State 3000, AfterImage]
type = AfterImage
triggerall = var(44) != 3
trigger1 = Time = 1
time = 999
TimeGap  = 1
FrameGap = 5
length = 12
PalBright = 1,1,1
PalContrast = ifelse(!var(44), 128, ifelse(var(44) = 1, 50, 150)),ifelse(!var(44), 128, ifelse(var(44) = 1, 50, 50)),ifelse(!var(44), 128, ifelse(var(44) = 1, 150, 50))
PalAdd = 0,0,0
PalMul = .8,.8,.8
trans = add1

[State 3000, AfterImage]
type = AfterImage
triggerall = var(44) = 3
trigger1 = Time = 1
time = 999
TimeGap  = 1
FrameGap = 5
length = 12
PalBright = 1,1,1
PalContrast = 0, 100, 150
PalAdd = 0,0,0
PalMul = .8,.8,.8
trans = add1

[State -3]
type = AfterImageTime
trigger1 = Time > 2
time = 2

[State 900, 0]
type = NotHitBy
trigger1 = 1
value = SCA

[State 900, 0]
type = VarSet
trigger1 = win
trigger1 = Time = 0
var(13) = 1

[State 900, 0]
type = VarSet
trigger1 = win
trigger1 = Time = 91
var(13) = 0

[State 3830,0]
type = Changeanim
trigger1 = Time = 0
trigger1 = win
value = 3303

[State 9606, EnvColor]
type = EnvColor
trigger1 = Time < 0
value = 0,0,0
color = 0
time = 1

[State 9606, EnvColor]
type = Bgpalfx
trigger1 = Time < 0
add = -255,-255,-255
color = 0
time = 1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 191, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 1200, Flames]
type = Explod
trigger1 = Win
anim = 3310+var(12)
id = 3310
pos = ifelse(var(12),-24,0),ifelse(var(12),-40,0)
postype = Left
sprpriority = -4
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0
scale = ifelse(var(12),1.44,1),ifelse(var(12),1.44,1)

[State 191, Cloth]
type = Helper
triggerall = !var(12)
trigger1 = Time = 0
ID = ifelse(anim = 3302, 7901, 7902)
stateno = ifelse(anim = 3302, 7901, 7902)
postype = p1
pos = 0,0
ownpal = 1
name = "ten2"

[State 1200, Flames]
type = Explod
triggerall = var(12)
Triggerall = !NumExplod(183)
trigger1 = Time = 0
trigger1 = Win
anim = ifelse(facing=1,184,185)
id = 183
pos = 0,0
postype = P1
sprpriority = 6
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0
removetime = -1
ontop = 0

[State 1200, Flames]
type = Explod
triggerall = var(12)
Triggerall = !NumExplod(183)
trigger1 = Time = 0
trigger1 = !Win
anim = ifelse(facing=1,3330,3331)
id = 183
pos = 0,0
postype = P1
sprpriority = 6
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0
;removetime = -1
ontop = 0

[State 200, 2]
type = Playsnd
trigger1 = Win
trigger1 = Time = 0
value = 3300, 1
channel = 15

[State 3105, Voice]
type = Playsnd
triggerall = !var(12)
trigger1 = !Win
trigger1 = Time = 0
value = 180, 2
channel = 0

[State 3105, Voice]
type = Playsnd
triggerall = var(12)
trigger1 = Time = 0
trigger1 = !Win
value = 180, 12
channel = 0

[State 3105, Voice]
type = Playsnd
triggerall = var(12)
trigger1 = time = 20
trigger1 = Win
value = 3300, 2
channel = 0

[State 3810,5]
type = Changestate
triggerall = anim = 3303
trigger1 = animTime = 0
value = 3303

[State -2, Power Chage]
type = RemoveExplod
trigger1 = animelem = 2
ID = 183

[State 3810,5]
type = Changestate
trigger1 = animTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;瞬獄殺（終了）（KO時1）
[Statedef 3303]
type    = S
movetype = I
physics = S
ctrl = 1
anim = 3304

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1

[State 3810,5]
type = Changestate
trigger1 = p2movetype = A
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;瞬獄殺（終了）（KO時2）
[Statedef 3304]
type    = S
physics = S
ctrl = 0
velset = 0,0

[State 184,3]
type = Assertspecial
trigger1 = Time <= 150
flag = roundnotover

;---------------------------------------------------------------------------
;禊
[Statedef 3400]
type    = S
movetype = A
physics = S
juggle = 8
velset = 0,0
ctrl = 0

[State 220, Position]
type = PosSet
trigger1 = Time = 0
y = 0

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1356

[State -2, Power Chage]
type = RemoveExplod
trigger1 = Time = 0
ID = 1357

[State 1100, VarSet]
type = VarSet
trigger1 = Time = 0
var(5) = 2

[State 902, 1]
type = ChangeAnim
Trigger1 = Time = 0
value = 3400

[State 170, 1]
type = NotHitBy
trigger1 = Time = 0
value = SCA
time = 65

[State 3000, Superpause]
type = SuperPause
trigger1 = Time = 3
time = 54
movetime = 54
anim = -1
sound = -1
pos = 0,0
darken = 0
p2defmul = 1
poweradd = 0
unhittable = 0

[State 3000, VarSet]
type = VarSet
triggerall = Time = 3
trigger1 = enemynear,stateno != [120,155]
trigger1 = !(enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "H”" && enemynear,fvar(39) = 1)
trigger1 = !(enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane")
trigger2 = enemynear,authorname = "warusaki3" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
trigger3 = enemynear,authorname = "H”" && enemynear,fvar(39) = 1 && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4400,4405]))
trigger4 = enemynear,authorname = "mouser" && enemynear,name = "Hibiki Takane" && ((enemynear,stateno != [120,155]) && (enemynear,stateno != [4100,4120]))
fvar(36) = 50+(var(5)*2)

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 2 || var(20) = 6 || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(15)
trigger1 = time = 0
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 0
fvar(13) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(14) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(15) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 3000, AfterImage]
type = AfterImage
triggerall = !(var(0)&2**2) && prevstateno != [3000,3999]
trigger1 = Time = 3
time = 999
TimeGap  = 1
FrameGap = 14
length = 42
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = .8,.8,.8
trans = add1

[State 3001, Super]
type = Helper
trigger1 = Time = 1
id = 8000
name = "Super"
pos = -13,-55
postype = P1
stateno = ifelse((var(20)=[3,5]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3400,0
channel = 0

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 26
value = 3400,1
channel = 0

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 24
value = 3400,2

[State 3000, Voice]
type = PlaySnd
trigger1 = AnimElem = 26
value = 3400,3

[State 906, ScreenBound]
type = ScreenBound
trigger1 = AnimElemTime(24) >= 0
value = 0

[State 900, 0]
type = PosAdd
trigger1 = AnimElem = 24
x = (P2dist X)-20
y = -210

[State 1100, Velocity]
type = VelSet
trigger1 = AnimElem = 25
y = 15

[State 1100, StateType]
type = StateTypeSet
trigger1 = AnimElem = 24
StateType = A
physics = N

[State 1100, Velocity]
type = playerpush
trigger1 = 1
value = 0

[State 1100, Fire1]
type = Explod
trigger1 = AnimElem = 1
Anim = 7701
pos = 0,0
postype = p1
ownpal = 1
ignorehitpause = 1
ID = 1358
bindtime = -1
sprpriority = -1
removetime = -1
;pausemovetime = 99999999999999
supermovetime = 99999999999999

[State -2, Power Chage]
type = RemoveExplod
trigger1 = AnimElem = 20
ID = 1358

[State 191, Cloth]
type = Helper
trigger1 = AnimElem = 20
ID = 3405
stateno = 3405
postype = p1
pos = 0,0
name = "misogi1"
supermovetime = 999999
ownpal = 1

[State 191, Cloth]
type = Helper
trigger1 = AnimElem = 20
ID = 3406
stateno = 3405
postype = p1
pos = 0,0
name = "misogi2"
supermovetime = 999999
ownpal = 1

[State 1200, 1]
type = HitDef
trigger1 = AnimElem = 26
attr = A, HA
animtype  = hard
hitflag = MAF
guardflag = H
priority = 3, Miss
pausetime = 0, 0
guard.pausetime = 13,13
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = -10, -32
hitsound   = S2,22
guardsound = S1,0
damage    = ceil(ifelse((575*fvar(10))<7,7,(575*fvar(10)))),ceil(ifelse((575*fvar(10)/8)<7,7,(575*fvar(10)/8)))
p2facing = 1
ground.type = low
ground.slidetime = 18
ground.hittime  = 18
guard.ctrltime = 18
ground.velocity = 0,0
guard.velocity = -8
air.velocity =  -5,20
airguard.velocity = -6.67,-1
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = -10
air.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
kill = 1
envshake.time = 14
envshake.ampl = 3
envshake.freq = 135
fall.envshake.time = 10
fall.envshake.ampl = 2
fall.envshake.freq = 35
palfx.time = 12*((var(0)&2**12)/2**12)
palfx.add = 255,255,255
palfx.mul = 128,128,128
fall = 1
air.fall = 1
fall.recover = 0
getpower = 0,0
givepower = 35,35
yaccel = 0.328125*(25.0/16.0)

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(38) = -10

[State 3001, VarSet]
type = VarSet
trigger1 = 1
ignorehitpause = 1
var(39) = -52

[State 1100, ChangeState]
type = ChangeState
triggerall = var(36) = 1 && numtarget
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3402

[State 1100, ChangeState]
type = ChangeState
triggerall = var(36) != 1 || (var(36) = 1 && !numtarget)
trigger1 = Pos Y >= 0 && Vel Y > 0
value = 3401

;---------------------------------------------------------------------------
;禊（着地）（ガード）
[Statedef 3401]
type    = S
physics = S
ctrl = 0
anim = 3401
velset = 0,0

[State 2000, AfterImagePersist]
type = AfterImageTime
trigger1 = AnimElemTime(7) > 4
time = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State -3, Burn sparks]
type = Explod
trigger1 = AnimElem = 1
anim = 7600
id = 7600
postype = p1
pos = 0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 10
scale = 2,2

[State -3, Burn sparks]
type = Explod
trigger1 = AnimElem = 1
anim = 7602
id = 7602
postype = p1
pos = 0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 10
scale = 2,2

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 5100, 1

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3400, 5

[State 903, EnvShake]
type = EnvShake
trigger1 = Time = 1
time = 20

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;禊（着地）（ヒット）
[Statedef 3402]
type    = S
physics = S
ctrl = 0
anim = 3402
velset = 0,0

[State 2000, AfterImagePersist]
type = AfterImageTime
trigger1 = AnimElemTime(15) > 3
time = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1000, Spark]
type = Explod
trigger1 = Time = 0
Anim = 8030
pos = 0, 0
postype = p1
ownpal = 1
sprpriority = -3
;pausemovetime = -1
supermovetime = -1
scale = .5,.5

[State -3, Burn sparks]
type = Explod
trigger1 = AnimElem = 1
anim = 7601
id = 7601
postype = p1
pos = 0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 10
scale = 2,2

[State -3, Burn sparks]
type = Explod
trigger1 = time = 19
anim = 7602
id = 7602
postype = p1
pos = 0,0
ownpal = 1
bindtime = -1
ignorehitpause = 1
sprpriority = 10
scale = 2,2

[State 450, Voice]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3400,4

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 3400, 5

[State 52, Effect]
type = PlaySnd
trigger1 = AnimElem = 1
value = 5100, 1

[State 903, EnvShake]
type = EnvShake
trigger1 = Time = 1
time = 25
ampl = 8

[State 52, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;禊残像
[Statedef 3405]
ctrl = 0
anim = 3405
sprpriority = 5
velset = 0,0

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 0
x = -IsHelper(3405)+IsHelper(3406)

[State 1100, Velocity]
type = VelAdd
trigger1 = 1
x = .03*(-IsHelper(3405)+IsHelper(3406))

[State 8200, Assert]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 8200, Transparency]
type = trans
trigger1 = 1
trans = addalpha
alpha = 256-(time*10),time*10

[State 8200, Destroy]
type = DestroySelf
trigger1 = Time = 25

;---------------------------------------------------------------------------
;禊（相手）1
[Statedef 3450]
type = S
movetype = H
physics = S
velset = 0,0
ctrl = 0

[State 52, 4]
type = ChangeState
trigger1 = Pos Y < 0
value = 2220

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 3450, Velocity]
type = VelSet
trigger1 = Time = 0
x = -3

[State 902, 1]
type = NotHitBy
trigger1 = 1
value = SCA

[State 3003, ChangeAnim]
type = ChangeAnim
triggerall = Time < 16 && SelfAnimExist(5950)
trigger1 = AuthorName = "Tin" || AuthorName = "Mouser" || AuthorName = "H”" || AuthorName = "adamskie" 
trigger2 = AuthorName = "M.M.R." || AuthorName = "ryokucha" || AuthorName = "Bad Darkness" || AuthorName = "Third"
trigger3 = AuthorName = "CAMRAT Type KOF" || AuthorName = "keyu" || AuthorName = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "Nyan☆Kiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "SUMI" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSS†CAT" || AuthorName = "CrossCat"
value = 5950

[State 3003, ChangeAnim]
type = ChangeAnim2
trigger1 = Time < 16 && anim != 5950
value = 3450

[State 3003, ChangeAnim]
type = ChangeAnim
trigger1 = anim = 3450 && animtime = 0
value = 5080

[State 105, 1]
type = statetypeset
triggerall = Anim = 5950 || Anim = 5080
trigger1 = AnimElemTime(AnimElemNo(0)+1)=0
statetype = L

[State 3450,1]
type = ChangeAnim
triggerall = Anim = 5080
trigger1 = AnimElemTime(AnimElemNo(0)+1)=0
value = 5110+(SelfAnimExist(5112)*2)

[State 1100, Velocity]
type = VelSet
trigger1 = Time = 16
x = 0

[State 1100, turn]
type = turn
triggerall = Time >= 100
triggerall = anim = 5950
trigger1 = Name = "cvszangief" && AuthorName = "warusaki3"
trigger2 = Name = "cvszangief_normal" && AuthorName = "warusaki3"
trigger3 = Name = "cvszangief_ex" && AuthorName = "warusaki3"
trigger4 = Name = "raiden" && AuthorName = "H”"

[State 3450,1]
type = ChangeAnim
triggerall = Time = 100
triggerall = SelfAnimExist(5112)
triggerall = anim = 5950
trigger1 = AuthorName = "Tin" || AuthorName = "Mouser" || AuthorName = "H”" || AuthorName = "adamskie" 
trigger2 = AuthorName = "M.M.R." || AuthorName = "ryokucha" || AuthorName = "Bad Darkness" || AuthorName = "Third"
trigger3 = AuthorName = "CAMRAT Type KOF" || AuthorName = "keyu" || AuthorName = "Warusaki3"
trigger4 = AuthorName = "NHK" || AuthorName = "Nyankoro" || AuthorName = "Nyan☆Kiryu"
trigger5 = AuthorName = "aoao" || AuthorName = "SUMI" || AuthorName = "Mr.X-file"
trigger6 = AuthorName = "laiso_7" || AuthorName = "yu-go" || AuthorName = "MEKA"
trigger7 = AuthorName = "CROSS†CAT" || AuthorName = "CrossCat"
value = 5112

[State 3002, ChangeAnim]
type = SelfState
trigger1 = Time >= 100
value = ifelse(alive, 5120, 5150)

;---------------------------------------------------------------------------
; HIT_SHAKE
[Statedef 2220]
movetype = H
physics = N
velset = 0,0

[State 5000, 2] ;Anim for HIT_BACK
type = ChangeAnim
trigger1 = Time = 0
value = 5030

[State 5000, 3] ;Anim for HIT_UP/HIT_DIAGUP (only if it exists)
type = ChangeAnim
trigger1 = Time = 0
trigger1 = (GetHitVar(animtype) = [4,5]) && (SelfAnimExist(5047 + GetHitVar(animtype)))
value = 5047 + GetHitVar(animtype) ;5051 - 4 + type

[State 5000, 4] ;Freeze anim
type = ChangeAnim
trigger1 = Time > 0
value = anim

[State 5000, 5] ;State type gets set to aerial if getting hit up
type = StateTypeSet
trigger1 = Time = 0
trigger1 = GetHitVar(yvel) != 0 || GetHitVar(fall)
trigger2 = Pos Y != 0
statetype = a

[State 5000, 7]
type = ChangeState
trigger1 = HitShakeOver
value = 2230

;---------------------------------------------------------------------------
; HITA_UP (initial going up)
[Statedef 2230]
type    = A
movetype = H
physics = N
ctrl = 0

[State 5030, 1]
type = VelAdd;Gravity
trigger1 = 1
y = GetHitVar(yaccel)

[State 5030, 2]
type = HitVelSet
trigger1 = Time = 0
x = 1
y = 1

[State 5030, 4]
type = ChangeState
trigger1 = HitOver
trigger2 = Vel Y > 0 ;Hit ground
trigger2 = Pos Y >= 10  ;.
value = 2250 ;HITA_FALL

[State 5030, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 2235 ;HITA_UP (transition)

;---------------------------------------------------------------------------
; HITA_UP_T (transition)
[Statedef 2235]
type    = A
movetype = H
physics = N

[State 5035, 1]
type = ChangeAnim
trigger1 = Time = 0
trigger1 = SelfAnimExist(5035)
trigger1 = Anim != [5051,5059] ;Not if in hit up anim
trigger1 = Anim != 5090 ;Not if hit off ground anim
value = 5035

[State 5035, 2]
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5035, 4]
type = ChangeState
trigger1 = HitOver  ;Hit is over
trigger2 = AnimTime = 0 ;Anim is over
trigger3 = Vel Y > 0 ;Hit ground
trigger3 = Pos Y >= 10  ;.
trigger4 = Time = 0  ;No transition anim
trigger4 = Anim != 5035 ;.
value = 2250 ;HITA_FALL

;---------------------------------------------------------------------------
; HITA_FALL (knocked up, falling)
[Statedef 2250]
type    = A
movetype = H
physics = N

[State 5050, 1] ;Change anim when done with transition
type = ChangeAnim
trigger1 = AnimTime = 0
trigger1 = Anim = 5035
trigger2 = Time = 0  ;If no transition anim
trigger2 = Anim != 5035
trigger2 = (Anim != [5051, 5059]) && (Anim != [5061, 5069])
trigger2 = Anim != 5090 ;Not if hit off ground anim
value = 5050

[State 5050, 2] ;Coming down anim
type = ChangeAnim
trigger1 = anim = [5050,5059]
trigger1 = Vel Y >= ifelse(anim = 5050, 1, -2)
trigger1 = SelfAnimExist(anim+10)
value = anim+10
persistent = 0

[State 5050, 3] ;Gravity
type = VelAdd
trigger1 = 1
y = GetHitVar(yaccel)

[State 5050, 6]
type = ChangeState
trigger1 = Vel Y > 0
trigger1 = Pos Y >= ifelse((anim = [5051,5059]) || (anim = [5061,5069]), 0, 25)
value = 2300 ;HIT_BOUNCE

;---------------------------------------------------------------------------
; HITL_SHAKE
[Statedef 2280]
type    = L
movetype = H
physics = N
velset = 0,0

[State 5080, 1] ;Set default anim
type = VarSet
trigger1 = time = 0
sysvar(2) = ifelse(GetHitVar(yvel) = 0, 5080, 5090)

[State 5080, 2]
type = VarAdd
trigger1 = time = 0
trigger1 = (anim = [5081,5089]) || (anim = [5111,5119])
trigger1 = SelfAnimExist(sysvar(2) + (anim % 10))
sysvar(2) = anim % 10

[State 5080, 3] ;If 5090 doesn't exist, default to 5030
type = VarSet
trigger1 = time = 0
trigger1 = sysvar(2) = 5090
trigger1 = !SelfAnimExist(5090)
sysvar(2) = 5030

[State 5080, 3] ;Freeze
type = ChangeAnim
trigger1 = 1
value = sysvar(2)

[State 5080, 4]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) = 0
value = 2281 ;HITL_SLIDE

[State 5080, 5]
type = ChangeState
trigger1 = HitShakeOver
trigger1 = GetHitVar(yvel) != 0
value = 2230 ;HITA_UP

;---------------------------------------------------------------------------
; HITL_SLIDE
[Statedef 2281]
type    = L
movetype = H
physics = C

[State 5081, 1]
type = HitVelSet
trigger1 = Time = 0
x = 1

[State 5081, 2]
type = VelSet
trigger1 = HitOver
x = 0

[State 5081, 3] ;Don't show hit ground frame
type = VarSet
trigger1 = Time = 0
sysvar(0) = 1

[State 5081, 4]
type = ChangeState
trigger1 = HitOver
value = 2310 ;HIT_LIEDOWN

;---------------------------------------------------------------------------
; HIT_BOUNCE (hit ground)
[Statedef 2300]
type    = L
movetype = H
physics = N

[State 5100, 1]
type = VelSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
trigger1 = vel x > 1
x = 1

[State 5100, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5100, Var] ;Save fall velocity
type = VarSet
trigger1 = Time = 0
sysvar(1) = floor(vel y)

[State 5100, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = (anim != [5051,5059]) && (anim != [5061,5069])
trigger2 = !SelfAnimExist(5100 + (anim % 10))
value = 5100

[State 5100, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
trigger1 = time = 0
trigger1 = (anim = [5051,5059]) || (anim = [5061,5069])
trigger1 = SelfAnimExist(5100 + (anim % 10))
value = 5100 + (anim % 10)

[State 5100, 4]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5100, 5]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5100, 6] ;Reduce speed
type = VelMul
trigger1 = Time = 0
x = 0.75

[State 5100, 7]
type = ChangeState
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) = 0
value = 2310 ;HIT_LIEDOWN

[State 5100, 8]
type = GameMakeAnim
trigger1 = Time = 1
value = 60 + (sysvar(1) > 5) + (sysvar(1) > 14)
pos = 0, 0
under = sysvar(1) <= 14

[State 5100, 10]
type = PlaySnd
trigger1 = Time = 1
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5100, 11]
type = PosFreeze
trigger1 = 1

[State 5100, 12]
type = ChangeState
trigger1 = AnimTime = 0
value = 2301

;---------------------------------------------------------------------------
; HIT_BOUNCE (bounce into air)
[Statedef 2301]
type    = L
movetype = H
physics = N

[State 5101, 1] ;Coming hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim != [5101,5109]
trigger2 = !SelfAnimExist(5160 + (anim % 10))
value = 5160

[State 5101, 2] ;Coming hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
trigger1 = anim = [5101,5109]
trigger1 = SelfAnimExist(5160 + (anim % 10))
value = 5160 + (anim % 10)

[State 5101, 3]
type = HitFallVel
trigger1 = Time = 0

[State 5101, 4]
type = PosSet
trigger1 = Time = 0
y = 20

[State 5101, 5] ;Acceleration
type = VelAdd
trigger1 = 1
y = .4

[State 5101, 6] ;Hit ground
trigger1 = Vel Y > 0
trigger1 = Pos Y >= 12
type = ChangeState
value = 2310

;---------------------------------------------------------------------------
; HIT_LIEDOWN
[Statedef 2310]
type    = L
movetype = H
physics = N

[State 5110, EnvShake]
type = FallEnvShake
trigger1 = Time = 0

[State 5110, 1] ;For hit up/up-diag type (from state 5081)
type = ChangeAnim
persistent = 0
trigger1 = SelfAnimExist(5110 + (anim % 10))
trigger1 = anim = [5081,5089]
value = 5110 + (anim % 10)

[State 5110, 2] ;Hit ground anim (normal)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim != [5161,5169]
trigger2 = !SelfAnimExist(5170 + (anim % 10))
value = 5170

[State 5110, 3] ;Hit ground anim (for hit up)
type = ChangeAnim
triggerall = time = 0
triggerall = anim != [5110,5119] ;Not already changed anim
trigger1 = anim = [5161,5169]
trigger1 = SelfAnimExist(5170 + (anim % 10))
value = 5170 + (anim % 10)

[State 5110, 5]
type = PosSet
trigger1 = Time = 0
y = 0

[State 5110, Var] ;Get fall velocity
type = VarSet
trigger1 = Time = 0
trigger1 = GetHitVar(fall.yvel) != 0
sysvar(1) = floor(vel y)

[State 5110, 6]
type = PlaySnd
trigger1 = Time = 0
trigger1 = !SysVar(0)
value = F7, (sysvar(1) > 5) + (sysvar(1) > 14)

[State 5110, 8]
type = VelSet
trigger1 = Time = 0
y = 0

[State 5110, 9] ;For hit up type
type = ChangeAnim
persistent = 0
triggerall = anim = [5171,5179]
triggerall = SelfAnimExist(5110 + (anim % 10))
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground anim
value = 5110 + (anim % 10)

[State 5110, 10] ;For normal
type = ChangeAnim
persistent = 0
triggerall = Anim != [5111,5119]
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
value = 5110

[State 5110, 11] ;If just died
type = SelfState
triggerall = !alive
trigger1 = AnimTime = 0
trigger2 = SysVar(0) ;SysVar(0) = 1 avoids hit ground frame
trigger3 = Anim = [5110,5119]
value = 5150

[State 5110, 11] ;If just died
type = SelfState
trigger1 = time = 120
value = 5120

[State 5110, 12]
type = VarSet
trigger1 = SysVar(0)
trigger1 = Time = 0
sysvar(0) = 0

[State 5110, 13] ;Friction
type = VelMul
trigger1 = 1
x = 0.85

;---------------------------------------------------------------------------
;=============pots===========<KONGOU KOKURETSU ZAN>=============================
[Statedef 3500]
type=S
physics=S
movetype=A
anim=4200
ctrl=0
velset=0,0
sprpriority=-1

[State 4200, strengthvar]
type=varset
trigger1=!time
var(10)=6


;;;;;;;;;;;;

[State 1100, VarSet]
type = VarSet
triggerall = !var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
trigger1 = Time = 0
var(5) = ifelse((Command = "1dp" && Power >= 2000) || (Command = "2dp" && (Power >= 2000 && Power < 3000)), 1, ifelse(Command = "3dp" && Power >= 3000, 2, 0))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = !var(17)
trigger1 = Time = 0
var(5) = ifelse(power>=2000&&P2movetype=A, floor(power*.001)-1, random%(1+(power>=2000)))

[State 1100, VarSet]
type = VarSet
triggerall = var(59)
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 6
triggerall = var(17)
trigger1 = Time = 0
var(5) = ifelse((floor(power*.001)-(P2life<150)-(P2life<300)-1)<0,0,floor(power*.001)-(P2life<150)-(P2life<300)-1)

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 1 || (var(20) = 3 && (100*life/const(data.life))>30) || (var(20) = 3 && (100*life/const(data.life))<=30 && !var(14)) || var(20) = 4 
trigger1 = Time = 0
var(5) = 0

[State 1100, VarSet]
type = VarSet
triggerall = !var(15) && !var(16)
triggerall = var(20) = 2 || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(15)
trigger1 = Time = 0
var(5) = 2

[State 1100, VarSet]
type = VarSet
triggerall = var(16)
trigger1 = Time = 0
var(5) = 0

[State 3001, Super]
type = Helper
trigger1 = Time = 2
id = 8000
name = "Super"
pos = -18,-126
postype = P1
stateno = ifelse((var(20)=[3,5]),8010,8000)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
;pausemovetime = 999999
supermovetime = 999999
size.xscale = 1
size.yscale = 1
;;;;;;;;;;;;;
;[State 4200, superchargehelper]
;type=helper
;trigger1=!animelemtime(2)
;helpertype=normal
;stateno=8000
;ID=8000
;name="Super Charge"
;postype=p1
;pos=-18,-126
;ownpal=1
;persistent=0
;supermovetime=9999

;[State 4200, Super]
;type = Helper
;trigger1 = Time = 1
;id = 8000
;name = "Super"
;pos = -18,-126
;postype = P1
;stateno = ifelse((var(20)=[3,5]),8010,8000)
;helpertype = normal
;keyctrl = 0
;ownpal = 1
;ignorehitpause = 1
;pausemovetime = 999999
;supermovetime = 999999
size.xscale = 1
size.yscale = 1

[State 4200, AfterImage]
type = AfterImage
triggerall = !var(18) && prevstateno != [3000,3999]
trigger1 = Time = 1
time = 999
TimeGap  = 1
FrameGap = 13
length = 39
PalBright = 1,1,1
PalContrast =  150,50,50
PalAdd = 0,0,0
PalMul = .8,.8,.8
trans = add1

[State 860, 4]
type = PowerAdd
triggerall = !var(15) && !var(16)
triggerall = !var(20) || var(20) = 2 || var(20) = 6 || (var(20) = 3 && (100*life/const(data.life))<=30 && var(14)) || var(20) = 5
trigger1 = time = 0
value = -3000

[State 860, 4]
type = PowerAdd
triggerall = var(15)
trigger1 = time = 0
value = -1000

[State 860, 5]
type = Varset
trigger1 = time = 0
fvar(13) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(14) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(15) = 0

[State 860, 5]
type = Varset
trigger1 = time = 0
var(16) = 0

[State 4200, superchargepause]
type=superpause
trigger1=!animelemtime(2)
time=53
anim=-1
sound=s6,0
;poweradd=-3000
darken=0
movetime=53

[State 4200, nhb]
type=nothitby
trigger1=animelemtime(15)<0
time=1
value=SCA


[State 4200, aura]
type=helper
trigger1= animelem=4
helpertype=normal
stateno=4203
ID=4203
name="KKZ Aura"
postype=p1
ownpal=1
supermovetime=46

[State 4200, push]
type=playerpush
trigger1=animelemtime(17)<0
value=0
ignorehitpause=1

[State 4200, shake]
type=envshake
trigger1=!animelemtime(15)
time=12
ampl=3
freq=85

[State 4200, snd]
type=playsnd
trigger1=!animelemtime(12)
value=4200,0
channel=0
[State 4200, snd]
type=playsnd
trigger1=!animelemtime(15)
value=4200,1

[State 4200, lightning]
type=helper
trigger1=!animelemtime(15)
helpertype=normal
stateno=4205
ID=4205
name="KKZ"
postype=p1
pos=-8,7
ownpal=1

[State 4200, shockwave1]
type=helper
trigger1=animelemtime(15)=6
helpertype=normal
stateno=4206
ID=4205
name="KKZ"
postype=p1
facing=1
pos=0,0
ownpal=1

[State 4200, shockwave2]
type=helper
trigger1=animelemtime(15)=6
helpertype=normal
stateno=4206
ID=4205
name="KKZ"
postype=p1
facing=-1
pos=0,0
ownpal=1

[State 4200, shockwave3]
type=explod
trigger1=animelemtime(15)=6
anim=4207
ID=4207
sprpriority=-3
facing=1
pos=0,0
removetime=-2
ownpal=1

[State 4200, shockwave4]
type=explod
trigger1=animelemtime(15)=6
anim=4207
ID=4207
sprpriority=-3
facing=-1
pos=0,0
removetime=-2
ownpal=1

[State 4200, dust]
type=explod
trigger1=!animelemtime(15)
anim=8030
ID=8030
sprpriority=-2
pos=-8,0
removetime=-2
ownpal=1

[State 4200, dust]
type=explod
trigger1=!animelemtime(15)
anim=6020
ID=6020
sprpriority=4
pos=-8,0
vel=0,-5
accel=0,-1.2
removetime=-2
ownpal=1
scale=2,2

[State 4200, imageoff]
type=afterimagetime
trigger1=animelemtime(17)>=0
time=0
[State 4200, end]
type=changestate
trigger1=!animtime
value=0
ctrl=1

;---LIGHTNING---
[Statedef 4205]
type=S
physics=N
movetype=A
ctrl=0
velset=0,0
anim=4205
sprpriority=4
juggle=0

[State 4205, assert]
type=assertspecial
trigger1=1
flag=noshadow
ignorehitpause=1

[State 4205, strengthvar]
type=varset
trigger1=!time&&!prevstateno
var(10)=6

[State 4205, image]
type=afterimage
trigger1=!time&&!prevstateno
time=999
timegap=1
framegap=2
length=3
palcontrast=20,10,50
trans=add

[State 4205, hit]
type=hitdef
triggerall=!var(12)
trigger1=animelem=1
attr=S,HA                   
damage=75,18;ceil(5*(1-root,fvar(10)+root,fvar(11)+root,fvar(12))),5;
animtype=Up        
guardflag=H          
hitflag=MAFD     
priority=7,Hit             
pausetime=2,15
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = 20, ceil(enemy,pos Y-60)
hitsound = S2,2
guardsound = S1,0
ground.type=High
ground.slidetime=22
ground.hittime=22
ground.velocity=-1,-3
ground.cornerpush.veloff=0
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
air.velocity=-1,-3
getpower=0
fall=1
fall.recover=0
palfx.color=24
palfx.sinadd=40,20,60,8
palfx.mul=384,128,512
palfx.time=32
sprpriority=4

[State 4205, flames]
type=helper
triggerall=movehit&&numtarget&&numhelper(6041)<1
trigger1=(target,time=0)&&(target,movetype=H)
helpertype=normal
stateno=6041;8301
ID=6041;8301
name="flames"
postype=p2
bindtime=1000
ownpal=1
facing=-1
size.ground.front=0
size.ground.back=0
ignorehitpause=1
persistent=0

;[State 4205, sparks]
;type=helper
;triggerall=movecontact&&numtarget&&var(11):=ifelse(movehit,6,1)
;triggerall=(target,movetype=H)&&!(target,time)
;trigger1=movehit
;trigger2=moveguarded
;trigger2=(target,stateno=150)||(target,stateno=152)||(target,stateno=154)
;helpertype=normal
;stateno=4205;s8220+(random%8);6000;6041;8301
;ID=4205;8220;6000;6041
;name="spark"
;postype=p2
;pos=(target,const(size.ground.front)-10),(target,const(size.mid.pos.y)+floor(p2dist y))
;ownpal=1
;facing=-1
;ignorehitpause=1

[State 4205, end]
type=destroyself
trigger1=!animtime


;---SHOCKWAVES---
[Statedef 4206]
type=S
physics=N
movetype=A
ctrl=0
velset=0,0
sprpriority=4
juggle=!var(3)*5

[State 4206,hitby]
type=hitby
trigger1=1
time=-1
value=SCA,NP,SP,HP
ignorehitpause=1
[State 4206, hitoverride]
type=hitoverride
trigger1=1
time=-1
attr=SCA,NP,SP,HP
stateno=4206
ignorehitpause=1

[State 4206, assert]
type=assertspecial
trigger1=1
flag=noshadow
ignorehitpause=1

[State 4206, strengthvar]
type=varset
trigger1=!time&&!prevstateno
var(10)=6
[State 4206, anim]
type=changeanim
trigger1=!time&&!prevstateno
value=4206

[State 4206, movehitvar]
type=varset
trigger1=movehit&&numtarget
trigger1=target,movetype=H
var(3)=1
[State 4206, movehitvar2]
type=varset
trigger1=!time
var(4)=animelemno(0)

[State 4206, attackvarbyhits]
type=parentvaradd
trigger1=!time&&!prevstateno&&(root,fvar(10)<.5)
fvar(10)=.05
persistent=0
ignorehitpause=1

[State 4206, image]
type=afterimage
trigger1=!time&&!prevstateno
time=999
timegap=1
framegap=2
length=7
palcontrast=20,20,20
trans=add

[State 4206, particles]
type=explod
trigger1=animelemtime(2)>0&&animelemtime(12)<0
vel=ceil(2+random/200),-ceil(1+random/500)
accel=-.3,-.75
anim=4210
sprpriority=3
postype=p1
pos=65,-60
random=70,120
facing=-1+(random<500)*2
removetime=-2
ownpal=1
scale=1,.15
ignorehitpause=1

[State 4206, hitsnd]
type=playsnd
trigger1=movehit&&numtarget
trigger1=target,time=0&&target,movetype=H
value=S2,ifelse(var(5)=2,16,15);2,11
ignorehitpause=1

[State 4206, hit]
type=hitdef
triggerall=animelemno(0)!=var(4)
trigger1=animelem=2||animelem=3||animelem=4||animelem=5
trigger2=animelem=6||animelem=7||animelem=8||animelem=9
attr=S,HA                   
damage=60,5;ceil(48*(1-root,fvar(10)+root,fvar(11)+root,fvar(12))),5
animtype=Hard        
fall.animtype=Up        
guardflag=M          
hitflag=MAF;D     
priority=7,Hit             
pausetime=2,2
sparkno = S8220+(random%8)
guard.sparkno = S8105
sparkxy = 20, ceil(enemy,pos Y-60)
hitsound = S2,16
guardsound = S1,0
ground.type=High
ground.slidetime=30
ground.hittime=30
ground.velocity=ifelse((animelem=9),-9,-3),0
ground.cornerpush.veloff=0
air.velocity=-2,-9
getpower=0
fall.envshake.time = 12
fall.envshake.ampl = 2
fall.envshake.freq = 90
fall=1
fall.recover=0
air.fall=1
palfx.color=32
palfx.sinadd=40,20,60,8
palfx.mul=384,128,512
palfx.time=ifelse(p2statetype=A,60,30)
envshake.time = 12
envshake.ampl = 4
fall.envshake.time = 10
fall.envshake.ampl = 5
ID=4206+(facing=-1)
nochainID=4207-(facing=-1)
sprpriority=4

[State 4206, flames]
type=helper
triggerall=movehit&&numtarget&&numhelper(6041)<1
trigger1=(target,time=0)&&(target,movetype=H)
helpertype=normal
stateno=6041
ID=6041
name="flames"
postype=p2
bindtime=1000
ownpal=1
facing=-1
size.ground.front=0
size.ground.back=0
ignorehitpause=1
persistent=0

;[State 4206, sparks]
;type=helper
;triggerall=movecontact&&numtarget&&var(11):=ifelse(movehit,6,1)
;triggerall=(target,movetype=H)&&!(target,time)
;trigger1=movehit
;trigger2=moveguarded
;trigger2=(target,stateno=150)||(target,stateno=152)||(target,stateno=154)
;helpertype=normal
;stateno=4205;8220+(random%8);6000;6041;8301
;ID=4205;8220;6000;6041;8301
;name="spark"
;postype=p2
;pos=(target,const(size.ground.front)-10),(target,const(size.mid.pos.y)+floor(p2dist y))
;ownpal=1
;facing=-1
;ignorehitpause=1

[State 4206, Debug]
type=displaytoclipboard
trigger1=numtarget
text="x=%d"
params=(target,const(size.mid.pos.y)+floor(p2dist y))

[State 4206, pause]
type=null;pause
triggerall=movecontact&&numtarget
trigger1=movehit&&(target,time=0)&&(target,movetype=H)
trigger2=moveguarded&&(target,time=0)&&(target,movetype=H)
time=2

[State 4206, end]
type=destroyself
trigger1=!animtime

;begin helper---------------------------------
;========================<KKZ AURA>=============================
[Statedef 4203]
physics=N
velset=0,0
anim=4203
sprpriority=0
[State 4203, trans]
type=trans
trigger1= 1
trans=addalpha
alpha=256,256
ignorehitpause=1
[State 4203, image]
type=afterimage
trigger1= !time
time=999
timegap=1
framegap=1
length=2
palcontrast=100,100,100
trans=add
[State 4203, bind]
type=bindtoroot
trigger1= 1
time=-1
[State 4203, end]
type=destroyself
trigger1= root,stateno!=4200 || root,anim!=4200
trigger2= root,stateno=4200 && root,animelemtime(19)>=0
trigger3= !animtime

;
;========================<PURPLE FIRE>=============================
[Statedef 6041]
physics=N
velset=0,0
anim=6041;9741
sprpriority=4
[State 6041, assert]
type=assertspecial
trigger1=1
flag=noshadow
ignorehitpause=1

[State 6041, flames]
type=explod
trigger1=1
anim=6041
ID=6041
sprpriority=3
postype=p2
vel=-.2,-.75
pos=(enemynear,const(size.mid.pos.x)),(enemynear,const(size.mid.pos.y))+10
random=40,40
removetime=-2
ownpal=1

[State 6041, particles]
type=explod
trigger1=!(time%3)
vel=.5+(random/1000),-.5-(random/1000)
accel=.1,-.2
anim=4210
sprpriority=5
postype=p2
pos=(enemynear,const(size.mid.pos.x)),(enemynear,const(size.mid.pos.y))+10
random=40,40
facing=-1+(random<500)*2
removetime=-2
ownpal=1
scale=1,.15

[State 6041, pos]
type=posadd
trigger1=1
x=ceil(p2dist x)
y=ceil(p2dist y)
[State 6041, end]
type=destroyself
trigger1=enemynear,ctrl||(enemynear,stateno!=[5000,5099])

;========================<SUPERCHARGE Lv2>=============================
[Statedef 6101]
physics=N
velset=0,0
anim=9741
[State 6101, var]
type=parentvarset
trigger1=time=2
var(20)=-1

[State 6101, bgpalfx]
type=bgpalfx
trigger1=!time
invertall=1
time=40
add=100,100,100
sinadd=-600,-600,-300,160
[State 6101, bgpalfx]
type=bgpalfx
trigger1=time=40
time=13
add=-255,-255,-255
sinadd=255,255,255,52

[State 6101, light]
type=helper
trigger1=!time
helpertype=normal
stateno=6105
ID=6105
name="Super Charge"
postype=p1
ownpal=1
supermovetime=999

[State 6101, main]
type=explod
trigger1=!time
anim=6100
ID=6100
sprpriority=5
postype=p1
removetime=-2
supermovetime=300

[State 6101, circle]
type=explod
trigger1=time=38
anim=6101
ID=6101
sprpriority=5
postype=p1
removetime=-2
supermovetime=300

[State 6101, noshadow]
type=assertspecial
trigger1=1
flag=noshadow
flag2=invisible
ignorehitpause=1
[State 6101, bound]
type=screenbound
trigger1=1
value=0

[State 6101, safety]
type=removeexplod
trigger1=time>=54
[State 6101, end]
type=destroyself
trigger1=time>=54


;========================<SUPERCHARGE Lv3>=============================
[Statedef 6102]
physics=N
velset=0,0
anim=9741
[State 6100, var]
type=parentvarset
trigger1=time=2
var(20)=-1

[State 6102, bgpalfx]
type=bgpalfx
trigger1=!time
invertall=1
time=45
add=100,100,100
sinadd=-600,-600,-300,180
persistent=0
[State 6102, bgpalfx]
type=bgpalfx
trigger1=time=45
time=15
add=-255,-255,-255
sinadd=255,255,255,60
persistent=0

[State 6102, light]
type=helper
trigger1=!time
helpertype=normal
stateno=6105
ID=6105
name="Super Charge"
postype=p1
ownpal=1
supermovetime=999

[State 6102, main]
type=explod
trigger1=!time
anim=6100
ID=6100
sprpriority=5
postype=p1
removetime=-2
supermovetime=300

[State 6102, circle]
type=explod
trigger1=time=45
anim=6101
ID=6101
sprpriority=5
postype=p1
removetime=-2
supermovetime=300

[State 6102, ten]
type=explod
trigger1=!time
anim=6201
ID=6201
sprpriority=5
postype=p1
facing=(facing=1)*2-1
removetime=-1
supermovetime=300

[State 6102, spinten]
type=modifyexplod
trigger1=1
ID=6201
scale=-.2+(.02*time),-1.5+(.042*time)

[State 6102, noshadow]
type=assertspecial
trigger1=1
flag=noshadow
flag2=invisible
ignorehitpause=1
[State 6102, bound]
type=screenbound
trigger1=1
value=0

[State 6102, safety]
type=removeexplod
trigger1=time>=61
[State 6102, end]
type=destroyself
trigger1=time>=61


;========================<SUPERCHARGE LIGHT>=============================
[Statedef 6105]
physics=N
velset=0,0
anim=9741
[State 6105, var]
type=varset
trigger1=!time
var(0)=ifelse(parent,stateno=6102,2,1)

[State 6105, fade]
type=palfx
trigger1=!time&&var(0)=1
time=53
sinadd=-255,-255,-255,318
[State 6105, fade]
type=palfx
trigger1=!time&&var(0)=2
time=60
sinadd=-255,-255,-255,360

[State 6105, light]
type=explod
trigger1=!time
anim=6105
ID=6105
sprpriority=5
postype=p1
removetime=-2
supermovetime=300
[State 6105, light]
type=explod
trigger1=!time
anim=6106
ID=6105
sprpriority=5
postype=p1
removetime=-2
supermovetime=300
[State 6105, light]
type=explod
trigger1=!time
anim=6107
ID=6105
sprpriority=5
postype=p1
removetime=-2
supermovetime=300
[State 6105, light]
type=explod
trigger1=!time
anim=6108
ID=6105
sprpriority=5
postype=p1
removetime=-2
supermovetime=300

[State 6105, light]
type=explod
trigger1=!time&&var(0)=2
anim=6105
ID=6106
sprpriority=5
postype=p1
removetime=-2
supermovetime=300
[State 6105, light]
type=explod
trigger1=!time&&var(0)=2
anim=6106
ID=6106
sprpriority=5
postype=p1
removetime=-2
supermovetime=300
[State 6105, light]
type=explod
trigger1=!time&&var(0)=2
anim=6107
ID=6106
sprpriority=5
postype=p1
removetime=-2
supermovetime=300
[State 6105, light]
type=explod
trigger1=!time&&var(0)=2
anim=6108
ID=6106
sprpriority=5
postype=p1
removetime=-2
supermovetime=300

[State 6105, flip]
type=modifyexplod
trigger1=var(0)=2
ID=6105
scale=-1+(.04*time),1
[State 6105, flip]
type=modifyexplod
trigger1=var(0)=2
ID=6106
scale=1,-1+(.04*time)

[State 6105, particles]
type=explod
trigger1=1
vel=-5+(random/100),-5+(random/100)
anim=6013
sprpriority=5
postype=p1
facing=-1+(random<500)*2
removetime=-2
ownpal=1
scale=1,.15
supermovetime=99

[State 6105, noshadow]
type=assertspecial
trigger1=1
flag=noshadow
flag2=invisible
ignorehitpause=1
[State 6105, bound]
type=screenbound
trigger1=1
value=0
[State 6105, safety]
type=removeexplod
trigger1=var(0)=1&&time>=54
trigger2=var(0)=2&&time>=61
[State 6105, end]
type=destroyself
trigger1=var(0)=1&&time>=54
trigger2=var(0)=2&&time>=61


;end helper-----------------------------------

;---------------------------------------------------------------------------
;END*************************************
;---------------------------------------------------------------------------
;削りKO
[Statedef 5950]
physics = S
movetype = H
ctrl = 0
velset = 0,0

[State 860, 4]
type = NotHitBy
trigger1 = 1
value = SCA

[State 190, 4]
type = ChangeAnim
trigger1 = !HitOver
value = ifelse(var(0)&2**8,5020,5010)

[State 190, 4]
type = ChangeAnim
trigger1 = HitOver
value = 5950
persistent = 0

[State 1100, ChangeState]
type = ChangeState
trigger1 = Animelem = 9
value = 5150

;---------------------------------------------------------------------------
[Statedef -2]

[State -2, Throws Allowed]
type = VarSet
trigger1 = EnemyNear, MoveType != H
trigger1 = EnemyNear, StateNo != 140
trigger1 = (EnemyNear, ctrl && EnemyNear, Time >= 1) || (EnemyNear, Time >= 8)
trigger2 = EnemyNear, MoveType = A
trigger3 = (EnemyNear, StateNo != [0,52]) && (EnemyNear, StateNo != [120,155]) && (EnemyNear, StateNo != [5000,5120])
;trigger4 = var(20) || var(21) || var(22)
var(2) = 0

[State -2, Throws Disallowed]
type = VarSet
triggerAll = NumEnemy
trigger1 = EnemyNear, StateNo = [150,155]
trigger2 = (EnemyNear, StateNo = 51 || EnemyNear, StateNo = 140) && (EnemyNear, PrevStateNo = [150, 155])
trigger3 = EnemyNear, MoveType = H && EnemyNear, StateType != A; && !var(20) && !var(21) && !var(22)
trigger4 = (EnemyNear, StateNo = [5020,5040]) && EnemyNear, HitFall = 0
trigger5 = EnemyNear, StateNo = 40 && EnemyNear, PrevStateNo != 52 && (EnemyNear, Anim != [0, 29])
var(2) = 1
ignoreHitPause = 1

; Edge fix
[State 0, Width]
type = null;Width
trigger1 = StateType != A
edge = 24,0

[State -2, Variable Height]
type = PlayerPush
triggerall = StateType = A && NumEnemy
triggerall = P2Dist Y - Vel Y >= (EnemyNear(0), Const(Size.Height) - 34)
trigger1 = StateNo = [40,50]
trigger2 = StateNo = [600,650]
;triggerx = StateNo = [other air states...]
value = 0

[State -2, Variable Height]
type = PlayerPush
triggerall = StateType = A && NumEnemy
triggerall = P2Dist Y - Vel Y >= (EnemyNear(0), Const(Size.Height) - 34)
triggerall = (StateNo = [40,50]) || (StateNo = [600,650]) ;|| (StateNo = [other air states...] ...)
trigger1 = P2StateType = S
trigger1 = P2Dist Y - Vel Y >= (EnemyNear(0), Const(Size.Height) - 34)
trigger2 = P2StateType = C
trigger2 = P2Dist Y - Vel Y >= (floor(EnemyNear(0), Const(Size.Height)*0.825) - 34) ; 0.825 is chosen because it is a nice float (bitwise) and comes from Sagat's standing pushbox height to his crouching pushbox height.
trigger3 = P2StateType = C
trigger3 = P2Dist Y - Vel Y >= (12 - 34) ; This isn't really necessary since the chance of it triggering is low, but I pulled 12 from Sagat's CvS2 liedown hurt box height
value = 0

;config呼び出し
[State 3001, Super]
type = Helper
triggerall = !NumHelper(10000)
trigger1 = roundsexisted <= 0
trigger1 = roundstate = 0
id = 10000
name = "config"
pos = -300,0
postype = Left
stateno = 10000
helpertype = normal
keyctrl = 0
pausemovetime = 99999999999999
supermovetime = 99999999999999

;グルーヴセレクト
[state 190, groove]
type = helper
triggerall = time = 0
triggerall = roundstate = 0
triggerall = roundsexisted <= 0
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname = "warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname = "Jesuszilla"
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
ID = 6000
stateno = 6000
postype = p1
pos = 0,-15
name = "groove"
pausemovetime = 99999999999999
supermovetime = 99999999999999

;グルーヴポイント用ヘルパー
[State 3001, Super]
type = Helper
triggerall = numenemy
triggerall = !fvar(3)
triggerall = !NumHelper(6500) && !NumHelper(6000)
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname = "warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname = "Jesuszilla"
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
id = 6500
name = "groove point"
pos = 0,300
postype = Left
stateno = 6500
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999

;AI判別
[State -2, 3]
type = VarSet
trigger1 = IsHomeTeam && Roundstate = 0 && Pos X > 0
var(59) = 1

[State 20, 4]
type = AssertSpecial
trigger1 = var(59)
flag = nowalk

;モード判定
[State -2, 3]
type = VarSet
trigger1 = name = "cvsgouki" && PalNo = [7,12]
trigger2 = name = "cvsgouki_ex"
var(12) = 10

;チームモードイントロ判定（自分交代時）
[State -3, Turns Mode Intro]
type = ChangeState
trigger1 = roundsexisted <= 0
trigger1 = roundstate = 0
trigger1 = time = 0
value = 190

;崩れダウン音
[State -3, Bounding Sound]
type = PlaySnd
triggerall = anim = 5950
trigger1 = Animelem = 2
value = 52, 0

[State -3, Bounding Sound]
type = PlaySnd
triggerall = anim = 5950
trigger1 = Animelem = 6
value = 5100,0

[State -3, Bounding Sound]
type = PlaySnd
triggerall = anim = 5950 && roundstate = 2
triggerall = random%2 = 0
trigger1 = Animelemtime(1) = 2
value = 5000, 1+var(12)
channel = 0

;投げ抜け成功時ボイス
[State 3010,PlaySnd]
type = PlaySnd
triggerall = AnimElem = 1,=3
trigger1 = stateno = 950 && movetype != H
trigger2 = stateno = 955 && movetype != H
value = 5940,var(12)

;AI行動
[State 40, 10]
type = ChangeState
triggerall = stateno = 40
triggerall = var(59) = 1
trigger1 = time = 0
trigger1 = P2movetype = A
value = ifelse(inguarddist,130,21)

[State 40, 2]
type = VarSet
triggerall = stateno = 40
triggerall = PrevStateNo != 100 && PrevStateNo != 101
triggerall = var(59) = 1
trigger1 = Time = 0
sysvar(1) = 1

[State 40, 1]
type = VarSet
triggerall = stateno = 40
triggerall = PrevStateNo != 100 && PrevStateNo != 101
triggerall = var(59) = 1
trigger1 = Time = 0
trigger1 = Random = [0,80]
sysvar(1) = 0

[State 40, 3]
type = VarSet
triggerall = stateno = 40
triggerall = PrevStateNo != 100 && PrevStateNo != 101
triggerall = var(59) = 1
trigger1 = Time = 0
trigger1 = Random = [900,999]
sysvar(1) = -1

[State 40, 1]
type = VarSet
triggerall = stateno = 40
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(16)
sysvar(1) = frontedgedist > 50

[State 40, 4]
type = VarAdd
triggerall = !(var(0)&2**4)
triggerall = stateno = 40
triggerall = var(59) = 1
triggerall = Time = 0
trigger1 = PrevStateNo = 100 || PrevStateNo = 101
trigger2 = Random = [0,220]
var(0) = 2**4

[State 40, 1]
type = VarAdd
triggerall = !(var(0)&2**4)
triggerall = stateno = 40
triggerall = var(59)
trigger1 = var(16)
var(0) = (2**4)*sysvar(1)

[State 40, 5]
type = VarAdd
triggerall = !(var(0)&2**5)
triggerall = stateno = 40
triggerall = var(59) = 1
triggerall = var(20) = [2,6]
trigger1 = Time = 0
trigger1 = Random = [850,990]
var(0) = 2**5

[State 40, 1]
type = VarAdd
triggerall = !(var(0)&2**5)
triggerall = stateno = 40
triggerall = var(59)
trigger1 = Time = 0
trigger1 = var(16)
var(0) = 2**5

;天魔朱裂刀等ヒット移行
[State 901, Throw]
type = TargetState
trigger1 = stateno = 1701
trigger1 = movehit
trigger1 = time > 1
trigger1 = numtarget
value = 1750
ignorehitpause = 1
persistent = 0

[State 901, Throw]
type = TargetState
trigger1 = stateno = 3400
trigger1 = movehit
trigger1 = time > 1
trigger1 = numtarget
value = 3450
ignorehitpause = 1
persistent = 0

;ベガ放置（笑）
[state 190, groove]
type = helper
triggerall = roundstate = 2
triggerall = var(30) = 1
triggerall = !NumHelper(7800) && !NumHelper(7805)
trigger1 = Time = 0
ID = 7805
stateno = 7805
postype = p1
pos = 0,0
name = "vega4"
ownpal = 1
pausemovetime = 999999999999
supermovetime = 999999999999
size.shadowoffset = 30

[state 190, groove]
type = helper
triggerall = roundstate = 2
triggerall = var(30) = 2
triggerall = !NumHelper(7801) && !NumHelper(7804)
trigger1 = Time = 0
ID = 7804
stateno = 7804
postype = p1
pos = 0,0
name = "vega3"
ownpal = 1
pausemovetime = 999999999999
supermovetime = 999999999999
size.shadowoffset = 30

;ラウンド開始時音楽消去
[State 3105, AssertSpecial]
type = AssertSpecial
triggerall = roundno = 1
trigger1 = roundstate < 2
flag = NoMusic

;パーフェクト判定
[State -2, Combo]
type = VarAdd
triggerall = !(var(0)&2**15)
triggerall = roundstate = 2
trigger1 = var(54) - Life > 0
trigger2 = const(data.life) > Life
var(0) = 2**15
ignorehitpause = 1

;ラウンド勝敗判定
[State -2, 1]
type = VarAdd
triggerall = !(var(0)&2**18)
trigger1 = Lose
var(0) = 2**18

[State -2, 1]
type = VarAdd
triggerall = !(var(0)&2**14)
trigger1 = Lose || DrawGame
var(0) = 2**14

[State -2,KO]
type = VarAdd
trigger1 = matchover
ignorehitpause = 1
var(56) = 1

[State -2,KO]
type = Varset
trigger1 = !matchover
ignorehitpause = 1
var(56) = 0

[State 180, 1]
type = VarAdd
triggerall = var(56) = 1
trigger1 = !(var(0)&2**14)
var(55)=1
ignorehitpause = 1
persistent = 0

[State 180, 1]
type = VarSet
trigger1 = var(0)&2**14
var(55)=0
ignorehitpause = 1

;状態判定
[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (stateno = [0,189]) && !(var(0)&2**2)
var(48) = 0

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (stateno = [200,999]) && !(var(0)&2**2)
var(48) = 1

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (stateno = [190,199]) && !(var(0)&2**2)
trigger2 = (stateno = [1000,2999]) && !(var(0)&2**2)
var(48) = 2

[State -2, 1]
type = VarSet
trigger1 = projhittime(1005) = 1
trigger2 = projhittime(1305) = 1
trigger3 = projhittime(1405) = 1
trigger4 = projhittime(1406) = 1
var(48) = 2

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = ((stateno = [3000,3999]) && var(5)!=2) || (var(0)&2**2)
var(48) = 3

[State -2, 1]
type = VarSet
trigger1 = projhittime(3005) = 1
trigger2 = projhittime(3006) = 1
trigger3 = projhittime(3205) = 1
trigger4 = projhittime(3206) = 1
var(48) = 3

[State -2, 1]
type = VarSet
triggerall = movetype != H && roundstate = 2
trigger1 = (stateno = [3000,3999]) && var(5) = 2
var(48) = 4

[State -2, 1]
type = VarSet
trigger1 = projhittime(3007) = 1
trigger2 = projhittime(3207) = 1
var(48) = 4

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2stateno = [0,189]
var(49) = 0

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2stateno = [200,999]
var(49) = 1

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2stateno = [190,199]
trigger2 = P2stateno = [1000,2999]
var(49) = 2

[State -2, 1]
type = VarSet
triggerall = P2movetype != H && roundstate = 2
trigger1 = P2stateno = [3000,3999]
var(49) = 3

;グルーヴゲージ表示
[State 3001, Super]
type = Helper
triggerall = !NumHelper(6100) && !NumHelper(6000)
triggerall = numenemy
trigger1 = numpartner
trigger1 = ID>partner,ID
trigger1 = !partner,authorname = "warusaki3"
trigger1 = !(partner,authorname = "mouser" && partner,name = "Hibiki Takane")
trigger1 = !partner,authorname = "H”"
trigger1 = !partner,authorname = "Jesuszilla"
trigger2 = numpartner
trigger2 = ID<partner,ID
trigger3 = !numpartner
id = 6100
name = "gauge"
pos = 0,300
postype = P1
stateno = 6100+(var(20)*10)
helpertype = normal
keyctrl = 0
ownpal = 1
pausemovetime = 99999999999999
supermovetime = 99999999999999
facing = facing*ifelse(teamside=1,1,-1)

;SグルーヴパワーMAXシステム
[State -2, 1]
type = VarSet
triggerall = var(20) = 3
trigger1 = !var(14)
trigger1 = roundstate >= 2
trigger1 = Power >= 1000
var(14) = 750

[State -2, 1]
type = PowerSet
trigger1 = var(14) = 750
value = 0
ignorehitpause = 1

[State -2, 1]
type = PowerSet
trigger1 = var(14) = 1
value = 0
ignorehitpause = 1

[State 200, 3]
type = Playsnd
trigger1 = var(14) = 750
value = 6000,10

[State -2, 1]
type = Varadd
trigger1 = var(14)
var(14) = -1
ignorehitpause = 1

;Kグルーヴ怒りゲージシステム
[State -2, Combo]
type = VarAdd
triggerall = var(20) = 5
triggerall = !(var(0)&2**3)
triggerall = roundstate = 2
triggerall = fvar(13) < 7200
triggerall = stateno != [120,159]
trigger1 = var(54) - Life > 0
fvar(13) = (var(54)-Life)*14*(10+var(31))*.1*(10+((var(12)&&var(59))*6))*.1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = fvar(13) > 7200
fvar(13) = 7200

[State -2, 1]
type = VarAdd
triggerall = !(var(0)&2**3)
trigger1 = fvar(13) = 7200
var(0) = 2**3

[State -2, 1]
type = VarAdd
triggerall = var(0)&2**3
trigger1 = fvar(13) <= 1 && ((stateno != [3000,3999]) || roundstate != 2)
var(0) = -(2**3)

[State 860, 1]
type = Explod
trigger1 = fvar(13) = 7200 && !NumExplod(8420)
anim = 8420
pos = 0,-70
postype = p1
ontop = 0
ownpal = 1
id = 8420
persistent = 0
;pausemovetime = 99999999999999
supermovetime = 99999999999999
scale = .5,.5

[State 200, 3]
type = Playsnd
trigger1 = fvar(13) = 7200
value = 6000,11

[State -2, 1]
type = Poweradd
trigger1 = fvar(13) = 7200
value = -3000
ignorehitpause = 1

[State -2, 1]
type = Varadd
triggerall = var(20) = 5
triggerall = var(0)&2**3
trigger1 = fvar(13) > 0
fvar(13) = -7.2
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = var(20) = 5
trigger1 = fvar(13) && var(0)&2**3
Time = 1
mul = 230,ceil(152-abs(76*sin(gametime*.05))),ceil(128-abs(64*sin(gametime*.05)))
ignorehitpause = 1
persistent = 0

;[State -2, 1]
;type = DefenceMulSet
;trigger1 = fvar(13) && (var(0)&2**3)
;value = ifelse(!var(12),.775,ifelse(var(59),1.55,.543))

;[State -2, 1]
;type = DefenceMulSet
;trigger1 = !(var(0)&2**3)
;value = ifelse(!var(12),1,ifelse(var(59),2,.7))

[State -2, 1]
type = DefenceMulSet
trigger1 = fvar(13)
value = ifelse(!var(12),.775, .525)

[State -2, 1]
type = DefenceMulSet
trigger1 = 1
value = ifelse(!var(12),1,.825)

;NグルーヴMAX発動
[State -2, 1]
type = Varadd
trigger1 = var(15)
var(15) = -1
ignorehitpause = 1

[State -2, 1]
type = PalFX
triggerall = var(20) = 4 || var(20) = 6
trigger1 = (GameTime%2)=0
trigger1 = var(15)
time = 1
add = 128,128,0
ignorehitpause = 1

;パワー溜まった時の音
[State -2, PlaySnd]
type = PlaySnd
triggerall = roundstate = 2
trigger1 = (floor(power*.001) - floor(fvar(21)*.001) > 0) && (!var(20) || var(20) = 4 || var(20) = 6)
trigger2 = (floor(power/1500) - floor(fvar(21)/1500) > 0) && var(20) = 2
trigger3 = (floor(power/3000) - floor(fvar(21)/3000) > 0) && var(20) = 3
value = 6000,ifelse(var(20)=6,10,ifelse(var(20)=4,13,12))
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = 1
fvar(21) = power
ignorehitpause = 1

;オリコン
[State -2, 1]
type = Varadd
triggerall = roundstate = 2
trigger1 = var(16)
var(16) = -1
ignorehitpause = 1

[State -2, 1]
type = VarSet
trigger1 = MoveType = H
var(16) = 0

[State -2, 1]
type = VarAdd
triggerall = var(0)&2**2
trigger1 = !var(16) && ctrl
trigger2 = LoseKO
var(0) = -(2**2)

[State -2, 1]
type = Varadd
trigger1 = var(16)
var(19) = -9
ignorehitpause = 1

[State -2, 1]
type = PowerSet
triggerall = var(0)&2**2
trigger1 = MoveType = H
value = var(19)/2

[State -3, Kill Juggle Checking]
type = assertspecial
trigger1 = var(0)&2**2
trigger1 = P2MoveType = H && P2stateType = A
flag = nojugglecheck

[State -3, No Blocking]
type = assertspecial
trigger1 = var(16)
flag = nostandguard
flag2 = nocrouchguard
flag3 = noairguard

;コンボダメージ
[State -2, PowerReset]
type = VarSet
trigger1 = P2movetype != H
var(53) = P2life

[State 3001, Super]
type = Helper
triggerall = numenemy
triggerall = roundstate = 2
triggerall = (var(53)-P2life)>250
trigger1 = !NumHelper(6800)&&!(var(0)&2**20)
trigger2 = !NumHelper(6800)&&(var(0)&2**20)&&!enemynear,NumHelper(6800)
id = 6800
name = "naration_1"
pos = 0,300
postype = Left
stateno = 6803
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

;グルーヴポイント初期数値＆時間による減少
[State -2, PowerReset]
type = VarSet
triggerall = MatchNo = 1
triggerall = RoundNo = 1
trigger1 = roundstate = 0
var(50) = 100000

[State -2, PowerReset]
type = VarSet
trigger1 = var(50) > 9999999
var(50) = 9999999
persistent = 1

[State -2, PowerReset]
type = VarSet
trigger1 = var(50) < -9999999
var(50) = -9999999
persistent = 1

[State -2, PowerReset]
type = VarAdd
trigger1 = roundstate = 2
var(51) = 1
persistent = 1

[State -2, PowerReset]
type = VarAdd
triggerall = roundstate = 2
triggerall = var(50) = [-9999999,9999999]
trigger1 = var(51) >= 600
trigger1 = gametime%60 = 0
var(50) = -500
persistent = 1

[State 3001, Super]
type = Helper
triggerall = !(var(0)&2**13)
triggerall = numenemy
triggerall = roundstate = 2
triggerall = var(51) = 400
trigger1 = !NumHelper(6800)&&!(var(0)&2**20)
trigger2 = !NumHelper(6800)&&(var(0)&2**20)&&!enemynear,NumHelper(6800)
id = 6800
name = "naration_1"
pos = 0,300
postype = Left
stateno = 6800
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

;時間停止によるガード不能
[State -2, PowerReset]
type = VarAdd
trigger1 = fvar(36) > 0
fvar(36) = -1

[State 3000, preventguard]
type = AssertSpecial
trigger1 = fvar(36) > 0
flag = unguardable

;空中コンボ制限
[State -2, PowerReset]
type = VarSet
trigger1 = P2MoveType != H
trigger2 = numtarget
trigger2 = target,statetype = S
trigger3 = numtarget
trigger3 = target,statetype = C
trigger4 = var(0)&2**2
trigger5 = var(22) = -1
trigger6 = var(23) = 1
trigger7 = var(45) > 0
fvar(26) = 0
ignorehitpause = 1

[State -2, PowerReset]
type = VarAdd
triggerall = movehit
triggerall = numtarget
trigger1 = P2MoveType = H && P2stateType = A
trigger2 = target,gethitvar(yvel) && target,stateType != A
trigger3 = target,gethitvar(fall)
fvar(26) = 1
ignorehitpause = 1

[State -3, Kill Juggle Checking]
type = assertspecial
triggerall = P2MoveType = H && P2stateType = A
trigger1 = stateno = 1100 && fvar(26) < 3
trigger2 = stateno = 1200 && fvar(26) < 3
trigger3 = stateno = 1250 && fvar(26) < 3
trigger4 = stateno = 3100 && !var(5) && fvar(26) < 4
trigger5 = stateno = 3100 && var(5) = 1 && fvar(26) < 6
trigger6 = stateno = 3100 && var(5) = 2 && fvar(26) < 7
flag = nojugglecheck

;食らい判定復活用
[State -2, PowerReset]
type = VarSet
triggerall = var(45) > 0
trigger1 = movehit
trigger2 = projhit = 1
var(45) = -1
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
trigger1 = var(45)
trigger1 = P2MoveType != H
trigger2 = var(45) = -1
trigger2 = ctrl
var(45) = 0
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
triggerall = var(20) = 2 || var(20) = 6
triggerall = (prevstateno=[195,196]) || (prevstateno=[1000,2999])
triggerall = time = 1
triggerall = P2MoveType = H && P2stateType = A
trigger1 = stateno=3000
trigger2 = stateno=3100
trigger3 = stateno=3200
trigger4 = stateno=3300
trigger5 = stateno=3400
var(45) = 1
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
triggerall = prevstateno=[3000,3999]
triggerall = time = 1
triggerall = P2MoveType = H && P2stateType = A
trigger1 = stateno=195
trigger2 = stateno=1000
trigger3 = stateno=1100
trigger4 = stateno=1200
trigger5 = stateno=1250
trigger6 = stateno=1300
trigger7 = stateno=1400
trigger8 = stateno=1500
trigger9 = stateno=1600
trigger10 = stateno=1700
trigger11 = stateno=1800
trigger12 = stateno=3000
trigger13 = stateno=3100
trigger14 = stateno=3200
trigger15 = stateno=3300
trigger16 = stateno=3400
var(45) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = movehit
trigger1 = stateno = 3300 && var(5) != 2 && animelemtime(60) >= 0
trigger2 = stateno = 3300 && var(5) = 2 && animelemtime(77) >= 0
var(45) = 1
ignorehitpause = 1

[State -3, Kill Juggle Checking]
type = assertspecial
trigger1 = var(45) > 0
flag = nojugglecheck

;強制fall=0時juggle判別用
[State -2, PowerReset]
type = null;VarSet
trigger1 = !numtarget
var(22) = 0

[State 901, Throw]
type = null;VarSet
triggerall = numtarget
trigger1 = movehit || projhit = 1
trigger1 = target,gethitvar(fall)
trigger2 = target,statetype != S && target,statetype != C
var(22) = 1
ignorehitpause = 1

[State -3, Kill Juggle Checking]
type = null;VarSet
triggerall = numtarget
trigger1 = var(22)
trigger1 = !target,gethitvar(hitshaketime)
trigger1 = target,statetype = S || target,statetype = C
var(22) = -1

[State -3, Kill Juggle Checking]
type = null;assertspecial
trigger1 = var(22) = -1
flag = nojugglecheck

;コンボ制限
[State -3, VarSet]
type = VarSet
trigger1 = P2MoveType != H
trigger2 = numtarget
trigger2 = target,statetype = S
trigger3 = numtarget
trigger3 = target,statetype = C
trigger4 = var(0)&2**2
trigger5 = var(22) = -1
trigger6 = var(23) = 1
trigger7 = var(45) > 0
var(40) = -1

[State -3, VarSet]
type = VarSet
trigger1 = P2MoveType != H
trigger2 = numtarget
trigger2 = target,statetype = S
trigger3 = numtarget
trigger3 = target,statetype = C
trigger4 = var(0)&2**2
trigger5 = var(22) = -1
trigger6 = var(23) = 1
trigger7 = var(45) > 0
var(42) = -1
ignorehitpause = 1

[State -3, VarSet]
type = VarSet
triggerall = var(40) = -1
triggerall = numtarget
triggerall = movehit || projhit = 1
trigger1 = target,gethitvar(yvel)
trigger2 = target,gethitvar(fall)
var(40) = 1
ignorehitpause = 1

[State -3, VarSet]
type = VarSet
triggerall = var(42) = -1
triggerall = numtarget
triggerall = movehit || projhit = 1
trigger1 = target,gethitvar(yvel)
trigger2 = target,gethitvar(fall)
var(42) = 1
ignorehitpause = 1

[State -3, VarSet]
type = VarSet
triggerall = var(40) = 1
trigger1 = (stateno = [195,799]) && time = 1
trigger2 = stateno = 251 && animelem = 4
trigger3 = stateno = 900 && time = 1
trigger4 = stateno = 1000 && time = 1
trigger5 = stateno = 1100 && time = 1
trigger6 = stateno = 1200 && (time = 1 || animelem = 6 || animelem = 9 || animelem = 12 || animelem = 15 || animelem = 18 || animelem = 24 || animelem = 27)
trigger7 = stateno = 1250 && (time = 1 || animelem = 6 || animelem = 9 || animelem = 12)
trigger8 = stateno = 1300 && time = 1
trigger9 = stateno = 1400 && time = 1
trigger10 = stateno = 1500 && time = 1
trigger11 = stateno = 1600 && time = 1
trigger12 = stateno = 1700 && time = 1
trigger13 = stateno = 1800 && time = 1
trigger14 = stateno = 3000 && time = 1
trigger15 = stateno = 3100 && (time = 1 || animelem = 11 || animelem = 21)
trigger16 = stateno = 3200 && time = 1
trigger17 = stateno = 3300 && time = 1
trigger18 = stateno = 3400 && time = 1
var(40) = 0
ignorehitpause = 1

[State -3, VarSet]
type = VarSet
trigger1 = !var(42)
var(40) = 0
ignorehitpause = 1

[State -3, Kill Juggle Checking]
type = VarSet
triggerall = !var(42)
trigger1 = stateno = 1100 && fvar(26) < 3
trigger2 = stateno = 1200 && fvar(26) < 3
trigger3 = stateno = 1250 && fvar(26) < 3
trigger4 = stateno = 3100 && !var(5) && fvar(26) < 4
trigger5 = stateno = 3100 && var(5) = 1 && fvar(26) < 6
trigger6 = stateno = 3100 && var(5) = 2 && fvar(26) < 7
var(40) = 1
ignorehitpause = 1

[State -3, VarSet]
type = VarSet
trigger1 = !var(40)
var(42) = 0
ignorehitpause = 1

;空中復帰誘導
[State -2, PowerReset]
type = VarSet
triggerall = movetype != H
trigger1 = !NumTarget
trigger2 = P2MoveType != H
trigger3 = movehit
trigger4 = projhit = 1
trigger5 = numtarget
trigger5 = !target,gethitvar(fall)
fvar(38) = 0
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
triggerall = fvar(38) != 2
triggerall = (stateno = [200,799])
trigger1 = stateno != 450
trigger1 = !(stateno = 220 && prevstateno = 830)
trigger1 = stateno != 310
fvar(38) = 1
ignorehitpause = 1

[State -2, PowerReset]
type = VarSet
triggerall = fvar(38) = 1
triggerall = !var(16)
trigger1 = movehit
fvar(38) = 2
ignorehitpause = 1

[State 901, Throw]
type = TargetState
triggerall = Numtarget
triggerall = fvar(38) = 2
trigger1 = target,stateno = 5050 && target,alive
value = 840
ignorehitpause = 1

;ガード時グルーヴポイント増減
[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = stateno = 150 || stateno = 152 || stateno = 154
trigger1 = time = 0
trigger1 = Var(25) > 6
var(50)=50
ignorehitpause = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = stateno = 150 || stateno = 152 || stateno = 154
trigger1 = time = 0
trigger1 = Var(25) <= 6
var(50)=ifelse((enemynear,hitdefattr=SCA,NA,NP,NT),101,ifelse((enemynear,hitdefattr=SCA,SA,SP,ST),201,301))
ignorehitpause = 1

;食らい時グルーヴポイント増減
[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = movetype = H
trigger1 = stateno != [120,159]
trigger1 = var(54) - Life > 0
trigger1 = stateno != 5000 && stateno != 5010 && stateno != 5020 && stateno != 5070 && stateno != 5080
trigger2 = stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080
trigger2 = time = 0
var(50)=ifelse((enemynear,stateno=[195,999]),-500,ifelse((enemynear,stateno=[1000,2999]),-300,-200))
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
var(54) = life
ignorehitpause = 1

;リバーサル判定1
[State 180, 1]
type = VarSet
trigger1 = movetype = H
fvar(22) = 2
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = ctrl
trigger1 = fvar(22) = 2
fvar(22) = 1
ignorehitpause = 1

[State 180, 1]
type = VarAdd
trigger1 = fvar(22) = 1
fvar(23) = 1
ignorehitpause = 1

;ボーナスメッセージアイコン表示
[State 180, 1]
type = VarSet
trigger1 = 1
fvar(8) = -1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = movetype != H
trigger1 = stateno = 4000
trigger2 = stateno = 4001
trigger3 = stateno = 4010
trigger4 = stateno = 4011
trigger5 = stateno = 4020
trigger6 = stateno = 4021
fvar(8) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = var(0)&2**12
triggerall = p2movetype = H
trigger1 = (stateno != [900,999]) && (stateno != [1830,1899]) && (stateno != [3300,3399])
trigger1 = movehit
trigger2 = projhit = 1
fvar(8) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = !(var(0)&2**13)
triggerall = p2movetype = H
trigger1 = (stateno != [900,999]) && (stateno != [1830,1899]) && (stateno != [3300,3399])
trigger1 = movehit
trigger2 = projHit = 1
trigger3 = stateno = 901 && animelem = 6 && movetype != H
trigger4 = stateno = 911 && animelem = 6 && movetype != H
trigger5 = stateno = 1836 && time = 1 && movetype != H
trigger6 = stateno = 1846 && time = 1 && movetype != H
trigger7 = stateno = 3301 && time = 28 && !var(12) && movetype != H
trigger8 = stateno = 3301 && time = 32 && var(12) && movetype != H
fvar(8) = ifelse(var(0)&2**12,-2,2)
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = movetype != H
trigger1 = stateno = 810
fvar(8) = 3
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = movetype != H
trigger1 = stateno = 2800
trigger2 = stateno = 2900
fvar(8) = 4
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = movetype != H
trigger1 = stateno = 820
fvar(8) = 5
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = var(1) = 1
trigger1 = stateno = 150
trigger2 = stateno = 152
trigger3 = stateno = 154
fvar(8) = 6
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = movetype != H
trigger1 = stateno = 1701
fvar(8) = 8
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
trigger1 = stateno = 5201
trigger2 = stateno = 5210
trigger3 = stateno = 955 && movetype != H
fvar(8) = 9
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = Time = 1
triggerall = fvar(23)
triggerall = movetype != H
triggerall = stateno != [2800,2999]
trigger1 = stateno = 195
trigger2 = stateno = [1000,3999]
fvar(8) = 10
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = var(58)&2**3
triggerall = !NumHelper(6600)
trigger1 = !fvar(8)
trigger2 = fvar(8) = [3,6]
id = 6600
name = "Guard"
pos = 0,0
postype = P1
stateno = 6640
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = !(var(58)&2**3)
triggerall = !NumHelper(6600)
trigger1 = !fvar(8)
trigger2 = fvar(8) = [3,6]
id = 6600
name = "Guard"
pos = 0,0
postype = P1
stateno = 6630
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = !(var(58)&2**2)
triggerall = !NumHelper(6600)
trigger1 = !fvar(8)
trigger2 = fvar(8) = [3,6]
id = 6600
name = "Guard"
pos = 0,0
postype = P1
stateno = 6620
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = !(var(58)&2**1)
triggerall = !NumHelper(6600)
trigger1 = !fvar(8)
trigger2 = fvar(8) = [3,6]
id = 6600
name = "Guard"
pos = 0,0
postype = P1
stateno = 6610
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(58)&2**0)
triggerall = !NumHelper(6600)
trigger1 = !fvar(8)
trigger2 = fvar(8) = [3,6]
id = 6600
name = "Guard"
pos = 0,0
postype = P1
stateno = 6600
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = var(58)&2**3
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = fvar(8) = -2 || fvar(8) = 2
id = 6602
name = "First Attack"
pos = 0,0
postype = P1
stateno = 6642
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = !(var(58)&2**3)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = fvar(8) = -2 || fvar(8) = 2
id = 6602
name = "First Attack"
pos = 0,0
postype = P1
stateno = 6632
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = !(var(58)&2**2)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = fvar(8) = -2 || fvar(8) = 2
id = 6602
name = "First Attack"
pos = 0,0
postype = P1
stateno = 6622
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = !(var(58)&2**1)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = fvar(8) = -2 || fvar(8) = 2
id = 6602
name = "First Attack"
pos = 0,0
postype = P1
stateno = 6612
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(58)&2**0)
triggerall = !NumHelper(6602)
triggerall = roundstate = 2
trigger1 = fvar(8) = -2 || fvar(8) = 2
id = 6602
name = "First Attack"
pos = 0,0
postype = P1
stateno = 6602
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = var(58)&2**3
triggerall = !NumHelper(6601)
trigger1 = fvar(8) = 1 || fvar(8) = -2
id = 6601
name = "Counter Hit"
pos = 0,0
postype = P1
stateno = 6641
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = !(var(58)&2**3)
triggerall = !NumHelper(6601)
trigger1 = fvar(8) = 1 || fvar(8) = -2
id = 6601
name = "Counter Hit"
pos = 0,0
postype = P1
stateno = ifelse(!(var(0)&2**13),6641,6631)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = !(var(58)&2**2)
triggerall = !NumHelper(6601)
trigger1 = fvar(8) = 1 || fvar(8) = -2
id = 6601
name = "Counter Hit"
pos = 0,0
postype = P1
stateno = ifelse(!(var(0)&2**13),6631,6621)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = !(var(58)&2**1)
triggerall = !NumHelper(6601)
trigger1 = fvar(8) = 1 || fvar(8) = -2
id = 6601
name = "Counter Hit"
pos = 0,0
postype = P1
stateno = ifelse(!(var(0)&2**13),6621,6611)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(58)&2**0)
triggerall = !NumHelper(6601)
trigger1 = fvar(8) = 1 || fvar(8) = -2
id = 6601
name = "Counter Hit"
pos = 0,0
postype = P1
stateno = ifelse(!(var(0)&2**13),6611,6601)
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = var(58)&2**3
triggerall = !NumHelper(6603)
trigger1 = fvar(8) = [7,9]
id = 6603
name = "Tech Hit"
pos = 0,0
postype = P1
stateno = 6643
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = !(var(58)&2**3)
triggerall = !NumHelper(6603)
trigger1 = fvar(8) = [7,9]
id = 6603
name = "Tech Hit"
pos = 0,0
postype = P1
stateno = 6633
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = !(var(58)&2**2)
triggerall = !NumHelper(6603)
trigger1 = fvar(8) = [7,9]
id = 6603
name = "Tech Hit"
pos = 0,0
postype = P1
stateno = 6623
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = !(var(58)&2**1)
triggerall = !NumHelper(6603)
trigger1 = fvar(8) = [7,9]
id = 6603
name = "Tech Hit"
pos = 0,0
postype = P1
stateno = 6613
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(58)&2**0)
triggerall = !NumHelper(6603)
trigger1 = fvar(8) = [7,9]
id = 6603
name = "Tech Hit"
pos = 0,0
postype = P1
stateno = 6603
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = var(58)&2**3
triggerall = !NumHelper(6604)
trigger1 = fvar(8) = 10
id = 6604
name = "Reversal"
pos = 0,0
postype = P1
stateno = 6644
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = !(var(58)&2**3)
triggerall = !NumHelper(6604)
trigger1 = fvar(8) = 10
id = 6604
name = "Reversal"
pos = 0,0
postype = P1
stateno = 6634
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = !(var(58)&2**2)
triggerall = !NumHelper(6604)
trigger1 = fvar(8) = 10
id = 6604
name = "Reversal"
pos = 0,0
postype = P1
stateno = 6624
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = !(var(58)&2**1)
triggerall = !NumHelper(6604)
trigger1 = fvar(8) = 10
id = 6604
name = "Reversal"
pos = 0,0
postype = P1
stateno = 6614
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(58)&2**0)
triggerall = !NumHelper(6604)
trigger1 = fvar(8) = 10
id = 6604
name = "Reversal"
pos = 0,0
postype = P1
stateno = 6604
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

;投げぬけ・受身GPボーナス
[State 180, 1]
type = VarAdd
trigger1 = fvar(8) = 9
var(50)=500
ignorehitpause = 1

;リバーサルボーナス
[State 180, 1]
type = VarAdd
trigger1 = fvar(8) = 10
var(50) = 2000
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = fvar(23) = 3
trigger2 = (stateno = [1000,3999]) && time = 1
fvar(22) = 0
ignorehitpause = 1

[State 180, 1]
type = VarSet
trigger1 = fvar(23) = 3
trigger2 = (stateno = [1000,3999]) && time = 1
fvar(23) = 0
ignorehitpause = 1

;フィニッシュヒット判定
[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = var(48) = [0,1]
fvar(9) = 1
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = var(48) = 2
fvar(9) = 5
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = var(48) = 3 || var(48) = 4
fvar(9) = 6+((var(20)=[3,5])*5)
ignorehitpause = 1

[State 180, 1]
type = VarAdd
triggerall = var(0)&2**16
trigger1 = !numtarget
var(0) = -(2**16)
ignorehitpause = 1

[State 180, 1]
type = VarAdd
triggerall = !(var(0)&2**16)
trigger1 = var(48) = 2 && var(49) = 3 && (fvar(8) = 1 || fvar(8) = -2)
trigger2 = var(48) = 3 && var(49) = 3
trigger3 = var(48) = 4 && var(49) = [2,3]
trigger4 = (var(0)&2**2) && var(49) = 3
var(0) = 2**16
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = var(0)&2**16
fvar(9) = 12
ignorehitpause = 1

[State 180, 1]
type = VarSet
triggerall = alive
trigger1 = (var(0)&2**2)
fvar(9) = 3
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = var(58)&2**3
triggerall = var(58)&2**4
triggerall = !(var(58)&2**5)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !var(32)
id = 6700
name = "Finish Hit"
pos = 0,0
postype = P1
stateno = 6750
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = var(58)&2**3
triggerall = !(var(58)&2**4)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !var(32)
id = 6700
name = "Finish Hit"
pos = 0,0
postype = P1
stateno = 6740
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = !(var(58)&2**3)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !var(32)
id = 6700
name = "Finish Hit"
pos = 0,0
postype = P1
stateno = 6730
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = !(var(58)&2**2)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !var(32)
id = 6700
name = "Finish Hit"
pos = 0,0
postype = P1
stateno = 6720
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = !(var(58)&2**1)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !var(32)
id = 6700
name = "Finish Hit"
pos = 0,0
postype = P1
stateno = 6710
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(58)&2**0)
triggerall = !NumHelper(6700)
triggerall = winKO
triggerall = alive
trigger1 = !var(32)
id = 6700
name = "Finish Hit"
pos = 0,0
postype = P1
stateno = 6700
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = var(58)&2**3
triggerall = var(58)&2**4
triggerall = var(58)&2**5
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = var(56) = 5
trigger1 = !(var(0)&2**14)
id = 6704
name = "Complete"
pos = 0,0
postype = P1
stateno = 6764
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = var(58)&2**3
triggerall = var(58)&2**4
triggerall = !(var(58)&2**5)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = var(56) = 5
trigger1 = !(var(0)&2**14)
id = 6704
name = "Complete"
pos = 0,0
postype = P1
stateno = 6754
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = var(58)&2**3
triggerall = !(var(58)&2**4)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = var(56) = 5
trigger1 = !(var(0)&2**14)
id = 6704
name = "Complete"
pos = 0,0
postype = P1
stateno = 6744
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = var(58)&2**2
triggerall = !(var(58)&2**3)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = var(56) = 5
trigger1 = !(var(0)&2**14)
id = 6704
name = "Complete"
pos = 0,0
postype = P1
stateno = 6734
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = var(58)&2**1
triggerall = !(var(58)&2**2)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = var(56) = 5
trigger1 = !(var(0)&2**14)
id = 6704
name = "Complete"
pos = 0,0
postype = P1
stateno = 6724
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = var(58)&2**0
triggerall = !(var(58)&2**1)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = var(56) = 5
trigger1 = !(var(0)&2**14)
id = 6704
name = "Complete"
pos = 0,0
postype = P1
stateno = 6714
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(58)&2**0)
triggerall = !NumHelper(6704)
triggerall = win
triggerall = alive
trigger1 = var(56) = 5
trigger1 = !(var(0)&2**14)
id = 6704
name = "Complete"
pos = 0,0
postype = P1
stateno = 6704
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(58)&2**0)
triggerall = !fvar(3)
triggerall = win
triggerall = alive
trigger1 = fvar(11) = 1
id = 6701
name = "Vital"
pos = 0,0
postype = P1
stateno = 6701
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(58)&2**1)
triggerall = !fvar(3)
triggerall = win
triggerall = alive
trigger1 = fvar(11) = 1
trigger1 = !(var(0)&2**15)
id = 6702
name = "Perfect"
pos = 0,0
postype = P1
stateno = 6712
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(58)&2**1)
triggerall = !fvar(3)
triggerall = win
triggerall = alive
trigger1 = fvar(11) = 1
trigger1 = var(0)&2**15
id = 6703
name = "Max Combo"
pos = 0,0
postype = P1
stateno = 6713
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

[State 3001, Super]
type = Helper
triggerall = !(var(58)&2**2)
triggerall = !fvar(3)
triggerall = win
triggerall = alive
trigger1 = fvar(11) = 1
trigger1 = !(var(0)&2**15)
id = 6703
name = "Max Combo"
pos = 0,0
postype = P1
stateno = 6723
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 999999
supermovetime = 999999
facing = facing*ifelse(teamside=1,1,-1)

;燃焼、感電エフェクト継続処理
[State -2, Combo]
type = VarSet
trigger1 = fvar(25)
fvar(25) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit || projhit = 1
fvar(25) = -1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit1305 = 1
trigger2 = projhit3007 = 1
trigger3 = projhit3207 = 1
fvar(25) = 1
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit4005 = 1
fvar(25) = 2
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit4005 = 1
fvar(25) = 3
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit4005 = 1
fvar(25) = 4
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit4005 = 1
fvar(25) = 5
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = p2movetype = H
trigger1 = projhit4005 = 1
fvar(25) = 6
ignorehitpause = 1

;燃焼エフェクト発生（ダウン）
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = fvar(25) = 1 || fvar(25) = 5
id = 8300
name = "FireEffect_Down"
pos = 0,0
postype = P2
stateno = 8300
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

;燃焼エフェクト発生（のけぞり）
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = fvar(25) = 2 || fvar(25) = 6
id = 8300
name = "FireEffect_KnockBack"
pos = 0,0
postype = P2
stateno = 8301
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

;感電エフェクト発生（ダウン）
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = fvar(25) = 3
id = 8300
name = "SparkEffect_KnockBack"
pos = 0,0
postype = P2
stateno = 8305
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

;感電エフェクト発生（のけぞり）
[State 3001, Super]
type = Helper
triggerall = !NumHelper(8300)
trigger1 = fvar(25) = 4
id = 8300
name = "SparkEffect_Down"
pos = 0,0
postype = P2
stateno = 8306
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1

;カウンターヒットエフェクト発生
[State -3, Blocking5]
type = helper
trigger1 = fvar(8) = 1 || fvar(8) = -2
trigger1 = projhit = 0
id = 8130
name = "COUNTER HIT EFFECT"
pos = Ceil(enemy,Const(size.ground.front)+var(38)),Ceil(Pos Y-enemy,Pos Y+var(39))
postype = P2
stateno = 8130
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
pausemovetime = 99999
supermovetime = 99999
size.xscale = 1
size.yscale = 1

;ヒット管理
[State -2, Combo]
type = VarSet
trigger1 = numenemy
trigger1 = enemy,MoveType != H
var(17) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarAdd
trigger1 = (stateno != [900,999]) && (stateno != [1830,1899])&& (stateno != [3300,3399])
trigger1 = movehit
trigger2 = projhit = 1
var(17) = 1
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = numenemy
triggerall = roundstate = 2
triggerall = (var(17) = 5 && !var(15)) || (var(17) = 10 && (var(0)&2**2))
trigger1 = !NumHelper(6800)&&!(var(0)&2**20)
trigger2 = !NumHelper(6800)&&(var(0)&2**20)&&!enemynear,NumHelper(6800)
id = 6800
name = "naration_3"
pos = 0,0
postype = P1
stateno = 6802
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

[State 180, 1];ファーストストライク判別
type = VarAdd
trigger1 = fvar(8) = -2 || fvar(8) = 2
var(50) = 5000
ignorehitpause = 1

[State 3001, Super]
type = Helper
triggerall = numenemy
triggerall = roundstate = 2
triggerall = var(51) < 400
triggerall = (!NumHelper(6800)&&!(var(0)&2**20)) || (!NumHelper(6800)&&(var(0)&2**20)&&!enemynear,NumHelper(6800))
trigger1 = fvar(8) = -2 || fvar(8) = 2
id = 6800
name = "naration_2"
pos = 0,300
postype = Left
stateno = 6801
helpertype = normal
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0
pausemovetime = 99999999999999

[State -2, Combo]
type = VarAdd
triggerall = !(var(0)&2**13)
trigger1 = fvar(8) = -2 || fvar(8) = 2
trigger2 = MoveType = H && (stateno != [150,159]) && (stateno != [4100,4199])
var(0) = 2**13
ignorehitpause = 1
persistent = 0

[State 180, 1];ヒットボーナス
type = VarAdd
triggerall = roundstate = 2
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(50)=ifelse((hitdefattr=SCA,NA,NP,NT),-50,ifelse((hitdefattr=SCA,SA,SP,ST),-30,-20))
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = !(var(0)&2**12)
triggerall = p2movetype = H
trigger1 = (stateno != [900,999]) && (stateno != [1830,1899])&& (stateno != [3300,3399])
trigger1 = movehit
trigger2 = projhit = 1
var(50)=500
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = var(0)&2**12
triggerall = p2movetype = H
trigger1 = (stateno != [900,999]) && (stateno != [1830,1899])&& (stateno != [3300,3399])
trigger1 = movehit
trigger2 = projhit = 1
var(50)=ifelse((hitdefattr=SCA,NA,NP,NT),1001,ifelse((hitdefattr=SCA,SA,SP,ST),3001,5001))
ignorehitpause = 1
persistent = 1

[State 180, 1]
type = VarAdd
triggerall = roundstate = 2
triggerall = var(0)&2**12
triggerall = p2movetype = H
trigger1 = (stateno != [900,999]) && (stateno != [1830,1899])&& (stateno != [3300,3399])
trigger1 = movehit
trigger2 = projhit = 1
var(50)=1000
ignorehitpause = 1
persistent = 1

[State -2, Combo];MAXコンボ数判別
type = VarSet
trigger1 = P2MoveType = H
trigger1 = var(47) < var(17)
var(47) = var(17)
ignorehitpause = 1
persistent = 1

[State 180, 1];コンボボーナス
type = VarAdd
triggerall = roundstate = 2
triggerall = var(17) >= 2
trigger1 = (stateno != [900,999]) && (stateno != [1830,1899])&& (stateno != [3300,3399])
trigger1 = movehit
trigger2 = projhit = 1
var(50)=ifelse(var(17)<6,2000,500)
ignorehitpause = 1
persistent = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
var(36) = ifelse(movehit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
var(36) = ifelse(moveguarded,2,4)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
triggerall = Time = 1
trigger1 = stateno != 1105
trigger1 = stateno != 1205
trigger1 = stateno != 1255
trigger1 = stateno != 1405
trigger1 = stateno != 1702
trigger1 = stateno != 1815
trigger1 = stateno != 1825
trigger1 = stateno != 3105
trigger1 = stateno != 3205
var(36) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = 1
fvar(24) = 0
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = movehit
trigger2 = projHit = 1
fvar(24) = ifelse(movehit,1,3)
ignorehitpause = 1

[State -2, Combo]
type = VarSet
trigger1 = moveguarded
trigger2 = projGuarded = 1
fvar(24) = ifelse(moveguarded,2,4)
ignorehitpause = 1

[State -2, MoveContact]
type = MoveHitReset
trigger1 = MoveContact
ignorehitpause = 1

;パワー増加量判定
[State -2, PowerReset]
type = VarSet
trigger1 = !var(20)
var(24) = 0

[State -2, PowerReset]
type = VarSet
trigger1 = var(20) = 1
var(24) = 167

[State -2, PowerReset]
type = VarSet
trigger1 = var(20) = 2
var(24) = -125

[State -2, PowerReset]
type = VarSet
trigger1 = var(20) = 4
var(24) = -222

[State -2, PowerReset]
type = VarSet
trigger1 = var(20) = 6
var(24) = -360

; K-Groove Update
[State -2, PowerReset]
type = VarSet
trigger1 = var(20) = 3 || var(20) = 5
var(24) = -1000

[State -2, Power0]
type = VarSet
triggerall = RoundState = 2
trigger1 = Var(20) = 3
trigger1 = (100*life/const(data.life))<=100
trigger1 = (100*life/const(data.life))>30
var(31) = 0

[State -2, Power2]
type = VarSet
triggerall = RoundState = 2
trigger1 = Var(20) = 3
trigger1 = (100*life/const(data.life))<=30
trigger1 = (100*life/const(data.life))>15
trigger2 = Var(20) = 5
trigger2 = (100*life/const(data.life))<=100
trigger2 = (100*life/const(data.life))>15
var(31) = 2

[State -2, Power3]
type = VarSet
triggerall = RoundState = 2
trigger1 = Var(20) = 5
trigger1 = (100*life/const(data.life))<=15
trigger1 = (100*life/const(data.life))>0
var(31) = 3

[State -2, Power4]
type = VarSet
triggerall = RoundState = 2
trigger1 = Var(20) = 3
trigger1 = (100*life/const(data.life))<=15
trigger1 = (100*life/const(data.life))>0
var(31) = 4

[State -2, PowerReset]
type = VarSet
triggerall = roundstate = 2
trigger1 = 1
var(46) = gethitvar(damage)

;攻撃力変動判定
[State -2, PowerReset]
type = VarSet
triggerall = !var(20) || var(20) = 6
triggerall = !(var(0)&2**2)
triggerall = roundstate = 2
trigger1 = power = [0,999]
var(7) = 0

[State -2, PowerReset]
type = VarSet
triggerall = var(20) != 0 && var(20) != 6
trigger1 = roundstate = 2
var(7) = 0

[State -2, PowerReset]
type = VarSet
triggerall = !var(20) || var(20) = 6
triggerall = !(var(0)&2**2)
triggerall = roundstate = 2
trigger1 = power = [1000,1999]
var(7) = 1

[State -2, PowerReset]
type = VarSet
triggerall = !var(20) || var(20) = 6
triggerall = !(var(0)&2**2)
triggerall = roundstate = 2
trigger1 = power = [2000,2999]
var(7) = 2

[State -2, PowerReset]
type = VarSet
triggerall = !var(20) || var(20) = 6
triggerall = !(var(0)&2**2)
triggerall = roundstate = 2
trigger1 = power >= 3000
var(7) = 5

[State -2, PowerReset]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=100
trigger1 = (100*life/const(data.life))>30
var(8) = 0

[State -2, PowerReset2]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=30
trigger1 = (100*life/const(data.life))>15
var(8) = 5

[State -2, PowerReset3]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*life/const(data.life))<=15
trigger1 = (100*life/const(data.life))>0
var(8) = 10

[State -2, PowerReset4]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=100
trigger1 = (100*enemy,life/enemy,const(data.life))>30
var(9) = 0

[State -2, PowerReset5]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=30
trigger1 = (100*enemy,life/enemy,const(data.life))>15
var(9) = -10

[State -2, PowerReset6]
type = VarSet
triggerall = roundstate = 2
trigger1 = (100*enemy,life/enemy,const(data.life))<=15
trigger1 = (100*enemy,life/enemy,const(data.life))>0
var(9) = -25

[State -2, PowerReset]
type = VarSet
triggerall = var(20) = 5
triggerall = roundstate = 2
trigger1 = var(0)&2**3
var(21) = ifelse((stateno = [195,999]),35,ifelse((stateno = [1000,2999]),30,10))

[State -2, PowerReset]
type = VarSet
triggerall = var(20) = 5
triggerall = roundstate = 2
trigger1 = !(var(0)&2**3)
var(21) = 0

[State -2, PowerReset]
type = VarSet
triggerall = var(20) != 5
triggerall = roundstate = 2
trigger1 = 1
var(21) = 0

[State -2, 1]
type = VarSet
trigger1 = P2movetype != H
var(17) = 0

[State -2]
type = VarSet
trigger1 = var(17) < 10
trigger1 = var(0)&2**2
trigger1 = stateno = [0, 2999]
fvar(0) = (10-var(17))*.1*.72
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(17) >= 10
trigger1 = var(0)&2**2
trigger1 = stateno = [0, 2999]
fvar(0) = .072
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = var(0)&2**2
trigger1 = stateno = [3000, 3999]
fvar(0) = .8
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = !(var(0)&2**2)
trigger1 = var(17) = [6,29]
trigger1 = stateno = [0, 2999]
fvar(0) = (24-(var(17)-5))*.0417
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = !(var(0)&2**2)
trigger1 = var(17) > 30
trigger1 = stateno = [0, 2999]
fvar(0) = .0417
ignorehitpause = 1

[State -2]
type = VarSet
triggerall = !(var(0)&2**2)
trigger1 = var(17) <= 5
trigger2 = stateno = [3000, 3999]
fvar(0) = 1
ignorehitpause = 1

[State -2]
type = VarSet
trigger1 = 1
fvar(10) = (100+var(7))*.01*(100+var(8))*.01*(100+var(9))*.01*(100+var(21))*.01*(100+((var(14)>0)*15))*.01*(100+ ((var(15)>0)*20))*.01*(10+(((var(0)&2**12)/2**12)*2))*.1*fvar(0);*(2+(var(12)&&var(59)))*.5
ignorehitpause = 1

;カウンターヒット
[State -2, PowerReset]
type = VarAdd
triggerall = !(var(0)&2**12)
trigger1 = P2MoveType = A
var(0) = 2**12

[State -2, PowerReset]
type = VarAdd
triggerall = var(0)&2**12
trigger1 = P2MoveType != A
var(0) = -(2**12)

;地上受身可能判定
[State -2, PowerReset]
type = VarAdd
triggerall = !(var(0)&2**10)
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = time = 0
trigger1 = P2stateno = [3000,3999]
var(0) = 2**10

[State -2, PowerReset]
type = VarAdd
triggerall = (var(0)&2**10)
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = time = 0
trigger1 = P2stateno != [3000,3999]
trigger2 = movetype != H
var(0) = -(2**10)

;振り向き
[State 1300,Turn]
type = Turn
triggerall = P2Dist X < 0
trigger1 = prevstateno = 52
trigger1 = stateno = [1000,3999]
trigger1 = time = 1
ignorehitpause = 1

;削りKO移行
[State -2, 3] 
type = ChangeState
trigger1 = !alive
trigger1 = prevstateno = 130 || prevstateno = 131 || prevstateno = [150,153]
trigger1 = Stateno = [5000,5050]
value = 5950

[State -2,KO]
type = VarAdd
triggerall = var(0)&2**8
triggerall = stateno = [120,159]
trigger1 = StateType = S
ignorehitpause = 1
var(0) = -(2**8)

[State -2,KO]
type = VarAdd
triggerall = !(var(0)&2**8)
triggerall = stateno = [120,159]
trigger1 = StateType = C
ignorehitpause = 1
var(0) = 2**8

;ブロッキング入力
[State -2, Blocking-1]
type = VarAdd
triggerall = var(0)&2**6
trigger1 = var(10) >= 20
trigger2 = (stateno = [4000,4021]) && time = 1
var(0) = -(var(0)&2**6)

[State -2, Blocking-1]
type = VarSet
trigger1 = var(10) >= 20
trigger2 = (stateno = [4000,4021]) && time = 1
var(10) = 0

[State -2, Blocking-1]
type = VarAdd
trigger1 = var(10)
var(10) = 1
ignorehitpause = 1

[State -2, Blocking-1]
type = VarSet
triggerall = !var(59)
triggerall = !var(10)
triggerall = var(20) = 2 || var(20) = 6
trigger1 = command = "block" && command != "holddown"&& Command != "holdup"
var(10) = 1

[State -2, Blocking-1]
type = VarAdd
triggerall = !(var(0)&2**6)
trigger1 = var(10) = [1,4]
trigger1 = command != "holdfwd" && Command != "holdback" && command != "holdup" && Command != "holddown"
var(0) = 2**6

[State -2, Blocking-12
type = VarAdd
triggerall = var(0)&2**7
trigger1 = var(11) >= 20
trigger2 = (stateno = [4000,4021]) && time = 1
var(0) = -(var(0)&2**7)

[State -2, Blocking-2]
type = VarSet
trigger1 = var(11) >= 20
trigger2 = (stateno = [4000,4021]) && time = 1
var(11) = 0

[State -2, Blocking-2]
type = VarAdd
trigger1 = var(11)
var(11) = 1
ignorehitpause = 1

[State -2, Blocking-2]
type = VarSet
triggerall = !var(59)
triggerall = !var(11)
triggerall = var(20) = 2 || var(20) = 6
trigger1 = command = "block2" && command != "holdfwd"&& Command != "holdback"
var(11) = 1

[State -2, Blocking-2]
type = VarAdd
triggerall = !(var(0)&2**7)
trigger1 = var(11) = [1,4]
trigger1 = command != "holdfwd" && Command != "holdback" && command != "holdup" && Command != "holddown"
var(0) = 2**7

;上段ブロッキング移行
[State -2, 4000] 
type = HitOverride
triggerall = var(20) = 2 || var(20) = 6
triggerall = statetype != A && ctrl
trigger1 = (var(10) = [1,4]) && !var(59)
trigger2 = (var(10) = [5,8]) && (var(0)&2**6) && !var(59)
trigger3 = Random <= (250+(var(12)*20)) && var(59)
slot = 0
stateno = 4000
attr = SA, AA
time = 1

[State -2, 4000] 
type = HitOverride
triggerall = var(20) = 2 || var(20) = 6
triggerall = statetype != A && ctrl
trigger1 = (var(10) = [1,4]) && !var(59)
trigger2 = (var(10) = [5,8]) && (var(0)&2**6) && !var(59)
trigger3 = Random <= (250+(var(12)*20)) && var(59)
slot = 1
stateno = 4001
attr = SA, AP
time = 1

;下段ブロッキング移行
[State -2, 4010]
type = HitOverride
triggerall = var(20) = 2 || var(20) = 6
triggerall = statetype != A && ctrl
trigger1 = (var(11) = [1,4]) && !var(59)
trigger2 = (var(11) = [5,8]) && (var(0)&2**7) && !var(59)
trigger3 = Random <= (250+(var(12)*20)) && var(59)
slot = 0
stateno = 4010
attr = C, AA
time = 1

[State -2, 4010]
type = HitOverride
triggerall = var(20) = 2 || var(20) = 6
triggerall = statetype != A && ctrl
trigger1 = (var(11) = [1,4]) && !var(59)
trigger2 = (var(11) = [5,8]) && (var(0)&2**7) && !var(59)
trigger3 = Random <= (250+(var(12)*20)) && var(59)
slot = 1
stateno = 4011
attr = C, AP
time = 1

;空中ブロッキング移行
[State -2, 4020]
type = HitOverride
triggerall = !(var(0)&2**5)
triggerall = var(20) = 2 || var(20) = 6
triggerall = statetype = A && ctrl
trigger1 = (var(10) = [1,4]) && !var(59)
trigger2 = (var(10) = [5,8]) && (var(0)&2**6) && !var(59)
trigger3 = Random <= (250+(var(12)*20)) && var(59)
slot = 0
stateno = 4020
attr = SCA, AA
time = 1

[State -2, 4020]
type = HitOverride
triggerall = !(var(0)&2**5)
triggerall = var(20) = 2 || var(20) = 6
triggerall = statetype = A && ctrl
trigger1 = (var(10) = [1,4]) && !var(59)
trigger2 = (var(10) = [5,8]) && (var(0)&2**6) && !var(59)
trigger3 = Random <= (250+(var(12)*20)) && var(59)
slot = 1
stateno = 4021
attr = SCA, AP
time = 1

;ジャストディフェンス入力
[State -2, 46]
type = VarSet
trigger1 = roundstate = 0
var(25) = -1

[State -2, 47]
type = VarAdd
trigger1 = var(25) >= 0
var(25) = 1
ignorehitpause = 1

[State -2, 46]
type = VarSet
triggerall = var(25) > 12
trigger1 = command != "holdback"
var(25) = -1

[State -2, 46]
type = VarSet
triggerall = var(25) = -1
triggerall = stateno != [140,149]
trigger1 = command = "back"
trigger2 = command = "downback"
var(25) = 0

[State -2, 46]
type = VarSet
triggerall = var(25) = [0,6]
trigger1 = command != "holdback"
var(25) = 7

[State 180, 1]
type = VarSet
trigger1 = stateno != [120,155]
var(1) = 0
ignorehitpause = 1

;ジャストディフェンス硬直時間
[State -2, 47]
type = VarAdd
trigger1 = fvar(34) > 0
fvar(34) = -1
ignorehitpause = 1

[State -2, 47]
type = VarAdd
trigger1 = !fvar(34)
trigger1 = fvar(35) > 0
fvar(35) = -1
ignorehitpause = 1

;地上ジャストディフェンス移行
[State 4100, VarSet]
type = VarSet
triggerall = var(20) = 5 || var(20) = 6
triggerall = var(1) != -1
triggerall = stateno = 150 && time = 0
trigger1 = (var(25) = [0,6]) && !var(59)
trigger2 = Random <= (300+(var(12)*10)) && var(59)
var(1) = 1

;しゃがみジャストディフェンス移行
[State 4110, VarSet]
type = VarSet
triggerall = var(20) = 5 || var(20) = 6
triggerall = var(1) != -1
triggerall = stateno = 152 && time = 0
trigger1 = (var(25) = [0,6]) && !var(59)
trigger2 = Random <= (300+(var(12)*10)) && var(59)
var(1) = 1

;空中ジャストディフェンス移行
[State 4120, 3]
type = HitOverride
triggerall = var(20) = 5 || var(20) = 6
triggerall = var(1) != -1
triggerall = stateno = 120 && statetype = A && (-Pos Y >= Vel Y)
triggerall = !(var(0)&2**5)
trigger1 = (var(25) = [0,6]) && !var(59)
trigger2 = Random <= (300+(var(12)*10)) && var(59)
slot = 0
stateno = 154
attr = SCA, AA, AP
time = 1

[State 4120, VarSet]
type = VarSet
triggerall = stateno = 154
triggerall = time = 0
trigger1 = prevstateno = 5020
var(1) = 1

;ブロッキング、ジャストディフェンスボイス
[State 4100, PlaySnd]
type = Playsnd
triggerall = time = 0
trigger1 = stateno = 4000
trigger2 = stateno = 4001
trigger3 = stateno = 4010
trigger4 = stateno = 4011
trigger5 = stateno = 4020
trigger6 = stateno = 4021
trigger7 = stateno = 150 && var(1) = 1
trigger8 = stateno = 152 && var(1) = 1
trigger9 = stateno = 154 && var(1) = 1
value = 0,0

;ブロッキングエフェクト
[State 4100, Explod]
type = Explod
triggerall = time = 0
trigger1 = stateno = 4000
trigger2 = stateno = 4001
trigger3 = stateno = 4010
trigger4 = stateno = 4011
trigger5 = stateno = 4020
trigger6 = stateno = 4021
anim = 8065
pos = ifelse(stateno=4000||stateno=4001,35,ifelse(stateno=4010||stateno=4011,18,31)),ifelse(stateno=4000||stateno=4001,-68,ifelse(stateno=4010||stateno=4011,-27,-57))
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 15

;ジャストディフェンスエフェクト
[State 4100, Explod]
type = Explod
triggerall = var(1) = 1
triggerall = time = 0
trigger1 = stateno = 150
trigger2 = stateno = 152
trigger3 = stateno = 154
anim = 8060
pos = ifelse(stateno=150,0,ifelse(stateno=152,0,13)),ifelse(stateno=150,-55,ifelse(stateno=152,-35,-93))
sprpriority = 3
ownpal = 1
scale = .5,.5
pausemovetime = 4

;KO後AI暴れ防止
[State -2,AI]
type = Varset
trigger1 = roundstate = 3
trigger1 = var(59) = 1
ignorehitpause = 1
var(59) = 2

[State -2,AI]
type = Varset
trigger1 = roundstate = 1
trigger1 = var(59) = 2
ignorehitpause = 1
var(59) = 1

;KO時ボイス
[State -2,AI]
type = VarAdd
trigger1 = var(0)&2**17
ignorehitpause = 1
var(0) = -(2**17)

[State -2,AI]
type = VarAdd
trigger1 = !(var(0)&2**17)
trigger1 = anim = 5950 || stateno = 5950
ignorehitpause = 1
var(0) = 2**17

[State -2,AI]
type = Varset
trigger1 = movetype != H
trigger1 = roundstate = 2
ignorehitpause = 1
var(37) = 0

[State -2,AI]
type = Varset
trigger1 = StateNo = 5000 || StateNo = 5010 || StateNo = 5020 || StateNo = 5070 || StateNo = 5080
trigger1 = roundstate = 2
trigger1 = time = 0
ignorehitpause = 1
var(37) = gethitvar(hitshaketime)

[State -2, KO]
type = PlaySnd
triggerall = roundstate = [2,3]
trigger1 = !(var(0)&2**17) && !fvar(20)
trigger1 = Var(27) = ifelse(!var(37),1,ifelse(var(37)>20,20,var(37)))
trigger2 = !(var(0)&2**17) && fvar(20)
trigger2 = Var(27) = 12
ignorehitpause = 1
value = 110, var(12)

[State -2, KO]
type = PlaySnd
triggerall = roundstate = [2,3]
triggerall = var(0)&2**17
triggerall = !alive
trigger1 = anim = 5950 && animelemtime(1) = 2
ignorehitpause = 1
value = 5950, var(12)

[State -2,KO]
type = Varadd
trigger1 = !alive
ignorehitpause = 1
var(27) = 1

[State -2,KO]
type = Varset
trigger1 = alive
ignorehitpause = 1
var(27) = 0

;KO時演出
[State -2, HyperComboFinish]
type = Helper
triggerall = roundstate >= 2
triggerall = WinKo && !var(32) && stateno != [3300,3399]
trigger1 = stateno = [3000, 3999]
trigger2 = var(0)&2**2
trigger3 = fvar(9)=12
trigger4 = projhittime(3005) = 1 || projhittime(3006) = 1 || projhittime(3007) = 1
trigger5 = projhittime(3405) = 1 || projhittime(3406) = 1 || projhittime(3407) = 1
ID = 9000
stateno = ifelse(fvar(9)=12,9020,ifelse((var(20)=[3,5]),9010,9000))
postype = left
pos = -50,0
pausemovetime = 999999
supermovetime = 999999
ignorehitpause = 1
ownpal = 1

[State -2, HyperComboFinish]
type = PlaySnd
triggerall = roundstate >= 2
trigger1 = WinKo && !var(32) && stateno != [3300,3399]
value = 9000,0
ignorehitpause = 1

[State 9020, PlaySnd]
type = PlaySnd
triggerall = roundstate >= 2
trigger1 = WinKo && !var(32)
trigger1 = fvar(9)=12
value = 9000,4
ignorehitpause = 1

[State -2, HyperComboFinish] ; WinKO Pausetime
type = pause
triggerall = roundstate >= 2
trigger1 = WinKo && !var(32) && stateno != [3300,3399]
time = 15
ignorehitpause = 1

[State -2,KO]
type = Varadd
trigger1 = roundstate = 3
;trigger1 = numhelper(9000) ; added by Inktrebuchet ENABLE FOR IKEMEN
ignorehitpause = 1
var(32) = 1

[State -2,KO]
type = Varadd
trigger1 = roundstate = 4
ignorehitpause = 1
fvar(11) = 1

;エフェクト除去
[State -2, Power Chage]
type = RemoveExplod
trigger1 = MoveType = H || stateno != 1300
ID = 1355

[State -2, Power Chage]
type = RemoveExplod
trigger1 = MoveType = H || stateno != 3400
ID = 1358

[State -2, Power Chage]
type = RemoveExplod
trigger1 = MoveType = H
ID = 850

[State -2, Power Chage]
type = RemoveExplod
trigger1 = stateno != 860
ID = 860

[State -2, Power Chage]
type = RemoveExplod
trigger1 = stateno != 870
ID = 870

;残像消去
[State -2]
type = AfterImageTime
triggerall = !var(16)
trigger1 = MoveType = H
trigger2 = StateNo = [0,49]
trigger3 = StateNo = [100,189]
trigger4 = StateNo = 195
trigger5 = StateNo = [200,799]
trigger6 = StateNo = [850,859]
trigger7 = StateNo = [900,1499]
trigger8 = StateNo = [1600,1999]
time = 0

;ラウンド開始時等パワーリセット等
[State -2, 1]
type = PowerSet
triggerall = roundstate = 0
trigger1 = fvar(13) || (var(0)&2**2)
trigger2 = var(20) = 3
value = 0

[State -2, 1]
type = PowerSet
triggerall = roundstate = 0
triggerall = var(20) = 5
trigger1 = var(0)&2**18
value = 0

[State -2, 1]
type = VarSet
trigger1 = roundstate = 0 && ((var(0)&2**3) || (var(0)&2**18)) && roundno != 1
fvar(13) = 0

[State -2, 1]
type = null
trigger1 = roundstate = 0
trigger1 = 1 || var(0) := (var(0)-(var(0)&2**2))
trigger1 = 1 || var(0) := (var(0)-(var(0)&2**13))
trigger1 = 1 || var(0) := (var(0)-(var(0)&2**15))
trigger1 = 1 || var(0) := (var(0)-(var(0)&2**20))
trigger1 = 1 || var(13) := 0
trigger1 = 1 || var(14) := 0
trigger1 = 1 || var(15) := 0
trigger1 = 1 || var(16) := 0
trigger1 = 1 || var(32) := 0
trigger1 = 1 || var(47) := 0
trigger1 = 1 || var(51) := 0
trigger1 = 1 || var(58) := 0
trigger1 = 1 || fvar(5) := 0
trigger1 = 1 || fvar(6) := 0
trigger1 = 1 || fvar(11) := 0

[State -2, 1]
type = null
trigger1 = roundstate = 0 && roundno = 1
trigger1 = 1 || var(0) := (var(0)-(var(0)&2**3))
trigger1 = 1 || var(0) := (var(0)-(var(0)&2**14))
trigger1 = 1 || fvar(13) := 0

[State -2, 1]
type = VarSet
trigger1 = matchover
var(30) = 0

[State -2, 1]
type = PalFX
trigger1 = roundstate = 0
Time = 1
add   = 0,0,0
ignorehitpause = 1

;原作判別
[State -2, 1]
type = VarSet
trigger1 = 1
fvar(39) = 1;CAPCOM VS SNK 2

;キャラ判別
[State -2, 1]
type = VarAdd
triggerall = !(var(0)&2**20)
triggerall = numenemy
triggerall = roundstate = 2
trigger1 = enemy,authorname = "warusaki3" && enemy,fvar(39) = 1
trigger2 = enemy,authorname = "H”" && enemy,fvar(39) = 1
trigger3 = enemy,authorname = "mouser" && (P2Name = "Hibiki Takane" || P4Name = "Hibiki Takane")
trigger4 = enemy,authorname = "Jesuszilla" && enemy,fvar(17) = 1
trigger5 = enemy,authorname = "N64Mario" && enemy, Name = "Zero" && enemy,fvar(17) = 1
trigger6 = enemy,authorname = ".\/." && enemy,fvar(17) = 1
var(0) = 2**20

;やられ時にゲージ消去する相手動作の判定
[State -2, 1]
type = VarAdd
trigger1 = var(0)&2**19
var(0) = -(2**19)

[State -2, 1]
type = VarAdd
triggerall = !(var(0)&2**19)
triggerall = numenemy
trigger1 = (enemynear,authorname="warusaki3"&&enemynear,fvar(39)=1&&enemynear,var(13))
trigger2 = (enemynear,authorname="SUMI"&&enemynear,name="Destrudo Ryu"&&enemynear,var(16)=1)
var(0) = 2**19

;製作用関数表示
[State -2, DEBUG]
trigger1 = 1
type = DisplayToClipboard
ignorehitpause = 1
text = "Groove VAR = %d Parry= %d JD =%d Parry = %d Oricom = %d \n "
params = ceil(p2bodydist x), ceil(p2bodydist Y), ceil(Pos Y -28), life, var(0)

[Statedef -3]

[State -3, Bounding Sound]
type = PlaySnd
triggerall = Time = 1
trigger1 = StateNo = 5100 || StateNo = 5110
value = 5100, 0
channel = 20

[State -3, GetHurt Sound]
type = PlaySnd
triggerall = Random < 500
triggerall = Time = 0
triggerall = alive
trigger1 = stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080 || StateNo = 5100
value = 5000, ifelse(StateNo = 5100 || GetHitVar(animtype) = 2, 2, ifelse(GetHitVar(animtype) = 1, 1, 0))
channel = 10

[State 3000, Voice]
type = PlaySnd
triggerall = var(12)
triggerall = Time = 1
trigger1 = StateNo = 5201 || StateNo = 5210
value = 0,11
channel = 0

[State 3000, Voice]
type = PlaySnd
triggerall = !var(12)
triggerall = Time = 1
trigger1 = StateNo = 5201 || StateNo = 5210
value = 0,0
channel = 0

[State 820, Voice]
type = Stopsnd
trigger1 = stateno = 5000 || stateno = 5010 || stateno = 5020 || stateno = 5070 || stateno = 5080 || StateNo = 5100
trigger2 = StateNo = [120,159]
channel = 0
