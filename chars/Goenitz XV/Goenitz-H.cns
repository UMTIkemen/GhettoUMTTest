;---------------------------------------------------------------------------
; ここからは超必殺技のステート
;---------------------------------------------------------------------------
; 弱みずち
; CNS レベル: 中級

[Statedef 2000]
type     = S
movetype = A
physics  = S
juggle   = 5
velset   = 0,0
anim     = 2000
poweradd = -ifelse(Var(23)>0,0,1000)
ctrl     = 0
sprpriority = 2

[State 3000, 7]
type = NotHitBy
trigger1 = animelemtime(11) <  0
value = SCA

;------------------------------
;KOFM SUPER CANCEL SIGN
;------------------------------
[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7600
pos = 0,75
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7610
pos = 0,73
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
trans = addalpha
alpha = 256, 135
ownpal = 1

;KOF02 PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,4999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;FLASH EFFECT
[State 13000, EnvColor]
type = EnvColor
trigger1 = AnimElem = 3
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 39
time = 39
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(5) < 0
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 7000
pos = 28,-130
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 7010
pos = 28,-130
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s9,0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10,23

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 8
value = s12,3

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 8
value = s12,14

[State 1000, ]
type = MakeDust
trigger1 = AnimElem = 8

[State 1000, ]
type = Posadd
trigger1 = AnimElem = 8
x = 10

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(8) >= 0 && AnimElemtime(11) < 0
x = -.1

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(8) >= 0 && AnimElemtime(16) < 0
x = 10

[State 1000, ]
type = Velset
trigger1 = AnimElem = 19
x = 0

[State 2000]
type = Explod
trigger1 = AnimElem = 8
anim = 1305
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = 1

[State 1950]
type = HitDef
trigger1 = numtarget(1263) = 0
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 0,0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 6,10
sparkno = s4040
guard.sparkno = s4120
sparkxy = -15,-40
hitsound = s1,1
guardsound = s2,1
guard.velocity = -9
ground.type = High
ground.slidetime = 16
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 2010
p2stateno = 20200

[State 1950]
type = HitDef
trigger1 = numtarget(1263) >= 1
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 0,0
animtype = Hard
hitflag = N
guardflag = M
priority = 5
pausetime = 10,10
sparkno = s4040
guard.sparkno = s4120
sparkxy = -15,-40
hitsound = s1,1
guardsound = s2,1
guard.velocity = -9
ground.type = High
ground.slidetime = 16
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1


[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; 強みずち
; CNS レベル: 中級

[Statedef 2050]
type     = S
movetype = A
physics  = S
juggle   = 5
velset   = 0,0
anim     = 2050
poweradd = -ifelse(Var(23)>0,0,1000)
ctrl     = 0
sprpriority = 2

[State 3000, 7]
type = NotHitBy
trigger1 = animelemtime(9) <  0
value = SCA

;------------------------------
;KOFM SUPER CANCEL SIGN
;------------------------------
[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7600
pos = 0,75
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7610
pos = 0,73
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
trans = addalpha
alpha = 256, 135
ownpal = 1

;KOF02 PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,4999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;FLASH EFFECT
[State 13000, EnvColor]
type = EnvColor
trigger1 = AnimElem = 3
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 39
time = 39
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(5) < 0
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 7000
pos = 28,-130
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 7010
pos = 28,-130
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s9,0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10,23

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = s12,3

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = s12,14

[State 1000, ]
type = MakeDust
trigger1 = AnimElem = 6

[State 1000, ]
type = Posadd
trigger1 = AnimElem = 6
x = 10

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(6) >= 0
y = .7

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(6) >= 0
x = 8

[State 1000, ]
type = Velset
trigger1 = AnimElem = 6
y = -7.5

[State 2000]
type = Explod
trigger1 = AnimElem = 6
anim = 1305
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = 1

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 6
statetype = A

[State 1950]
type = HitDef
trigger1 = numtarget(1263) = 0
trigger1 = Time = 0
attr = A,HA
getpower = 0
damage = 0,0
animtype = Hard
hitflag = MAF
guardflag = H
priority = 5
pausetime = 6,10
sparkno = s4040
guard.sparkno = s4120
sparkxy = -15,-40
hitsound = s1,1
guardsound = s2,1
guard.velocity = -9
ground.type = High
ground.slidetime = 16
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 2010
p2stateno = 20200

[State 1950]
type = HitDef
trigger1 = numtarget(1263) >= 1
trigger1 = Time = 0
attr = A,HA
getpower = 0
damage = 0,0
animtype = Hard
hitflag = N
guardflag = H
priority = 5
pausetime = 10,10
sparkno = s4040
guard.sparkno = s4120
sparkxy = -15,-40
hitsound = s1,1
guardsound = s2,1
guard.velocity = -9
ground.type = High
ground.slidetime = 16
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2055

;---------------------------------------------------------------------------
; 着地

[Statedef 2055]
type     = S
movetype = I
physics  = S
juggle   = 0
poweradd = 0
anim     = 2055
ctrl     = 0
sprpriority = 2

[State 1000, ]
type = MakeDust
trigger1 = time = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s4,0

[State 1000,]
type = Posset
trigger1 = time = 0
y = 0

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
y = 0

[State 1000, 軸位置移動]
type = Velset
trigger1 = AnimElem = 4
x = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; みずち　発動

[Statedef 2010]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2010
ctrl     = 0
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 60,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 10
trigger3 = AnimElem = 17
trigger4 = AnimElem = 23
trigger5 = AnimElem = 30
trigger6 = AnimElem = 36
value = s0,1

[State 52, 1]
type = VelSet
trigger1 = 1
x = 1

[State 810, 1]
type = TargetBind
trigger1 = 1
pos = 40,0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 10 | AnimElem = 23 | AnimElem = 36
attr = S, HA
getpower = 0
damage = 15,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10
sparkno = s4070
sparkxy = -10,-60
hitsound = s1,7
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 20200
p2facing = 1
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 5 | AnimElem = 18 | AnimElem = 31
attr = S, HA
getpower = 0
damage = 20,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10
sparkno = s4070
sparkxy = -10,-50
hitsound = s1,7
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 20300
p2facing = 1
kill = 0

[State 2100,]
type = Envcolor
trigger1 = Movehit = 1
time = 0
value = 255,0,0
under = 1

[State 52, 4]
type = ChangeState
trigger1 = Animtime = 0
value = 2015

;-----------------------------------------------------------------------------
;投げ２・投げている（自分）
[Statedef 2015]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 2015

[State 170, ]
type = TargetState
trigger1 = time = 0
value = 20400

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = time = 0
edge = 60,0

[State 810, ]
type = Null;Posadd
trigger1 = time = 0
trigger2 = AnimElem = 2
x = 10

[State 810, ]
type = Null;Turn
trigger1 = AnimElem = 4

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 2
anim = f850
postype = P1
pos = 15, -120
sprpriority = 15
ownpal = 0

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 2
value = s800,0

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 3
value = s12,12

;[State 810, 1]
;type = PlaySnd
;Trigger1 = AnimElem = 5
;value = s3,2

[State 810, 1]
type = Null;PlaySnd
Trigger1 = AnimElem = 5
value = s10,9

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 5
value = s1,8

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 5
value = s1,7

[state ]
type = sprpriority
trigger1 = animelem = 4
value = -1

[State 200,]
type = Null;Posadd
trigger1 = AnimElem = 6 | AnimElem = 7 | AnimElem = 8
x = 10

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
pos = 25, 0

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(4) < 0
pos = 25, -120

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(4) >= 0 && AnimElemtime(5) < 0
pos = 25, -105

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(5) = 0
pos = 50, 0

[State 2000]
type = Explod
trigger1 = AnimElem = 5
anim = 1125
pos = 10,10
sprpriority = 5
ownpal = 1
bindtime = 1
scale = 1.5,1

[State 820, 1]
type = EnvShake
trigger1 = animelem = 5
time = 15
ampl = -12
freq = 75
phase = 75


[State 700, エフェクト表示]
type = Explod
Trigger1 = time = 12 | time = 20 | time = 28 | time = 36 | time = 44
Trigger2 = time = 52 | time = 60 | time = 68 | time = 76 | time = 84
Trigger3 = time = 92 | time = 100
anim = 835
postype = P1
pos = -5, -120
sprpriority = 5
ownpal = 1

[State 700, エフェクト表示]
type = Explod
Trigger1 = time = 16 | time = 24 | time = 32 | time = 40 | time = 48
Trigger2 = time = 56 | time = 64 | time = 72 | time = 80 | time = 88
Trigger3 = time = 96
anim = 835
postype = P1
pos = 35, -120
sprpriority = 5
ownpal = 1
facing = -1

[State 700, エフェクト表示]
type = Null;Explod
trigger1 = AnimElemtime(8) = 0
anim = 855
postype = P2
pos = 0, 0
sprpriority = -5
ownpal = 0

[State 700, エフェクト表示]
type = Null;Explod
trigger1 = AnimElemtime(8) = 0
anim = 850
postype = P2
pos = 0, 0
sprpriority = 15
ownpal = 0

[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;相手動作(上段やられ)
[Statedef 20200]
type    = S
movetype= H
physics = S
velset = 0,0

[State 52, 1]
type = Hitfallset
trigger1 = 1
value = 0

[State 52, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2020

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;相手動作(下段やられ)
[Statedef 20300]
type    = S
movetype= H
physics = S
velset = 0,0

[State 52, 1]
type = Hitfallset
trigger1 = 1
value = 0

[State 52, 1]
type = VelSet
trigger1 = 1
x = 0
y = 0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2030

[State 1830]
type = SelfState
trigger1 = time > 15 && Enemynear,Stateno != [2000,3999]
value = 5000

[State 1830]
type = SelfState
trigger1 = Animtime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げ１・投げられている（相手の動作）動作
[Statedef 20400]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2040

[State 820, 1]
type = Lifeadd
trigger1 = AnimElem = 4
value = -100

[State 820, 1]
type = EnvShake
trigger1 = AnimElem = 4
ampl = 5
freq = 80
time = 10

[State 1000, 音を鳴らす]
type = Null;PlaySnd
trigger1 = AnimElem = 7
value = F77,3

[State 2100, 移動]
type = VelSet
trigger1 = AnimElem = 4
x = -2.5
y = -12

[State 2100, 移動]
type = Veladd
trigger1 = AnimElemtime(4) >= 0
y = .6

[State 820, 1]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5050

;---------------------------------------------------------------------------
; やみどうこく

[Statedef 2100]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
ctrl     = 0
poweradd = -ifelse(Var(23)>0,0,1000)
anim     = 2100
sprpriority = 2

[State 2001, 無敵]
type = NotHitBy
trigger1 = animelemno(0) = [0,4]
value = SCA

;KOF02 PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,4999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;FLASH EFFECT
[State 13000, EnvColor]
type = EnvColor
trigger1 = AnimElem = 2
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = animelem = 2
anim = -1
movetime = 30
time = 30
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 7000
pos = 5,-75
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 7010
pos = 5,-75
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
value = s9,0

[State 800, ヒット定義（投げ用）]
type = HitDef
triggerall = p2stateno != [150,155]
triggerall = p2stateno != 40 && p2stateno !=52
trigger1 = p2bodydist x = [-const(size.ground.front),35]
trigger1 = animelem = 3
attr = S, HT
hitflag = M
priority = 4, Miss
sparkno = -1
p1sprpriority = 1
p2sprpriority = 0
p1facing = 1
p2facing = 1
p1stateno = 2110
p2stateno = 21200
guard.dist = 0
fall = 1
numhits = 0

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 5
value = s10,6

[State 700,]
type = Varset
trigger1 = prevstateno = [1000,1999]
var(18) = 1

[State 700,]
type = Varset
trigger1 = AnimTime = 0
var(18) = 0

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; やみどうこく発動

[Statedef 2110]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
ctrl     = 0
anim     = 2110
sprpriority = 2

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 70,0

[State 2000,]
type = Null;PlaySnd
trigger1 = AnimElem = 4
value = s10,6

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 6
value = s2100,0
persistent = 0

[State 2000,]
type = PlaySnd
trigger1 = time = 17
value = s12,2

[State 2001, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 700,]
type = Varset
trigger1 = AnimTime = 0
var(18) = 0

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(3) < 0
pos = 35, 0

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(4) < 0
pos = 40, -105

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(3) >= 0
pos = 33, -125

[State 2000]
type = Explod
trigger1 = time = 17
anim = 2150
ID = 2150
removetime = -1
pos = 53,0
sprpriority = 10
ownpal = 1
bindtime = -1

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 6
time = 0
value = 255,255,255
under = 1

[State 820, 1]
type = EnvShake
trigger1 = time = 17
ampl = 2
freq = 40
time = 100

[State 2000]
type = Explod
Trigger1 = time = 17
Trigger2 = time = 24
Trigger3 = time = 31
Trigger4 = time = 38
Trigger5 = time = 45
Trigger6 = time = 52
Trigger7 = time = 59
Trigger8 = time = 66
Trigger9 = time = 73
anim = 4010
ID =  4010
removetime = -2
pos = 33,-120
sprpriority = 11
ownpal = 1
bindtime = -1

[State 2000]
type = Explod
Trigger1 = time = 80
anim = 4020
ID =  4020
removetime = -2
pos = 33,-120
sprpriority = 11
ownpal = 1
bindtime = -1

[State 2000,]
type = Null;PlaySnd
Trigger1 = time = 17
Trigger2 = time = 24
Trigger3 = time = 31
Trigger4 = time = 38
Trigger5 = time = 45
Trigger6 = time = 52
Trigger7 = time = 59
Trigger8 = time = 66
Trigger9 = time = 73
value = s1,10

[State 2000,]
type = PlaySnd
Trigger1 = time = 80
value = s1,12

[State 810, 1]
type = TargetLifeAdd
Trigger1 = time = 17
Trigger2 = time = 24
Trigger3 = time = 31
Trigger4 = time = 38
Trigger5 = time = 45
Trigger6 = time = 52
Trigger7 = time = 59
Trigger8 = time = 66
Trigger9 = time = 73
value = -20
kill = 0
absolute = 1

[State 810, 1]
type = TargetLifeAdd
Trigger1 = time = 80
value = -50
kill = 1
absolute = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = Time = 81
value = 2115

;---------------------------------------------------------------------------
; (　´∀｀)つ ミ

[Statedef 2115]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
ctrl     = 0
anim     = 2115
sprpriority = 2

[State 170, ]
type = TargetState
trigger1 = time = 0
value = 21250

[State 810, 1]
type = Null;TargetLifeAdd
Trigger1 = time = 13
value = -240
absolute = 1

[State 2000]
type = RemoveExplod
trigger1 = time = 0
ID = 2150

[State 2000]
type = Explod
trigger1 = time = 0
anim = 1305
pos = 53,0
sprpriority = 10
ownpal = 1
bindtime = -1

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
pos = 33, -128

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(3) < 0
pos = 15, -128

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(4) < 0
pos = 13, -128

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(5) = 0
pos = 50, -128

[state ]
type = Null;ctrlset
trigger1 = time > 62
value = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げ１・投げられている（相手の動作）動作
[Statedef 21200]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2001, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2120

[State 820, 1]
type = ChangeState
trigger1 = time = 143
value = 21250

;---------------------------------------------------------------------------
;投げ２・投げられている（相手の動作）動作
[Statedef 21250]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2001, 無敵]
type = Null;NotHitBy
trigger1 = 1
value = SCA

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2125

[State 2100, 移動]
type = VelSet
trigger1 = AnimElem = 5
x = -4
y = -6

[State 2100, 移動]
type = Veladd
trigger1 = AnimElemtime(5) >= 0
y = 0.6

[State 820, 1]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
; ふうじん　いぶき
; CNS レベル: 中級

[Statedef 3000]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3000
poweradd = -ifelse(Var(23)>0,1000,2000)
ctrl     = 0
sprpriority = 2
facep2 = 1

[State 170, 無敵]
type = NotHitBy
trigger1 = AnimElem = 3
value = SCA
time = 30

;------------------------------
;KOFM SUPER CANCEL SIGN
;------------------------------
[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7600
pos = 0,75
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7610
pos = 0,73
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
trans = addalpha
alpha = 256, 135
ownpal = 1

;------------------------------
;KOFM DREAM CANCEL SIGN
;------------------------------
[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [2000,3999]
anim = f7630
pos = 0,75
postype = left
removetime = -2
bindtime = -1
pausemove = 1
supermove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [2000,3999]
anim = f7635
pos = 0,73
postype = left
removetime = -2
bindtime = -1
pausemove = 1
supermove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
trans = addalpha
alpha = 256, 135
ownpal = 1

;KOF02 PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,4999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;DREAMCANCEL PALFX
[State -2, PalFX]
type = Null;PalFX
trigger1 = prevstateno = [2000,3999]
trigger1 = time < 17
time = 1
add = 55,200,10
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;FLASH EFFECT
[State 13000, EnvColor]
type = EnvColor
trigger1 = AnimElem = 3
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 3
anim = -1
movetime = 30
time = 30
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 7100
pos = -23,-28
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 7110
pos = -23,-28
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s9,1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10,23

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = s12,3

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
value = s12,14

[State 1000, ]
type = MakeDust
trigger1 = AnimElem = 6

[State 1000, ]
type = Posadd
trigger1 = AnimElem = 6
x = 10

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(13) < 0
x = -.1

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(6) >= 0 && AnimElemtime(16) < 0
x = 10

[State 1000, ]
type = Velset
trigger1 = AnimElem = 20
x = 0

[State 2000]
type = Explod
trigger1 = AnimElem = 6
anim = 1305
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = 1

[State 1950]
type = HitDef
trigger1 = numtarget(1263) = 0
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 40,0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 4,6
sparkno = s4070
sparkxy = -25,-40
hitsound = s1,7
guardsound = s2,1
guard.sparkno = s4120
guard.velocity = -9
ground.type = High
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 0
air.velocity = -4,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -10
air.fall = 1
fall.recover = 0
p1stateno = 3010
kill = 0
yaccel = 0.6

[State 1950]
type = HitDef
trigger1 = numtarget(1263) >= 1
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 40,0
animtype = Hard
hitflag = N
guardflag = M
priority = 5
pausetime = 4,6
sparkno = s4070
sparkxy = -25,-40
hitsound = s1,7
guardsound = s2,1
guard.sparkno = s4120
guard.velocity = -9
ground.type = High
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 0
air.velocity = -4,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -10
air.fall = 1
fall.recover = 0
p1stateno = 3010
kill = 0
yaccel = 0.6

[State 1000, ステート変更]
type = ChangeState
trigger1 = MoveGuarded
value = 3005

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ふうじん　いぶき　ヒットorガード

[Statedef 3005]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
ctrl     = 0
velset   = 7,0
anim     = 3005
sprpriority = 2

[State 1000, ]
type = Velset
trigger1 = MoveContact
trigger2 = AnimElem = 5
x = 0

[State 1950]
type = HitDef
trigger1 = time = 0
attr = S,HA
getpower = 0
damage = 0,0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 3,5
sparkno = s4070
sparkxy = -25,-40
hitsound = s1,7
guardsound = s2,1
guard.sparkno = s4120
ground.type = High
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 0
air.velocity = -4,-8
guard.velocity = -9
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -10
air.fall = 1
fall.recover = 0
p2facing = 1
p1stateno = 3010
kill = 0
yaccel = 0.6

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ふうじん　いぶき　発動

[Statedef 3010]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
ctrl     = 0
velset   = 7,0
anim     = 3010
sprpriority = 2

[State 200,]
type = Posadd
trigger1 = AnimElem = 2 | AnimElem = 7 | AnimElem = 8 | AnimElem = 9
trigger2 = AnimElem = 11 | AnimElem = 12 | AnimElem = 14
x = 10

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 23
value = s10,3

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 12
trigger3 = AnimElem = 22
value = s12,3

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 7
value = s12,6

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 13
value = s12,7

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 23
value = s12,8

[State 2000]
type = Explod
trigger1 = AnimElem = 6
anim = 1105
pos = 20,0
sprpriority = 5
ownpal = 1
bindtime = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 13
anim = 1115
pos = 30,5
sprpriority = 5
ownpal = 1
bindtime = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 24
anim = 1125
pos = 10,5
sprpriority = 5
ownpal = 1
bindtime = 1

[State 1950]
type = HitDef
trigger1 = AnimElem = 1
attr = S,HA
getpower = 0
damage = 30,10
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 3,5
sparkno = s4070
sparkxy = -25,-40
hitsound = s1,7
guardsound = s2,1
guard.sparkno = s4120
guard.velocity = -9
ground.type = High
ground.slidetime = 19
ground.hittime = 19
ground.velocity = 0
air.velocity = -4,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
p2facing = 1
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 8
attr = S, HA
getpower = 0
damage = 30, 10
animtype = Hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 3, 6
sparkno = s4060
guard.sparkno = s4120
sparkxy = -15, -45
hitsound = s1,7
guardsound = s2,0
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -3
air.type = High
air.velocity = -1,-7
air.hittime = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
air.fall = 1
fall.recover = 0
p2facing = 1
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 13
attr = S, HA
getpower = 0
damage = 30, 10
animtype = Hard
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 3, 6
sparkno = s4060
guard.sparkno = s4120
sparkxy = -15, -45
hitsound = s1,7
guardsound = s2,0
ground.type = High
ground.slidetime = 30
ground.hittime  = 30
ground.velocity = -5
air.type = High
air.velocity = -1,-7
air.hittime = 0
air.fall = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
fall.recover = 0
p2facing = 1
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 24
attr = S, SA
getpower = 0
damage = 30,10
animtype = up
guardflag = M
hitflag = MAF
priority = 3, Hit
pausetime = 21,21
guard.pausetime = 9,10
sparkno = s4070
guard.sparkno = s4120
sparkxy = -10, -70
hitsound = s12,10
guardsound = s2,1
ground.type = Low
ground.slidetime = 20
ground.hittime  = 20
ground.velocity = -2,-9
air.velocity = -2,-9
yaccel = .42
air.type = High
air.hittime = 0
fall = 1
fall.recover = 0
envshake.time = 21
envshake.ampl = 5
envshake.freq = 60
p1stateno = 3015
p2stateno = 30200
kill = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; ふうじん　いぶき　トドメ
; CNS レベル: 中級

[Statedef 3015]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3015
ctrl     = 0
sprpriority = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 11
trigger2 = AnimElem = 24
value = s12,1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 11
trigger2 = AnimElem = 24
value = s12,14

[State 3000]
type = Projectile
trigger1 = AnimElem = 11
projID = 1400
projanim = 1405
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projsprpriority = 10
projshadow = 0,0,0
projremovetime = 24
getpower = 0,0
ownpal = 1
offset = 60,0
velocity = 0,0
attr = S, SP
animtype = Hard
damage = 80 ,10
hitflag = MAF
guardflag = M
hitsound = s1,7
guardsound = s2,1
pausetime = 0,5
sparkno = s4070
guard.sparkno = s4120
sparkxy = 5,-70+(floor(p2bodydist Y))
ground.type = High
ground.hittime = 21
ground.slidetime = 21
ground.velocity = 0,-9
guard.velocity = -8
yaccel = .41
air.juggle = 0
P2stateno = 1420
p2facing = 1
fall = 1
fall.recover = 0
kill = 0

[State 3000]
type = Projectile
trigger1 = AnimElem = 24
projID = 1405
projanim = 1405
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projsprpriority = 10
projshadow = 0,0,0
projremovetime = 24
getpower = 0,0
ownpal = 1
offset = 60,0
velocity = 0,0
attr = S, SP
animtype = up
damage = 100 ,10
hitflag = MAF
guardflag = M
hitsound = s1,8
guardsound = s2,1
pausetime = 0,5
sparkno = s4070
guard.sparkno = s4120
sparkxy = 5,-70+(floor(p2bodydist Y))
ground.type = High
ground.hittime = 21
ground.slidetime = 21
ground.velocity = -4,9
air.velocity = -4,9
guard.velocity = -8
yaccel = 0.6
air.juggle = 0
;P2stateno = 1425
p2facing = 1
fall = 1
fall.recover = 0

[State 2100,]
type = Envcolor
trigger1 = Projhit1400 = 1
trigger2 = Projhit1405 = 1
time = 0
value = 255,255,255
under = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;相手動作
[Statedef 30200]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = Posadd
trigger1 = time = 0
x = 5
y = -10

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(15) < 0
x = 0
y = 0

[State 52, 1]
type = Velset
trigger1 = AnimElemtime(15) < 0
x = 0
y = 0

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(15) >= 0
y = .41

[State 52, 1]
type = VelSet
trigger1 = AnimElemtime(15) >= 0
x = -.5

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 15
y = -9.5

[State 1830]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3020

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
; じっそうこくXY
; CNS レベル: 中級

[Statedef 3100]
type     = S
movetype = A
physics  = S
juggle   = 5
velset   = 0,0
anim     = 3100
poweradd = -ifelse(Var(23)>0,1000,2000)
ctrl     = 0
sprpriority = 2

[State 170, ]
type = ChangeAnim
triggerall = time = 0
trigger1 = prevstateno = 1105
trigger2 = prevstateno = 1155
trigger3 = prevstateno = 1505
;trigger4 = prevstateno = 2010
value = 3105

[State 3000, 7]
type = NotHitBy
trigger1 = animelemtime(16) <  0
value = SCA

;------------------------------
;KOFM SUPER CANCEL SIGN
;------------------------------
[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7600
pos = 0,75
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7610
pos = 0,73
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
trans = addalpha
alpha = 256, 135
ownpal = 1

;------------------------------
;KOFM DREAM CANCEL SIGN
;------------------------------
[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [2000,3999]
anim = f7630
pos = 0,75
postype = left
removetime = -2
bindtime = -1
pausemove = 1
supermove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [2000,3999]
anim = f7635
pos = 0,73
postype = left
removetime = -2
bindtime = -1
pausemove = 1
supermove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
trans = addalpha
alpha = 256, 135
ownpal = 1

;KOF02 PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,4999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;DREAMCANCEL PALFX
[State -2, PalFX]
type = Null;PalFX
trigger1 = prevstateno = [2000,3999]
trigger1 = time < 17
time = 1
add = 55,200,10
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;FLASH EFFECT
[State 13000, EnvColor]
type = EnvColor
trigger1 = AnimElem = 3
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 39
time = 39
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(5) < 0
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 7100
pos = 28,-130
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 7110
pos = 28,-130
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s9,1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10,23

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 7
value = s12,3

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 7
value = s12,14

[State 1000, ]
type = MakeDust
trigger1 = AnimElem = 7

[State 1000, ]
type = Posadd
trigger1 = AnimElem = 6 | AnimElem = 7
x = 10

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(8) >= 0 && AnimElemtime(18) < 0
x = -.1

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(8) >= 0 && AnimElemtime(16) < 0
x = 14

[State 1000, ]
type = Velset
trigger1 = AnimElem = 19
x = 0

[State 2000]
type = Explod
trigger1 = AnimElem = 7
anim = 1305
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = 1

[State 1950]
type = HitDef
trigger1 = numtarget(1263) = 0
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 0,0
animtype = Hard
hitflag = MAF
guardflag = M
priority = 5
pausetime = 5,7
sparkno = s4040
sparkxy = -15,-40
hitsound = s1,1
guardsound = s2,1
guard.sparkno = s4120
guard.velocity = -9
ground.type = High
ground.slidetime = 16
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 3110
p2stateno = 20200

[State 1950]
type = HitDef
trigger1 = numtarget(1263) >= 1
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 0,0
animtype = Hard
hitflag = N
guardflag = M
priority = 5
pausetime = 5,7
sparkno = s4040
sparkxy = -15,-40
hitsound = s1,1
guardsound = s2,1
guard.sparkno = s4120
guard.velocity = -9
ground.type = High
ground.slidetime = 16
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; じっそうこくC
; CNS レベル: 中級

[Statedef 3150]
type     = S
movetype = A
physics  = S
juggle   = 5
velset   = 0,0
anim     = 3150
poweradd = -ifelse(Var(23)>0,1000,2000)
ctrl     = 0
sprpriority = 2

[State 170, ]
type = ChangeAnim
triggerall = time = 0
trigger1 = prevstateno = 1105
trigger2 = prevstateno = 1155
trigger3 = prevstateno = 1505
trigger4 = prevstateno = 2010
value = 3155

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

;------------------------------
;KOFM SUPER CANCEL SIGN
;------------------------------
[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7600
pos = 0,75
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [1000,1999]
anim = f7610
pos = 0,73
postype = left
removetime = -2
bindtime = -1
supermove = 1
pausemove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
trans = addalpha
alpha = 256, 135
ownpal = 1

;------------------------------
;KOFM DREAM CANCEL SIGN
;------------------------------
[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [2000,3999]
anim = f7630
pos = 0,75
postype = left
removetime = -2
bindtime = -1
pausemove = 1
supermove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
ownpal = 1

[State 1000, Explod]
type = Null;Explod
triggerall = time = 0
trigger1 = prevstateno = [2000,3999]
anim = f7635
pos = 0,73
postype = left
removetime = -2
bindtime = -1
pausemove = 1
supermove = 1
pausemovetime = 99999
supermovetime = 99999
sprpriority = 9
trans = addalpha
alpha = 256, 135
ownpal = 1

;KOF02 PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,4999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;DREAMCANCEL PALFX
[State -2, PalFX]
type = Null;PalFX
trigger1 = prevstateno = [2000,3999]
trigger1 = time < 17
time = 1
add = 55,200,10
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;FLASH EFFECT
[State 13000, EnvColor]
type = EnvColor
trigger1 = AnimElem = 3
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = time = 0
anim = -1
movetime = 39
time = 39
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(5) < 0
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 7100
pos = 28,-130
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 3
anim = 7110
pos = 28,-130
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s9,1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = s10,23

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 7
value = s12,3

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 7
value = s12,14

[State 1000, ]
type = MakeDust
trigger1 = AnimElem = 7

[State 6000, 3]
type = StateTypeSet
trigger1 = AnimElem = 8
statetype = A

[State 1000, ]
type = Posadd
trigger1 = AnimElem = 6 | AnimElem = 7
x = 10

[State 1000, ]
type = Posadd
trigger1 = AnimElem = 8
x = 30
y = -100

[State 1000, ]
type = Veladd
trigger1 = AnimElemtime(8) >= 0
y = .75

[State 1000, ]
type = Velset
trigger1 = AnimElemtime(8) >= 0
x = 9

[State 2000]
type = Explod
trigger1 = AnimElem = 7
anim = 1305
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = 1

[State 1950]
type = HitDef
trigger1 = numtarget(1263) = 0
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 0,0
animtype = Hard
hitflag = MAF
guardflag = H
priority = 5
pausetime = 5,7
sparkno = s4040
sparkxy = -15,-40
hitsound = s1,1
guardsound = s2,1
guard.sparkno = s4120
guard.velocity = -9
ground.type = High
ground.slidetime = 16
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1
p1stateno = 3110
p2stateno = 20200

[State 1950]
type = HitDef
trigger1 = numtarget(1263) >= 1
trigger1 = Time = 0
attr = S,HA
getpower = 0
damage = 0,0
animtype = Hard
hitflag = N
guardflag = H
priority = 5
pausetime = 5,7
sparkno = s4040
sparkxy = -15,-40
hitsound = s1,1
guardsound = s2,1
guard.sparkno = s4120
guard.velocity = -9
ground.type = High
ground.slidetime = 16
ground.hittime = 17
ground.velocity = 0,0
air.velocity = 0,0
p2facing = 1

[State 1000, ステート変更]
type = ChangeState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 2055

;---------------------------------------------------------------------------
; じっそうこく　発動

[Statedef 3110]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 3110
ctrl     = 0
sprpriority = 5

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 60,0

[State 52, 2]
type = PosSet
trigger1 = Time = 0
y = 0

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 10
trigger3 = AnimElem = 17
trigger4 = AnimElem = 23
trigger5 = AnimElem = 30
trigger6 = AnimElem = 36
trigger7 = AnimElem = 45
value = s0,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 4
trigger2 = AnimElem = 10
trigger3 = AnimElem = 17
trigger4 = AnimElem = 23
trigger5 = AnimElem = 30
trigger6 = AnimElem = 36
trigger7 = AnimElem = 45
value = s12,1

[State 2000]
type = Explod
trigger1 = AnimElem = 10 | AnimElem = 23 | AnimElem = 36
trigger2 = AnimElem = 5 | AnimElem = 18 | AnimElem = 30
trigger3 = AnimElem = 45
anim = 3130
pos = 50,0
sprpriority = 5
ownpal = 1
bindtime = 1

[State 52, 1]
type = VelSet
trigger1 = animelemno(0) = [0,26]
x = 1.2

[State 52, 1]
type = VelSet
trigger1 = animelem = 27
x = 0.5

[State 810, 1]
type = TargetBind
trigger1 = 1
pos = 40,0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 10 | AnimElem = 23
attr = S, HA
getpower = 0
damage = 15,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10
sparkno = s4070
sparkxy = -10,-60
hitsound = s1,7
ground.type = High
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 20200
p2facing = 1
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 4 | AnimElem = 17
attr = S, HA
getpower = 0
damage = 20,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 0,10
sparkno = s4070
sparkxy = -10,-50
hitsound = s1,7
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 20300
p2facing = 1
kill = 0

[State 200, ヒット定義]
type = HitDef
trigger1 = AnimElem = 30
trigger2 = AnimElem = 36
trigger3 = AnimElem = 45
attr = S, HA
getpower = 0
damage = 30,0
animtype = Hard
hitflag = MAF
priority = 3, Hit
pausetime = 6,16
sparkno = s4070
sparkxy = -10,-50
hitsound = s1,7
ground.type = Low
ground.slidetime = 10
ground.hittime  = 20
ground.velocity = 0
p2stateno = 20300
p2facing = 1
kill = 0

[State 820, 1]
type = EnvShake
trigger1 = animelem = 30
trigger2 = animelem = 36
trigger3 = animelem = 45
ampl = 2
freq = 40
time = 10

[State 2100,]
type = Envcolor
trigger1 = Movehit = 1
time = 0
value = 255,0,0
under = 1

[State 52, 4]
type = ChangeState
trigger1 = Animtime = 0
value = 3111

;-----------------------------------------------------------------------------
;投げ1・投げている（自分）
[Statedef 3111]
type    = S
movetype= A
physics = N
velset = 0,0
juggle = 0
anim = 3111

[State 170, ]
type = TargetState
trigger1 = time = 0
value = 31200

[State 170, 無敵]
type = NotHitBy
trigger1 = animelemno(0) = [0,22]
value = SCA

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = time = 0
edge = 60,0

[State 810, ]
type = Null;Posadd
trigger1 = time = 0
trigger2 = AnimElem = 2
x = 10

[State 700, エフェクト表示]
type = Null;Explod
trigger1 = AnimElem = 2
anim = f850
postype = P1
pos = 15, -120
sprpriority = 15
ownpal = 0

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 1
value = s800,0

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 1
value = s12,12

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
pos = 25, -120

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(5) < 0
pos = 25, -120

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(5) = 0
pos = 50, 0

[State 700, エフェクト表示]
type = Explod
Trigger1 = time = 4 | time = 12 || time = 20 | time = 28 | time = 36 | time = 44
Trigger2 = time = 52 | time = 60 | time = 68 | time = 76 | time = 84
Trigger3 = time = 92 | time = 100 | time = 108
anim = 835
postype = P1
pos = 0, -120
sprpriority = 5
ownpal = 1

[State 700, エフェクト表示]
type = Explod
Trigger1 = time = 8 | time = 16 || time = 24 | time = 32 | time = 40 | time = 48
Trigger2 = time = 56 | time = 64 | time = 72 | time = 80 | time = 88
Trigger3 = time = 96 | time = 104
anim = 835
postype = P1
pos = 30, -120
sprpriority = 5
ownpal = 1
facing = -1

[state ]
type = sprpriority
trigger1 = animelem = 3
value = -1

[State 2000]
type = Explod
trigger1 = AnimElem = 4
anim = 1125
pos = 10,10
sprpriority = 5
ownpal = 1
bindtime = 1
scale = 1.5,1

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 4
value = s1,8

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 4
value = s1,7

[State 820, 1]
type = EnvShake
trigger1 = animelem = 4
trigger2 = animelem = 17
time = 15
ampl = -12
freq = 75
phase = 75

[State 3000]
type = Projectile
trigger1 = AnimElem = 17
projID = 31110
projanim = 31110
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projcancelanim = -1
projsprpriority = 999
projshadow = 0,0,0
projremovetime = 26
projscale = 1.5,1
getpower = 0,0
ownpal = 1
offset = 80,0
velocity = 0,0
attr = S, HP
animtype = Hard
damage = 100
hitflag = MAFLD
guardflag = N
hitsound = s1,11
guardsound = s2,1
pausetime = 0,6
sparkno = s4070
guard.sparkno = s4120
sparkxy = 5,-70+(floor(p2bodydist Y))
ground.type = High
ground.hittime = 21
ground.slidetime = 21
ground.velocity = -8,-8
guard.velocity = -10
yaccel = 0.6
air.juggle = 0
air.velocity = -8,-8
fall = 1
fall.recover = 0
down.juggle = 0
down.velocity = -4,-6
down.hittime = 8
down.bounce = 2

[State 810, 1]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-----------------------------------------------------------------------------
;投げ2・投げている（自分）
[Statedef 3112]
type    = A
movetype= A
physics = N
velset = 0,0
anim = 3112

[State 170, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = time = 0
edge = 60,0

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 1
value = s12,9

;[State 810, 1]
;type = PlaySnd
;Trigger1 = AnimElem = 1
;value = s3,2

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(1) >= 0
pos = 15, -120

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 1305
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = 1

[State 52, 1]
type = VelSet
trigger1 = AnimElem = 1
y = -9

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(1) >= 0
y = .4

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimElemtime(2) >= 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3113

;---------------------------------------------------------------------------
; 着地

[Statedef 3113]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
anim     = 3113
ctrl     = 0
sprpriority = 2

[State 170, ]
type = TargetState
trigger1 = time = 0
value = 31250

[State 810, ]
type = Turn
trigger1 = time = 0

[State 1000, ]
type = MakeDust
trigger1 = time = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s4,0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = s12,13

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(3) < 0
pos = 15, 0

[State 1000,]
type = Posadd
trigger1 = time = 0
x = 15

[State 1000,]
type = Posset
trigger1 = time = 0
y = 0

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
y = 0

[State 700, エフェクト表示]
type = Explod
trigger1 = time = 3
anim = 855
postype = P2
pos = 0, 0
sprpriority = -5
ownpal = 0

[State 700, エフェクト表示]
type = Explod
trigger1 = time = 3
anim = 850
postype = P2
pos = 0, 0
sprpriority = 15
ownpal = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げ１・投げられている（相手の動作）動作
[Statedef 31200]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3120

[State 820, 1]
type = Lifeadd
trigger1 = AnimElem = 4
value = -100

[State 820, 1]
type = EnvShake
trigger1 = AnimElem = 4
ampl = 5
freq = 80
time = 10

[State 1000, 音を鳴らす]
type = Null;PlaySnd
trigger1 = AnimElem = 7
value = F77,3

[State 2100, 移動]
type = VelSet
trigger1 = AnimElem = 4
x = -1
y = -20

[State 2100, 移動]
type = Veladd
trigger1 = AnimElemtime(4) >= 0
y = .6

[State 820, 1]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5050

;---------------------------------------------------------------------------
;投げ１・投げられている（相手の動作）動作
[Statedef 31250]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3125

[State 820, 1]
type = Lifeadd
trigger1 = AnimElem = 3
value = -150

[State 820, 1]
type = EnvShake
trigger1 = AnimElem = 3
ampl = 5
freq = 70
time = 15

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 3
value = F77,3

[State 2100, 移動]
type = VelSet
trigger1 = AnimElem = 10
x = 4
y = -6

[State 2100, 移動]
type = Veladd
trigger1 = AnimElemtime(10) >= 0
y = .42

[State 2120]
type = Sprpriority
trigger1 = AnimElem = 3
value = 5

[State 820, 1]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;---------------------------------------------------------------------------
; MAXやみどうこく

[Statedef 3200]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
ctrl     = 0
poweradd = -ifelse(Var(23)>0,1000,3000)
anim     = 3200
sprpriority = 2

;KOF02 PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,4999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;DREAMCANCEL PALFX
[State -2, PalFX]
type = Null;PalFX
trigger1 = prevstateno = [2000,3999]
trigger1 = time < 17
time = 1
add = 55,200,10
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;FLASH EFFECT
[State 13000, EnvColor]
type = EnvColor
trigger1 = AnimElem = 1
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = AnimElem = 1
anim = -1
movetime = 30
time = 30
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(2) < 0
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Null;Explod
trigger1 = AnimElem = 1
anim = f8150
pos = -25,-65
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Null;Explod
trigger1 = AnimElem = 1
anim = f8160
pos = -25,-65
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

;KOF02UM MAX3 BG CODES
;---------------2002 um Bg------------------
[State 2300, Helper]
type = Helper
triggerall = !numhelper(40001)
trigger1 = time = 28
helpertype = normal
name = "HSDM"
ID = 40001
stateno = 40001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999

;---------------2002 um face------------------
[State -2, Helper]
type = Helper
triggerall = !numhelper(40003)
trigger1 = time = 0
helpertype = normal
name = "H.Port"
ID = 40003
stateno = 40003
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

;---------------2002 um Glass------------------
[State -2, Helper]
type = Helper
triggerall = !numhelper(40004)
trigger1 = time = 0
helpertype = normal
name = "Player 1"
ID = 40004
stateno = 40004
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

;[State 2000]
;type = Explod
;trigger1 = time = 0
;anim = 8050
;pos = ifelse(facing=1,-320,320),0
;ownpal = 1
;postype = front
;bindtime = -1
;supermove = 1
;sprpriority = -15
;facing = ifelse(facing=-1,-1,1)

;[State 2000]
;type = Explod
;trigger1 = time = 0
;anim = 8060
;pos = ifelse(facing=1,-320,320),0
;ownpal = 1
;postype = front
;bindtime = -1
;supermove = 1
;sprpriority = -10
;facing = ifelse(facing=-1,-1,1)

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s9,2

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 1
value = s10,6

[State 800, ヒット定義（投げ用）]
type = HitDef
triggerall = p2stateno != [150,155]
triggerall = p2stateno != 40 && p2stateno !=52
trigger1 = p2bodydist x = [-const(size.ground.front),35]
trigger1 = Time = 0
trigger1 = p2stateno != [120,159]
attr = S, HT
hitflag = M
priority = 1, Miss
sparkno = -1
p1sprpriority = 1
p2sprpriority = 0
p1facing = 1
p2facing = 1
p1stateno = 3210
p2stateno = 32200
guard.dist = 0
fall = 1
numhits = 0

[State 2001, 無敵]
type = NotHitBy
trigger1 = AnimElem = 1
value = SCA
time = 30

[State 2001, 無敵]
type = NotHitBy
trigger1 = AnimElem = 2
value = SCA
time = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; MAXやみどうこく発動

[Statedef 3210]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
ctrl     = 0
anim     = 3210
sprpriority = 2

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
value = s800,0

[State 2000,]
type = PlaySnd
trigger1 = AnimElemtime(3) = 40
value = s12,2

[State 2000,]
type = PlaySnd
trigger1 = AnimElemtime(3) = 40
value = s12,12

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 2
value = s10,5

[State 2000,]
type = PlaySnd
trigger1 = AnimElemtime(3) = 60
trigger2 = AnimElemtime(3) = 100
trigger3 = AnimElemtime(3) = 120
value = s12,10

[State 2001, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
pos = 25, 0

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(2) >= 0 && AnimElemtime(4) < 0
pos = 25, -120

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElem = 2
anim = f850
postype = P1
pos = 10, -110
sprpriority = 15
ownpal = 0

[State 2000]
type = Explod
trigger1 = AnimElemtime(3) = 40
anim = 2150
ID = 2150
removetime = -1
pos = 10,0
sprpriority = 10
ownpal = 1
bindtime = -1

[State 2000]
type = RemoveExplod
trigger1 = AnimElem = 4
ID = 2150

[State 2100,]
type = Envcolor
trigger1 = AnimElemtime(3) > 40 && AnimElemtime(4) < 0
trigger1 = random <= 250
time = 0
value = 255,255,255
under = 1

[State 820, 1]
type = EnvShake
trigger1 = AnimElemtime(3) = 40 && AnimElemtime(4) < 0
ampl = 2
freq = 40
time = 100

[State 180,左血飛沫]
type = VarRandom
trigger1 = 1
v = 21
range = -10,10

[State 180,右血飛沫]
type = VarRandom
trigger1 = 1
v = 23
range = 18,45

[State 180,上下]
type = VarRandom
trigger1 = 1
v = 24
range = -150,-32

[State 180,上下]
type = VarRandom
trigger1 = 1
v = 25
range = -150,-32

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElemtime(3) > 40 && AnimElemtime(4) < 0
trigger1 = random <= 200
anim = 835
postype = P1
pos = (var(21)),(var(24))
sprpriority = 5
ownpal = 1

[State 700, エフェクト表示]
type = Explod
trigger1 = AnimElemtime(3) > 40 && AnimElemtime(4) < 0
trigger1 = random <= 200
anim = 835
postype = P1
pos = (var(23)),(var(25))
sprpriority = 5
ownpal = 1
facing = -1

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 4
value = s12,9

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 4
Trigger2 = AnimElem = 5
value = s12,14

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(4) >= 0
pos = 12, -120

[State 2000]
type = Explod
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
anim = 1305
pos = 0,0
sprpriority = 5
ownpal = 1
bindtime = 1

[State 52, 1]
type = Posadd
trigger1 = AnimElem = 5
x = 0
y = -120

[State 52, 1]
type = Veladd
trigger1 = AnimElemtime(10) >= 0
y = .4

[State 810, 1]
type = TargetLifeAdd
trigger1 = AnimElemtime(3) > 40 && AnimElemtime(4) < 0
trigger1 = (GameTime%3) = 0
value = -12
kill = 0

[State 700,]
type = Varset
trigger1 = AnimElemtime(10) = 1
var(18) = 0

[State 700,]
type = Varset
trigger1 = AnimElemtime(10) = 1
var(19) = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimElemtime(10) >= 0
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 3215

;---------------------------------------------------------------------------
; 着地

[Statedef 3215]
type     = S
movetype = A
physics  = S
juggle   = 0
poweradd = 0
anim     = 3113
ctrl     = 0
sprpriority = 2

[State Set]
type = Changeanim
triggerall = var(32) = 0
triggerall = anim != 3215
trigger1 = stateno = 3215
value = 3215

[State 170, ]
type = TargetState
trigger1 = time = 0
value = 31250

[State 810, ]
type = Turn
trigger1 = time = 0

[State 1000, ]
type = MakeDust
trigger1 = time = 0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 0
value = s4,0

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = time = 3
value = s12,13

[State 810, 1]
type = PlaySnd
Trigger1 = AnimElem = 3
value = s10,1

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(3) < 0
pos = 15, 0

[State 1000,]
type = Posadd
trigger1 = time = 0
x = 15

[State 1000,]
type = Posset
trigger1 = time = 0
y = 0

[State 1000, 軸位置移動]
type = Velset
trigger1 = time = 0
y = 0

[State 700, エフェクト表示]
type = Explod
trigger1 = time = 3
anim = 855
postype = P2
pos = 0, 0
sprpriority = -5
ownpal = 0

[State 700, エフェクト表示]
type = Explod
trigger1 = time = 3
anim = 850
postype = P2
pos = 0, 0
sprpriority = 15
ownpal = 0

[State 1000, ステート変更]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;投げ２・投げられている（相手の動作）動作
[Statedef 32200]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2001, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 3220

;---------------------------------------------------------------------------
; MAX Tornado Grab

[Statedef 3300]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
anim     = 2100
poweradd = -ifelse(Var(23)>0,1000,2000)
ctrl     = 0
sprpriority = 2

[State 2001, 無敵]
type = NotHitBy
trigger1 = animelemno(0) = [0,4]
value = SCA

;KOF02 PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,4999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;FLASH EFFECT
[State 13000, EnvColor]
type = EnvColor
trigger1 = AnimElem = 2
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 2000, 超必殺技発動の時間停止]
type = SuperPause
trigger1 = animelem = 2
anim = -1
movetime = 30
time = 30
darken = 0

[State 2000]
type = AssertSpecial
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
flag = NoFG
flag2 = NOBG
ignorehitpause = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 7100
pos = 5,-75
sprpriority = -3
ownpal = 1
bindtime = 1
supermove = 1

[State 2000]
type = Explod
trigger1 = AnimElem = 2
anim = 7110
pos = 5,-75
sprpriority = 20
ownpal = 1
bindtime = 1
supermove = 1

[State 800, ヒット定義（投げ用）]
type = HitDef
triggerall = p2stateno != [150,155]
triggerall = p2stateno != 40 && p2stateno !=52
trigger1 = p2bodydist x = [-const(size.ground.front),35]
trigger1 = prevstateno != 2015
trigger1 = animelem = 3
attr = S, HT
hitflag = M
priority = 4, miss
sparkno = -1
p1sprpriority = 1
p2sprpriority = 0
p1facing = 1
p2facing = 1
p1stateno = 3310
p2stateno = 41200
guard.dist = 0
fall = 1
numhits = 0

[State 800, ヒット定義（投げ用）]
type = HitDef
triggerall = p2stateno != [150,155]
triggerall = p2stateno != 40 && p2stateno !=52
trigger1 = p2bodydist x = [-const(size.ground.front),35]
trigger1 = prevstateno = 2015
trigger1 = animelem = 3
attr = S, HT
hitflag = MAF
priority = 4, miss
sparkno = -1
p1sprpriority = 1
p2sprpriority = 0
p1facing = 1
p2facing = 1
p1stateno = 3310
p2stateno = 41200
guard.dist = 0
fall = 1
numhits = 0


[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 2
value = s9,1

[State 2000,]
type = PlaySnd
trigger1 = AnimElem = 5
value = s10,6

[State 700,]
type = Varset
trigger1 = prevstateno = [1000,1999]
var(18) = 1

[State 700,]
type = Varset
trigger1 = AnimTime = 0
var(18) = 0

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; やみどうこく発動

[Statedef 3310]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
ctrl     = 0
anim     = 2110
sprpriority = 2

[State 810, 物理的なキャラの幅]
type = Width
trigger1 = 1
edge = 70,0

[State 2000,]
type = Null;PlaySnd
trigger1 = AnimElem = 4
value = s10,6

[State 2000,]
type = PlaySnd
trigger1 = time = 15
value = s3300,0
persistent = 0

[State 2000,]
type = Null;PlaySnd
trigger1 = time = 17
value = s12,2

[State 2001, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 700,]
type = Varset
trigger1 = AnimTime = 0
var(18) = 0

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(3) < 0
pos = 35, 0

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(3) >= 0 && AnimElemtime(4) < 0
pos = 40, -105

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(3) >= 0
pos = 33, -125

[State 2000]
type = Explod
trigger1 = time = 17
anim = 2150
ID = 2150
removetime = -1
pos = 53,0
sprpriority = 10
ownpal = 1
bindtime = -1

[State 2100,]
type = Envcolor
trigger1 = AnimElem = 6
time = 0
value = 255,255,255
under = 1

[State 820, 1]
type = EnvShake
trigger1 = time = 17
ampl = 2
freq = 40
time = 100

[State 2000]
type = Explod
Trigger1 = time = 17
Trigger2 = time = 24
Trigger3 = time = 31
Trigger4 = time = 38
Trigger5 = time = 45
Trigger6 = time = 52
Trigger7 = time = 59
Trigger8 = time = 66
Trigger9 = time = 73
Trigger10 = time = 80
anim = 4020
ID =  4020
removetime = -2
pos = 33,-120
sprpriority = 11
ownpal = 1
bindtime = -1

[State 810, 1]
type = TargetLifeAdd
Trigger1 = time = 17
Trigger2 = time = 24
Trigger3 = time = 31
Trigger4 = time = 38
Trigger5 = time = 45
Trigger6 = time = 52
Trigger7 = time = 59
Trigger8 = time = 66
Trigger9 = time = 73
Trigger10 = time = 80
value = -20
kill = 0
absolute = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = Time = 85
value = 3315

;---------------------------------------------------------------------------
; (　´∀｀)つ ミ

[Statedef 3315]
type     = S
movetype = A
physics  = S
juggle   = 0
velset   = 0,0
ctrl     = 0
anim     = 2116
sprpriority = 2

[State 170, ]
type = TargetState
trigger1 = time = 0
value = 41250

[State 810, 1]
type = Null;TargetLifeAdd
Trigger1 = time = 13
value = -200
absolute = 1

[State 2000]
type = RemoveExplod
trigger1 = time = 0
ID = 2150

[State 2000]
type = Explod
trigger1 = time = 0
anim = 1305
pos = 53,0
sprpriority = 10
ownpal = 1
bindtime = -1

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(1) >= 0 && AnimElemtime(2) < 0
pos = 33, -128

[State 810, 3]
type = TargetBind
Trigger1 = AnimElemtime(2) = 0
pos = 50, -120


[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 19
value = s12,1

[State 1000, 音を鳴らす]
type = PlaySnd
trigger1 = AnimElem = 6
trigger2 = AnimElem = 19
value = s12,14

[State 3000]
type = Projectile
trigger1 = AnimElem = 6
projID = 1400
projanim = 1405
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projsprpriority = 10
projshadow = 0,0,0
projremovetime = 24
getpower = 0,0
ownpal = 1
offset = 60,0
velocity = 0,0
attr = S, SP
animtype = Hard
damage = 80,10
hitflag = MAF
guardflag = M
hitsound = s1,11
guardsound = s2,1
pausetime = 0,5
sparkno = s4070
guard.sparkno = 42
sparkxy = 5,-70+(floor(p2bodydist Y))
ground.type = High
ground.hittime = 21
ground.slidetime = 21
ground.velocity = 0,-9
guard.velocity = -9
yaccel = .41
air.juggle = 0
P2stateno = 3420
p2facing = 1
fall = 1
fall.recover = 0
kill = 0

[State 3000]
type = Projectile
trigger1 = AnimElem = 19
projID = 1405
projanim = 1405
projremove = 0
projpriority = 10
projhitanim = -1
projremanim = -1
projsprpriority = 10
projshadow = 0,0,0
projremovetime = 24
getpower = 0,0
ownpal = 1
offset = 70,0
velocity = 0,0
attr = S, SP
animtype = up
damage = 90 ,10
hitflag = MAFLD
guardflag = M
hitsound = s1,12
guardsound = s2,1
pausetime = 0,5
sparkno = s4070
guard.sparkno = 42
sparkxy = 5,-70+(floor(p2bodydist Y))
ground.type = High
ground.hittime = 21
ground.slidetime = 21
ground.velocity = -4,9
air.velocity = -4,9
guard.velocity = -8
yaccel = 0.6
air.juggle = 0
;P2stateno = 1425
p2facing = 1
fall = 1
fall.recover = 0
kill = 1

[State 2100,]
type = Null;Envcolor
trigger1 = Projhit1400 = 1
trigger2 = Projhit1405 = 1
time = 0
value = 255,255,255
under = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 2117

;---------------------------------------------------------------------------
[Statedef 2117]
type     = S
movetype = I
physics  = S
velset   = 0,0
ctrl     = 0
anim     = 2117
sprpriority = 2

[state ]
type = ctrlset
trigger1 = time > 35
value = 1

[State 800, ステート変更]
type = ChangeState
Trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;相手動作
[Statedef 3420]
type    = A
movetype= H
physics = S
velset = 0,0

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 52, 1]
type = Veladd
trigger1 = time = 0
x = 0
y = 0

[State 52, 1]
type = VelSet
trigger1 = time = 9
x = 0
y = -9.5

[State 52, 1]
type = Veladd
trigger1 = time >= 9
y = .34

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = SelfAnimExist(5052)
value = 5052

[State 1830]
type = ChangeAnim
Trigger1 = Time = 0
Trigger1 = !SelfAnimExist(5052)
value = 5050

[State 1830]
type = SelfState
trigger1 = Vel Y > 0 && Pos Y >= 0
value = 5100

;---------------------------------------------------------------------------
;投げ１・投げられている（相手の動作）動作
[Statedef 41200]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2001, 無敵]
type = NotHitBy
trigger1 = 1
value = SCA

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2120

[State 820, 1]
type = ChangeState
trigger1 = time = 143
value = 41250

;---------------------------------------------------------------------------
;投げ２・投げられている（相手の動作）動作
[Statedef 41250]
type    = A
movetype= H
physics = N
velset = 0,0

[State 2001, 無敵]
type = Null;NotHitBy
trigger1 = 1
value = SCA

[State 2120]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,0

[State 820, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 2125

[State 2100, 移動]
type = VelSet
trigger1 = AnimElem = 5
x = -1
y = -6

[State 2100, 移動]
type = Veladd
trigger1 = AnimElemtime(5) >= 0
y = .6

[State 820, 1]
type = SelfState
trigger1 = Pos Y >= 0
trigger1 = Vel Y > 0
value = 5100

;-------------------------------------------------------------------------------
; Heavenly Pull
;-----------------------------------
[Statedef 4000]
Type = S
MoveType = A
Physics = N
juggle = 0
Anim = 40000
VelSet = 0,0
Ctrl = 0
poweradd = -ifelse(Var(23)>0,1000,2000)
Sprpriority = 0

;KOF02 PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,4999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;DREAMCANCEL PALFX
[State -2, PalFX]
type = Null;PalFX
trigger1 = prevstateno = [2000,3999]
trigger1 = time < 17
time = 1
add = 55,200,10
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;FLASH EFFECT
[State 13000, EnvColor]
type = EnvColor
trigger1 = AnimElem = 1
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 3000, SDM Set]
Type = AssertSpecial
Trigger1 = AnimElem = 1, = 1
Flag = NoBG
Flag2 = NoFG
time = 26+16*(PrevStateNo = [1000, 3999])

[State 3000, SDM Set]
Type = null;EnvColor
Trigger1 = AnimElem = 1, = 1
Value = 255*((prevstateno = [1000,1020]) || (prevstateno = [1700,1800])),0,0
Under = 1
time = 26+16*(PrevStateNo = [1000, 3999])

[State 3000, SDM Set]
Type = null;PowerAdd
Trigger1 = !Time
Trigger1 = !var(15)
value = -1000-1000*(prevstateNo != [3000,4000])

[State 3000, SDM Set]
Type = VarSet
Trigger1 = !Time
var(15) = 1

[State -2, Helper]
type = Null;Helper
triggerall = !numhelper(40001)
trigger1 = time = 28
helpertype = normal
name = "HSDM"
ID = 40001
stateno = 40001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40003)
trigger1 = time = 0
helpertype = normal
name = "H.Port"
ID = 40003
stateno = 40003
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40004)
trigger1 = time = 0
helpertype = normal
name = "Player 1"
ID = 40004
stateno = 40004
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3000, DM Pause]
type = superpause
trigger1 = animelem = 1, = 1
time = 50
anim = -1
darken = 0
movetime = 50
persistent = 0
ontop = 1
p2defmul = 1

;BLACK BG
[State 3000, 1]
type = AssertSpecial
trigger1 = Time < 49
flag= noBG
flag2= noFG

[State 3000, HSDM FX SND]
type = Null;PlaySnd
Trigger1 = AnimElem = 1, = 1
Value = 9, 2
Channel = 5
IgnoreHitPause = 1

[State 3000, HSDM FX SND]
type = PlaySnd
Trigger1 = AnimElem = 1, = 1
Value = s4000,0
Channel = 5
IgnoreHitPause = 1

[State 3000, DM FX1]
Type = Explod
trigger1 = animelem = 1
anim = f8150
PosType = p1
Ownpal = 1
SprPriority = -2
BindTime = -1
IgnoreHitPause = 1
Pos = 25,-135
RemoveOnGetHit = 1
PauseMoveTime = 99
SuperMoveTime = 99

[State 3000, DM FX 2]
Type = Explod
trigger1 = animelem = 1
anim = f8160
PosType = p1
Ownpal = 1
SprPriority = 2
BindTime = -1
IgnoreHitPause = 1
Pos = 25,-135
RemoveOnGetHit = 1
PauseMoveTime = 99
SuperMoveTime = 99

[State 3000, Wind SND]
Type = PlaySND
trigger1 = AnimElem = 15;, > 0
;Trigger1 = Timemod = 35, 0
Trigger1 = Time < 240
value = 12,2
;channel = 3

[State 3000, Wind FX main]
Type = Explod
trigger1 = AnimElem = 18
anim = 2150
ID = 4052
PosType = p1
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
Removetime = -1
Removeongethit = 1
Bindtime = -1

[State 3029, 9]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 200, ALOA set 2]
Type = Explod
Trigger1 = MoveHit
Trigger1 = AnimElem = 12, >= 0
Trigger1 = AnimElem = 13, < 0
anim = 835
Pos = 0, -55
PosType = p2
ownpal = 1
bindtime = 1
sprpriority = 2
ignorehitpause = 1
persistent = 0
facing = -1

[State 0, Helper]
type = Helper
trigger1 = animelem = 18
helpertype = normal
name = "Shield"
ID = 40005
stateno = 40005
ownpal = 1
size.xscale = 1
size.yscale = 1
IgnoreHitPause = 1
supermovetime = 99999
pausemovetime = 99999

[State 1000, 1]
type = Helper
trigger1 = time > 74 
trigger1 = !NumHelper(4090)
trigger1 = p2bodydist x <= 170
stateno = 4090
ID = 4090
postype = p1
pos = 0,0
name = "Vortex Hit"

[State 1000, 1]
type = Helper
trigger1 = time > 78
trigger1 = !NumHelper(4050)
trigger1 = p2bodydist x <= 170
stateno = 4050
ID = 4050
postype = p1
pos = ceil(p2dist x+50),0
name = "Vortex Pull"

[State 1000, 1]
type = Helper
trigger1 = p2bodydist x <= 170
trigger1 = numhelper(4050) = 1 && p2movetype = H
stateno = 4050
ID = 4050
postype = p1
pos = ceil(p2dist x+60),0
name = "Vortex Pull"

[State 1000, 1]
type = Null;Helper
trigger1 = p2bodydist x <= 170
trigger1 = numhelper(4050) = 1 && p2movetype = H
stateno = 4050
ID = 4050
postype = p1
pos = ceil(p2dist x+30),0
name = "Vortex Pull"
ignorehitpause = 1

[State 3100, First Hits]
Type = HitDef
Trigger1 = AnimElem = 18, > 0
attr = S, HP
damage = 0,0
numhits = 0
animtype = Up
Fall.animtype = Up
getpower = 0,0
givepower = 30,15
guardflag = MA
hitflag = MAF
pausetime = 0,3
guard.pausetime = 0,0
sparkno = -1
guard.sparkno = 42
sparkxy = -15,ceil(p2dist y-60)
hitsound = s1,7
guardsound = s2,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
guard.slidetime = 17
guard.hittime = 17
guard.ctrltime = 17
guard.velocity = 0
ground.velocity = 0,-16
air.velocity = 0,-16
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .6
Air.Fall = 1
Fall.Recover = 0
Kill = 0
ID = 4030
Fall.Envshake.time = 30
Fall.Envshake.ampl = -8
Fall.Envshake.phase = 1

[State 1000, 1]
type = Null;TargetState
trigger1 = Numtarget(4030)
trigger1 = MoveHit
Value = 4030

[State 1000, 1]
type = ChangeState
trigger1 = Numtarget(4030)
trigger1 = MoveHit
trigger1 = p2stateno = [5000,5030]
Value = 4020

[State 1000, 1]
type = MoveHitReset
trigger1 = MoveContact

[State 1000, 1]
type = changeState
triggerAll = AnimElem = 18, > 0
trigger1 = command = "Fuujin Ibuki"
trigger2 = var(9)
trigger2 = random < 5
trigger3 = var(9)
trigger3 = Time > 255
Value = 4010

[State 3600, bgpal]
type = null;BGPalFX
trigger1 = 1
invertall = 1
time = 2
mul = 0,0,0
ignorehitpause = 1

[State 4100, end]
Type = ChangeState
Trigger1 = Time > 255
Value = 4001


-------------------------------------------------
;Shield (nullifies projectiles)
[Statedef 40005]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 40005
sprpriority = 5

[state 1001,1]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state 1001,1]
type = hitby
trigger1 = 1
value = SCA,AP
time = -1

[State 1001]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AT, AP
stateno = stateno

[State 1001]
type = PlayerPush
trigger1 = 1
value = 0

[State 1001]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 1001]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root, stateno != 4000


-------------------------------------------------
;Shield (nullifies projectiles)
[Statedef 40006]
type     = A
movetype = A
physics  = N
ctrl     = 0
anim     = 40006
sprpriority = 5

[state 1001,1]
type = nothitby
trigger1 = 1
value = SCA
time = -1

[state 1001,1]
type = hitby
trigger1 = 1
value = SCA,AP
time = -1

[State 1001]
type = HitOverride
trigger1 = 1
attr = SCA, AA, AT, AP
stateno = stateno

[State 1001]
type = PlayerPush
trigger1 = 1
value = 0

[State 1001]
type = bindtoroot
trigger1 = 1
pos = 0,0

[State 1001]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = root, stateno != 4010
;-----------------------------------
;------- Ibuki Nagayo - Miss -------
;-----------------------------------
[Statedef 4001]
Type = S
MoveType = I
Physics = N
Anim = 40010
Ctrl = 0
PowerAdd = 0
VelSet = 0,0

[State 3000, Wind FX main]
Type = RemoveExplod
trigger1 = !Time
ID = 4052

[State 3000, Wind FX main]
Type = Explod
trigger1 = !Time
anim = 1305
SprPriority = 3
IgnoreHitPause = 1
Removeongethit = 1
Bindtime = 1

[State 3600, bgpal]
type = null;BGPalFX
trigger1 = 1
invertall = 1
time = 2
mul = 0,0,0
ignorehitpause = 1

[State 1000, 9]
type = ChangeState
Trigger1 = !AnimTime
value = 0
Ctrl = 1

;-----------------------------------
;-- Ibuki Nagayo - Tsuika Kougeki --
;-----------------------------------
[Statedef 4010]
Type = S
MoveType = A
Physics = N
juggle = 0
Anim = 40100
VelSet = 0,0
Ctrl = 0
PowerAdd = 0
Sprpriority = 0

[State 3000, 7]
type = NotHitBy
trigger1 = animelemtime(14) <  0
value = SCA

[State 0, Helper]
type = Helper
trigger1 = time = 0
helpertype = normal
name = "Shield2"
ID = 40006
stateno = 40006
ownpal = 1
size.xscale = 1
size.yscale = 1
IgnoreHitPause = 1
supermovetime = 99999
pausemovetime = 99999

[State 3100, First Hits]
Type = HitDef
Trigger1 = AnimElem = 14, < 0
Trigger1 = Timemod = 5,0
attr = S, HP
damage = 0,8
animtype = up
getpower = 0,0
givepower = 30,15
guardflag = MA
hitflag = MAP
priority = 1,miss
pausetime = 0,13
guard.pausetime = 0,12
sparkno = -1
guard.sparkno = 42
sparkxy = -15,ceil(p2dist y-60)
hitsound = s1,7
guardsound = s2,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
guard.slidetime = 17
guard.hittime = 17
guard.ctrltime = 17
guard.velocity = 0
ground.velocity = 0
air.velocity = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .6
Air.Fall = 1
Fall.Recover = 0
Kill = 0
Guard.kill = 1
ID = 4010
Fall.Envshake.time = 30
Fall.Envshake.ampl = -8
Fall.Envshake.phase = 1
Fall.damage = 10

[State 1000, 1]
type = Null;TargetState
trigger1 = Numtarget(4030)
trigger1 = MoveHit
Value = 4030

[State 1000, 1]
type = Null;ChangeState
trigger1 = Numtarget(4030)
trigger1 = MoveHit
Value = 4020

[State 1000, 1]
type = MoveHitReset
trigger1 = MoveContact

[State 3000, Goenitz Voice]
Type = PlaySND
trigger1 = AnimElem = 14
value = 10,25

[State 3000, Wind SND]
Type = PlaySND
trigger1 = AnimElem = 14, < 0
Trigger1 = Timemod = 35, 0
value = 12,14
;channel = 3

[State 3000, Wind SND]
Type = PlaySND
trigger1 = AnimElem = 14
value = 12,2
;channel = 3

[State 3000, Wind FX main]
Type = RemoveExplod
trigger1 = AnimElem = 14
ID = 4052

[State 1000, 3]
type = Projectile
trigger1 = AnimElem = 14
attr = S, HP
ownpal = 1
damage = 50
animtype = DiagUp
getpower = 0,0
givepower = 0,0
guardflag = MA
hitflag = MAF
pausetime = 2,13
sparkno = S4070
guard.sparkno = 42
sparkxy = 20,floor(p2dist y)-85
hitsound = s1,7
guardsound = s2,1
ground.type = High
air.type = low
ground.slidetime = 17
ground.hittime  = 17
guard.slidetime = 17
guard.hittime = 17
air.hittime = 30
guard.ctrltime = 17
ground.velocity = -6,-9
guard.velocity = 0
air.velocity = -6,-8
air.juggle = 0
projanim = 3250
projhitanim = 3260
projremanim = 3260
projcancelanim = 3260
projremove = 0
velocity = 15
projhits = 10
projmisstime = 1
offset = 20
yaccel = .6
projid = 3200
Fall = 1
Fall.Recover = 0
ProjPriority = 99999
ID = 1000

[State 200, ALOA set 2]
Type = Explod
Trigger1 = ProjHittime(3200) = 1
anim = 40700
Pos = ceil(p2dist x), -75+ceil(p2dist y)
Random = 10,15
PosType = p1
ownpal = 1
bindtime = 1
sprpriority = 2
ignorehitpause = 1

[State 3600, bgpal]
type = null;BGPalFX
trigger1 = 1
invertall = 1
time = 2
mul = 0,0,0
ignorehitpause = 1

[State 4100, end]
Type = ChangeState
Trigger1 = !AnimTime
Value = 0
Ctrl = 1

;-----------------------------------
;------- Ibuki Nagayo - Hit --------
;-----------------------------------
[Statedef 4020]
Type = S
MoveType = A
Physics = N
juggle = 0
Anim = 40001
VelSet = 0,0
Ctrl = 0
PowerAdd = 0
Sprpriority = 0

[State 3600, bgpal]
type = null;BGPalFX
trigger1 = 1
invertall = 1
time = 2
mul = 0,0,0
ignorehitpause = 1

[State 3029, 9]
type = Width
trigger1 = 1
edge = 50,20
ignorehitpause = 1

[State 3029, 9]
type = Null;TargetBind
trigger1 = !Time
pos = ifelse(p2dist x < 0, -80, 80), ceil(p2dist y)
ignorehitpause = 1

[State 3029, 9]
type = nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 1000, 1]
type = Null;ChangeAnim
trigger1 = !Time
Value = anim
Elem = 20

[State 3000, Wind SND]
Type = Null;PlaySND
trigger1 = Time < 110
Trigger1 = Timemod = 35, 0
value = 12,14
channel = 3

[State 3000, Wind SND]
Type = PlaySND
trigger1 = AnimElem = 3
value = s4000,2

[State 3000, Wind SND]
Type = Null;PlaySND
trigger1 = AnimElem = 5
value = 10,7

[State 3000, Wind FX main]
Type = RemoveExplod
trigger1 = animelem = 2
ID = 4052

[State 3100, First Hits]
Type = HitDef
Trigger1 = time = 0
trigger2 = time = 2
trigger3 = time = 4
trigger4 = time = 6
trigger5 = time = 8
trigger6 = time = 10
trigger7 = time = 12
trigger8 = time = 14
trigger9 = time = 16
trigger10 = time = 18
trigger11 = time = 20
trigger12 = time = 22
trigger13 = time = 24
trigger14 = time = 26
trigger15 = time = 28
attr = S, HP
damage = 11
animtype = Up
Fall.animtype = Up
getpower = 0,0
guardflag = MA
hitflag = MAF
pausetime = 0,1
guard.pausetime = 0,0
sparkno = S4070
guard.sparkno = 42
sparkxy = 0,floor(p2dist y)-85
hitsound = s12,5
guardsound = s2,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
guard.slidetime = 17
guard.hittime = 17
guard.ctrltime = 17
guard.velocity = 0
ground.velocity = 0,-18
air.velocity = 0,-18
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .6
Air.Fall = 1
Fall.Recover = 0
Kill = 0
Fall.Envshake.time = 30
Fall.Envshake.ampl = -8
Fall.Envshake.phase = 1
Fall.damage = 50

[State 3000, Wind FX main]
Type = Explod
trigger1 = animelem = 2
anim = 1305
SprPriority = 3
IgnoreHitPause = 1
Removeongethit = 1
Bindtime = 1

[State 3100, First Hits]
Type = HitDef
Trigger1 = animelem = 2
attr = S, HP
damage = 0,0
animtype = Up
Fall.animtype = Up
numhits = 0
getpower = 0,0
givepower = 0,0
guardflag = MA
hitflag = MAFD
pausetime = 0,65
guard.pausetime = 0,0
sparkno = -1
guard.sparkno = 42
sparkxy = 0,ceil(p2dist y-60)
hitsound = -1
guardsound = s2,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
guard.slidetime = 17
guard.hittime = 17
guard.ctrltime = 17
guard.velocity = 10
ground.velocity = 0,0
air.velocity = 0,0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .6
Air.Fall = 1
Fall.Recover = 0
Kill = 0
Fall.Envshake.time = 30
Fall.Envshake.ampl = -8
Fall.Envshake.phase = 1
Fall.damage = 50

[State 811, Bind 2-4]
type = TargetBind
trigger1 = AnimElemTime(2) >= 0 && AnimElemTime(3) < 0
pos = 0, -300

[State 811, Bind 2-4]
type = TargetBind
trigger1 = AnimElemTime(3) >= 0 && AnimElemTime(4) < 0
pos = 0, -300	

[state 3102, ]
type = assertspecial
trigger1 = animelemno(0) = [3,11]
flag = nobg
flag2 = nofg

[state ]
type = posset
trigger1 = animelem = 3
x = 0

[State 3000, Wind FX main]
Type = Explod
trigger1 = AnimElem = 7
anim = 2150
ID = 4053
PosType = p1
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
Removetime = 100
Removeongethit = 1
Bindtime = -1
scale = 2.5,2

[State 1206, Explod]
type = Explod
trigger1 = animelem = 7, = 0
anim = 4212
pos = 30,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 7, = 10
anim = 4212
pos = 60,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 7, = 15
anim = 4212
pos = -70,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 7, = 25
anim = 4212
pos = 10,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 7, = 35
anim = 4212
pos = -50,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 7, = 45
anim = 4212
pos = 40,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 7, = 55
anim = 4212
pos = -40,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 7, = 60
anim = 4212
pos = 70,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 7, = 65
anim = 4212
pos = -60,0
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 3100, First Hits]
Type = HitDef
trigger1 = time >= 115
trigger1 = timemod = 3,0
attr = S, HP
damage = 15
animtype = Up
Fall.animtype = Up
getpower = 0,0
guardflag = MA
hitflag = MAFLD
pausetime = 0,3
guard.pausetime = 0,0
sparkno = S4070
guard.sparkno = 42
sparkxy = 0,floor(p2dist y)-15
hitsound = s12,5
guardsound = s2,1
ground.type = low
ground.slidetime = 17
ground.hittime  = 17
guard.slidetime = 17
guard.hittime = 17
guard.ctrltime = 17
guard.velocity = 10
ground.velocity = -2.5,-8
air.velocity = -2.5,-8
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
yaccel = .6
Air.Fall = 1
Fall.Recover = 0
Kill = 1
Fall.Envshake.time = 30
Fall.Envshake.ampl = -8
Fall.Envshake.phase = 1

[State 3000, Wind FX main]
Type = RemoveExplod
trigger1 = animelem = 8
ID = 4053

[State 4100, end]
Type = ChangeState
Trigger1 = animtime = 0
Value = 0
ctrl = 1

;-----------------------------------
;----- Ibuki Nagayo - P2 State -----
;-----------------------------------
[Statedef 4030]
Type = A
MoveType = H
Physics = N
Ctrl = 0
PowerAdd = 0
VelSet = 0,0
Sprpriority = 3

[State 1000, 1]
type = LifeAdd
trigger1 = Timemod = 20,0
Value = -40
Kill = 0

[State 3000, anim]
Type = ChangeAnim2
trigger1 = !Time
Value = 40300
IgnoreHitPause = 1

[State 3000, unhittable]
Type = NotHitBy
trigger1 = 1
Value = SCA
IgnoreHitPause = 1

[State 1000, 0]
type = velset
trigger1 = !Time
IgnoreHitPause = 1
y = (-200+p2dist y)/170

[state 4050, set position]
type = Turn
trigger1 = p2dist x < 0

[state 4050, set position]
type = VelAdd
trigger1 = 1
x = 2

[State 3000, go to bg]
Type = Sprpriority
trigger1 = Timemod = 35, 20
trigger1 = time < 170
value = -2

[State 3000, go to fg]
Type = Sprpriority
trigger1 = Timemod = 35, 0
trigger1 = time < 170
value = 3

[State 3000, pull]
Type = PlayerPush
trigger1 = 1
Value = 1
IgnoreHitPause = 1

[State 3000, pull]
Type = Turn
trigger1 = Time > 170
trigger1 = Enemynear, p2dist x < 0
IgnoreHitPause = 1

[State 1000, 0]
type = velAdd
trigger1 = Time > 150
IgnoreHitPause = 1
y = .1

[State 3000, pull]
Type = Velset
trigger1 = Time > 170
x = -13
y = 8

[State 1000, 9]
type = SelfState
Trigger1 = Time > 170
Value = 5050

;-----------------------------------
;-- Ibuki Nagayo - Vortex Effect ---
;-----------------------------------
[Statedef 4050]
Type = S
MoveType = I
Physics = N
Anim = 40700
Ctrl = 0
PowerAdd = 0
VelSet = 0,0

[State 3000, unhittable]
Type = NotHitBy
trigger1 = 1
Value = SCA
IgnoreHitPause = 1

[state 4050, set position]
type = Turn
trigger1 = parentdist x > 0

[state 4050, set position]
type = Null;posset
trigger1 = p2dist x < -100
trigger2 = p2dist x > 0
x = enemynear, pos x

[State 1000, 0]
type = null;posadd
trigger1 = pos x = enemynear, pos x
x = 10

[State 1000, 0]
type = velset
trigger1 = p2statetype != A
trigger2 = p2statetype != L
x = -15

[State 1000, 0]
type = velset
trigger1 = p2statetype = A
trigger2 = p2statetype = L
x = 0

[State 3000, pull]
Type = PlayerPush
trigger1 = 1
Value = 1
IgnoreHitPause = 1

[State 1000, 9]
type = DestroySelf
Trigger1 = Parent, stateNo != 4000
trigger2 = parent, p2dist x < 0

;-----------------------------------
;-- Vortex Hit ---
;-----------------------------------
[Statedef 4090]
Type = S
MoveType = A
Physics = N
Anim = 4090
Ctrl = 0
juggle = 0
PowerAdd = 0
VelSet = 0,0

[State 3100, First Hits]
Type = HitDef
Trigger1 = time = 0
attr = S, HP
damage = 0,0
numhits = 0
animtype = light
getpower = 0,0
guardflag = MA
hitflag = M
pausetime = 0,30
sparkno = -1
guard.sparkno = -1
sparkxy = -15,ceil(p2dist y-60)
numhits = 0
hitsound = s-1
guardsound = s-1
ground.type = high
ground.slidetime = 17
ground.hittime  = 17
guard.slidetime = 17
guard.hittime = 17
guard.ctrltime = 17
guard.velocity = 10
ground.velocity = 0,0
air.velocity = 0,0
air.cornerpush.veloff = 0
ground.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
fall = 0
Kill = 0
ID = 4090

[State 1000, 9]
type = DestroySelf
Trigger1 = Parent, stateNo != 4000
trigger2 = parent, p2dist x < 0

[State 1000, 9]
type = Null;Changestate
Trigger1 = movehit = 1
trigger2 = movecontact
value = 4060

[Statedef 4060]
Type = S
MoveType = I
Physics = N
Anim = 40700
Ctrl = 0
PowerAdd = 0
VelSet = 0,0

[State 3000, unhittable]
Type = NotHitBy
trigger1 = 1
Value = SCA
IgnoreHitPause = 1

[state 4050, set position]
type = Null;Turn
trigger1 = facing = -1

[state 4050, set position]
type = Null;posset
trigger1 = 1
x = p2dist x + 150

[State 1000, 0]
type = null;posadd
trigger1 = pos x = enemynear, pos x
x = 10

[State 1000, 0]
type = velset
trigger1 = p2statetype != A
trigger2 = p2statetype != L
x = -20

[State 1000, 0]
type = velset
trigger1 = p2statetype = A
trigger2 = p2statetype = L
x = 0

[State 3000, pull]
Type = PlayerPush
trigger1 = 1
Value = 1
IgnoreHitPause = 1

[State 1000, 9]
type = DestroySelf
Trigger1 = root, stateNo != 4000
trigger2 = root, p2dist x < 0
;-------------------------------------------------------------------------------
;Climax
;-----------------------------------
[Statedef 4200]
Type = S
MoveType = A
Physics = N
Anim = 4200
juggle = 0
VelSet = 0,0
Ctrl = 0
poweradd = -ifelse(Var(23)>0,2000,3000)
Sprpriority = 0

;KOF02 PALFX
[State -2, PalFX]
type = PalFX
trigger1 = prevstateno = [1000,4999]
trigger1 = time < 17
time = 1
add = 255,255,255
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;DREAMCANCEL PALFX
[State -2, PalFX]
type = Null;PalFX
trigger1 = prevstateno = [2000,3999]
trigger1 = time < 17
time = 1
add = 55,200,10
sinadd = 0,0,0
invertall = 0
color = 256
ignorehitpause = 1
persistent = 2

;FLASH EFFECT
[State 13000, EnvColor]
type = EnvColor
trigger1 = AnimElem = 1
value = 255,255,255
time = 4
under = 1
ignorehitpause = 1
persistent = 0

[State 3000, SDM Set]
Type = AssertSpecial
Trigger1 = AnimElem = 1, = 1
Flag = NoBG
Flag2 = NoFG
time = 26+16*(PrevStateNo = [1000, 3999])

[State 3000, SDM Set]
Type = null;EnvColor
Trigger1 = AnimElem = 1, = 1
Value = 255*((prevstateno = [1000,1020]) || (prevstateno = [1700,1800])),0,0
Under = 1
time = 26+16*(PrevStateNo = [1000, 3999])

[State 3000, SDM Set]
Type = null;PowerAdd
Trigger1 = !Time
Trigger1 = !var(15)
value = -1000-1000*(prevstateNo != [3000,4000])

[State 3000, SDM Set]
Type = VarSet
Trigger1 = !Time
var(15) = 1

[State -2, Helper]
type = Null;Helper
triggerall = !numhelper(40001)
trigger1 = time = 28
helpertype = normal
name = "HSDM"
ID = 40001
stateno = 40001
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40003)
trigger1 = time = 0
helpertype = normal
name = "H.Port"
ID = 40003
stateno = 40003
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State -2, Helper]
type = Helper
triggerall = !numhelper(40004)
trigger1 = time = 0
helpertype = normal
name = "Player 1"
ID = 40004
stateno = 40004
pos = 160,120
postype = left    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1

[State 3000, DM Pause]
type = superpause
trigger1 = animelem = 1, = 1
time = 70
anim = -1
darken = 0
movetime = 70
persistent = 0
ontop = 1
p2defmul = 1

;BLACK BG
[State 3000, 1]
type = AssertSpecial
trigger1 = Time < 60
flag= noBG
flag2= noFG

[State 3000, Climax Start]
type = PlaySnd
Trigger1 = AnimElem = 1,= 1
Value = s4200,3
Channel = 5
IgnoreHitPause = 1

[State 3000, DM FX1]
Type = Explod
trigger1 = animelem = 1
anim = f8150
PosType = p1
Ownpal = 1
SprPriority = -2
BindTime = -1
IgnoreHitPause = 1
Pos = 25,-135
RemoveOnGetHit = 1
PauseMoveTime = 99
SuperMoveTime = 99

[State 3000, DM FX 2]
Type = Explod
trigger1 = animelem = 1
anim = f8160
PosType = p1
Ownpal = 1
SprPriority = 2
BindTime = -1
IgnoreHitPause = 1
Pos = 25,-135
RemoveOnGetHit = 1
PauseMoveTime = 99
SuperMoveTime = 99

[State 3225, 7]
type = PlaySnd
trigger1 = Time = 53
trigger1 = !SysVar(0)
value = F77, 3
volume = 255

[State 3000, Goenitz Voice]
Type = Null;PlaySND
trigger1 = AnimElem = 9
value = 10,10
channel = 1


[State 3000, Wind FX main]
Type = Explod
trigger1 = AnimElem = 18
anim = 2150
ID = 4052
PosType = p1
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
Removetime = -1
Removeongethit = 1
Bindtime = -1

[State 3029, 9]
type = Null;nothitby
trigger1 = 1
value = SCA
ignorehitpause = 1

[State 191, 1]
Type = Null;EnvShake
Trigger1 = AnimElem = 12
Time = 20
Ampl = -3
Phase = 1

[State 200, ALOA set 2]
Type = Explod
Trigger1 = MoveHit
;Trigger1 = AnimElem = 12, >= 0
;Trigger1 = AnimElem = 13, < 0
anim = 835
Pos = 0, -55
PosType = p2
ownpal = 1
bindtime = 1
sprpriority = 2
ignorehitpause = 1
persistent = 0
facing = -1

[State 3000]
type = Projectile
trigger1 = numtarget= 0
trigger1 = AnimElem = 8
projID = 4200
projanim = 1020
projremove = 0
projpriority = 99999
projhitanim = 1025
projremanim = 1025
projcancelanim = -1
projsprpriority = 999
projshadow = 0,0,0
projremovetime = 35
;getpower = 80,0
projscale = 1.5,1
ownpal = 1
offset = 50,0
velocity = 0,0
numhits = 0
attr = S, SP
animtype = Hard
damage = 0,0
hitflag = MAF
guardflag = M
hitsound = s1,11
guardsound = s2,1
pausetime = 0,6
sparkno = s4070
guard.sparkno = 42
sparkxy = 5,-70+(floor(p2bodydist Y))
ground.type = High
ground.hittime = 21
ground.slidetime = 21
ground.velocity = -4,-8
guard.velocity = -10
yaccel = 0.6
air.juggle = 0
air.velocity = -4,-8
fall = 1
fall.recover = 0
down.juggle = 0
down.hittime = 8
down.bounce = 2
kill = 0
p2stateno = 4550

[State 3000]
type = projectile
trigger1 = numtarget>= 1
trigger1 = AnimElem = 8
projID = 4200
projanim = 1020
projremove = 0
projpriority = 99999
projhitanim = 1025
projremanim = 1025
projcancelanim = -1
projsprpriority = 999
projshadow = 0,0,0
projremovetime = 35
;getpower = 80,0
projscale = 1.5,1
ownpal = 1
offset = p2dist X,0
velocity = 0,0
numhits = 0
attr = S, SP
animtype = Hard
damage = 0,0
hitflag = MAF
guardflag = M
hitsound = s1,11
guardsound = s2,1
pausetime = 0,6
sparkno = s4070
guard.sparkno = 42
sparkxy = 5,-70+(floor(p2bodydist Y))
ground.type = High
ground.hittime = 21
ground.slidetime = 21
ground.velocity = -4,-8
guard.velocity = -10
yaccel = 0.6
air.juggle = 0
air.velocity = -4,-8
fall = 1
fall.recover = 0
down.juggle = 0
down.hittime = 8
down.bounce = 2
kill = 0
p2stateno = 4550

[State 1000, 1]
type = ChangeState
trigger1 = ProjHit4200 = 1
trigger1 = p2stateno = 4550
trigger2 = ProjHittime(4200) = 0
trigger2 = p2stateno = 4550
Value = 4201

[State 1000, 1]
type = Null;MoveHitReset
trigger1 = MoveContact

[State 4100, end]
Type = ChangeState
Trigger1 = animtime = 0
Value = 0
ctrl = 1

;=================================================================
;Climax success
[Statedef 4201]
type = S
physics = N
movetype = A
juggle = 0
ctrl = 0
anim = 4201
velset = 0,0
sprpriority = 2

[State 811, ]
type = width
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(14) < 0
edge = 100,0

[state ]
type = posset
trigger1 = animelem = 21
x = 0

[State 811, Bind 2-4]
type = TargetBind
trigger1 = AnimElemTime(1) >= 0 && AnimElemTime(21) < 0
pos = 60, -300

[State 811, Bind 2-4]
type = TargetBind
trigger1 = AnimElemTime(21) >= 0 && AnimElemTime(105) < 0
pos = 60, -10	

[State 811, Bind 2-4]
type = TargetBind
trigger1 = AnimElemTime(105) >= 0
pos = 0, -300	

[state 3102]
type = assertspecial
trigger1 = animelemno(0) = [21,104]
flag = nobardisplay
flag2 = nobg
flag3 = nofg

[State 3000, Climax Success]
Type = PlaySND
trigger1 = animelem = 10
value = s4200,1

[State 3000, Wind FX main]
Type = Explod
trigger1 = AnimElem = 21
anim = 2150
ID = 4201
PosType = back
pos = 160,240
Ownpal = 1
SprPriority = 3
IgnoreHitPause = 1
Removetime = 244
Removeongethit = 1
Bindtime = -1
scale = 2.7,2

[State 1206, Explod]
type = Explod
trigger1 = animelem = 21
anim = 4212
pos = 10,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 26
anim = 4212
pos = 70,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 31
anim = 4212
pos = -70,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 36
anim = 4212
pos = 0,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 41
anim = 4212
pos = -50,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 46
anim = 4212
pos = 60,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 51
anim = 4212
pos = -30,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 56
anim = 4212
pos = 50,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 61
anim = 4212
pos = -70,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 66
anim = 4212
pos = 20,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 71
anim = 4212
pos = 70,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 76
anim = 4212
pos = -70,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 81
anim = 4212
pos = 30,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 86
anim = 4212
pos = -80,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 91
anim = 4212
pos = 0,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 96
anim = 4212
pos = -60,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State 1206, Explod]
type = Explod
trigger1 = animelem = 101
anim = 4212
pos = 70,25
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
sprpriority = 9

[State -2, explod]
type = Explod
trigger1 = animelem = 105
anim = 4210
ID = 4210
pos = 145,220
postype = back
bindtime = -1
removetime = 104
sprpriority = 9999
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647
scale = 1.8,1
ignorehitpause = 1

[State -2, explod]
type = Explod
trigger1 = animelem = 131
anim = 4211
ID = 4211
pos = 145,200
postype = back
bindtime = -1
removetime = 3
sprpriority = 9999
ontop = 1
pausemovetime = 2147483647
supermovetime = 2147483647
scale = 1.6,1
ignorehitpause = 1

[State -2, shake]
type = EnvShake
trigger1 = animelem = 105
time = 101
freq = 60
ampl = 2
ignorehitpause = 1
persistent = 0

[State 3102]
type = Null;HitDef
trigger1 = animelem = 104
attr = A, HP
animtype  = Hard
damage    = 0
priority  = 7
hitflag = MAFLD
guardflag = MA
pausetime = 0,3
sparkxy = 0,0
sparkno = s-1
guard.sparkno = s-1
hitsound = s-1
guardsound = s-1
ground.type = High
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = 0,0
air.velocity = 0,0
down.velocity = 0,0
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0

[State 3102]
type = HitDef
trigger1 = animelem = 105
trigger2 = animelem = 106
trigger3 = animelem = 107
trigger4 = animelem = 108
trigger5 = animelem = 109
trigger6 = animelem = 110
trigger7 = animelem = 111
trigger8 = animelem = 112
trigger9 = animelem = 113
trigger10 = animelem = 114
trigger11 = animelem = 115
trigger12 = animelem = 116
trigger13 = animelem = 117
trigger14 = animelem = 118
trigger15 = animelem = 119
trigger16 = animelem = 120
trigger17 = animelem = 121
trigger18 = animelem = 122
trigger19 = animelem = 123
trigger20 = animelem = 124
trigger21 = animelem = 125
trigger22 = animelem = 126
trigger23 = animelem = 127
trigger24 = animelem = 128
trigger25 = animelem = 129
attr = A, HP
animtype  = Hard
damage    = 8
priority  = 7
hitflag = MAFLD
guardflag = MA
pausetime = 0,4
sparkxy = 0,0
sparkno = s-1
guard.sparkno = s-1
hitsound = s12,5
guardsound = s2,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = 0,0
air.velocity = 0,0
down.velocity = 0,0
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0

[State 3102]
type = HitDef
trigger1 = animelem = 130
attr = A, HP
animtype  = Hard
damage    = 200
priority  = 7
hitflag = MAFLD
guardflag = MA
pausetime = 0,1
sparkxy = 0,0
sparkno = s-1
guard.sparkno = s-1
hitsound = s12,5
guardsound = s2,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = 0,0
air.velocity = 0,0
down.velocity = 0,0
fall = 1
fall.recover = 0
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
getpower = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 4204

;=================================================================
;Climax float down
[Statedef 4204]
type = A
physics = N
movetype = I
ctrl = 0
anim = 4204
velset = 0,0
sprpriority = 2

[state ]
type = posset
trigger1 = time = 0
x = 0
y = -250

[State 811, ]
type = Null;width
trigger1 = 1
player = 40,40

[state ]
type = statetypeset
trigger1 = animelem = 2
Statetype = A
Physics = A

[state ]
type = veladd
trigger1 = animelem = 2
y = 1

[state ]
type = changestate
trigger1 = pos y >= -20
value = 4205

;=================================================================
;Climax near floor
[Statedef 4205]
type = S
physics = N
movetype = I
ctrl = 0
anim = 4205
velset = 0,0
sprpriority = 2

[state ]
type = velset
trigger1 = animelem = 1
y = 0

[State 2000]
type = Explod
trigger1 = AnimElem = 1
anim = 1305
pos = 0,10
sprpriority = 5
ownpal = 1
bindtime = 1
scale = 0.6,0.5

[state ]
type = velset
trigger1 = animelem = 2
y = -5

[state ]
type = veladd
trigger1 = time > 3 && time <= 13
y = -.1

[state ]
type = statetypeset
trigger1 = animelem = 2
Statetype = A
Physics = A

;=================================================================
;Climax end
[Statedef 4206]
type = S
physics = S
movetype = I
ctrl = 0
anim = 4206
velset = 0,0
sprpriority = 2

[state ]
type = posset
trigger1 = time = 0
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;P2 hit by climax
[Statedef 4550]
type    = A
movetype= H
physics = N
velset = 0,0

[State 821, 1]
type = ChangeAnim2
Trigger1 = Time = 0
value = 4550

[state 821]
type = screenbound
trigger1 = 1
value = 1
movecamera = 0,1
ignorehitpause = 1

;In case attacker loses binding on player for any reason, this controller
;guarantees that the player will never get stuck in this thrown state.
[State 821, 2]
type = SelfState
trigger1 = time > 305
;trigger2 = !gethitvar(isbound)
value = 5050
